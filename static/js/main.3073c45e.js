/*! For license information please see main.3073c45e.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var C=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=C&&e[C]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case b:return"StrictMode";case _:return"Suspense";case S:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var O=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P={pending:!1,data:null,method:null,action:null},L=[],F=-1;function B(e){return{current:e}}function U(e){0>F||(e.current=L[F],L[F]=null,F--)}function z(e,t){F++,L[F]=e.current,e.current=t}var V=B(null),H=B(null),W=B(null),q=B(null);function K(e,t){switch(z(W,t),z(H,e),z(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(V),z(V,e)}function G(){U(V),U(H),U(W)}function $(e){null!==e.memoizedState&&z(q,e);var t=V.current,n=id(t,e.type);t!==n&&(z(H,e),z(V,n))}function X(e){H.current===e&&(U(V),U(H)),q.current===e&&(U(q),$d._currentValue=P)}var Y=Object.prototype.hasOwnProperty,Q=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,be=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ye(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=ve(r):0!==(a&=o)?s=ve(a):n||0!==(n=o&~e)&&(s=ve(n)):0!==(o=r&~i)?s=ve(o):0!==a?s=ve(a):n||0!==(n=r&~e)&&(s=ve(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function _e(){var e=be;return 0===(62914560&(be<<=1))&&(be=4194304),e}function Se(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function je(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ne(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ce(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ie(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ae=Math.random().toString(36).slice(2),Me="__reactFiber$"+Ae,Oe="__reactProps$"+Ae,Re="__reactContainer$"+Ae,De="__reactEvents$"+Ae,Pe="__reactListeners$"+Ae,Le="__reactHandles$"+Ae,Fe="__reactResources$"+Ae,Be="__reactMarker$"+Ae;function Ue(e){delete e[Me],delete e[Oe],delete e[De],delete e[Pe],delete e[Le]}function ze(e){var t=e[Me];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[Me]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=yd(e);null!==e;){if(n=e[Me])return n;e=yd(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[Me]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function We(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Be]=!0}var Ke=new Set,Ge={};function $e(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Ye,Qe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,Y.call(et,s)||!Y.call(Ze,s)&&(Je.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Qe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Qe}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function bt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(O(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function jt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&St(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&St(e,i,t[i])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ct(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Ot=null;function Rt(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Oe]||null;if(!s)throw Error(a(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Pt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Mt||null!==Ot)&&(zc(),Mt&&(t=Mt,e=Ot,Ot=Mt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Lt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Oe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Oh){Bt=!1}var zt=null,Vt=null,Ht=null;function Wt(){if(Ht)return Ht;var e,t,n=Vt,r=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Ht=s.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Gt(){return!1}function $t(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Kt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Xt,Yt,Qt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=$t(Jt),en=h({},Jt,{view:0,detail:0}),tn=$t(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Xt=e.screenX-Qt.screenX,Yt=e.screenY-Qt.screenY):Yt=Xt=0,Qt=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=$t(nn),sn=$t(h({},nn,{dataTransfer:0})),an=$t(h({},en,{relatedTarget:0})),on=$t(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=$t(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=$t(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=$t(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=$t(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=$t(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=$t(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=$t(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=$t(h({},Jt,{newState:0,oldState:0})),xn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,_n=null;Ft&&"documentMode"in document&&(_n=document.documentMode);var Sn=Ft&&"TextEvent"in window&&!_n,jn=Ft&&(!kn||_n&&8<_n&&11>=_n),Nn=String.fromCharCode(32),Tn=!1;function En(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function On(e,t,n,r){Mt?Ot?Ot.push(r):Ot=[r]:Mt=r,0<(t=Wu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Dn=null;function Pn(e){Pu(e,0)}function Ln(e){if(ht(He(e)))return e}function Fn(e,t){if("change"===e)return t}var Bn=!1;if(Ft){var Un;if(Ft){var zn="oninput"in document;if(!zn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),zn="function"===typeof Vn.oninput}Un=zn}else Un=!1;Bn=Un&&(!document.documentMode||9<document.documentMode)}function Hn(){Rn&&(Rn.detachEvent("onpropertychange",Wn),Dn=Rn=null)}function Wn(e){if("value"===e.propertyName&&Ln(Dn)){var t=[];On(t,Dn,e,At(e)),Pt(Pn,t)}}function qn(e,t,n){"focusin"===e?(Hn(),Dn=n,(Rn=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Hn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ln(Dn)}function Gn(e,t){if("click"===e)return Ln(t)}function $n(e,t){if("input"===e||"change"===e)return Ln(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Y.call(t,s)||!Xn(e[s],t[s]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Yn(ir,r)||(ir=r,0<(r=Wu(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),br=hr("transitionstart"),vr=hr("transitioncancel"),yr=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),$e(t,[e])}xr.push("scrollEnd");var _r=new WeakMap;function Sr(e,t){if("object"===typeof e&&null!==e){var n=_r.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},_r.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var jr=[],Nr=0,Tr=0;function Er(){for(var e=Nr,t=Tr=Nr=0;t<e;){var n=jr[t];jr[t++]=null;var r=jr[t];jr[t++]=null;var s=jr[t];jr[t++]=null;var i=jr[t];if(jr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Mr(n,s,i)}}function Cr(e,t,n,r){jr[Nr++]=e,jr[Nr++]=t,jr[Nr++]=n,jr[Nr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Cr(e,t,n,r),Or(e)}function Ar(e,t){return Cr(e,null,null,t),Or(e)}function Mr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-fe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Or(e){if(50<Mc)throw Mc=0,Oc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,n,r){return new Dr(e,t,n,r)}function Lr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Pr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Lr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Pr(31,n,t,s)).elementType=T,e.lanes=i,e;case g:return zr(n.children,s,i,t);case b:o=8,s|=24;break;case v:return(e=Pr(12,n,t,2|s)).elementType=v,e.lanes=i,e;case _:return(e=Pr(13,n,t,s)).elementType=_,e.lanes=i,e;case S:return(e=Pr(19,n,t,s)).elementType=S,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case y:case x:o=10;break e;case w:o=9;break e;case k:o=11;break e;case j:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Pr(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return(e=Pr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Pr(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Pr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],qr=0,Kr=null,Gr=0,$r=[],Xr=0,Yr=null,Qr=1,Jr="";function Zr(e,t){Wr[qr++]=Gr,Wr[qr++]=Kr,Kr=e,Gr=t}function es(e,t,n){$r[Xr++]=Qr,$r[Xr++]=Jr,$r[Xr++]=Yr,Yr=e;var r=Qr;e=Jr;var s=32-fe(r)-1;r&=~(1<<s),n+=1;var i=32-fe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Qr=1<<32-fe(t)+s|n<<s|r,Jr=i+e}else Qr=1<<i|n<<s|r,Jr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Kr;)Kr=Wr[--qr],Wr[qr]=null,Gr=Wr[--qr],Wr[qr]=null;for(;e===Yr;)Yr=$r[--Xr],$r[Xr]=null,Jr=$r[--Xr],$r[Xr]=null,Qr=$r[--Xr],$r[Xr]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw ms(Sr(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Me]=e,t[Oe]=r,n){case"dialog":Lu("cancel",t),Lu("close",t);break;case"iframe":case"object":case"embed":Lu("load",t);break;case"video":case"audio":for(n=0;n<Ru.length;n++)Lu(Ru[n],t);break;case"source":Lu("error",t);break;case"img":case"image":case"link":Lu("error",t),Lu("load",t);break;case"details":Lu("toggle",t);break;case"input":Lu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Lu("invalid",t);break;case"textarea":Lu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Lu("beforetoggle",t),Lu("toggle",t)),null!=r.onScroll&&Lu("scroll",t),null!=r.onScrollEnd&&Lu("scrollend",t),null!=r.onClick&&(t.onclick=Qu),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,fd(e.type)?(e=vd,vd=null,ss=e):ss=n):ss=rs?bd(e.stateNode.nextSibling):null;return!0}function fs(){ss=rs=null,is=!1}function ps(){var e=as;return null!==e&&(null===yc?yc=e:yc.push.apply(yc,e),as=null),e}function ms(e){null===as?as=[e]:as.push(e)}var gs=B(null),bs=null,vs=null;function ys(e,t,n){z(gs,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=gs.current,U(gs)}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),xs(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),xs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function _s(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Xn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===q.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push($d):e=[$d])}s=s.return}null!==e&&ks(t,e,n,r),t.flags|=262144}function Ss(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function js(e){bs=e,vs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ns(e){return Es(bs,e)}function Ts(e,t){return null===bs&&js(e),Es(e,t)}function Es(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vs){if(null===e)throw Error(a(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return n}var Cs="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Is=r.unstable_scheduleCallback,As=r.unstable_NormalPriority,Ms={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Os(){return{controller:new Cs,data:new Map,refCount:0}}function Rs(e){e.refCount--,0===e.refCount&&Is(As,function(){e.controller.abort()})}var Ds=null,Ps=0,Ls=0,Fs=null;function Bs(){if(0===--Ps&&null!==Ds){null!==Fs&&(Fs.status="fulfilled");var e=Ds;Ds=null,Ls=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Us=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ds){var n=Ds=[];Ps=0,Ls=Cu(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ps++,t.then(Bs,Bs)}(0,t),null!==Us&&Us(e,t)};var zs=B(null);function Vs(){var e=zs.current;return null!==e?e:rc.pooledCache}function Hs(e,t){z(zs,null===t?zs.current:t.pool)}function Ws(){var e=Vs();return null===e?null:{parent:Ms._currentValue,pool:e}}var qs=Error(a(460)),Ks=Error(a(474)),Gs=Error(a(542)),$s={then:function(){}};function Xs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ys(){}function Qs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ys,Ys),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ys,Ys);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Js=t,qs}}var Js=null;function Zs(){if(null===Js)throw Error(a(459));var e=Js;return Js=null,e}function ei(e){if(e===qs||e===Gs)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Or(e),Mr(e,null,n),t}return Cr(e,r,t,n),Or(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fs)throw Fs}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(ic&f)===f:(r&f)===f){0!==f&&f===Ls&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;f=t;var b=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(b,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(b,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(p=o).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),fc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var fi=B(null),pi=B(0);function mi(e,t){z(pi,e=dc),z(fi,t),dc=e|t.baseLanes}function gi(){z(pi,dc),z(fi,fi.current)}function bi(){dc=pi.current,U(fi),U(pi)}var vi=0,yi=null,wi=null,xi=null,ki=!1,_i=!1,Si=!1,ji=0,Ni=0,Ti=null,Ei=0;function Ci(){throw Error(a(321))}function Ii(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function Ai(e,t,n,r,s,i){return vi=i,yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?qa:Ka,Si=!1,i=n(r,s),Si=!1,_i&&(i=Oi(t,n,r,s)),Mi(e),i}function Mi(e){R.H=Wa;var t=null!==wi&&null!==wi.next;if(vi=0,xi=wi=yi=null,ki=!1,Ni=0,Ti=null,t)throw Error(a(300));null===e||To||null!==(e=e.dependencies)&&Ss(e)&&(To=!0)}function Oi(e,t,n,r){yi=e;var s=0;do{if(_i&&(Ti=null),Ni=0,_i=!1,25<=s)throw Error(a(301));if(s+=1,xi=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}R.H=Ga,i=t(n,r)}while(_i);return i}function Ri(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Ui(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(yi.flags|=1024),t}function Di(){var e=0!==ji;return ji=0,e}function Pi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Li(e){if(ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ki=!1}vi=0,xi=wi=yi=null,_i=!1,Ni=ji=0,Ti=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?yi.memoizedState=xi=e:xi=xi.next=e,xi}function Bi(){if(null===wi){var e=yi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===xi?yi.memoizedState:xi.next;if(null!==t)xi=t,wi=e;else{if(null===e){if(null===yi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===xi?yi.memoizedState=xi=e:xi=xi.next=e}return xi}function Ui(e){var t=Ni;return Ni+=1,null===Ti&&(Ti=[]),e=Qs(Ti,e,t),t=yi,null===(null===xi?t.memoizedState:xi.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?qa:Ka),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ui(e);if(e.$$typeof===x)return Ns(e)}throw Error(a(438,String(e)))}function Vi(e){var t=null,n=yi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=yi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=E;return t.index++,n}function Hi(e,t){return"function"===typeof t?t(e):t}function Wi(e){return qi(Bi(),wi,e)}function qi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(vi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ls&&(d=!0);else{if((vi&f)===f){u=u.next,f===Ls&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,yi.lanes|=f,fc|=f}h=u.action,Si&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,yi.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Xn(i,e.memoizedState)&&(To=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ki(e){var t=Bi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Xn(i,t.memoizedState)||(To=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Gi(e,t,n){var r=yi,s=Bi(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Xn((wi||s).memoizedState,n);if(o&&(s.memoizedState=n,To=!0),s=s.queue,ga(2048,8,Yi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==xi&&1&xi.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,s,n,t),null),null===rc)throw Error(a(349));i||0!==(124&vi)||$i(r,t,n)}return n}function $i(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=yi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xi(e,t,n,r){t.value=n,t.getSnapshot=r,Qi(t)&&Ji(e)}function Yi(e,t,n){return n(function(){Qi(t)&&Ji(e)})}function Qi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function Ji(e){var t=Ar(e,2);null!==t&&Pc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),Si){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,qi(e,wi,"function"===typeof r?r:Hi)}function ta(e,t,n,r,s){if(za(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==R.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,na(t,i)):(i.next=n.next,t.pending=n.next=i)}}function na(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=R.T,a={};R.T=a;try{var o=n(s,r),l=R.S;null!==l&&l(a,o),ra(e,t,o)}catch(c){ia(e,t,c)}finally{R.T=i}}else try{ra(e,t,i=n(s,r))}catch(u){ia(e,t,u)}}function ra(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){sa(e,t,n)},function(n){return ia(e,t,n)}):sa(e,t,n)}function sa(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function ia(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(is){var n=rc.formState;if(null!==n){e:{var r=yi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=bd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=bd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=r,n=Fa.bind(null,yi,r),r.dispatch=n,r=Zi(!1),i=Ua.bind(null,yi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Fi()).queue=s,n=ta.bind(null,yi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ca(e){return ua(Bi(),wi,e)}function ua(e,t,n){if(t=qi(e,t,oa)[0],e=Wi(Hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Ui(t)}catch(a){if(a===qs)throw Gs;throw a}else r=t;var s=(t=Bi()).queue,i=s.dispatch;return n!==t.memoizedState&&(yi.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,s,n),null)),[r,i,e]}function da(e,t){e.action=t}function ha(e){var t=Bi(),n=wi;if(null!==n)return ua(t,n,e);Bi(),t=t.memoizedState;var r=(n=Bi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=yi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},yi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(){return Bi().memoizedState}function ma(e,t,n,r){var s=Fi();r=void 0===r?null:r,yi.flags|=e,s.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var s=Bi();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&Ii(r,wi.memoizedState.deps)?s.memoizedState=fa(t,i,n,r):(yi.flags|=e,s.memoizedState=fa(1|t,i,n,r))}function ba(e,t){ma(8390656,8,e,t)}function va(e,t){ga(2048,8,e,t)}function ya(e,t){return ga(4,2,e,t)}function wa(e,t){return ga(4,4,e,t)}function xa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ka(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4,4,xa.bind(null,t,e),n)}function _a(){}function Sa(e,t){var n=Bi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ii(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ja(e,t){var n=Bi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ii(t,r[1]))return r[0];if(r=e(),Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Na(e,t,n){return void 0===n||0!==(1073741824&vi)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),yi.lanes|=e,fc|=e,n)}function Ta(e,t,n,r){return Xn(n,t)?n:null!==fi.current?(e=Na(e,n,r),Xn(e,t)||(To=!0),e):0===(42&vi)?(To=!0,e.memoizedState=n):(e=Dc(),yi.lanes|=e,fc|=e,t)}function Ea(e,t,n,r,s){var i=D.p;D.p=0!==i&&8>i?i:8;var a=R.T,o={};R.T=o,Ua(e,!1,t,n);try{var l=s(),c=R.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ba(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Rc());else Ba(e,t,r,Rc())}catch(u){Ba(e,t,{then:function(){},status:"rejected",reason:u},Rc())}finally{D.p=i,R.T=a}}function Ca(){}function Ia(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=Aa(e).queue;Ea(e,s,t,P,null===n?Ca:function(){return Ma(e),n(r)})}function Aa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:P,baseState:P,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:P},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ma(e){Ba(e,Aa(e).next.queue,{},Rc())}function Oa(){return Ns($d)}function Ra(){return Bi().memoizedState}function Da(){return Bi().memoizedState}function Pa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Rc(),r=ii(t,e=si(n),n);return null!==r&&(Pc(r,t,n),ai(r,t,n)),t={cache:Os()},void(e.payload=t)}t=t.return}}function La(e,t,n){var r=Rc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?Va(t,n):null!==(n=Ir(e,t,n,r))&&(Pc(n,e,r),Ha(n,t,r))}function Fa(e,t,n){Ba(e,t,n,Rc())}function Ba(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))Va(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Xn(o,a))return Cr(e,t,s,0),null===rc&&Er(),!1}catch(l){}if(null!==(n=Ir(e,t,s,r)))return Pc(n,e,r),Ha(n,t,r),!0}return!1}function Ua(e,t,n,r){if(r={lane:2,revertLane:Cu(),action:r,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(a(479))}else null!==(t=Ir(e,n,r,2))&&Pc(t,e,2)}function za(e){var t=e.alternate;return e===yi||null!==t&&t===yi}function Va(e,t){_i=ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Wa={readContext:Ns,use:zi,useCallback:Ci,useContext:Ci,useEffect:Ci,useImperativeHandle:Ci,useLayoutEffect:Ci,useInsertionEffect:Ci,useMemo:Ci,useReducer:Ci,useRef:Ci,useState:Ci,useDebugValue:Ci,useDeferredValue:Ci,useTransition:Ci,useSyncExternalStore:Ci,useId:Ci,useHostTransitionStatus:Ci,useFormState:Ci,useActionState:Ci,useOptimistic:Ci,useMemoCache:Ci,useCacheRefresh:Ci},qa={readContext:Ns,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:ba,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4194308,4,xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var r=e();if(Si){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fi();if(void 0!==n){var s=n(t);if(Si){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=La.bind(null,yi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Fa.bind(null,yi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:_a,useDeferredValue:function(e,t){return Na(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Ea.bind(null,yi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=yi,s=Fi();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===rc)throw Error(a(349));0!==(124&ic)||$i(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,ba(Yi.bind(null,r,i,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,i,n,t),null),n},useId:function(){var e=Fi(),t=rc.identifierPrefix;if(is){var n=Jr;t="\xab"+t+"R"+(n=(Qr&~(1<<32-fe(Qr)-1)).toString(32)+n),0<(n=ji++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ei++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oa,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ua.bind(null,yi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vi,useCacheRefresh:function(){return Fi().memoizedState=Pa.bind(null,yi)}},Ka={readContext:Ns,use:zi,useCallback:Sa,useContext:Ns,useEffect:va,useImperativeHandle:ka,useInsertionEffect:ya,useLayoutEffect:wa,useMemo:ja,useReducer:Wi,useRef:pa,useState:function(){return Wi(Hi)},useDebugValue:_a,useDeferredValue:function(e,t){return Ta(Bi(),wi.memoizedState,e,t)},useTransition:function(){var e=Wi(Hi)[0],t=Bi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Gi,useId:Ra,useHostTransitionStatus:Oa,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Bi(),0,e,t)},useMemoCache:Vi,useCacheRefresh:Da},Ga={readContext:Ns,use:zi,useCallback:Sa,useContext:Ns,useEffect:va,useImperativeHandle:ka,useInsertionEffect:ya,useLayoutEffect:wa,useMemo:ja,useReducer:Ki,useRef:pa,useState:function(){return Ki(Hi)},useDebugValue:_a,useDeferredValue:function(e,t){var n=Bi();return null===wi?Na(n,e,t):Ta(n,wi.memoizedState,e,t)},useTransition:function(){var e=Ki(Hi)[0],t=Bi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Gi,useId:Ra,useHostTransitionStatus:Oa,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Bi();return null!==wi?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Vi,useCacheRefresh:Da},$a=null,Xa=0;function Ya(e){var t=Xa;return Xa+=1,null===$a&&($a=[]),Qs($a,e,t)}function Qa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&Za(i)===t.type)?(Qa(t=s(t,n.props),n),t.return=e,t):(Qa(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Qa(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Hr(t,e.mode,n)).return=e,t;case N:return h(e,t=(0,t._init)(t._payload),n)}if(O(t)||I(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ya(t),n);if(t.$$typeof===x)return h(e,Ts(e,t),n);Ja(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case m:return n.key===s?u(e,t,n,r):null;case N:return f(e,t,n=(s=n._init)(n._payload),r)}if(O(n)||I(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Ya(n),r);if(n.$$typeof===x)return f(e,t,Ts(e,n),r);Ja(e,n)}return null}function b(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return b(e,t,n,r=(0,r._init)(r._payload),s)}if(O(r)||I(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return b(e,t,n,Ya(r),s);if(r.$$typeof===x)return b(e,t,n,Ts(t,r),s);Ja(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var y=u.key;null!==c;){if(c.key===y){if((y=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===y||"object"===typeof y&&null!==y&&y.$$typeof===N&&Za(y)===c.type){n(l,c.sibling),Qa(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Qa(d=Ur(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case m:e:{for(y=u.key;null!==c;){if(c.key===y){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Hr(u,l.mode,d)).return=l,l=d}return o(l);case N:return v(l,c,u=(y=u._init)(u._payload),d)}if(O(u))return function(s,a,o,l){for(var c=null,u=null,d=a,p=a=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(s,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(s,d),a=i(g,a,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===o.length)return n(s,d),is&&Zr(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(a=i(d,a,p),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,p),c}for(d=r(d);p<o.length;p++)null!==(m=b(d,s,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),a=i(m,a,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(s,e)}),is&&Zr(s,p),c}(l,c,u,d);if(I(u)){if("function"!==typeof(y=I(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,m=o=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var y=f(s,p,v.value,c);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(s,p),o=i(y,o,m),null===d?u=y:d.sibling=y,d=y,p=g}if(v.done)return n(s,p),is&&Zr(s,m),u;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=h(s,v.value,c))&&(o=i(v,o,m),null===d?u=v:d.sibling=v,d=v);return is&&Zr(s,m),u}for(p=r(p);!v.done;m++,v=l.next())null!==(v=b(p,s,m,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),o=i(v,o,m),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),is&&Zr(s,m),u}(l,c,u=y.call(u),d)}if("function"===typeof u.then)return v(l,c,Ya(u),d);if(u.$$typeof===x)return v(l,c,Ts(l,u),d);Ja(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Vr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var s=v(e,t,n,r);return $a=null,s}catch(a){if(a===qs||a===Gs)throw a;var i=Pr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var to=eo(!0),no=eo(!1),ro=B(null),so=null;function io(e){var t=e.alternate;z(co,1&co.current),z(ro,e),null===so&&(null===t||null!==fi.current||null!==t.memoizedState)&&(so=e)}function ao(e){if(22===e.tag){if(z(co,co.current),z(ro,e),null===so){var t=e.alternate;null!==t&&null!==t.memoizedState&&(so=e)}}else oo()}function oo(){z(co,co.current),z(ro,ro.current)}function lo(e){U(ro),so===e&&(so=null),U(co)}var co=B(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Pc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Pc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Pc(t,e,n),ai(t,e,n))}};function po(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(s,i))}function mo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function go(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var bo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function vo(e){bo(e)}function yo(e){console.error(e)}function wo(e){bo(e)}function xo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ko(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function _o(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){xo(e,t)},n}function So(e){return(e=si(e)).tag=3,e}function jo(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){ko(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ko(t,n,r),"function"!==typeof s&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var No=Error(a(461)),To=!1;function Eo(e,t,n,r){t.child=null===e?no(t,null,n,r):to(t,e.child,n,r)}function Co(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return js(t),r=Ai(e,t,n,a,i,s),o=Di(),null===e||To?(is&&o&&ts(t),t.flags|=1,Eo(e,t,r,s),t.child):(Pi(e,t,s),Xo(e,t,s))}function Io(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Lr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ao(e,t,i,r,s))}if(i=e.child,!Yo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(a,r)&&e.ref===t.ref)return Xo(e,t,s)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function Ao(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Yn(i,r)&&e.ref===t.ref){if(To=!1,t.pendingProps=r=i,!Yo(e,s))return t.lanes=e.lanes,Xo(e,t,s);0!==(131072&e.flags)&&(To=!0)}}return Do(e,t,n,r,s)}function Mo(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Oo(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Oo(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hs(0,null!==i?i.cachePool:null),null!==i?mi(t,i):gi(),ao(t)}else null!==i?(Hs(0,i.cachePool),mi(t,i),oo(),t.memoizedState=null):(null!==e&&Hs(0,null),gi(),oo());return Eo(e,t,s,n),t.child}function Oo(e,t,n,r){var s=Vs();return s=null===s?null:{parent:Ms._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Hs(0,null),gi(),ao(t),null!==e&&_s(e,t,r,!0),null}function Ro(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Do(e,t,n,r,s){return js(t),n=Ai(e,t,n,r,void 0,s),r=Di(),null===e||To?(is&&r&&ts(t),t.flags|=1,Eo(e,t,n,s),t.child):(Pi(e,t,s),Xo(e,t,s))}function Po(e,t,n,r,s,i){return js(t),t.updateQueue=null,n=Oi(t,r,n,s),Mi(e),r=Di(),null===e||To?(is&&r&&ts(t),t.flags|=1,Eo(e,t,n,i),t.child):(Pi(e,t,i),Xo(e,t,i))}function Lo(e,t,n,r,s){if(js(t),null===t.stateNode){var i=Rr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ns(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=fo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ns(a):Rr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&fo.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=go(n,o);i.props=l;var c=i.context,u=n.contextType;a=Rr,"object"===typeof u&&null!==u&&(a=Ns(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&mo(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(ho(t,n,d,r),c=t.memoizedState),(l=ti||po(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=go(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Rr,"object"===typeof c&&null!==c&&(l=Ns(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&mo(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var f=t.memoizedState;a!==d||h!==f||ti||null!==e&&null!==e.dependencies&&Ss(e.dependencies)?("function"===typeof o&&(ho(t,n,o,r),f=t.memoizedState),(u=ti||po(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ss(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ro(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=to(t,e.child,null,s),t.child=to(t,null,n,s)):Eo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Xo(e,t,s),e}function Fo(e,t,n,r){return fs(),t.flags|=256,Eo(e,t,n,r),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uo(e){return{baseLanes:e,cachePool:Ws()}}function zo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Vo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?io(t):oo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=bd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Qr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Pr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=s.children,s=s.fallback,i?(oo(),c=Wo({mode:"hidden",children:c},i=t.mode),s=zr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=Uo(n),i.childLanes=zo(e,r,n),t.memoizedState=Bo,s):(io(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(io(t),t.flags&=-257,t=qo(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),i=s.fallback,c=t.mode,s=Wo({mode:"visible",children:s.children},c),(i=zr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,to(t,e.child,null,n),(s=t.child).memoizedState=Uo(n),s.childLanes=zo(e,r,n),t.memoizedState=Bo,t=i);else if(io(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ms({value:s,source:null,stack:null}),t=qo(e,t,n)}else if(To||_s(e,t,n,!1),r=0!==(n&e.childLanes),To||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Ee(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Ar(e,s),Pc(r,e,s),No;"$?"===c.data||Gc(),t=qo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=bd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&($r[Xr++]=Qr,$r[Xr++]=Jr,$r[Xr++]=Yr,Qr=e.id,Jr=e.overflow,Yr=t),(t=Ho(t,s.children)).flags|=4096);return t}return i?(oo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fr(u,i):(i=zr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=Uo(n):(null!==(l=c.cachePool)?(u=Ms._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ws(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=zo(e,r,n),t.memoizedState=Bo,s):(io(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Pr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qo(e,t,n){return to(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Go(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $o(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Eo(e,t,r.children,n),0!==(2&(r=co.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(co,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Go(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===uo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Go(t,!0,n,null,i);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(_s(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ss(e))}function Qo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)To=!0;else{if(!Yo(e,n)&&0===(128&t.flags))return To=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),ys(0,Ms,e.memoizedState.cache),fs();break;case 27:case 5:$(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:ys(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(io(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vo(e,t,n):(io(t),null!==(e=Xo(e,t,n))?e.sibling:null);io(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(_s(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return $o(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(co,co.current),r)break;return null;case 22:case 23:return t.lanes=0,Mo(e,t,n);case 24:ys(0,Ms,e.memoizedState.cache)}return Xo(e,t,n)}(e,t,n);To=0!==(131072&e.flags)}else To=!1,is&&0!==(1048576&t.flags)&&es(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===k){t.tag=11,t=Co(null,t,r,e,n);break e}if(s===j){t.tag=14,t=Io(null,t,r,e,n);break e}}throw t=M(r)||r,Error(a(306,t,""))}Lr(r)?(e=go(r,e),t.tag=1,t=Lo(null,t,r,e,n)):(t.tag=0,t=Do(null,t,r,e,n))}return t;case 0:return Do(e,t,t.type,t.pendingProps,n);case 1:return Lo(e,t,r=t.type,s=go(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ys(0,Ms,r),r!==i.cache&&ks(t,[Ms],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fo(e,t,r,n);break e}if(r!==s){ms(s=Sr(Error(a(424)),t)),t=Fo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=bd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=no(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===s){t=Xo(e,t,n);break e}Eo(e,t,r,n)}t=t.child}return t;case 26:return Ro(e,t),null===e?(n=Ed(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=rd(W.current).createElement(n))[Me]=t,r[Oe]=e,ed(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Ed(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $(t),null===e&&is&&(r=t.stateNode=wd(t.type,t.pendingProps,W.current),rs=t,os=!0,s=ss,fd(t.type)?(vd=s,ss=bd(r.firstChild)):ss=s),Eo(e,t,t.pendingProps.children,n),Ro(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Be])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=bd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=bd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),$(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,ad(s,i)?r=null:null!==o&&ad(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Ai(e,t,Ri,null,null,n),$d._currentValue=s),Ro(e,t),Eo(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Vo(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=to(t,null,r,n):Eo(e,t,r,n),t.child;case 11:return Co(e,t,t.type,t.pendingProps,n);case 7:return Eo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ys(0,t.type,r.value),Eo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,js(t),r=r(s=Ns(s)),t.flags|=1,Eo(e,t,r,n),t.child;case 14:return Io(e,t,t.type,t.pendingProps,n);case 15:return Ao(e,t,t.type,t.pendingProps,n);case 19:return $o(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Wo(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Mo(e,t,n);case 24:return js(t),r=Ns(Ms),null===e?(null===(s=Vs())&&(s=rc,i=Os(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),ys(0,Ms,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ys(0,Ms,r)):(r=i.cache,ys(0,Ms,r),r!==s.cache&&ks(t,[Ms],n,!0))),Eo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Jo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=ro.current)&&((4194048&ic)===ic?null!==so:(62914560&ic)!==ic&&0===(536870912&ic)||t!==so))throw Js=$s,Ks;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,bc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ws(Ms),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Jo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Jo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Jo(t),nl(t),t.flags&=-16777217),null;case 27:X(t),n=W.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=V.current,hs(t)?us(t):(e=wd(s,r,n),t.stateNode=e,Jo(t))}return nl(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=V.current,hs(t))us(t);else{switch(s=rd(W.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Me]=t,e[Oe]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Jo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=W.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Me]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||cs(t)}else(e=rd(e).createTextNode(r))[Me]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Me]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&Uu(t.stateNode.containerInfo),nl(t),null;case 10:return ws(t.type),nl(t),null;case 19:if(U(co),null===(s=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=uo(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return z(co,1&co.current|2),t.child}e=e.sibling}null!==s.tail&&te()>kc&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=co.current,z(co,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),bi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(Ms),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(Ms),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(co),null;case 4:return G(),null;case 10:return ws(t.type),null;case 22:case 23:return lo(t),bi(),null!==e&&U(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(Ms),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:ws(Ms),G();break;case 26:case 27:case 5:X(t);break;case 4:G();break;case 13:lo(t);break;case 19:U(co);break;case 10:ws(t.type);break;case 22:case 23:lo(t),bi(),null!==e&&U(zs);break;case 24:ws(Ms)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){uu(t,t.return,o)}}function ol(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){uu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=go(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Ju(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Ju(e,t,f,p,r,h)}}return void gt(e,o,l,c,u,d,i,s);case"select":for(i in p=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||Ju(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Ju(e,t,s,i,r,c)}return t=l,n=o,r=p,void(null!=f?yt(e,!!n,f,!1):!!r!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&Ju(e,t,o,s,r,i)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ju(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ju(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Ju(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var b in n)f=n[b],n.hasOwnProperty(b)&&void 0!==f&&!r.hasOwnProperty(b)&&Zu(e,t,b,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zu(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Ju(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Ju(e,t,h,f,r,p)}(r,e.type,n,t),r[Oe]=t}catch(s){uu(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qu));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,r,n),t[Me]=e,t[Oe]=n}catch(i){uu(e,e.return,i)}}var yl=!1,wl=!1,xl=!1,kl="function"===typeof WeakSet?WeakSet:Set,_l=null;function Sl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ll(e,n),4&r&&al(5,n);break;case 1:if(Ll(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(n,n.return,a)}else{var s=go(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){uu(n,n.return,o)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ll(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){uu(n,n.return,a)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Ll(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ll(e,n);break;case 13:Ll(e,n),4&r&&Il(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||yl)){t=null!==t&&null!==t.memoizedState||wl,s=yl;var i=wl;yl=r,(wl=t)&&!i?Bl(e,n,0!==(8772&n.subtreeFlags)):Ll(e,n),yl=s,wl=i}break;case 30:break;default:Ll(e,n)}}function jl(e){var t=e.alternate;null!==t&&(e.alternate=null,jl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Nl=null,Tl=!1;function El(e,t,n){for(n=n.child;null!==n;)Cl(e,t,n),n=n.sibling}function Cl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wl||dl(n,t),El(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Nl,s=Tl;fd(n.type)&&(Nl=n.stateNode,Tl=!1),El(e,t,n),xd(n.stateNode),Nl=r,Tl=s;break;case 5:wl||dl(n,t);case 6:if(r=Nl,s=Tl,Nl=null,El(e,t,n),Tl=s,null!==(Nl=r))if(Tl)try{(9===Nl.nodeType?Nl.body:"HTML"===Nl.nodeName?Nl.ownerDocument.body:Nl).removeChild(n.stateNode)}catch(a){uu(n,t,a)}else try{Nl.removeChild(n.stateNode)}catch(a){uu(n,t,a)}break;case 18:null!==Nl&&(Tl?(pd(9===(e=Nl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Th(e)):pd(Nl,n.stateNode));break;case 4:r=Nl,s=Tl,Nl=n.stateNode.containerInfo,Tl=!0,El(e,t,n),Nl=r,Tl=s;break;case 0:case 11:case 14:case 15:wl||ol(2,n,t),wl||ol(4,n,t),El(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),El(e,t,n);break;case 21:El(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,El(e,t,n),wl=r;break;default:El(e,t,n)}}function Il(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Th(e)}catch(n){uu(t,t.return,n)}}function Al(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Nl=l.stateNode,Tl=!1;break e}break;case 5:Nl=l.stateNode,Tl=!1;break e;case 3:case 4:Nl=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===Nl)throw Error(a(160));Cl(i,o,s),Nl=null,Tl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Ol=null;function Rl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ml(t,e),Dl(e),4&r&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Ml(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&yl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Ol;if(Ml(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Be]||i[Me]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),ed(i,r,n),i[Me]=e,qe(i),r=i;break e;case"link":var o=Bd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Bd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Me]=e,qe(i),r=i}e.stateNode=r}else Ud(s,e.type,e.stateNode);else e.stateNode=Rd(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Ud(s,e.type,e.stateNode):Rd(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ml(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ml(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{kt(s,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(xl=!0);break;case 6:if(Ml(t,e),Dl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Fd=null,s=Ol,Ol=Sd(t.containerInfo),Ml(t,e),Ol=s,Dl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Th(t.containerInfo)}catch(p){uu(e,e.return,p)}xl&&(xl=!1,Pl(e));break;case 4:r=Ol,Ol=Sd(e.stateNode.containerInfo),Ml(t,e),Dl(e),Ol=r;break;case 12:default:Ml(t,e),Dl(e);break;case 13:Ml(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=yl,d=wl;if(yl=u||s,wl=d||c,Ml(t,e),wl=d,yl=u,Dl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||yl||wl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Al(e,n))));break;case 19:Ml(t,e),Dl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;bl(e,ml(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(kt(i,""),n.flags&=-33),bl(e,ml(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;gl(e,ml(e),o);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Pl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Pl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ll(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Bl(s,i,n),al(4,i);break;case 1:if(Bl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],o)}catch(c){uu(r,r.return,c)}}n&&64&a&&ll(i),ul(i,i.return);break;case 27:vl(i);case 26:case 5:Bl(s,i,n),n&&null===r&&4&a&&hl(i),ul(i,i.return);break;case 12:Bl(s,i,n);break;case 13:Bl(s,i,n),n&&4&a&&Il(s,i);break;case 22:null===i.memoizedState&&Bl(s,i,n),ul(i,i.return);break;case 30:break;default:Bl(s,i,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Rs(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rs(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&s&&al(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rs(e)));break;case 12:if(2048&s){Vl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Vl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Vl(e,t,n,r):ql(e,t):2&i._visibility?Vl(e,t,n,r):(i._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&Ul(a,t);break;case 24:Vl(e,t,n,r),2048&s&&zl(t.alternate,t)}}function Wl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Wl(i,a,o,l,s),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Wl(i,a,o,l,s):ql(i,a):(u._visibility|=2,Wl(i,a,o,l,s)),s&&2048&c&&Ul(a.alternate,a);break;case 24:Wl(i,a,o,l,s),s&&2048&c&&zl(a.alternate,a);break;default:Wl(i,a,o,l,s)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:ql(n,r),2048&s&&Ul(r.alternate,r);break;case 24:ql(n,r),2048&s&&zl(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Kl=8192;function Gl(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 26:Gl(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(a(475));var r=Vd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Cd(n.href),i=e.querySelector(Id(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void qe(i);i=e.ownerDocument||e,n=Ad(n),(s=kd.get(s))&&Pd(n,s),qe(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Ol;Ol=Sd(e.stateNode.containerInfo),Gl(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Gl(e),Kl=t):Gl(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];_l=r,Zl(r,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Yl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];_l=r,Zl(r,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==_l;){var n=_l;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Rs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,_l=r;else e:for(n=e;null!==_l;){var s=(r=_l).sibling,i=r.return;if(jl(r),r===n){_l=null;break e}if(null!==s){s.return=i,_l=s;break e}_l=i}}}var ec={getCacheForType:function(e){var t=Ns(Ms),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ic=0,ac=0,oc=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,pc=0,mc=0,gc=0,bc=0,vc=null,yc=null,wc=!1,xc=0,kc=1/0,_c=null,Sc=null,jc=0,Nc=null,Tc=null,Ec=0,Cc=0,Ic=null,Ac=null,Mc=0,Oc=null;function Rc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==R.T){return 0!==Ls?Ls:Cu()}return Ie()}function Dc(){0===gc&&(gc=0===(536870912&ic)||is?ke():536870912);var e=ro.current;return null!==e&&(e.flags|=32),gc}function Pc(e,t,n){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Uc(e,ic,gc,!1)),je(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===hc&&Uc(e,ic,gc,!1)),ku(e))}function Lc(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=qc(),s=Kc();rc!==e||ic!==t?(_c=null,kc=te()+500,Hc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var i=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,i,1);break;case 2:case 9:if(Xs(i)){ac=0,oc=null,Jc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),ku(e)},i.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Xs(i)?(ac=0,oc=null,Jc(t)):(ac=0,oc=null,Zc(e,t,i,7));break;case 5:var o=null;switch(sc.tag){case 26:o=sc.memoizedState;case 5:case 27:var l=sc;if(!o||zd(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}ac=0,oc=null,Zc(e,t,i,5);break;case 6:ac=0,oc=null,Zc(e,t,i,6);break;case 8:Vc(),hc=6;break e;default:throw Error(a(462))}}Yc();break}catch(d){Wc(e,d)}return vs=bs=null,R.H=r,R.A=s,nc=n,null!==sc?0:(rc=null,ic=0,Er(),hc)}(e,t):$c(e,t,!0),i=r;;){if(0===s){cc&&!r&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!i||Bc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=$c(l,o,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,s=4;break e}i=yc,yc=s,null!==i&&(null===yc?yc=i:yc.push.apply(yc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){Hc(e,0),Uc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Uc(r,t,gc,!lc);break e;case 2:yc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=xc+300-te())){if(Uc(r,t,gc,!lc),0!==ye(r,0,!0))break e;r.timeoutHandle=ld(Fc.bind(null,r,n,yc,_c,wc,t,gc,pc,bc,lc,i,2,-0,0),s)}else Fc(r,n,yc,_c,wc,t,gc,pc,bc,lc,i,0,-0,0)}break}s=$c(e,t,!1),i=!1}ku(e)}function Fc(e,t,n,r,s,i,o,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Vd={stylesheets:null,count:0,unsuspend:Hd},$l(t),null!==(h=function(){if(null===Vd)throw Error(a(475));var e=Vd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,s,o,l,c,d,1,f,p)),void Uc(e,i,o,!u);nu(e,t,i,n,r,s,o,l,c)}function Bc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-fe(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Ne(e,n,t)}function zc(){return 0!==(6&nc)||(_u(0,!1),!1)}function Vc(){if(null!==sc){if(0===ac)var e=sc.return;else vs=bs=null,Li(e=sc),$a=null,Xa=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc(),rc=e,sc=n=Fr(e.current,null),ic=t,ac=0,oc=null,lc=!1,cc=we(e,t),uc=!1,bc=gc=mc=pc=fc=hc=0,yc=vc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-fe(r),i=1<<s;t|=e[s],r&=~i}return dc=t,Er(),n}function Wc(e,t){yi=null,R.H=Wa,t===qs||t===Gs?(t=Zs(),ac=3):t===Ks?(t=Zs(),ac=4):ac=t===No?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===sc&&(hc=1,xo(e,Sr(t,e.current)))}function qc(){var e=R.H;return R.H=Wa,null===e?Wa:e}function Kc(){var e=R.A;return R.A=ec,e}function Gc(){hc=4,lc||(4194048&ic)!==ic&&null!==ro.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||Uc(rc,ic,gc,!1)}function $c(e,t,n){var r=nc;nc|=2;var s=qc(),i=Kc();rc===e&&ic===t||(_c=null,Hc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==sc){var o=sc,l=oc;switch(ac){case 8:Vc(),a=6;break e;case 3:case 2:case 9:case 6:null===ro.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Xc(),a=hc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,vs=bs=null,nc=r,R.H=s,R.A=i,null===sc&&(rc=null,ic=0,Er()),a}function Xc(){for(;null!==sc;)Qc(sc)}function Yc(){for(;null!==sc&&!Z();)Qc(sc)}function Qc(e){var t=Qo(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Po(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Po(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Li(t);default:il(n,t),t=Qo(n,t=sc=Br(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Zc(e,t,n,r){vs=bs=null,Li(t),$a=null,Xa=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&_s(t,n,s,!0),null!==(n=ro.current)){switch(n.tag){case 13:return null===so?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===$s?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,s)),!1;case 22:return n.flags|=65536,r===$s?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,s)),!1}throw Error(a(435,n.tag))}return du(e,r,s),Gc(),!1}if(is)return null!==(t=ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ms(Sr(e=Error(a(422),{cause:r}),n))):(r!==ls&&ms(Sr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Sr(r,n),oi(e,s=_o(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var i=Error(a(520),{cause:r});if(i=Sr(i,n),null===vc?vc=[i]:vc.push(i),4!==hc&&(hc=2),null===t)return!0;r=Sr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oi(n,e=_o(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Sc||!Sc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,jo(s=So(s),e,n,r),oi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,xo(e,Sr(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,xo(e,Sr(n,e.current)),void(sc=null)}32768&t.flags?(is||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ro.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{ou()}while(0!==jc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ne(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Tr,o,l,c),e===rc&&(sc=rc=null,ic=0),Tc=t,Nc=e,Ec=n,Cc=i,Ic=s,Ac=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Q(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,s=D.p,D.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,_l=t;null!==_l;)if(e=(t=_l).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,_l=e;else for(;null!==_l;){switch(i=(t=_l).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=go(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(b){uu(n,n.return,b)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,_l=e;break}_l=t.return}}(e,t)}finally{nc=o,D.p=s,R.T=r}}jc=1,ru(),su(),iu()}}function ru(){if(1===jc){jc=0;var e=Nc,t=Tc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{Rl(t,e);var i=nd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var b=Jn(o,m),v=Jn(o,g);if(b&&v&&(1!==f.rangeCount||f.anchorNode!==b.node||f.anchorOffset!==b.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var y=d.createRange();y.setStart(b.node,b.offset),f.removeAllRanges(),m>g?(f.addRange(y),f.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),f.addRange(y))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=s,D.p=r,R.T=n}}e.current=t,jc=2}}function su(){if(2===jc){jc=0;var e=Nc,t=Tc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{Sl(e,t.alternate,t)}finally{nc=s,D.p=r,R.T=n}}jc=3}}function iu(){if(4===jc||3===jc){jc=0,ee();var e=Nc,t=Tc,n=Ec,r=Ac;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?jc=5:(jc=0,Tc=Nc=null,au(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Sc=null),Ce(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,s=D.p,D.p=2,R.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{R.T=t,D.p=s}}0!==(3&Ec)&&ou(),ku(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Oc?Mc++:(Mc=0,Oc=e):Mc=0,_u(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Rs(t)))}function ou(e){return ru(),su(),iu(),lu()}function lu(){if(5!==jc)return!1;var e=Nc,t=Cc;Cc=0;var n=Ce(Ec),r=R.T,s=D.p;try{D.p=32>n?32:n,R.T=null,n=Ic,Ic=null;var i=Nc,o=Ec;if(jc=0,Tc=Nc=null,Ec=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Ql(i.current),Hl(i,i.current,o,n),nc=l,_u(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{D.p=s,R.T=r,au(e,t)}}function cu(e,t,n){t=Sr(n,t),null!==(e=ii(e,t=_o(e.stateNode,t,2),2))&&(je(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=Sr(n,e),null!==(r=ii(t,n=So(2),2))&&(jo(n,r,t,e),je(r,2),ku(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-xc?0===(2&nc)&&Hc(e,0):mc|=n,bc===ic&&(bc=0)),ku(e)}function fu(e,t){0===t&&(t=_e()),null!==(e=Ar(e,t))&&(je(e,t),ku(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,bu=null,vu=!1,yu=!1,wu=!1,xu=0;function ku(e){e!==bu&&null===e.next&&(null===bu?gu=bu=e:bu=bu.next=e),yu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?Q(re,Su):ju()}))}function _u(e,t){if(!wu&&yu){wu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Eu(r,i))}else i=ic,0===(3&(i=ye(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,i)||(n=!0,Eu(r,i));r=r.next}}while(n);wu=!1}}function Su(){ju()}function ju(){yu=vu=!1;var e=0;0!==xu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==od&&(od=e,!0);return od=null,!1}()&&(e=xu),xu=0);for(var t=te(),n=null,r=gu;null!==r;){var s=r.next,i=Nu(r,t);0===i?(r.next=null,null===n?gu=s:n.next=s,null===s&&(bu=n)):(n=r,(0!==e||0!==(3&i))&&(yu=!0)),r=s}_u(e,!1)}function Nu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=xe(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ic,n=ye(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ce(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Tu.bind(null,e),n=Q(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Tu(e,t){if(0!==jc&&5!==jc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ou()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=ye(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Lc(e,r,t),Nu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tu.bind(null,e):null)}function Eu(e,t){if(ou())return null;Lc(e,t,!0)}function Cu(){return 0===xu&&(xu=ke()),xu}function Iu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ct(""+e)}function Au(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Mu=0;Mu<xr.length;Mu++){var Ou=xr[Mu];kr(Ou.toLowerCase(),"on"+(Ou[0].toUpperCase()+Ou.slice(1)))}kr(fr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(br,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(yr,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),$e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$e("onBeforeInput",["compositionend","keypress","textInput","paste"]),$e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function Pu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){bo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){bo(u)}s.currentTarget=null,i=l}}}}function Lu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Bu]){e[Bu]=!0,Ke.forEach(function(t){"selectionchange"!==t&&(Du.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bu]||(t[Bu]=!0,Fu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Vu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Pt(function(){var r=i,s=At(n),a=[];e:{var o=wr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case fr:case pr:case mr:c=on;break;case yr:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=yn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Lt(m,f))&&d.push(Hu(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===It||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Re])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:He(c),p=null==u?o:He(u),(o=new d(g,m+"leave",c,n,s)).target=h,o.relatedTarget=p,g=null,ze(s)===r&&((d=new d(f,m+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=qu(p))m++;for(p=0,g=f;g;g=qu(g))p++;for(;0<m-p;)d=qu(d),m--;for(;0<p-m;)f=qu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=qu(d),f=qu(f)}d=null}else d=null;null!==c&&Ku(a,o,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(o=r?He(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var b=Fn;else if(Mn(o))if(Bn)b=$n;else{b=Kn;var v=qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Nt(r.elementType)&&(b=Fn):b=Gn;switch(b&&(b=b(e,r))?On(a,b,n,s):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),v=r?He(r):window,e){case"focusin":(Mn(v)||"true"===v.contentEditable)&&(rr=v,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var y;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else In?En(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(jn&&"ko"!==n.locale&&(In||"onCompositionStart"!==w?"onCompositionEnd"===w&&In&&(y=Wt()):(Vt="value"in(zt=s)?zt.value:zt.textContent,In=!0)),0<(v=Wu(r,w)).length&&(w=new cn(w,e,null,n,s),a.push({event:w,listeners:v}),y?w.data=y:null!==(y=Cn(n))&&(w.data=y))),(y=Sn?function(e,t){switch(e){case"compositionend":return Cn(t);case"keypress":return 32!==t.which?null:(Tn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!kn&&En(e,t)?(e=Wt(),Ht=Vt=zt=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Wu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:v,listeners:w}),v.data=y)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Iu((s[Oe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Oe]||null)?Iu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Zt("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=a?Au(s,a):new FormData(s);Ia(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Au(s,a):new FormData(s),Ia(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Pu(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Lt(e,n))&&r.unshift(Hu(e,s,i)),null!=(s=Lt(e,t))&&r.push(Hu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Lt(n,i))&&a.unshift(Hu(n,c,l)):s||null!=(c=Lt(n,i))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gu=/\r\n?/g,$u=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace($u,"")}function Yu(e,t){return t=Xu(t),Xu(e)===t}function Qu(){}function Ju(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":jt(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ju(e,t,"name",s.name,s,null),Ju(e,t,"formEncType",s.formEncType,s,null),Ju(e,t,"formMethod",s.formMethod,s,null),Ju(e,t,"formTarget",s.formTarget,s,null)):(Ju(e,t,"encType",s.encType,s,null),Ju(e,t,"method",s.method,s,null),Ju(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ct(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Qu);break;case"onScroll":null!=r&&Lu("scroll",e);break;case"onScrollEnd":null!=r&&Lu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ct(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Lu("beforetoggle",e),Lu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function Zu(e,t,n,r,s,i){switch(n){case"style":jt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Lu("scroll",e);break;case"onScrollEnd":null!=r&&Lu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Oe]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lu("error",e),Lu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,r,o,n,null)}}return i&&Ju(e,t,"srcSet",n.srcSet,n,null),void(s&&Ju(e,t,"src",n.src,n,null));case"input":Lu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Ju(e,t,s,d,n,null)}}return bt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Lu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Ju(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=n&&yt(e,!!s,n,!0));case"textarea":for(o in Lu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Ju(e,t,o,l,n,null)}return xt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Ju(e,t,c,s,n,null);return;case"dialog":Lu("beforetoggle",e),Lu("toggle",e),Lu("cancel",e),Lu("close",e);break;case"iframe":case"object":Lu("load",e);break;case"video":case"audio":for(s=0;s<Ru.length;s++)Lu(Ru[s],e);break;case"image":Lu("error",e),Lu("load",e);break;case"details":Lu("toggle",e);break;case"embed":case"source":case"link":Lu("error",e),Lu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Ju(e,t,u,s,n,null)}return;default:if(Nt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Zu(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Ju(e,t,l,s,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var od=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&xd(a.documentElement),2&n&&xd(a.body),4&n)for(xd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Be]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void Th(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Th(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function yd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var kd=new Map,_d=new Set;function Sd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var jd=D.d;D.d={f:function(){var e=jd.f(),t=zc();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?Ma(t):jd.r(e)},D:function(e){jd.D(e),Td("dns-prefetch",e,null)},C:function(e,t){jd.C(e,t),Td("preconnect",e,t)},L:function(e,t,n){jd.L(e,t,n);var r=Nd;if(r&&e&&t){var s='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+mt(n.imageSizes)+'"]')):s+='[href="'+mt(e)+'"]';var i=s;switch(t){case"style":i=Cd(e);break;case"script":i=Md(e)}kd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Id(i))||"script"===t&&r.querySelector(Od(i))||(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){jd.m(e,t);var n=Nd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Md(e)}if(!kd.has(i)&&(e=h({rel:"modulepreload",href:e},t),kd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Od(i)))return}ed(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){jd.X(e,t);var n=Nd;if(n&&e){var r=We(n).hoistableScripts,s=Md(e),i=r.get(s);i||((i=n.querySelector(Od(s)))||(e=h({src:e,async:!0},t),(t=kd.get(s))&&Ld(e,t),qe(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){jd.S(e,t,n);var r=Nd;if(r&&e){var s=We(r).hoistableStyles,i=Cd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Id(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(i))&&Pd(e,n);var l=a=r.createElement("link");qe(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Dd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){jd.M(e,t);var n=Nd;if(n&&e){var r=We(n).hoistableScripts,s=Md(e),i=r.get(s);i||((i=n.querySelector(Od(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(s))&&Ld(e,t),qe(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Nd="undefined"===typeof document?null:document;function Td(e,t,n){var r=Nd;if(r&&"string"===typeof t&&t){var s=mt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),_d.has(s)||(_d.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Ed(e,t,n,r){var s,i,o,l,c=(c=W.current)?Sd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Cd(n.href),(r=(n=We(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Cd(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Id(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",o),qe(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Md(n),(r=(n=We(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Cd(e){return'href="'+mt(e)+'"'}function Id(e){return'link[rel="stylesheet"]['+e+"]"}function Ad(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Md(e){return'[src="'+mt(e)+'"]'}function Od(e){return"script[async]"+e}function Rd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",s),Dd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Cd(n.href);var i=e.querySelector(Id(s));if(i)return t.state.loading|=4,t.instance=i,qe(i),i;r=Ad(n),(s=kd.get(s))&&Pd(r,s),qe(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),ed(i,"link",r),t.state.loading|=4,Dd(i,n.precedence,e),t.instance=i;case"script":return i=Md(n.src),(s=e.querySelector(Od(i)))?(t.instance=s,qe(s),s):(r=n,(s=kd.get(i))&&Ld(r=h({},n),s),qe(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Dd(r,n.precedence,e));return t.instance}function Dd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Pd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ld(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Bd(e,t,n){if(null===Fd){var r=new Map,s=Fd=new Map;s.set(n,r)}else(r=(s=Fd).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Be]||i[Me]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function Ud(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vd=null;function Hd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Gd,e),qd=null,Wd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Wd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var $d={$$typeof:x,Provider:null,Consumer:null,_currentValue:P,_currentValue2:P,_threadCount:0};function Xd(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Yd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new Xd(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Pr(3,null,null,t),e.current=i,i.stateNode=e,(t=Os()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Qd(e){return e?e=Rr:Rr}function Jd(e,t,n,r,s,i){s=Qd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Pc(n,0,t),ai(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Pc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=R.T;R.T=null;var i=D.p;try{D.p=2,ih(e,t,n,r)}finally{D.p=i,R.T=s}}function sh(e,t,n,r){var s=R.T;R.T=null;var i=D.p;try{D.p=8,ih(e,t,n,r)}finally{D.p=i,R.T=s}}function ih(e,t,n,r){if(nh){var s=ah(r);if(null===s)Vu(e,t,r,oh,n),vh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return dh=yh(dh,e,t,n,r,s),!0;case"dragenter":return hh=yh(hh,e,t,n,r,s),!0;case"mouseover":return fh=yh(fh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,yh(ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mh.set(i,yh(mh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<bh.indexOf(e)){for(;null!==s;){var i=Ve(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ve(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}ku(i),0===(6&nc)&&(kc=te()+500,_u(0,!1))}}break;case 13:null!==(o=Ar(i,2))&&Pc(o,0,2),zc(),eh(i,2)}if(null===(i=ah(r))&&Vu(e,t,r,oh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Vu(e,t,r,null,n)}}function ah(e){return lh(e=At(e))}var oh=null;function lh(e){if(oh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,mh=new Map,gh=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function yh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Ve(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Rc();e=Ee(e);var t=Ar(n,e);null!==t&&Pc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function kh(e,t,n){xh(e)&&n.delete(t)}function _h(){uh=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==fh&&xh(fh)&&(fh=null),ph.forEach(kh),mh.forEach(kh)}function Sh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_h)))}var jh=null;function Nh(e){jh!==e&&(jh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){jh===e&&(jh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=Ve(n);null!==i&&(e.splice(t,3),t-=3,Ia(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Th(e){function t(t){return Sh(t,e)}null!==dh&&Sh(dh,e),null!==hh&&Sh(hh,e),null!==fh&&Sh(fh,e),ph.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Oe]||null;if("function"===typeof i)a||Nh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Oe]||null)o=a.formAction;else if(null!==lh(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Nh(n)}}}function Eh(e){this._internalRoot=e}function Ch(e){this._internalRoot=e}Ch.prototype.render=Eh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Jd(t.current,Rc(),e,t,null,null)},Ch.prototype.unmount=Eh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),zc(),t[Re]=null}},Ch.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Ih=s.version;if("19.1.0"!==Ih)throw Error(a(527,Ih,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ah={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{ue=Mh.inject(Ah),de=Mh}catch(Rh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=vo,i=yo,l=wo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,s,i,l,0,null),e[Re]=t.current,Uu(e),new Eh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=vo,l=yo,c=wo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Qd(null),n=t.current,(s=si(r=Ee(r=Rc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,je(t,n),ku(t),e[Re]=t.current,Uu(e),new Ch(t)},t.version="19.1.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},223:(e,t,n)=>{var r=n(897).default,s=n(344).default,i=n(958).default,a=n(881).default;e.exports=function e(t,n,r){function s(a,o){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return s(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,n){"use strict";const r=e("fs"),s=e("fast-csv"),i=e("dayjs/plugin/customParseFormat"),a=e("dayjs/plugin/utc"),o=e("dayjs").extend(i).extend(a),l=e("../utils/stream-buf"),{fs:{exists:c}}=e("../utils/utils"),u={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};t.exports=class{constructor(e){this.workbook=e,this.worksheet=null}async readFile(e,t){if(t=t||{},!await c(e))throw new Error("File not found: "+e);const n=r.createReadStream(e),s=await this.read(n,t);return n.close(),s}read(e,t){return t=t||{},new Promise((n,r)=>{const i=this.workbook.addWorksheet(t.sheetName),a=t.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],l=t.map||function(e){if(""===e)return null;const t=Number(e);if(!Number.isNaN(t)&&t!==1/0)return t;const n=a.reduce((t,n)=>{if(t)return t;const r=o(e,n,!0);return r.isValid()?r:null},null);if(n)return new Date(n.valueOf());const r=u[e];return void 0!==r?r:e},c=s.parse(t.parserOptions).on("data",e=>{i.addRow(e.map(l))}).on("end",()=>{c.emit("worksheet",i)});c.on("worksheet",n).on("error",r),e.pipe(c)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(e,t){return new Promise((n,r)=>{t=t||{};const i=this.workbook.getWorksheet(t.sheetName||t.sheetId),a=s.format(t.formatterOptions);e.on("finish",()=>{n()}),a.on("error",r),a.pipe(e);const{dateFormat:l,dateUTC:c}=t,u=t.map||(e=>{if(e){if(e.text||e.hyperlink)return e.hyperlink||e.text||"";if(e.formula||e.result)return e.result||"";if(e instanceof Date)return l?c?o.utc(e).format(l):o(e).format(l):c?o.utc(e).format():o(e).format();if(e.error)return e.error;if("object"==typeof e)return JSON.stringify(e)}return e}),d=void 0===t.includeEmptyRows||t.includeEmptyRows;let h=1;i&&i.eachRow((e,t)=>{if(d)for(;h++<t-1;)a.write([]);const{values:n}=e;n.shift(),a.write(n.map(u)),h=t}),a.end()})}writeFile(e,t){const n={encoding:(t=t||{}).encoding||"utf8"},s=r.createWriteStream(e,n);return this.write(s,t)}async writeBuffer(e){const t=new l;return await this.write(t,e),t.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(e,t,n){"use strict";const r=e("../utils/col-cache");class s{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.worksheet=e,t)if("string"==typeof t){const e=r.decodeAddress(t);this.nativeCol=e.col+n,this.nativeColOff=0,this.nativeRow=e.row+n,this.nativeRowOff=0}else void 0!==t.nativeCol?(this.nativeCol=t.nativeCol||0,this.nativeColOff=t.nativeColOff||0,this.nativeRow=t.nativeRow||0,this.nativeRowOff=t.nativeRowOff||0):void 0!==t.col?(this.col=t.col+n,this.row=t.row+n):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(e){return e instanceof s||null==e?e:new s(e)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(e){this.nativeCol=Math.floor(e),this.nativeColOff=Math.floor((e-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(e){this.nativeRow=Math.floor(e),this.nativeRowOff=Math.floor((e-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(e){this.nativeCol=e.nativeCol,this.nativeColOff=e.nativeColOff,this.nativeRow=e.nativeRow,this.nativeRowOff=e.nativeRowOff}}t.exports=s},{"../utils/col-cache":19}],3:[function(e,t,n){"use strict";const r=e("../utils/col-cache"),s=e("../utils/under-dash"),i=e("./enums"),{slideFormula:a}=e("../utils/shared-formula"),o=e("./note");class l{constructor(e,t,n){if(!e||!t)throw new Error("A Cell needs a Row");this._row=e,this._column=t,r.validateAddress(n),this._address=n,this._value=c.create(l.Types.Null,this),this.style=this._mergeStyle(e.style,t.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(e){this.style.numFmt=e}get font(){return this.style.font}set font(e){this.style.font=e}get alignment(){return this.style.alignment}set alignment(e){this.style.alignment=e}get border(){return this.style.border}set border(e){this.style.border=e}get fill(){return this.style.fill}set fill(e){this.style.fill=e}get protection(){return this.style.protection}set protection(e){this.style.protection=e}_mergeStyle(e,t,n){const r=e&&e.numFmt||t&&t.numFmt;r&&(n.numFmt=r);const s=e&&e.font||t&&t.font;s&&(n.font=s);const i=e&&e.alignment||t&&t.alignment;i&&(n.alignment=i);const a=e&&e.border||t&&t.border;a&&(n.border=a);const o=e&&e.fill||t&&t.fill;o&&(n.fill=o);const l=e&&e.protection||t&&t.protection;return l&&(n.protection=l),n}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return"$".concat(this._column.letter,"$").concat(this.row)}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===l.Types.Merge}merge(e,t){this._value.release(),this._value=c.create(l.Types.Merge,this,e),t||(this.style=e.style)}unmerge(){this.type===l.Types.Merge&&(this._value.release(),this._value=c.create(l.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(e){return this._value.type===l.Types.Merge&&this._value.isMergedTo(e)}get master(){return this.type===l.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===l.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(e){this.type!==l.Types.Merge?(this._value.release(),this._value=c.create(c.getType(e),this,e)):this._value.master.value=e}get note(){return this._comment&&this._comment.note}set note(e){this._comment=new o(e)}get text(){return this._value.toString()}get html(){return s.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(e){this.type===l.Types.String&&(this._value=c.create(l.Types.Hyperlink,this,{text:this._value.value,hyperlink:e}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:e}=this._row;return{sheetName:e.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(e){this.names=[e]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(e){const{definedNames:t}=this.workbook;t.removeAllNames(this.fullAddress),e.forEach(e=>{t.addEx(this.fullAddress,e)})}addName(e){this.workbook.definedNames.addEx(this.fullAddress,e)}removeName(e){this.workbook.definedNames.removeEx(this.fullAddress,e)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(e){this._dataValidations.add(this.address,e)}get model(){const{model:e}=this._value;return e.style=this.style,this._comment&&(e.comment=this._comment.model),e}set model(e){this._value.release(),this._value=c.create(e.type,this),this._value.model=e,e.comment&&"note"===e.comment.type&&(this._comment=o.fromModel(e.comment)),e.style?this.style=e.style:this.style={}}}l.Types=i.ValueType;const c={getType:e=>null==e?l.Types.Null:e instanceof String||"string"==typeof e?l.Types.String:"number"==typeof e?l.Types.Number:"boolean"==typeof e?l.Types.Boolean:e instanceof Date?l.Types.Date:e.text&&e.hyperlink?l.Types.Hyperlink:e.formula||e.sharedFormula?l.Types.Formula:e.richText?l.Types.RichText:e.sharedString?l.Types.SharedString:e.error?l.Types.Error:l.Types.JSON,types:[{t:l.Types.Null,f:class{constructor(e){this.model={address:e.address,type:l.Types.Null}}get value(){return null}set value(e){}get type(){return l.Types.Null}get effectiveType(){return l.Types.Null}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return""}release(){}toString(){return""}}},{t:l.Types.Number,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.Number,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}get type(){return l.Types.Number}get effectiveType(){return l.Types.Number}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.String,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.String,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}get type(){return l.Types.String}get effectiveType(){return l.Types.String}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return'"'.concat(this.model.value.replace(/"/g,'""'),'"')}release(){}toString(){return this.model.value}}},{t:l.Types.Date,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.Date,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}get type(){return l.Types.Date}get effectiveType(){return l.Types.Date}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.Hyperlink,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.Hyperlink,text:t?t.text:void 0,hyperlink:t?t.hyperlink:void 0},t&&t.tooltip&&(this.model.tooltip=t.tooltip)}get value(){const e={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(e.tooltip=this.model.tooltip),e}set value(e){this.model={text:e.text,hyperlink:e.hyperlink},e.tooltip&&(this.model.tooltip=e.tooltip)}get text(){return this.model.text}set text(e){this.model.text=e}get hyperlink(){return this.model.hyperlink}set hyperlink(e){this.model.hyperlink=e}get type(){return l.Types.Hyperlink}get effectiveType(){return l.Types.Hyperlink}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:l.Types.Formula,f:class{constructor(e,t){this.cell=e,this.model={address:e.address,type:l.Types.Formula,shareType:t?t.shareType:void 0,ref:t?t.ref:void 0,formula:t?t.formula:void 0,sharedFormula:t?t.sharedFormula:void 0,result:t?t.result:void 0}}_copyModel(e){const t={},n=n=>{const r=e[n];r&&(t[n]=r)};return n("formula"),n("result"),n("ref"),n("shareType"),n("sharedFormula"),t}get value(){return this._copyModel(this.model)}set value(e){this.model=this._copyModel(e)}validate(e){switch(c.getType(e)){case l.Types.Null:case l.Types.String:case l.Types.Number:case l.Types.Date:break;case l.Types.Hyperlink:case l.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(e){this.model.formula=e}get formulaType(){return this.model.formula?i.FormulaType.Master:this.model.sharedFormula?i.FormulaType.Shared:i.FormulaType.None}get result(){return this.model.result}set result(e){this.model.result=e}get type(){return l.Types.Formula}get effectiveType(){const e=this.model.result;return null==e?i.ValueType.Null:e instanceof String||"string"==typeof e?i.ValueType.String:"number"==typeof e?i.ValueType.Number:e instanceof Date?i.ValueType.Date:e.text&&e.hyperlink?i.ValueType.Hyperlink:e.formula?i.ValueType.Formula:i.ValueType.Null}get address(){return this.model.address}set address(e){this.model.address=e}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:e}=this.cell,t=e.findCell(this.model.sharedFormula);this._translatedFormula=t&&a(t.formula,t.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:l.Types.Merge,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.Merge,master:t?t.address:void 0},this._master=t,t&&t.addMergeRef()}get value(){return this._master.value}set value(e){e instanceof l?(this._master&&this._master.releaseMergeRef(),e.addMergeRef(),this._master=e):this._master.value=e}isMergedTo(e){return e===this._master}get master(){return this._master}get type(){return l.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:l.Types.JSON,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.String,value:JSON.stringify(t),rawValue:t}}get value(){return this.model.rawValue}set value(e){this.model.rawValue=e,this.model.value=JSON.stringify(e)}get type(){return l.Types.String}get effectiveType(){return l.Types.String}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:l.Types.SharedString,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.SharedString,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}get type(){return l.Types.SharedString}get effectiveType(){return l.Types.SharedString}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.RichText,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.String,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}toString(){return this.model.value.richText.map(e=>e.text).join("")}get type(){return l.Types.RichText}get effectiveType(){return l.Types.RichText}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return'"'.concat(this.text.replace(/"/g,'""'),'"')}release(){}}},{t:l.Types.Boolean,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.Boolean,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}get type(){return l.Types.Boolean}get effectiveType(){return l.Types.Boolean}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:l.Types.Error,f:class{constructor(e,t){this.model={address:e.address,type:l.Types.Error,value:t}}get value(){return this.model.value}set value(e){this.model.value=e}get type(){return l.Types.Error}get effectiveType(){return l.Types.Error}get address(){return this.model.address}set address(e){this.model.address=e}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((e,t)=>(e[t.t]=t.f,e),[]),create(e,t,n){const r=this.types[e];if(!r)throw new Error("Could not create Value of type "+e);return new r(t,n)}};t.exports=l},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(e,t,n){"use strict";const r=e("../utils/under-dash"),s=e("./enums"),i=e("../utils/col-cache");class a{constructor(e,t,n){this._worksheet=e,this._number=t,!1!==n&&(this.defn=n)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return i.n2l(this._number)}get isCustomWidth(){return void 0!==this.width&&9!==this.width}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(e){e?(this.key=e.key,this.width=void 0!==e.width?e.width:9,this.outlineLevel=e.outlineLevel,e.style?this.style=e.style:this.style={},this.header=e.header,this._hidden=!!e.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(e){void 0!==e?(this._header=e,this.headers.forEach((e,t)=>{this._worksheet.getCell(t+1,this.number).value=e})):this._header=void 0}get key(){return this._key}set key(e){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=e,e&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(e){this._hidden=e}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(e){this._outlineLevel=e}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(e){return this.width===e.width&&this.hidden===e.hidden&&this.outlineLevel===e.outlineLevel&&r.isEqual(this.style,e.style)}get isDefault(){if(this.isCustomWidth)return!1;if(this.hidden)return!1;if(this.outlineLevel)return!1;const e=this.style;return!e||!(e.font||e.numFmt||e.alignment||e.border||e.fill||e.protection)}get headerCount(){return this.headers.length}eachCell(e,t){const n=this.number;t||(t=e,e=null),this._worksheet.eachRow(e,(e,r)=>{t(e.getCell(n),r)})}get values(){const e=[];return this.eachCell((t,n)=>{t&&t.type!==s.ValueType.Null&&(e[n]=t.value)}),e}set values(e){if(!e)return;const t=this.number;let n=0;e.hasOwnProperty("0")&&(n=1),e.forEach((e,r)=>{this._worksheet.getCell(r+n,t).value=e})}_applyStyle(e,t){return this.style[e]=t,this.eachCell(n=>{n[e]=t}),t}get numFmt(){return this.style.numFmt}set numFmt(e){this._applyStyle("numFmt",e)}get font(){return this.style.font}set font(e){this._applyStyle("font",e)}get alignment(){return this.style.alignment}set alignment(e){this._applyStyle("alignment",e)}get protection(){return this.style.protection}set protection(e){this._applyStyle("protection",e)}get border(){return this.style.border}set border(e){this._applyStyle("border",e)}get fill(){return this.style.fill}set fill(e){this._applyStyle("fill",e)}static toModel(e){const t=[];let n=null;return e&&e.forEach((e,r)=>{e.isDefault?n&&(n=null):n&&e.equivalentTo(n)?n.max=r+1:(n={min:r+1,max:r+1,width:void 0!==e.width?e.width:9,style:e.style,isCustomWidth:e.isCustomWidth,hidden:e.hidden,outlineLevel:e.outlineLevel,collapsed:e.collapsed},t.push(n))}),t.length?t:void 0}static fromModel(e,t){const n=[];let r=1,s=0;for(t=(t=t||[]).sort(function(e,t){return e.min-t.min});s<t.length;){const i=t[s++];for(;r<i.min;)n.push(new a(e,r++));for(;r<=i.max;)n.push(new a(e,r++,i))}return n.length?n:null}}t.exports=a},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(e,t,n){"use strict";t.exports=class{constructor(e){this.model=e||{}}add(e,t){return this.model[e]=t}find(e){return this.model[e]}remove(e){this.model[e]=void 0}}},{}],6:[function(e,t,n){"use strict";const r=e("../utils/under-dash"),s=e("../utils/col-cache"),i=e("../utils/cell-matrix"),a=e("./range"),o=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;t.exports=class{constructor(){this.matrixMap={}}getMatrix(e){return this.matrixMap[e]||(this.matrixMap[e]=new i)}add(e,t){const n=s.decodeEx(e);this.addEx(n,t)}addEx(e,t){const n=this.getMatrix(t);if(e.top)for(let r=e.left;r<=e.right;r++)for(let t=e.top;t<=e.bottom;t++){const i={sheetName:e.sheetName,address:s.n2l(r)+t,row:t,col:r};n.addCellEx(i)}else n.addCellEx(e)}remove(e,t){const n=s.decodeEx(e);this.removeEx(n,t)}removeEx(e,t){this.getMatrix(t).removeCellEx(e)}removeAllNames(e){r.each(this.matrixMap,t=>{t.removeCellEx(e)})}forEach(e){r.each(this.matrixMap,(t,n)=>{t.forEach(t=>{e(n,t)})})}getNames(e){return this.getNamesEx(s.decodeEx(e))}getNamesEx(e){return r.map(this.matrixMap,(t,n)=>t.findCellEx(e)&&n).filter(Boolean)}_explore(e,t){t.mark=!1;const{sheetName:n}=t,r=new a(t.row,t.col,t.row,t.col,n);let s,i;function o(s,i){const a=e.findCellAt(n,s,t.col);return!(!a||!a.mark)&&(r[i]=s,a.mark=!1,!0)}for(i=t.row-1;o(i,"top");i--);for(i=t.row+1;o(i,"bottom");i++);function l(t,s){const a=[];for(i=r.top;i<=r.bottom;i++){const r=e.findCellAt(n,i,t);if(!r||!r.mark)return!1;a.push(r)}r[s]=t;for(let e=0;e<a.length;e++)a[e].mark=!1;return!0}for(s=t.col-1;l(s,"left");s--);for(s=t.col+1;l(s,"right");s++);return r}getRanges(e,t){return(t=t||this.matrixMap[e])?(t.forEach(e=>{e.mark=!0}),{name:e,ranges:t.map(e=>e.mark&&this._explore(t,e)).filter(Boolean).map(e=>e.$shortRange)}):{name:e,ranges:[]}}normaliseMatrix(e,t){e.forEachInSheet(t,(e,t,n)=>{e&&(e.row===t&&e.col===n||(e.row=t,e.col=n,e.address=s.n2l(n)+t))})}spliceRows(e,t,n,s){r.each(this.matrixMap,r=>{r.spliceRows(e,t,n,s),this.normaliseMatrix(r,e)})}spliceColumns(e,t,n,s){r.each(this.matrixMap,r=>{r.spliceColumns(e,t,n,s),this.normaliseMatrix(r,e)})}get model(){return r.map(this.matrixMap,(e,t)=>this.getRanges(t,e)).filter(e=>e.ranges.length)}set model(e){const t=this.matrixMap={};e.forEach(e=>{const n=t[e.name]=new i;e.ranges.forEach(e=>{o.test(e.split("!").pop()||"")&&n.addCell(e)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(e,t,n){"use strict";t.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(e,t,n){"use strict";const r=e("../utils/col-cache"),s=e("./anchor");t.exports=class{constructor(e,t){this.worksheet=e,this.model=t}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(e){let{type:t,imageId:n,range:i,hyperlinks:a}=e;if(this.type=t,this.imageId=n,"image"===t)if("string"==typeof i){const e=r.decode(i);this.range={tl:new s(this.worksheet,{col:e.left,row:e.top},-1),br:new s(this.worksheet,{col:e.right,row:e.bottom},0),editAs:"oneCell"}}else this.range={tl:new s(this.worksheet,i.tl,0),br:i.br&&new s(this.worksheet,i.br,0),ext:i.ext,editAs:i.editAs,hyperlinks:a||i.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(e,t,n){"use strict";const r=e("../utils/under-dash");class s{constructor(e){this.note=e}get model(){let e=null;return e="string"===typeof this.note?{type:"note",note:{texts:[{text:this.note}]}}:{type:"note",note:this.note},r.deepMerge({},s.DEFAULT_CONFIGS,e)}set model(e){const{note:t}=e,{texts:n}=t;1===n.length&&1===Object.keys(n[0]).length?this.note=n[0].text:this.note=t}static fromModel(e){const t=new s;return t.model=e,t}}s.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},t.exports=s},{"../utils/under-dash":26}],10:[function(e,t,n){"use strict";const r=e("../utils/col-cache");class s{constructor(){this.decode(arguments)}setTLBR(e,t,n,s,i){if(arguments.length<4){const s=r.decodeAddress(e),a=r.decodeAddress(t);this.model={top:Math.min(s.row,a.row),left:Math.min(s.col,a.col),bottom:Math.max(s.row,a.row),right:Math.max(s.col,a.col),sheetName:n},this.setTLBR(s.row,s.col,a.row,a.col,i)}else this.model={top:Math.min(e,n),left:Math.min(t,s),bottom:Math.max(e,n),right:Math.max(t,s),sheetName:i}}decode(e){switch(e.length){case 5:this.setTLBR(e[0],e[1],e[2],e[3],e[4]);break;case 4:this.setTLBR(e[0],e[1],e[2],e[3]);break;case 3:this.setTLBR(e[0],e[1],e[2]);break;case 2:this.setTLBR(e[0],e[1]);break;case 1:{const t=e[0];if(t instanceof s)this.model={top:t.model.top,left:t.model.left,bottom:t.model.bottom,right:t.model.right,sheetName:t.sheetName};else if(t instanceof Array)this.decode(t);else if(t.top&&t.left&&t.bottom&&t.right)this.model={top:t.top,left:t.left,bottom:t.bottom,right:t.right,sheetName:t.sheetName};else{const e=r.decodeEx(t);e.top?this.model={top:e.top,left:e.left,bottom:e.bottom,right:e.right,sheetName:e.sheetName}:this.model={top:e.row,left:e.col,bottom:e.row,right:e.col,sheetName:e.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+e.length)}}get top(){return this.model.top||1}set top(e){this.model.top=e}get left(){return this.model.left||1}set left(e){this.model.left=e}get bottom(){return this.model.bottom||1}set bottom(e){this.model.bottom=e}get right(){return this.model.right||1}set right(e){this.model.right=e}get sheetName(){return this.model.sheetName}set sheetName(e){this.model.sheetName=e}get _serialisedSheetName(){const{sheetName:e}=this.model;return e?/^[a-zA-Z0-9]*$/.test(e)?e+"!":"'".concat(e,"'!"):""}expand(e,t,n,r){(!this.model.top||e<this.top)&&(this.top=e),(!this.model.left||t<this.left)&&(this.left=t),(!this.model.bottom||n>this.bottom)&&(this.bottom=n),(!this.model.right||r>this.right)&&(this.right=r)}expandRow(e){if(e){const{dimensions:t,number:n}=e;t&&this.expand(n,t.min,n,t.max)}}expandToAddress(e){const t=r.decodeEx(e);this.expand(t.row,t.col,t.row,t.col)}get tl(){return r.n2l(this.left)+this.top}get $t$l(){return"$".concat(r.n2l(this.left),"$").concat(this.top)}get br(){return r.n2l(this.right)+this.bottom}get $b$r(){return"$".concat(r.n2l(this.right),"$").concat(this.bottom)}get range(){return"".concat(this._serialisedSheetName+this.tl,":").concat(this.br)}get $range(){return"".concat(this._serialisedSheetName+this.$t$l,":").concat(this.$b$r)}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(e){return(!e.sheetName||!this.sheetName||e.sheetName===this.sheetName)&&!(e.bottom<this.top)&&!(e.top>this.bottom)&&!(e.right<this.left)&&!(e.left>this.right)}contains(e){const t=r.decodeEx(e);return this.containsEx(t)}containsEx(e){return(!e.sheetName||!this.sheetName||e.sheetName===this.sheetName)&&e.row>=this.top&&e.row<=this.bottom&&e.col>=this.left&&e.col<=this.right}forEachAddress(e){for(let t=this.left;t<=this.right;t++)for(let n=this.top;n<=this.bottom;n++)e(r.encodeAddress(n,t),n,t)}}t.exports=s},{"../utils/col-cache":19}],11:[function(e,t,n){"use strict";const r=e("../utils/under-dash"),s=e("./enums"),i=e("../utils/col-cache"),a=e("./cell");t.exports=class{constructor(e,t){this._worksheet=e,this._number=t,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(e){return this._cells[e-1]}getCellEx(e){let t=this._cells[e.col-1];if(!t){const n=this._worksheet.getColumn(e.col);t=new a(this,n,e.address),this._cells[e.col-1]=t}return t}getCell(e){if("string"==typeof e){const t=this._worksheet.getColumnKey(e);e=t?t.number:i.l2n(e)}return this._cells[e-1]||this.getCellEx({address:i.encodeAddress(this._number,e),row:this._number,col:e})}splice(e,t){const n=e+t;for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];const a=s.length-t,o=this._cells.length;let l,c,u;if(a<0)for(l=e+s.length;l<=o;l++)u=this._cells[l-1],c=this._cells[l-a-1],c?(u=this.getCell(l),u.value=c.value,u.style=c.style,u._comment=c._comment):u&&(u.value=null,u.style={},u._comment=void 0);else if(a>0)for(l=o;l>=n;l--)c=this._cells[l-1],c?(u=this.getCell(l+a),u.value=c.value,u.style=c.style,u._comment=c._comment):this._cells[l+a-1]=void 0;for(l=0;l<s.length;l++)u=this.getCell(e+l),u.value=s[l],u.style={},u._comment=void 0}eachCell(e,t){if(t||(t=e,e=null),e&&e.includeEmpty){const e=this._cells.length;for(let n=1;n<=e;n++)t(this.getCell(n),n)}else this._cells.forEach((e,n)=>{e&&e.type!==s.ValueType.Null&&t(e,n+1)})}addPageBreak(e,t){const n=this._worksheet,r=Math.max(0,e-1)||0,s=Math.max(0,t-1)||16838,i={id:this._number,max:s,man:1};r&&(i.min=r),n.rowBreaks.push(i)}get values(){const e=[];return this._cells.forEach(t=>{t&&t.type!==s.ValueType.Null&&(e[t.col]=t.value)}),e}set values(e){if(this._cells=[],e)if(e instanceof Array){let t=0;e.hasOwnProperty("0")&&(t=1),e.forEach((e,n)=>{void 0!==e&&(this.getCellEx({address:i.encodeAddress(this._number,n+t),row:this._number,col:n+t}).value=e)})}else this._worksheet.eachColumnKey((t,n)=>{void 0!==e[n]&&(this.getCellEx({address:i.encodeAddress(this._number,t.number),row:this._number,col:t.number}).value=e[n])})}get hasValues(){return r.some(this._cells,e=>e&&e.type!==s.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let e=0;return this.eachCell(()=>{e++}),e}get dimensions(){let e=0,t=0;return this._cells.forEach(n=>{n&&n.type!==s.ValueType.Null&&((!e||e>n.col)&&(e=n.col),t<n.col&&(t=n.col))}),e>0?{min:e,max:t}:null}_applyStyle(e,t){return this.style[e]=t,this._cells.forEach(n=>{n&&(n[e]=t)}),t}get numFmt(){return this.style.numFmt}set numFmt(e){this._applyStyle("numFmt",e)}get font(){return this.style.font}set font(e){this._applyStyle("font",e)}get alignment(){return this.style.alignment}set alignment(e){this._applyStyle("alignment",e)}get protection(){return this.style.protection}set protection(e){this._applyStyle("protection",e)}get border(){return this.style.border}set border(e){this._applyStyle("border",e)}get fill(){return this.style.fill}set fill(e){this._applyStyle("fill",e)}get hidden(){return!!this._hidden}set hidden(e){this._hidden=e}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(e){this._outlineLevel=e}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const e=[];let t=0,n=0;return this._cells.forEach(r=>{if(r){const s=r.model;s&&((!t||t>r.col)&&(t=r.col),n<r.col&&(n=r.col),e.push(s))}}),this.height||e.length?{cells:e,number:this.number,min:t,max:n,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(e){if(e.number!==this._number)throw new Error("Invalid row number in model");let t;this._cells=[],e.cells.forEach(e=>{switch(e.type){case a.Types.Merge:break;default:{let n;if(e.address)n=i.decodeAddress(e.address);else if(t){const{row:e}=t,r=t.col+1;n={row:e,col:r,address:i.encodeAddress(e,r),$col$row:"$".concat(i.n2l(r),"$").concat(e)}}t=n,this.getCellEx(n).model=e;break}}}),e.height?this.height=e.height:delete this.height,this.hidden=e.hidden,this.outlineLevel=e.outlineLevel||0,this.style=e.style&&JSON.parse(JSON.stringify(e.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(e,t,n){"use strict";const r=e("../utils/col-cache");class s{constructor(e,t,n){this.table=e,this.column=t,this.index=n}_set(e,t){this.table.cacheState(),this.column[e]=t}get name(){return this.column.name}set name(e){this._set("name",e)}get filterButton(){return this.column.filterButton}set filterButton(e){this.column.filterButton=e}get style(){return this.column.style}set style(e){this.column.style=e}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(e){this._set("totalsRowLabel",e)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(e){this._set("totalsRowFunction",e)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(e){this._set("totalsRowResult",e)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(e){this._set("totalsRowFormula",e)}}t.exports=class{constructor(e,t){this.worksheet=e,t&&(this.table=t,this.validate(),this.store())}getFormula(e){switch(e.totalsRowFunction){case"none":return null;case"average":return"SUBTOTAL(101,".concat(this.table.name,"[").concat(e.name,"])");case"countNums":return"SUBTOTAL(102,".concat(this.table.name,"[").concat(e.name,"])");case"count":return"SUBTOTAL(103,".concat(this.table.name,"[").concat(e.name,"])");case"max":return"SUBTOTAL(104,".concat(this.table.name,"[").concat(e.name,"])");case"min":return"SUBTOTAL(105,".concat(this.table.name,"[").concat(e.name,"])");case"stdDev":return"SUBTOTAL(106,".concat(this.table.name,"[").concat(e.name,"])");case"var":return"SUBTOTAL(107,".concat(this.table.name,"[").concat(e.name,"])");case"sum":return"SUBTOTAL(109,".concat(this.table.name,"[").concat(e.name,"])");case"custom":return e.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+e.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:e}=this,t=(e,t,n)=>{void 0===e[t]&&(e[t]=n)};t(e,"headerRow",!0),t(e,"totalsRow",!1),t(e,"style",{}),t(e.style,"theme","TableStyleMedium2"),t(e.style,"showFirstColumn",!1),t(e.style,"showLastColumn",!1),t(e.style,"showRowStripes",!1),t(e.style,"showColumnStripes",!1);const n=(e,t)=>{if(!e)throw new Error(t)};n(e.ref,"Table must have ref"),n(e.columns,"Table must have column definitions"),n(e.rows,"Table must have row definitions"),e.tl=r.decodeAddress(e.ref);const{row:s,col:i}=e.tl;n(s>0,"Table must be on valid row"),n(i>0,"Table must be on valid col");const{width:a,filterHeight:o,tableHeight:l}=this;e.autoFilterRef=r.encode(s,i,s+o-1,i+a-1),e.tableRef=r.encode(s,i,s+l-1,i+a-1),e.columns.forEach((e,r)=>{n(e.name,"Column ".concat(r," must have a name")),0===r?t(e,"totalsRowLabel","Total"):(t(e,"totalsRowFunction","none"),e.totalsRowFormula=this.getFormula(e))})}store(){const e=(e,t)=>{t&&Object.keys(t).forEach(n=>{e[n]=t[n]})},{worksheet:t,table:n}=this,{row:r,col:s}=n.tl;let i=0;if(n.headerRow){const a=t.getRow(r+i++);n.columns.forEach((t,n)=>{const{style:r,name:i}=t,o=a.getCell(s+n);o.value=i,e(o,r)})}if(n.rows.forEach(a=>{const o=t.getRow(r+i++);a.forEach((t,r)=>{const i=o.getCell(s+r);i.value=t,e(i,n.columns[r].style)})}),n.totalsRow){const a=t.getRow(r+i++);n.columns.forEach((t,n)=>{const r=a.getCell(s+n);if(0===n)r.value=t.totalsRowLabel;else{const e=this.getFormula(t);r.value=e?{formula:t.totalsRowFormula,result:t.totalsRowResult}:null}e(r,t.style)})}}load(e){const{table:t}=this,{row:n,col:r}=t.tl;let s=0;if(t.headerRow){const i=e.getRow(n+s++);t.columns.forEach((e,t)=>{i.getCell(r+t).value=e.name})}if(t.rows.forEach(t=>{const i=e.getRow(n+s++);t.forEach((e,t)=>{i.getCell(r+t).value=e})}),t.totalsRow){const i=e.getRow(n+s++);t.columns.forEach((e,t)=>{const n=i.getCell(r+t);0===t?n.value=e.totalsRowLabel:this.getFormula(e)&&(n.value={formula:e.totalsRowFormula,result:e.totalsRowResult})})}}get model(){return this.table}set model(e){this.table=e}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const e=r.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let t=0;t<this._cache.tableHeight;t++){const n=this.worksheet.getRow(e.row+t);for(let t=0;t<this._cache.width;t++)n.getCell(e.col+t).value=null}else{for(let t=this.tableHeight;t<this._cache.tableHeight;t++){const n=this.worksheet.getRow(e.row+t);for(let t=0;t<this._cache.width;t++)n.getCell(e.col+t).value=null}for(let t=0;t<this.tableHeight;t++){const n=this.worksheet.getRow(e.row+t);for(let t=this.width;t<this._cache.width;t++)n.getCell(e.col+t).value=null}}this.store()}addRow(e,t){this.cacheState(),void 0===t?this.table.rows.push(e):this.table.rows.splice(t,0,e)}removeRows(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cacheState(),this.table.rows.splice(e,t)}getColumn(e){const t=this.table.columns[e];return new s(this,t,e)}addColumn(e,t,n){this.cacheState(),void 0===n?(this.table.columns.push(e),this.table.rows.forEach((e,n)=>{e.push(t[n])})):(this.table.columns.splice(n,0,e),this.table.rows.forEach((e,r)=>{e.splice(n,0,t[r])}))}removeColumns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.cacheState(),this.table.columns.splice(e,t),this.table.rows.forEach(n=>{n.splice(e,t)})}_assign(e,t,n){this.cacheState(),e[t]=n}get ref(){return this.table.ref}set ref(e){this._assign(this.table,"ref",e)}get name(){return this.table.name}set name(e){this.table.name=e}get displayName(){return this.table.displyName||this.table.name}set displayNamename(e){this.table.displayName=e}get headerRow(){return this.table.headerRow}set headerRow(e){this._assign(this.table,"headerRow",e)}get totalsRow(){return this.table.totalsRow}set totalsRow(e){this._assign(this.table,"totalsRow",e)}get theme(){return this.table.style.name}set theme(e){this.table.style.name=e}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(e){this.table.style.showFirstColumn=e}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(e){this.table.style.showLastColumn=e}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(e){this.table.style.showRowStripes=e}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(e){this.table.style.showColumnStripes=e}}},{"../utils/col-cache":19}],13:[function(e,t,n){"use strict";const r=e("./worksheet"),s=e("./defined-names"),i=e("../xlsx/xlsx"),a=e("../csv/csv");t.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new s}get xlsx(){return this._xlsx||(this._xlsx=new i(this)),this._xlsx}get csv(){return this._csv||(this._csv=new a(this)),this._csv}get nextId(){for(let e=1;e<this._worksheets.length;e++)if(!this._worksheets[e])return e;return this._worksheets.length||1}addWorksheet(e,t){const n=this.nextId;t&&("string"==typeof t?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),t={properties:{tabColor:{argb:t}}}):(t.argb||t.theme||t.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),t={properties:{tabColor:t}}));const s=this._worksheets.reduce((e,t)=>(t&&t.orderNo)>e?t.orderNo:e,0),i=Object.assign({},t,{id:n,name:e,orderNo:s+1,workbook:this}),a=new r(i);return this._worksheets[n]=a,a}removeWorksheetEx(e){delete this._worksheets[e.id]}removeWorksheet(e){const t=this.getWorksheet(e);t&&t.destroy()}getWorksheet(e){return void 0===e?this._worksheets.find(Boolean):"number"==typeof e?this._worksheets[e]:"string"==typeof e?this._worksheets.find(t=>t&&t.name===e):void 0}get worksheets(){return this._worksheets.slice(1).sort((e,t)=>e.orderNo-t.orderNo).filter(Boolean)}eachSheet(e){this.worksheets.forEach(t=>{e(t,t.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(e){const t=this.media.length;return this.media.push(Object.assign({},e,{type:"image"})),t}getImage(e){return this.media[e]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(e=>e.model),sheets:this.worksheets.map(e=>e.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(e){this.creator=e.creator,this.lastModifiedBy=e.lastModifiedBy,this.lastPrinted=e.lastPrinted,this.created=e.created,this.modified=e.modified,this.company=e.company,this.manager=e.manager,this.title=e.title,this.subject=e.subject,this.keywords=e.keywords,this.category=e.category,this.description=e.description,this.language=e.language,this.revision=e.revision,this.contentStatus=e.contentStatus,this.properties=e.properties,this.calcProperties=e.calcProperties,this._worksheets=[],e.worksheets.forEach(t=>{const{id:n,name:s,state:i}=t,a=e.sheets&&e.sheets.findIndex(e=>e.id===n);(this._worksheets[n]=new r({id:n,name:s,orderNo:a,state:i,workbook:this})).model=t}),this._definedNames.model=e.definedNames,this.views=e.views,this._themes=e.themes,this.media=e.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(e,t,n){"use strict";const r=e("../utils/under-dash"),s=e("../utils/col-cache"),i=e("./range"),a=e("./row"),o=e("./column"),l=e("./enums"),c=e("./image"),u=e("./table"),d=e("./data-validations"),h=e("../utils/encryptor"),{copyStyle:f}=e("../utils/copy-style");t.exports=class{constructor(e){e=e||{},this._workbook=e.workbook,this.id=e.id,this.orderNo=e.orderNo,this.name=e.name,this.state=e.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},e.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!e.pageSetup||!e.pageSetup.fitToWidth&&!e.pageSetup.fitToHeight||e.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},e.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},e.headerFooter),this.dataValidations=new d,this.views=e.views||[],this.autoFilter=e.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(e){if(void 0===e&&(e="sheet"+this.id),this._name!==e){if("string"!=typeof e)throw new Error("The name has to be a string.");if(""===e)throw new Error("The name can't be empty.");if("History"===e)throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(e))throw new Error("Worksheet name ".concat(e," cannot include any of the following characters: * ? : \\ / [ ]"));if(/(^')|('$)/.test(e))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+e);if(e&&e.length>31&&(console.warn("Worksheet name ".concat(e," exceeds 31 chars. This will be truncated")),e=e.substring(0,31)),this._workbook._worksheets.find(t=>t&&t.name.toLowerCase()===e.toLowerCase()))throw new Error("Worksheet name already exists: "+e);this._name=e}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const e=new i;return this._rows.forEach(t=>{if(t){const n=t.dimensions;n&&e.expand(t.number,n.min,t.number,n.max)}}),e}get columns(){return this._columns}set columns(e){this._headerRowCount=e.reduce((e,t)=>{const n=(t.header?1:t.headers&&t.headers.length)||0;return Math.max(e,n)},0);let t=1;const n=this._columns=[];e.forEach(e=>{const r=new o(this,t++,!1);n.push(r),r.defn=e})}getColumnKey(e){return this._keys[e]}setColumnKey(e,t){this._keys[e]=t}deleteColumnKey(e){delete this._keys[e]}eachColumnKey(e){r.each(this._keys,e)}getColumn(e){if("string"==typeof e){const t=this._keys[e];if(t)return t;e=s.l2n(e)}if(this._columns||(this._columns=[]),e>this._columns.length){let t=this._columns.length+1;for(;t<=e;)this._columns.push(new o(this,t++))}return this._columns[e-1]}spliceColumns(e,t){const n=this._rows.length;for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];if(s.length>0)for(let c=0;c<n;c++){const n=[e,t];s.forEach(e=>{n.push(e[c]||null)});const r=this.getRow(c+1);r.splice.apply(r,n)}else this._rows.forEach(n=>{n&&n.splice(e,t)});const a=s.length-t,o=e+t,l=this._columns.length;if(a<0)for(let c=e+s.length;c<=l;c++)this.getColumn(c).defn=this.getColumn(c-a).defn;else if(a>0)for(let c=l;c>=o;c--)this.getColumn(c+a).defn=this.getColumn(c).defn;for(let c=e;c<e+s.length;c++)this.getColumn(c).defn=null;this.workbook.definedNames.spliceColumns(this.name,e,t,s.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let e=0;return this.eachRow(t=>{e=Math.max(e,t.cellCount)}),e}get actualColumnCount(){const e=[];let t=0;return this.eachRow(n=>{n.eachCell(n=>{let{col:r}=n;e[r]||(e[r]=!0,t++)})}),t}_commitRow(){}get _lastRowNumber(){const e=this._rows;let t=e.length;for(;t>0&&void 0===e[t-1];)t--;return t}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(e){return this._rows[e-1]}findRows(e,t){return this._rows.slice(e-1,e-1+t)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let e=0;return this.eachRow(()=>{e++}),e}getRow(e){let t=this._rows[e-1];return t||(t=this._rows[e-1]=new a(this,e)),t}getRows(e,t){if(t<1)return;const n=[];for(let r=e;r<e+t;r++)n.push(this.getRow(r));return n}addRow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"n";const n=this._nextRow,r=this.getRow(n);return r.values=e,this._setStyleOption(n,"i"===t[0]?t:"n"),r}addRows(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"n";const n=[];return e.forEach(e=>{n.push(this.addRow(e,t))}),n}insertRow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n";return this.spliceRows(e,0,t),this._setStyleOption(e,n),this.getRow(e)}insertRows(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"n";if(this.spliceRows(e,0,...t),"n"!==n)for(let r=0;r<t.length;r++)"o"===n[0]&&void 0!==this.findRow(t.length+e+r)?this._copyStyle(t.length+e+r,e+r,"+"===n[1]):"i"===n[0]&&void 0!==this.findRow(e-1)&&this._copyStyle(e-1,e+r,"+"===n[1]);return this.getRows(e,t.length)}_setStyleOption(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"n";"o"===t[0]&&void 0!==this.findRow(e+1)?this._copyStyle(e+1,e,"+"===t[1]):"i"===t[0]&&void 0!==this.findRow(e-1)&&this._copyStyle(e-1,e,"+"===t[1])}_copyStyle(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.getRow(e),s=this.getRow(t);s.style=f(r.style),r.eachCell({includeEmpty:n},(e,t)=>{s.getCell(t).style=f(e.style)}),s.height=r.height}duplicateRow(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this._rows[e-1],s=new Array(t).fill(r.values);this.spliceRows(e+1,n?0:t,...s);for(let i=0;i<t;i++){const t=this._rows[e+i];t.style=r.style,t.height=r.height,r.eachCell({includeEmpty:!0},(e,n)=>{t.getCell(n).style=e.style})}}spliceRows(e,t){const n=e+t;for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];const a=s.length,o=a-t,l=this._rows.length;let c,u;if(o<0)for(e===l&&(this._rows[l-1]=void 0),c=n;c<=l;c++)if(u=this._rows[c-1],u){const e=this.getRow(c+o);e.values=u.values,e.style=u.style,e.height=u.height,u.eachCell({includeEmpty:!0},(t,n)=>{e.getCell(n).style=t.style}),this._rows[c-1]=void 0}else this._rows[c+o-1]=void 0;else if(o>0)for(c=l;c>=n;c--)if(u=this._rows[c-1],u){const e=this.getRow(c+o);e.values=u.values,e.style=u.style,e.height=u.height,u.eachCell({includeEmpty:!0},(t,n)=>{if(e.getCell(n).style=t.style,"MergeValue"===t._value.constructor.name){const e=this.getRow(t._row._number+a).getCell(n),r=t._value._master,s=this.getRow(r._row._number+a).getCell(r._column._number);e.merge(s)}})}else this._rows[c+o-1]=void 0;for(c=0;c<a;c++){const t=this.getRow(e+c);t.style={},t.values=s[c]}this.workbook.definedNames.spliceRows(this.name,e,t,a)}eachRow(e,t){if(t||(t=e,e=void 0),e&&e.includeEmpty){const e=this._rows.length;for(let n=1;n<=e;n++)t(this.getRow(n),n)}else this._rows.forEach(e=>{e&&e.hasValues&&t(e,e.number)})}getSheetValues(){const e=[];return this._rows.forEach(t=>{t&&(e[t.number]=t.values)}),e}findCell(e,t){const n=s.getAddress(e,t),r=this._rows[n.row-1];return r?r.findCell(n.col):void 0}getCell(e,t){const n=s.getAddress(e,t);return this.getRow(n.row).getCellEx(n)}mergeCells(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new i(t);this._mergeCellsInternal(r)}mergeCellsWithoutStyle(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new i(t);this._mergeCellsInternal(r,!0)}_mergeCellsInternal(e,t){r.each(this._merges,t=>{if(t.intersects(e))throw new Error("Cannot merge already merged cells")});const n=this.getCell(e.top,e.left);for(let r=e.top;r<=e.bottom;r++)for(let s=e.left;s<=e.right;s++)(r>e.top||s>e.left)&&this.getCell(r,s).merge(n,t);this._merges[n.address]=e}_unMergeMaster(e){const t=this._merges[e.address];if(t){for(let e=t.top;e<=t.bottom;e++)for(let n=t.left;n<=t.right;n++)this.getCell(e,n).unmerge();delete this._merges[e.address]}}get hasMerges(){return r.some(this._merges,Boolean)}unMergeCells(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new i(t);for(let s=r.top;s<=r.bottom;s++)for(let e=r.left;e<=r.right;e++){const t=this.findCell(s,e);t&&(t.type===l.ValueType.Merge?this._unMergeMaster(t.master):this._merges[t.address]&&this._unMergeMaster(t))}}fillFormula(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"shared";const i=s.decode(e),{top:a,left:o,bottom:l,right:c}=i,u=c-o+1,d=s.encodeAddress(a,o),h="shared"===r;let f;f="function"==typeof n?n:Array.isArray(n)?Array.isArray(n[0])?(e,t)=>n[e-a][t-o]:(e,t)=>n[(e-a)*u+(t-o)]:()=>{};let p=!0;for(let s=a;s<=l;s++)for(let n=o;n<=c;n++)p?(this.getCell(s,n).value={shareType:r,formula:t,ref:e,result:f(s,n)},p=!1):this.getCell(s,n).value=h?{sharedFormula:d,result:f(s,n)}:f(s,n)}addImage(e,t){const n={type:"image",imageId:e,range:t};this._media.push(new c(this,n))}getImages(){return this._media.filter(e=>"image"===e.type)}addBackgroundImage(e){const t={type:"background",imageId:e};this._media.push(new c(this,t))}getBackgroundImageId(){const e=this._media.find(e=>"background"===e.type);return e&&e.imageId}protect(e,t){return new Promise(n=>{this.sheetProtection={sheet:!0},t&&"spinCount"in t&&(t.spinCount=Number.isFinite(t.spinCount)?Math.round(Math.max(0,t.spinCount)):1e5),e&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=h.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=t&&"spinCount"in t?t.spinCount:1e5,this.sheetProtection.hashValue=h.convertPasswordToHash(e,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),t&&(this.sheetProtection=Object.assign(this.sheetProtection,t),!e&&"spinCount"in t&&delete this.sheetProtection.spinCount),n()})}unprotect(){this.sheetProtection=null}addTable(e){const t=new u(this,e);return this.tables[e.name]=t,t}getTable(e){return this.tables[e]}removeTable(e){delete this.tables[e]}getTables(){return Object.values(this.tables)}addConditionalFormatting(e){this.conditionalFormattings.push(e)}removeConditionalFormatting(e){"number"==typeof e?this.conditionalFormattings.splice(e,1):this.conditionalFormattings=e instanceof Function?this.conditionalFormattings.filter(e):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(e){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=e}get model(){const e={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(e=>e.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(e=>e.model),conditionalFormattings:this.conditionalFormattings};e.cols=o.toModel(this.columns);const t=e.rows=[],n=e.dimensions=new i;return this._rows.forEach(e=>{const r=e&&e.model;r&&(n.expand(r.number,r.min,r.number,r.max),t.push(r))}),e.merges=[],r.each(this._merges,t=>{e.merges.push(t.range)}),e}_parseRows(e){this._rows=[],e.rows.forEach(e=>{const t=new a(this,e.number);this._rows[t.number-1]=t,t.model=e})}_parseMergeCells(e){r.each(e.mergeCells,e=>{this.mergeCellsWithoutStyle(e)})}set model(e){this.name=e.name,this._columns=o.fromModel(this,e.cols),this._parseRows(e),this._parseMergeCells(e),this.dataValidations=new d(e.dataValidations),this.properties=e.properties,this.pageSetup=e.pageSetup,this.headerFooter=e.headerFooter,this.views=e.views,this.autoFilter=e.autoFilter,this._media=e.media.map(e=>new c(this,e)),this.sheetProtection=e.sheetProtection,this.tables=e.tables.reduce((e,t)=>{const n=new u;return n.model=t,e[t.name]=n,e},{}),this.conditionalFormattings=e.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(e,t,n){"use strict";e("core-js/modules/es.promise"),e("core-js/modules/es.promise.finally"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.values"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.async-iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.find"),e("core-js/modules/es.string.from-code-point"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.number.is-nan"),e("regenerator-runtime/runtime");const r={Workbook:e("./doc/workbook")},s=e("./doc/enums");Object.keys(s).forEach(e=>{r[e]=s[e]}),t.exports=r},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(e,t,n){"use strict";const r="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");n.bufferToString=function(e){return"string"==typeof e?e:r?r.decode(e):e.toString()}},{}],17:[function(e,t,n){"use strict";const r="undefined"==typeof TextEncoder?null:new TextEncoder("utf-8"),{Buffer:s}=e("buffer");n.stringToBuffer=function(e){return"string"!=typeof e?e:r?s.from(r.encode(e).buffer):s.from(e)}},{buffer:220}],18:[function(e,t,n){"use strict";const r=e("./under-dash"),s=e("./col-cache");t.exports=class{constructor(e){this.template=e,this.sheets={}}addCell(e){this.addCellEx(s.decodeEx(e))}getCell(e){return this.findCellEx(s.decodeEx(e),!0)}findCell(e){return this.findCellEx(s.decodeEx(e),!1)}findCellAt(e,t,n){const r=this.sheets[e],s=r&&r[t];return s&&s[n]}addCellEx(e){if(e.top)for(let t=e.top;t<=e.bottom;t++)for(let n=e.left;n<=e.right;n++)this.getCellAt(e.sheetName,t,n);else this.findCellEx(e,!0)}getCellEx(e){return this.findCellEx(e,!0)}findCellEx(e,t){const n=this.findSheet(e,t),r=this.findSheetRow(n,e,t);return this.findRowCell(r,e,t)}getCellAt(e,t,n){const r=this.sheets[e]||(this.sheets[e]=[]),i=r[t]||(r[t]=[]);return i[n]||(i[n]={sheetName:e,address:s.n2l(n)+t,row:t,col:n})}removeCellEx(e){const t=this.findSheet(e);if(!t)return;const n=this.findSheetRow(t,e);n&&delete n[e.col]}forEachInSheet(e,t){const n=this.sheets[e];n&&n.forEach((e,n)=>{e&&e.forEach((e,r)=>{e&&t(e,n,r)})})}forEach(e){r.each(this.sheets,(t,n)=>{this.forEachInSheet(n,e)})}map(e){const t=[];return this.forEach(n=>{t.push(e(n))}),t}findSheet(e,t){const n=e.sheetName;return this.sheets[n]?this.sheets[n]:t?this.sheets[n]=[]:void 0}findSheetRow(e,t,n){const{row:r}=t;return e&&e[r]?e[r]:n?e[r]=[]:void 0}findRowCell(e,t,n){const{col:r}=t;return e&&e[r]?e[r]:n?e[r]=this.template?Object.assign(t,JSON.parse(JSON.stringify(this.template))):t:void 0}spliceRows(e,t,n,r){const s=this.sheets[e];if(s){const e=[];for(let t=0;t<r;t++)e.push([]);s.splice(t,n,...e)}}spliceColumns(e,t,n,s){const i=this.sheets[e];if(i){const e=[];for(let t=0;t<s;t++)e.push(null);r.each(i,r=>{r.splice(t,n,...e)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(e,t,n){"use strict";const s=/^[A-Z]+\d+$/,i={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:e=>e<=26?1:e<=676?2:3,_fill(e){let t,n,r,s,i,a=1;if(e>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&e>=1){for(;a<=26;)t=this._dictionary[a-1],this._n2l[a]=t,this._l2n[t]=a,a++;this._l2nFill=1}if(this._l2nFill<2&&e>=2){for(a=27;a<=702;)n=a-27,r=n%26,s=Math.floor(n/26),t=this._dictionary[s]+this._dictionary[r],this._n2l[a]=t,this._l2n[t]=a,a++;this._l2nFill=2}if(this._l2nFill<3&&e>=3){for(a=703;a<=16384;)n=a-703,r=n%26,s=Math.floor(n/26)%26,i=Math.floor(n/676),t=this._dictionary[i]+this._dictionary[s]+this._dictionary[r],this._n2l[a]=t,this._l2n[t]=a,a++;this._l2nFill=3}},l2n(e){if(this._l2n[e]||this._fill(e.length),!this._l2n[e])throw new Error("Out of bounds. Invalid column letter: "+e);return this._l2n[e]},n2l(e){if(e<1||e>16384)throw new Error(e+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[e]||this._fill(this._level(e)),this._n2l[e]},_hash:{},validateAddress(e){if(!s.test(e))throw new Error("Invalid Address: "+e);return!0},decodeAddress(e){const t=e.length<5&&this._hash[e];if(t)return t;let n=!1,r="",s=0,i=!1,a="",o=0;for(let c,u=0;u<e.length;u++)if(c=e.charCodeAt(u),!i&&c>=65&&c<=90)n=!0,r+=e[u],s=26*s+c-64;else if(c>=48&&c<=57)i=!0,a+=e[u],o=10*o+c-48;else if(i&&n&&36!==c)break;if(n){if(s>16384)throw new Error("Out of bounds. Invalid column letter: "+r)}else s=void 0;i||(o=void 0);const l={address:e=r+a,col:s,row:o,$col$row:"$".concat(r,"$").concat(a)};return s<=100&&o<=100&&(this._hash[e]=l,this._hash[l.$col$row]=l),l},getAddress(e,t){if(t){const n=this.n2l(t)+e;return this.decodeAddress(n)}return this.decodeAddress(e)},decode(e){const t=e.split(":");if(2===t.length){const e=this.decodeAddress(t[0]),n=this.decodeAddress(t[1]),r={top:Math.min(e.row,n.row),left:Math.min(e.col,n.col),bottom:Math.max(e.row,n.row),right:Math.max(e.col,n.col)};return r.tl=this.n2l(r.left)+r.top,r.br=this.n2l(r.right)+r.bottom,r.dimensions="".concat(r.tl,":").concat(r.br),r}return this.decodeAddress(e)},decodeEx(e){const t=e.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),n=t[1]||t[2],s=t[3],i=s.split(":");if(i.length>1){let e=this.decodeAddress(i[0]),t=this.decodeAddress(i[1]);const r=Math.min(e.row,t.row),s=Math.min(e.col,t.col),a=Math.max(e.row,t.row),o=Math.max(e.col,t.col);return e=this.n2l(s)+r,t=this.n2l(o)+a,{top:r,left:s,bottom:a,right:o,sheetName:n,tl:{address:e,col:s,row:r,$col$row:"$".concat(this.n2l(s),"$").concat(r),sheetName:n},br:{address:t,col:o,row:a,$col$row:"$".concat(this.n2l(o),"$").concat(a),sheetName:n},dimensions:"".concat(e,":").concat(t)}}if(s.startsWith("#"))return n?{sheetName:n,error:s}:{error:s};const a=this.decodeAddress(s);return n?r({sheetName:n},a):a},encodeAddress:(e,t)=>i.n2l(t)+e,encode(){switch(arguments.length){case 2:return i.encodeAddress(arguments[0],arguments[1]);case 4:return"".concat(i.encodeAddress(arguments[0],arguments[1]),":").concat(i.encodeAddress(arguments[2],arguments[3]));default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(e,t){const[n,r,,s,i]=e,[a,o]=t;return a>=n&&a<=s&&o>=r&&o<=i}};t.exports=i},{}],20:[function(e,t,n){"use strict";const s=(e,t)=>r(r({},e),t.reduce((t,n)=>(e[n]&&(t[n]=r({},e[n])),t),{})),i=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];e[n]&&(t[n]=s(e[n],r))};n.copyStyle=e=>{if(!e)return e;if(t=e,0===Object.keys(t).length)return{};var t;const n=r({},e);return i(e,n,"font",["color"]),i(e,n,"alignment"),i(e,n,"protection"),e.border&&(i(e,n,"border"),i(e.border,n.border,"top",["color"]),i(e.border,n.border,"left",["color"]),i(e.border,n.border,"bottom",["color"]),i(e.border,n.border,"right",["color"]),i(e.border,n.border,"diagonal",["color"])),e.fill&&(i(e,n,"fill",["fgColor","bgColor","center"]),e.fill.stops&&(n.fill.stops=e.fill.stops.map(e=>s(e,["color"])))),n}},{}],21:[function(e,t,n){(function(n){(function(){"use strict";const r=e("crypto"),s={hash(e){const t=r.createHash(e);for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return t.update(n.concat(i)),t.digest()},convertPasswordToHash(e,t,s,i){if(t=t.toLowerCase(),r.getHashes().indexOf(t)<0)throw new Error("Hash algorithm '".concat(t,"' not supported!"));const a=n.from(e,"utf16le");let o=this.hash(t,n.from(s,"base64"),a);for(let r=0;r<i;r++){const e=n.alloc(4);e.writeUInt32LE(r,0),o=this.hash(t,o,e)}return o.toString("base64")},randomBytes:e=>r.randomBytes(e)};t.exports=s}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(e,t,n){"use strict";const{SaxesParser:r}=e("saxes"),{PassThrough:o}=e("readable-stream"),{bufferToString:l}=e("./browser-buffer-decode");t.exports=function(){var e=i(function*(e){e.pipe&&!e[Symbol.asyncIterator]&&(e=e.pipe(new o));const t=new r;let n;t.on("error",e=>{n=e});let i=[];t.on("opentag",e=>i.push({eventType:"opentag",value:e})),t.on("text",e=>i.push({eventType:"text",value:e})),t.on("closetag",e=>i.push({eventType:"closetag",value:e}));var c,u=!1,d=!1;try{for(var h,f=a(e);u=!(h=yield s(f.next())).done;u=!1){const e=h.value;if(t.write(l(e)),n)throw n;yield i,i=[]}}catch(p){d=!0,c=p}finally{try{u&&null!=f.return&&(yield s(f.return()))}finally{if(d)throw c}}});return function(t){return e.apply(this,arguments)}}()},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(e,t,n){"use strict";const r=e("./col-cache"),s=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,i=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;t.exports={slideFormula:function(e,t,n){const a=r.decode(t),o=r.decode(n);return e.replace(s,(e,t,n,s,l)=>{if(l)return e;const c=i.exec(s);if(c){const n=c[1],s=c[2].toUpperCase(),i=c[3],l=c[4];if(s.length>3||3===s.length&&s>"XFD")return e;let u=r.l2n(s),d=parseInt(l,10);return n||(u+=o.col-a.col),i||(d+=o.row-a.row),(t||"")+(n||"")+r.n2l(u)+(i||"")+d}return e})}}},{"./col-cache":19}],24:[function(e,t,n){(function(n,r){(function(){"use strict";const s=e("readable-stream"),i=e("./utils"),a=e("./string-buf");class o{constructor(e,t){this._data=e,this._encoding=t}get length(){return this.toBuffer().length}copy(e,t,n,r){return this.toBuffer().copy(e,t,n,r)}toBuffer(){return this._buffer||(this._buffer=r.from(this._data,this._encoding)),this._buffer}}class l{constructor(e){this._data=e}get length(){return this._data.length}copy(e,t,n,r){return this._data._buf.copy(e,t,n,r)}toBuffer(){return this._data.toBuffer()}}class c{constructor(e){this._data=e}get length(){return this._data.length}copy(e,t,n,r){this._data.copy(e,t,n,r)}toBuffer(){return this._data}}class u{constructor(e){this.size=e,this.buffer=r.alloc(e),this.iRead=0,this.iWrite=0}toBuffer(){if(0===this.iRead&&this.iWrite===this.size)return this.buffer;const e=r.alloc(this.iWrite-this.iRead);return this.buffer.copy(e,0,this.iRead,this.iWrite),e}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(e){let t;return 0===e?null:void 0===e||e>=this.length?(t=this.toBuffer(),this.iRead=this.iWrite,t):(t=r.alloc(e),this.buffer.copy(t,0,this.iRead,e),this.iRead+=e,t)}write(e,t,n){const r=Math.min(n,this.size-this.iWrite);return e.copy(this.buffer,this.iWrite,t,t+r),this.iWrite+=r,r}}const d=function(e){e=e||{},this.bufSize=e.bufSize||1048576,this.buffers=[],this.batch=e.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};i.inherits(d,s.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return r.concat(this.buffers.map(e=>e.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const e=this.buffers[this.buffers.length-1];if(!e.full)return e}const e=new u(this.bufSize);return this.buffers.push(e),e},async _pipe(e){await Promise.all(this.pipes.map(function(t){return new Promise(n=>{t.write(e.toBuffer(),()=>{n()})})}))},_writeToBuffers(e){let t=0;const n=e.length;for(;t<n;)t+=this._getWritableBuffer().write(e,t,n-t)},async write(e,t,s){let u;if(t instanceof Function&&(s=t,t="utf8"),s=s||i.nop,e instanceof a)u=new l(e);else if(e instanceof r)u=new c(e);else{if(!("string"==typeof e||e instanceof String||e instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");u=new o(e,t)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(u);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(u),n.nextTick(s)):(await this._pipe(u),s());else this.paused||this.emit("data",u.toBuffer()),this._writeToBuffers(u),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(e,t,n){const r=e=>{e?n(e):(this._flush(),this.pipes.forEach(e=>{e.end()}),this.emit("finish"))};e?this.write(e,t,r):r()},read(e){let t;if(e){for(t=[];e&&this.buffers.length&&!this.buffers[0].eod;){const n=this.buffers[0],r=n.read(e);e-=r.length,t.push(r),n.eod&&n.full&&this.buffers.shift()}return r.concat(t)}return t=this.buffers.map(e=>e.toBuffer()).filter(Boolean),this.buffers=[],r.concat(t)},setEncoding(e){this.encoding=e},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(e){this.pipes.push(e),!this.paused&&this.buffers.length&&this.end()},unpipe(e){this.pipes=this.pipes.filter(t=>t!==e)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),t.exports=d}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(e,t,n){(function(e){(function(){"use strict";t.exports=class{constructor(t){this._buf=e.alloc(t&&t.size||16384),this._encoding=t&&t.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=e.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(e){e=e||0,this._buffer=void 0,this._inPos=e}_grow(t){let n=2*this._buf.length;for(;n<t;)n*=2;const r=e.alloc(n);this._buf.copy(r,0),this._buf=r}addText(e){this._buffer=void 0;let t=this._inPos+this._buf.write(e,this._inPos,this._encoding);for(;t>=this._buf.length-4;)this._grow(this._inPos+e.length),t=this._inPos+this._buf.write(e,this._inPos,this._encoding);this._inPos=t}addStringBuf(e){e.length&&(this._buffer=void 0,this.length+e.length>this.capacity&&this._grow(this.length+e.length),e._buf.copy(this._buf,this._inPos,0,e.length),this._inPos+=e.length)}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],26:[function(e,t,n){"use strict";const{toString:r}=Object.prototype,s=/["&<>]/,i={each:function(e,t){e&&(Array.isArray(e)?e.forEach(t):Object.keys(e).forEach(n=>{t(e[n],n)}))},some:function(e,t){return!!e&&(Array.isArray(e)?e.some(t):Object.keys(e).some(n=>t(e[n],n)))},every:function(e,t){return!e||(Array.isArray(e)?e.every(t):Object.keys(e).every(n=>t(e[n],n)))},map:function(e,t){return e?Array.isArray(e)?e.map(t):Object.keys(e).map(n=>t(e[n],n)):[]},keyBy:(e,t)=>e.reduce((e,n)=>(e[n[t]]=n,e),{}),isEqual:function(e,t){const n=typeof e,r=typeof t,s=Array.isArray(e),a=Array.isArray(t);let o;if(n!==r)return!1;if("object"===typeof e){if(s||a)return!(!s||!a)&&e.length===t.length&&e.every((e,n)=>{const r=t[n];return i.isEqual(e,r)});if(null===e||null===t)return e===t;if(o=Object.keys(e),Object.keys(t).length!==o.length)return!1;for(const e of o)if(!t.hasOwnProperty(e))return!1;return i.every(e,(e,n)=>{const r=t[n];return i.isEqual(e,r)})}return e===t},escapeHtml(e){const t=s.exec(e);if(!t)return e;let n="",r="",i=0,a=t.index;for(;a<e.length;a++){switch(e.charAt(a)){case'"':r="&quot;";break;case"&":r="&amp;";break;case"'":r="&apos;";break;case"<":r="&lt;";break;case">":r="&gt;";break;default:continue}i!==a&&(n+=e.substring(i,a)),i=a+1,n+=r}return i!==a?n+e.substring(i,a):n},strcmp:(e,t)=>e<t?-1:e>t?1:0,isUndefined:e=>"[object Undefined]"===r.call(e),isObject:e=>"[object Object]"===r.call(e),deepMerge(){const e=arguments[0]||{},{length:t}=arguments;let n,r,s;function a(t,a){n=e[a],s=Array.isArray(t),i.isObject(t)||s?(s?(s=!1,r=n&&Array.isArray(n)?n:[]):r=n&&i.isObject(n)?n:{},e[a]=i.deepMerge(r,t)):i.isUndefined(t)||(e[a]=t)}for(let o=0;o<t;o++)i.each(arguments[o],a);return e}};t.exports=i},{}],27:[function(e,t,r){(function(n,r){(function(){"use strict";const s=e("fs"),i=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,a={nop(){},promiseImmediate:e=>new Promise(t=>{n.setImmediate?r(()=>{t(e)}):setTimeout(()=>{t(e)},1)}),inherits:function(e,t,n,r){e.super_=t,r||(r=n,n=null),n&&Object.keys(n).forEach(t=>{Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});const s={constructor:{value:e,enumerable:!1,writable:!1,configurable:!0}};r&&Object.keys(r).forEach(e=>{s[e]=Object.getOwnPropertyDescriptor(r,e)}),e.prototype=Object.create(t.prototype,s)},dateToExcel:(e,t)=>25569+e.getTime()/864e5-(t?1462:0),excelToDate(e,t){const n=Math.round(24*(e-25569+(t?1462:0))*3600*1e3);return new Date(n)},parsePath(e){const t=e.lastIndexOf("/");return{path:e.substring(0,t),name:e.substring(t+1)}},getRelsPath(e){const t=a.parsePath(e);return"".concat(t.path,"/_rels/").concat(t.name,".rels")},xmlEncode(e){const t=i.exec(e);if(!t)return e;let n="",r="",s=0,a=t.index;for(;a<e.length;a++){const t=e.charCodeAt(a);switch(t){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&apos;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;case 127:r="";break;default:if(t<=31&&(t<=8||t>=11&&13!==t)){r="";break}continue}s!==a&&(n+=e.substring(s,a)),s=a+1,r&&(n+=r)}return s!==a?n+e.substring(s,a):n},xmlDecode:e=>e.replace(/&([a-z]*);/g,e=>{switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return e}}),validInt(e){const t=parseInt(e,10);return Number.isNaN(t)?0:t},isDateFmt:e=>!!e&&null!==(e=(e=e.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/),fs:{exists:e=>new Promise(t=>{s.access(e,s.constants.F_OK,e=>{t(!e)})})},toIsoDateString:e=>e.toIsoString().subsstr(0,10),parseBoolean:e=>!0===e||"true"===e||1===e||"1"===e};t.exports=a}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{fs:216,timers:523}],28:[function(e,t,n){"use strict";const r=e("./under-dash"),s=e("./utils");function i(e,t,n){e.push(" ".concat(t,'="').concat(s.xmlEncode(n.toString()),'"'))}function a(e,t){if(t){const n=[];r.each(t,(e,t)=>{void 0!==e&&i(n,t,e)}),e.push(n.join(""))}}class o{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(e){const t=this._xml;t.push("<?xml"),a(t,e),t.push("?>\n")}openNode(e,t){const n=this.tos,r=this._xml;n&&this.open&&r.push(">"),this._stack.push(e),r.push("<"),r.push(e),a(r,t),this.leaf=!0,this.open=!0}addAttribute(e,t){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");void 0!==t&&i(this._xml,e,t)}addAttributes(e){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");a(this._xml,e)}writeText(e){const t=this._xml;this.open&&(t.push(">"),this.open=!1),this.leaf=!1,t.push(s.xmlEncode(e.toString()))}writeXml(e){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(e)}closeNode(){const e=this._stack.pop(),t=this._xml;this.leaf?t.push("/>"):(t.push("</"),t.push(e),t.push(">")),this.open=!1,this.leaf=!1}leafNode(e,t,n){this.openNode(e,t),void 0!==n&&this.writeText(n),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const e=this._rollbacks.pop();this._xml.length>e.xml&&this._xml.splice(e.xml,this._xml.length-e.xml),this._stack.length>e.stack&&this._stack.splice(e.stack,this._stack.length-e.stack),this.leaf=e.leaf,this.open=e.open}get xml(){return this.closeAll(),this._xml.join("")}}o.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},t.exports=o},{"./under-dash":26,"./utils":27}],29:[function(e,t,n){(function(n){(function(){"use strict";const r=e("events"),s=e("jszip"),i=e("./stream-buf"),{stringToBuffer:a}=e("./browser-buffer-encode");class o extends r.EventEmitter{constructor(e){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},e),this.zip=new s,this.stream=new i}append(e,t){t.hasOwnProperty("base64")&&t.base64?this.zip.file(t.name,e,{base64:!0}):(n.browser&&"string"==typeof e&&(e=a(e)),this.zip.file(t.name,e))}async finalize(){const e=await this.zip.generateAsync(this.options);this.stream.end(e),this.emit("finish")}read(e){return this.stream.read(e)}setEncoding(e){return this.stream.setEncoding(e)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(e,t){return this.stream.pipe(e,t)}unpipe(e){return this.stream.unpipe(e)}unshift(e){return this.stream.unshift(e)}wrap(e){return this.stream.wrap(e)}}t.exports={ZipWriter:o}}).call(this)}).call(this,e("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(e,t,n){"use strict";t.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5e74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5e74" mm"\u6708" dd"\u65e5"'},28:{"zh-tw":'[$-404]e"\u5e74"m"\u6708"d"\u65e5"',"zh-cn":'m"\u6708"d"\u65e5"',"ja-jp":'[$-411]ggge"\u5e74"m"\u6708"d"\u65e5"',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e"\u5e74"m"\u6708"d"\u65e5"',"zh-cn":'m"\u6708"d"\u65e5"',"ja-jp":'[$-411]ggge"\u5e74"m"\u6708"d"\u65e5"',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy"\u5e74"m"\u6708"d"\u65e5"',"zh-cn":'yyyy"\u5e74"m"\u6708"d"\u65e5"',"ja-jp":'yyyy"\u5e74"m"\u6708"d"\u65e5"',"ko-kr":'yyyy"\ub144" mm"\uc6d4" dd"\uc77c"'},32:{"zh-tw":'hh"\u6642"mm"\u5206"',"zh-cn":'h"\u65f6"mm"\u5206"',"ja-jp":'h"\u6642"mm"\u5206"',"ko-kr":'h"\uc2dc" mm"\ubd84"'},33:{"zh-tw":'hh"\u6642"mm"\u5206"ss"\u79d2"',"zh-cn":'h"\u65f6"mm"\u5206"ss"\u79d2"',"ja-jp":'h"\u6642"mm"\u5206"ss"\u79d2"',"ko-kr":'h"\uc2dc" mm"\ubd84" ss"\ucd08"'},34:{"zh-tw":'\u4e0a\u5348/\u4e0b\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4e0a\u5348/\u4e0b\u5348 h"\u65f6"mm"\u5206"',"ja-jp":'yyyy"\u5e74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'\u4e0a\u5348/\u4e0b\u5348 hh"\u6642"mm"\u5206"ss"\u79d2"',"zh-cn":'\u4e0a\u5348/\u4e0b\u5348 h"\u65f6"mm"\u5206"ss"\u79d2"',"ja-jp":'m"\u6708"d"\u65e5"',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5e74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5e74" mm"\u6708" dd"\u65e5"'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5e74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5e74" mm"\u6708" dd"\u65e5"'},51:{"zh-tw":'[$-404]e"\u5e74"m"\u6708"d"\u65e5"',"zh-cn":'m"\u6708"d"\u65e5"',"ja-jp":'[$-411]ggge"\u5e74"m"\u6708"d"\u65e5"',"ko-kr":"mm-dd"},52:{"zh-tw":'\u4e0a\u5348/\u4e0b\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'yyyy"\u5e74"m"\u6708"',"ja-jp":'yyyy"\u5e74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'\u4e0a\u5348/\u4e0b\u5348 hh"\u6642"mm"\u5206"ss"\u79d2"',"zh-cn":'m"\u6708"d"\u65e5"',"ja-jp":'m"\u6708"d"\u65e5"',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e"\u5e74"m"\u6708"d"\u65e5"',"zh-cn":'m"\u6708"d"\u65e5"',"ja-jp":'[$-411]ggge"\u5e74"m"\u6708"d"\u65e5"',"ko-kr":"mm-dd"},55:{"zh-tw":'\u4e0a\u5348/\u4e0b\u5348 hh"\u6642"mm"\u5206"',"zh-cn":'\u4e0a\u5348/\u4e0b\u5348 h"\u65f6"mm"\u5206"',"ja-jp":'yyyy"\u5e74"m"\u6708"',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'\u4e0a\u5348/\u4e0b\u5348 hh"\u6642"mm"\u5206"ss"\u79d2"',"zh-cn":'\u4e0a\u5348/\u4e0b\u5348 h"\u65f6"mm"\u5206"ss"\u79d2"',"ja-jp":'m"\u6708"d"\u65e5"',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy"\u5e74"m"\u6708"',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"\u5e74" mm"\u6708" dd"\u65e5"'},58:{"zh-tw":'[$-404]e"\u5e74"m"\u6708"d"\u65e5"',"zh-cn":'m"\u6708"d"\u65e5"',"ja-jp":'[$-411]ggge"\u5e74"m"\u6708"d"\u65e5"',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(e,t,n){"use strict";t.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(e,t,n){"use strict";const r=e("../../utils/parse-sax"),s=e("../../utils/xml-stream");class i{prepare(){}render(){}parseOpen(e){}parseText(e){}parseClose(e){}reconcile(e,t){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(e=>{e instanceof i?e.reset():e.xform&&e.xform.reset()})}mergeModel(e){this.model=Object.assign(this.model||{},e)}async parse(e){var t,n=!1,r=!1;try{for(var s,i=a(e);n=!(s=await i.next()).done;n=!1){const e=s.value;for(const{eventType:t,value:n}of e)if("opentag"===t)this.parseOpen(n);else if("text"===t)this.parseText(n);else if("closetag"===t&&!this.parseClose(n.name))return this.model}}catch(o){r=!0,t=o}finally{try{n&&null!=i.return&&await i.return()}finally{if(r)throw t}}return this.model}async parseStream(e){return this.parse(r(e))}get xml(){return this.toXml(this.model)}toXml(e){const t=new s;return this.render(t,e),t.xml}static toAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e){if(n)return t}else if(n||e!==t)return e.toString()}static toStringAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.toAttribute(e,t,n)}static toStringValue(e,t){return void 0===e?t:e}static toBoolAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e){if(n)return t}else if(n||e!==t)return e?"1":"0"}static toBoolValue(e,t){return void 0===e?t:"1"===e}static toIntAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.toAttribute(e,t,n)}static toIntValue(e,t){return void 0===e?t:parseInt(e,10)}static toFloatAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i.toAttribute(e,t,n)}static toFloatValue(e,t){return void 0===e?t:parseFloat(e)}}t.exports=i},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("../../../utils/col-cache");function i(e){try{return s.decodeEx(e),!0}catch(e){return!1}}function a(e){const t=[];let n=!1,r="";return e.split(",").forEach(e=>{if(!e)return;const s=(e.match(/'/g)||[]).length;if(!s)return void(n?r+=e+",":i(e)&&t.push(e));const a=s%2==0;!n&&a&&i(e)?t.push(e):n&&!a?(n=!1,i(r+e)&&t.push(r+e),r=""):(n=!0,r+=e+",")}),t}t.exports=class extends r{render(e,t){e.openNode("definedName",{name:t.name,localSheetId:t.localSheetId}),e.writeText(t.ranges.join(",")),e.closeNode()}parseOpen(e){return"definedName"===e.name&&(this._parsedName=e.attributes.name,this._parsedLocalSheetId=e.attributes.localSheetId,this._parsedText=[],!0)}parseText(e){this._parsedText.push(e)}parseClose(){return this.model={name:this._parsedName,ranges:a(this._parsedText.join(""))},void 0!==this._parsedLocalSheetId&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(e,t,n){"use strict";const r=e("../../../utils/utils"),s=e("../base-xform");t.exports=class extends s{render(e,t){e.leafNode("sheet",{sheetId:t.id,name:t.name,state:t.state,"r:id":t.rId})}parseOpen(e){return"sheet"===e.name&&(this.model={name:r.xmlDecode(e.attributes.name),id:parseInt(e.attributes.sheetId,10),state:e.attributes.state,rId:e.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{render(e,t){e.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:t.fullCalcOnLoad?1:void 0})}parseOpen(e){return"calcPr"===e.name&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{render(e,t){e.leafNode("workbookPr",{date1904:t.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(e){return"workbookPr"===e.name&&(this.model={date1904:"1"===e.attributes.date1904},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{render(e,t){const n={xWindow:t.x||0,yWindow:t.y||0,windowWidth:t.width||12e3,windowHeight:t.height||24e3,firstSheet:t.firstSheet,activeTab:t.activeTab};t.visibility&&"visible"!==t.visibility&&(n.visibility=t.visibility),e.leafNode("workbookView",n)}parseOpen(e){if("workbookView"===e.name){const t=this.model={},n=function(e,n,r){const s=void 0!==n?t[e]=n:r;void 0!==s&&(t[e]=s)},r=function(e,n,r){const s=void 0!==n?t[e]=parseInt(n,10):r;void 0!==s&&(t[e]=s)};return r("x",e.attributes.xWindow,0),r("y",e.attributes.yWindow,0),r("width",e.attributes.windowWidth,25e3),r("height",e.attributes.windowHeight,1e4),n("visibility",e.attributes.visibility,"visible"),r("activeTab",e.attributes.activeTab,void 0),r("firstSheet",e.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),i=e("../../../utils/xml-stream"),a=e("../base-xform"),o=e("../static-xform"),l=e("../list-xform"),c=e("./defined-name-xform"),u=e("./sheet-xform"),d=e("./workbook-view-xform"),h=e("./workbook-properties-xform"),f=e("./workbook-calc-properties-xform");class p extends a{constructor(){super(),this.map={fileVersion:p.STATIC_XFORMS.fileVersion,workbookPr:new h,bookViews:new l({tag:"bookViews",count:!1,childXform:new d}),sheets:new l({tag:"sheets",count:!1,childXform:new u}),definedNames:new l({tag:"definedNames",count:!1,childXform:new c}),calcPr:new f}}prepare(e){e.sheets=e.worksheets;const t=[];let n=0;e.sheets.forEach(e=>{if(e.pageSetup&&e.pageSetup.printArea&&e.pageSetup.printArea.split("&&").forEach(r=>{const s=r.split(":"),i={name:"_xlnm.Print_Area",ranges:["'".concat(e.name,"'!$").concat(s[0],":$").concat(s[1])],localSheetId:n};t.push(i)}),e.pageSetup&&(e.pageSetup.printTitlesRow||e.pageSetup.printTitlesColumn)){const r=[];if(e.pageSetup.printTitlesColumn){const t=e.pageSetup.printTitlesColumn.split(":");r.push("'".concat(e.name,"'!$").concat(t[0],":$").concat(t[1]))}if(e.pageSetup.printTitlesRow){const t=e.pageSetup.printTitlesRow.split(":");r.push("'".concat(e.name,"'!$").concat(t[0],":$").concat(t[1]))}const s={name:"_xlnm.Print_Titles",ranges:r,localSheetId:n};t.push(s)}n++}),t.length&&(e.definedNames=e.definedNames.concat(t)),(e.media||[]).forEach((e,t)=>{e.name=e.type+(t+1)})}render(e,t){e.openXml(i.StdDocAttributes),e.openNode("workbook",p.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(e),this.map.workbookPr.render(e,t.properties),this.map.bookViews.render(e,t.views),this.map.sheets.render(e,t.sheets),this.map.definedNames.render(e,t.definedNames),this.map.calcPr.render(e,t.calcProperties),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):("workbook"===e.name||(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):"workbook"!==e||(this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1)}reconcile(e){const t=(e.workbookRels||[]).reduce((e,t)=>(e[t.Id]=t,e),{}),n=[];let i,a=0;(e.sheets||[]).forEach(r=>{const s=t[r.rId];s&&(i=e.worksheetHash["xl/"+s.Target.replace(/^(\s|\/xl\/)+/,"")],i&&(i.name=r.name,i.id=r.id,i.state=r.state,n[a++]=i))});const o=[];r.each(e.definedNames,e=>{if("_xlnm.Print_Area"===e.name){if(i=n[e.localSheetId],i){i.pageSetup||(i.pageSetup={});const t=s.decodeEx(e.ranges[0]);i.pageSetup.printArea=i.pageSetup.printArea?"".concat(i.pageSetup.printArea,"&&").concat(t.dimensions):t.dimensions}}else if("_xlnm.Print_Titles"===e.name){if(i=n[e.localSheetId],i){i.pageSetup||(i.pageSetup={});const t=e.ranges.join(","),n=/\$/g,r=/\$\d+:\$\d+/,s=t.match(r);if(s&&s.length){const e=s[0];i.pageSetup.printTitlesRow=e.replace(n,"")}const a=/\$[A-Z]+:\$[A-Z]+/,o=t.match(a);if(o&&o.length){const e=o[0];i.pageSetup.printTitlesColumn=e.replace(n,"")}}}else o.push(e)}),e.definedNames=o,e.media.forEach((e,t)=>{e.index=t})}}p.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},p.STATIC_XFORMS={fileVersion:new o({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},t.exports=p},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(e,t,n){"use strict";const s=e("../strings/rich-text-xform"),i=e("../../../utils/utils"),a=e("../base-xform"),o=t.exports=function(e){this.model=e};i.inherits(o,a,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new s),this._richTextXform},render(e,t){t=t||this.model,e.openNode("comment",{ref:t.ref,authorId:0}),e.openNode("text"),t&&t.note&&t.note.texts&&t.note.texts.forEach(t=>{this.richTextXform.render(e,t)}),e.closeNode(),e.closeNode()},parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"comment":return this.model=r({type:"note",note:{texts:[]}},e.attributes),!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(e),!0;default:return!1}},parseText(e){this.parser&&this.parser.parseText(e)},parseClose(e){switch(e){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(e),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../../../utils/utils"),i=e("../base-xform"),a=e("./comment-xform"),o=t.exports=function(){this.map={comment:new a}};s.inherits(o,i,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(e,t){t=t||this.model,e.openXml(r.StdDocAttributes),e.openNode("comments",o.COMMENTS_ATTRIBUTES),e.openNode("authors"),e.leafNode("author",null,"Author"),e.closeNode(),e.openNode("commentList"),t.comments.forEach(t=>{this.map.comment.render(e,t)}),e.closeNode(),e.closeNode()},parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(e),!0;default:return!1}},parseText(e){this.parser&&this.parser.parseText(e)},parseClose(e){switch(e){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(e),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{constructor(e){super(),this._model=e}get tag(){return this._model&&this._model.tag}render(e,t,n){(t===n[2]||"x:SizeWithCells"===this.tag&&t===n[1])&&e.leafNode(this.tag)}parseOpen(e){return e.name===this.tag&&(this.model={},this.model[this.tag]=!0,!0)}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{constructor(e){super(),this._model=e}get tag(){return this._model&&this._model.tag}render(e,t){e.leafNode(this.tag,null,t)}parseOpen(e){return e.name===this.tag&&(this.text="",!0)}parseText(e){this.text=e}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"x:Anchor"}getAnchorRect(e){const t=Math.floor(e.left),n=Math.floor(68*(e.left-t)),r=Math.floor(e.top),s=Math.floor(18*(e.top-r)),i=Math.floor(e.right),a=Math.floor(68*(e.right-i)),o=Math.floor(e.bottom);return[t,n,r,s,i,a,o,Math.floor(18*(e.bottom-o))]}getDefaultRect(e){const t=e.col,n=Math.max(e.row-2,0);return[t,6,n,14,t+2,2,n+4,16]}render(e,t){const n=t.anchor?this.getAnchorRect(t.anchor):this.getDefaultRect(t.refAddress);e.leafNode("x:Anchor",null,n.join(", "))}parseOpen(e){return e.name===this.tag&&(this.text="",!0)}parseText(e){this.text=e}parseClose(){return!1}}},{"../base-xform":32}],44:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./vml-anchor-xform"),i=e("./style/vml-protection-xform"),a=e("./style/vml-position-xform"),o=["twoCells","oneCells","absolute"];t.exports=class extends r{constructor(){super(),this.map={"x:Anchor":new s,"x:Locked":new i({tag:"x:Locked"}),"x:LockText":new i({tag:"x:LockText"}),"x:SizeWithCells":new a({tag:"x:SizeWithCells"}),"x:MoveWithCells":new a({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(e,t){const{protection:n,editAs:r}=t.note;e.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(e,r,o),this.map["x:SizeWithCells"].render(e,r,o),this.map["x:Anchor"].render(e,t),this.map["x:Locked"].render(e,n.locked),e.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(e,n.lockText),e.leafNode("x:Row",null,t.refAddress.row-1),e.leafNode("x:Column",null,t.refAddress.col-1),e.closeNode()}parseOpen(e){return e.name===this.tag?(this.reset(),this.model={anchor:[],protection:{},editAs:""}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.normalizeModel(),!1)}normalizeModel(){const e=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),t=Object.keys(e).length;this.model.editAs=o[t],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("./vml-shape-xform");class a extends s{constructor(){super(),this.map={"v:shape":new i}}get tag(){return"xml"}render(e,t){e.openXml(r.StdDocAttributes),e.openNode(this.tag,a.DRAWING_ATTRIBUTES),e.openNode("o:shapelayout",{"v:ext":"edit"}),e.leafNode("o:idmap",{"v:ext":"edit",data:1}),e.closeNode(),e.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),e.leafNode("v:stroke",{joinstyle:"miter"}),e.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),e.closeNode(),t.comments.forEach((t,n)=>{this.map["v:shape"].render(e,t,n)}),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={comments:[]}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0):e!==this.tag}reconcile(e,t){e.anchors.forEach(e=>{e.br?this.map["xdr:twoCellAnchor"].reconcile(e,t):this.map["xdr:oneCellAnchor"].reconcile(e,t)})}}a.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},t.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./vml-textbox-xform"),i=e("./vml-client-data-xform");class a extends r{constructor(){super(),this.map={"v:textbox":new s,"x:ClientData":new i}}get tag(){return"v:shape"}render(e,t,n){e.openNode("v:shape",a.V_SHAPE_ATTRIBUTES(t,n)),e.leafNode("v:fill",{color2:"infoBackground [80]"}),e.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),e.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(e,t),this.map["x:ClientData"].render(e,t),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={margins:{insetmode:e.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1)}}a.V_SHAPE_ATTRIBUTES=(e,t)=>({id:"_x0000_s"+(1025+t),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":e.note.margins&&e.note.margins.insetmode}),t.exports=a},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"v:textbox"}conversionUnit(e,t,n){return"".concat(parseFloat(e)*t.toFixed(2)).concat(n)}reverseConversionUnit(e){return(e||"").split(",").map(e=>Number(parseFloat(this.conversionUnit(parseFloat(e),.1,"")).toFixed(2)))}render(e,t){const n={style:"mso-direction-alt:auto"};if(t&&t.note){let{inset:e}=t.note&&t.note.margins;Array.isArray(e)&&(e=e.map(e=>this.conversionUnit(e,10,"mm")).join(",")),e&&(n.inset=e)}e.openNode("v:textbox",n),e.leafNode("div",{style:"text-align:left"}),e.closeNode()}parseOpen(e){return e.name!==this.tag||(this.model={inset:this.reverseConversionUnit(e.attributes.inset)},!0)}parseText(){}parseClose(e){return e!==this.tag}}},{"../base-xform":32}],48:[function(e,t,n){"use strict";const r=e("./base-xform");t.exports=class extends r{createNewModel(e){return{}}parseOpen(e){return this.parser=this.parser||this.map[e.name],this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag&&(this.model=this.createNewModel(e),!0)}parseText(e){this.parser&&this.parser.parseText(e)}onParserClose(e,t){this.model[e]=t.model}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.onParserClose(e,this.parser),this.parser=void 0),!0):e!==this.tag}}},{"./base-xform":32}],49:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{render(e,t){e.openNode("HeadingPairs"),e.openNode("vt:vector",{size:2,baseType:"variant"}),e.openNode("vt:variant"),e.leafNode("vt:lpstr",void 0,"Worksheets"),e.closeNode(),e.openNode("vt:variant"),e.leafNode("vt:i4",void 0,t.length),e.closeNode(),e.closeNode(),e.closeNode()}parseOpen(e){return"HeadingPairs"===e.name}parseText(){}parseClose(e){return"HeadingPairs"!==e}}},{"../base-xform":32}],50:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{render(e,t){e.openNode("TitlesOfParts"),e.openNode("vt:vector",{size:t.length,baseType:"lpstr"}),t.forEach(t=>{e.leafNode("vt:lpstr",void 0,t.name)}),e.closeNode(),e.closeNode()}parseOpen(e){return"TitlesOfParts"===e.name}parseText(){}parseClose(e){return"TitlesOfParts"!==e}}},{"../base-xform":32}],51:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("../simple/string-xform"),a=e("./app-heading-pairs-xform"),o=e("./app-titles-of-parts-xform");class l extends s{constructor(){super(),this.map={Company:new i({tag:"Company"}),Manager:new i({tag:"Manager"}),HeadingPairs:new a,TitleOfParts:new o}}render(e,t){e.openXml(r.StdDocAttributes),e.openNode("Properties",l.PROPERTY_ATTRIBUTES),e.leafNode("Application",void 0,"Microsoft Excel"),e.leafNode("DocSecurity",void 0,"0"),e.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(e,t.worksheets),this.map.TitleOfParts.render(e,t.worksheets),this.map.Company.render(e,t.company||""),this.map.Manager.render(e,t.manager),e.leafNode("LinksUpToDate",void 0,"false"),e.leafNode("SharedDoc",void 0,"false"),e.leafNode("HyperlinksChanged",void 0,"false"),e.leafNode("AppVersion",void 0,"16.0300"),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"Properties"===e.name||(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):"Properties"!==e||(this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1)}}l.DateFormat=function(e){return e.toISOString().replace(/[.]\d{3,6}/,"")},l.DateAttrs={"xsi:type":"dcterms:W3CDTF"},l.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},t.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../base-xform");class i extends s{render(e,t){e.openXml(r.StdDocAttributes),e.openNode("Types",i.PROPERTY_ATTRIBUTES);const n={};(t.media||[]).forEach(t=>{if("image"===t.type){const r=t.extension;n[r]||(n[r]=!0,e.leafNode("Default",{Extension:r,ContentType:"image/"+r}))}}),e.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),e.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),e.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),t.worksheets.forEach(t=>{const n="/xl/worksheets/sheet".concat(t.id,".xml");e.leafNode("Override",{PartName:n,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),e.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),e.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),t.sharedStrings&&t.sharedStrings.count&&e.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),t.tables&&t.tables.forEach(t=>{e.leafNode("Override",{PartName:"/xl/tables/"+t.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),t.drawings&&t.drawings.forEach(t=>{e.leafNode("Override",{PartName:"/xl/drawings/".concat(t.name,".xml"),ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),t.commentRefs&&(e.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),t.commentRefs.forEach(t=>{let{commentName:n}=t;e.leafNode("Override",{PartName:"/xl/".concat(n,".xml"),ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),e.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),e.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),e.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}i.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},t.exports=i},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("../simple/date-xform"),a=e("../simple/string-xform"),o=e("../simple/integer-xform");class l extends s{constructor(){super(),this.map={"dc:creator":new a({tag:"dc:creator"}),"dc:title":new a({tag:"dc:title"}),"dc:subject":new a({tag:"dc:subject"}),"dc:description":new a({tag:"dc:description"}),"dc:identifier":new a({tag:"dc:identifier"}),"dc:language":new a({tag:"dc:language"}),"cp:keywords":new a({tag:"cp:keywords"}),"cp:category":new a({tag:"cp:category"}),"cp:lastModifiedBy":new a({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new i({tag:"cp:lastPrinted",format:l.DateFormat}),"cp:revision":new o({tag:"cp:revision"}),"cp:version":new a({tag:"cp:version"}),"cp:contentStatus":new a({tag:"cp:contentStatus"}),"cp:contentType":new a({tag:"cp:contentType"}),"dcterms:created":new i({tag:"dcterms:created",attrs:l.DateAttrs,format:l.DateFormat}),"dcterms:modified":new i({tag:"dcterms:modified",attrs:l.DateAttrs,format:l.DateFormat})}}render(e,t){e.openXml(r.StdDocAttributes),e.openNode("cp:coreProperties",l.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(e,t.creator),this.map["dc:title"].render(e,t.title),this.map["dc:subject"].render(e,t.subject),this.map["dc:description"].render(e,t.description),this.map["dc:identifier"].render(e,t.identifier),this.map["dc:language"].render(e,t.language),this.map["cp:keywords"].render(e,t.keywords),this.map["cp:category"].render(e,t.category),this.map["cp:lastModifiedBy"].render(e,t.lastModifiedBy),this.map["cp:lastPrinted"].render(e,t.lastPrinted),this.map["cp:revision"].render(e,t.revision),this.map["cp:version"].render(e,t.version),this.map["cp:contentStatus"].render(e,t.contentStatus),this.map["cp:contentType"].render(e,t.contentType),this.map["dcterms:created"].render(e,t.created),this.map["dcterms:modified"].render(e,t.modified),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[e.name],this.parser)return this.parser.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(e))}}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;switch(e){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+e)}}}l.DateFormat=function(e){return e.toISOString().replace(/[.]\d{3}/,"")},l.DateAttrs={"xsi:type":"dcterms:W3CDTF"},l.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},t.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{render(e,t){e.leafNode("Relationship",t)}parseOpen(e){return"Relationship"===e.name&&(this.model=e.attributes,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("./relationship-xform");class a extends s{constructor(){super(),this.map={Relationship:new i}}render(e,t){t=t||this._values,e.openXml(r.StdDocAttributes),e.openNode("Relationships",a.RELATIONSHIPS_ATTRIBUTES),t.forEach(t=>{this.map.Relationship.render(e,t)}),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;if("Relationships"===e.name)return this.model=[],!0;if(this.parser=this.map[e.name],this.parser)return this.parser.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(e))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.model.push(this.parser.model),this.parser=void 0),!0;if("Relationships"===e)return!1;throw new Error("Unexpected xml node in parseClose: "+e)}}a.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},t.exports=a},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={range:{editAs:e.attributes.editAs||"oneCell"}}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}reconcilePicture(e,t){if(e&&e.rId){const n=t.rels[e.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(n){const e=n[1],r=t.mediaIndex[e];return t.media[r]}}}}},{"../base-xform":32}],57:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./blip-xform");t.exports=class extends r{constructor(){super(),this.map={"a:blip":new s}}get tag(){return"xdr:blipFill"}render(e,t){e.openNode(this.tag),this.map["a:blip"].render(e,t),e.openNode("a:stretch"),e.leafNode("a:fillRect"),e.closeNode(),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(){}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model=this.map["a:blip"].model,!1)}}},{"../base-xform":32,"./blip-xform":58}],58:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"a:blip"}render(e,t){e.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":t.rId,cstate:"print"})}parseOpen(e){return e.name!==this.tag||(this.model={rId:e.attributes["r:embed"]},!0)}parseText(){}parseClose(e){return e!==this.tag}}},{"../base-xform":32}],59:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"xdr:cNvPicPr"}render(e){e.openNode(this.tag),e.leafNode("a:picLocks",{noChangeAspect:"1"}),e.closeNode()}parseOpen(e){return e.name,this.tag,!0}parseText(){}parseClose(e){return e!==this.tag}}},{"../base-xform":32}],60:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./hlink-click-xform"),i=e("./ext-lst-xform");t.exports=class extends r{constructor(){super(),this.map={"a:hlinkClick":new s,"a:extLst":new i}}get tag(){return"xdr:cNvPr"}render(e,t){e.openNode(this.tag,{id:t.index,name:"Picture "+t.index}),this.map["a:hlinkClick"].render(e,t),this.map["a:extLst"].render(e,t),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(){}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model=this.map["a:hlinkClick"].model,!1)}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("../simple/integer-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.map={"xdr:col":new s({tag:"xdr:col",zero:!0}),"xdr:colOff":new s({tag:"xdr:colOff",zero:!0}),"xdr:row":new s({tag:"xdr:row",zero:!0}),"xdr:rowOff":new s({tag:"xdr:rowOff",zero:!0})}}render(e,t){e.openNode(this.tag),this.map["xdr:col"].render(e,t.nativeCol),this.map["xdr:colOff"].render(e,t.nativeColOff),this.map["xdr:row"].render(e,t.nativeRow),this.map["xdr:rowOff"].render(e,t.nativeRowOff),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1)}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(e,t,n){"use strict";const r=e("../../../utils/col-cache"),s=e("../../../utils/xml-stream"),i=e("../base-xform"),a=e("./two-cell-anchor-xform"),o=e("./one-cell-anchor-xform");class l extends i{constructor(){super(),this.map={"xdr:twoCellAnchor":new a,"xdr:oneCellAnchor":new o}}prepare(e){e.anchors.forEach((e,t)=>{e.anchorType=function(e){return("string"==typeof e.range?r.decode(e.range):e.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(e),this.map[e.anchorType].prepare(e,{index:t})})}get tag(){return"xdr:wsDr"}render(e,t){e.openXml(s.StdDocAttributes),e.openNode(this.tag,l.DRAWING_ATTRIBUTES),t.anchors.forEach(t=>{this.map[t.anchorType].render(e,t)}),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?(this.reset(),this.model={anchors:[]}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0):e!==this.tag}reconcile(e,t){e.anchors.forEach(e=>{e.br?this.map["xdr:twoCellAnchor"].reconcile(e,t):this.map["xdr:oneCellAnchor"].reconcile(e,t)})}}l.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},t.exports=l},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"a:extLst"}render(e){e.openNode(this.tag),e.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),e.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),e.closeNode(),e.closeNode()}parseOpen(e){return e.name,this.tag,!0}parseText(){}parseClose(e){return e!==this.tag}}},{"../base-xform":32}],64:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.map={}}render(e,t){e.openNode(this.tag);const n=Math.floor(9525*t.width),r=Math.floor(9525*t.height);e.addAttribute("cx",n),e.addAttribute("cy",r),e.closeNode()}parseOpen(e){return e.name===this.tag&&(this.model={width:parseInt(e.attributes.cx||"0",10)/9525,height:parseInt(e.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"a:hlinkClick"}render(e,t){t.hyperlinks&&t.hyperlinks.rId&&e.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":t.hyperlinks.rId,tooltip:t.hyperlinks.tooltip})}parseOpen(e){return e.name!==this.tag||(this.model={hyperlinks:{rId:e.attributes["r:id"],tooltip:e.attributes.tooltip}},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./c-nv-pr-xform"),i=e("./c-nv-pic-pr-xform");t.exports=class extends r{constructor(){super(),this.map={"xdr:cNvPr":new s,"xdr:cNvPicPr":new i}}get tag(){return"xdr:nvPicPr"}render(e,t){e.openNode(this.tag),this.map["xdr:cNvPr"].render(e,t),this.map["xdr:cNvPicPr"].render(e,t),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(){}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model=this.map["xdr:cNvPr"].model,!1)}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(e,t,n){"use strict";const r=e("./base-cell-anchor-xform"),s=e("../static-xform"),i=e("./cell-position-xform"),a=e("./ext-xform"),o=e("./pic-xform");t.exports=class extends r{constructor(){super(),this.map={"xdr:from":new i({tag:"xdr:from"}),"xdr:ext":new a({tag:"xdr:ext"}),"xdr:pic":new o,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(e,t){this.map["xdr:pic"].prepare(e.picture,t)}render(e,t){e.openNode(this.tag,{editAs:t.range.editAs||"oneCell"}),this.map["xdr:from"].render(e,t.range.tl),this.map["xdr:ext"].render(e,t.range.ext),this.map["xdr:pic"].render(e,t.picture),this.map["xdr:clientData"].render(e,{}),e.closeNode()}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1)}reconcile(e,t){e.medium=this.reconcilePicture(e.picture,t)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("../static-xform"),i=e("./blip-fill-xform"),a=e("./nv-pic-pr-xform"),o=e("./sp-pr");t.exports=class extends r{constructor(){super(),this.map={"xdr:nvPicPr":new a,"xdr:blipFill":new i,"xdr:spPr":new s(o)}}get tag(){return"xdr:pic"}prepare(e,t){e.index=t.index+1}render(e,t){e.openNode(this.tag),this.map["xdr:nvPicPr"].render(e,t),this.map["xdr:blipFill"].render(e,t),this.map["xdr:spPr"].render(e,t),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):(e.name===this.tag?this.reset():(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0)}parseText(){}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.mergeModel(this.parser.model),this.parser=void 0),!0):e!==this.tag}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(e,t,n){"use strict";t.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(e,t,n){"use strict";const r=e("./base-cell-anchor-xform"),s=e("../static-xform"),i=e("./cell-position-xform"),a=e("./pic-xform");t.exports=class extends r{constructor(){super(),this.map={"xdr:from":new i({tag:"xdr:from"}),"xdr:to":new i({tag:"xdr:to"}),"xdr:pic":new a,"xdr:clientData":new s({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(e,t){this.map["xdr:pic"].prepare(e.picture,t)}render(e,t){e.openNode(this.tag,{editAs:t.range.editAs||"oneCell"}),this.map["xdr:from"].render(e,t.range.tl),this.map["xdr:to"].render(e,t.range.br),this.map["xdr:pic"].render(e,t.picture),this.map["xdr:clientData"].render(e,{}),e.closeNode()}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1)}reconcile(e,t){e.medium=this.reconcilePicture(e.picture,t)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(e,t,n){"use strict";const r=e("./base-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.always=!!e.always,this.count=e.count,this.empty=e.empty,this.$count=e.$count||"count",this.$=e.$,this.childXform=e.childXform,this.maxItems=e.maxItems}prepare(e,t){const{childXform:n}=this;e&&e.forEach((e,r)=>{t.index=r,n.prepare(e,t)})}render(e,t){if(this.always||t&&t.length){e.openNode(this.tag,this.$),this.count&&e.addAttribute(this.$count,t&&t.length||0);const{childXform:n}=this;(t||[]).forEach((t,r)=>{n.render(e,t,r)}),e.closeNode()}else this.empty&&e.leafNode(this.tag)}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag?(this.model=[],!0):!!this.childXform.parseOpen(e)&&(this.parser=this.childXform,!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser){if(!this.parser.parseClose(e)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error("Max ".concat(this.childXform.tag," count (").concat(this.maxItems,") exceeded"));return!0}return!1}reconcile(e,t){if(e){const{childXform:n}=this;e.forEach(e=>{n.reconcile(e,t)})}}}},{"./base-xform":32}],72:[function(e,t,n){"use strict";const r=e("../../../utils/col-cache"),s=e("../base-xform");t.exports=class extends s{get tag(){return"autoFilter"}render(e,t){if(t)if("string"==typeof t)e.leafNode("autoFilter",{ref:t});else{const n=function(e){return"string"==typeof e?e:r.getAddress(e.row,e.column).address},s=n(t.from),i=n(t.to);s&&i&&e.leafNode("autoFilter",{ref:"".concat(s,":").concat(i)})}}parseOpen(e){"autoFilter"===e.name&&(this.model=e.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(e,t,n){"use strict";const s=e("../../../utils/utils"),i=e("../base-xform"),a=e("../../../doc/range"),o=e("../../../doc/enums"),l=e("../strings/rich-text-xform");function c(e){if(null==e)return o.ValueType.Null;if(e instanceof String||"string"==typeof e)return o.ValueType.String;if("number"==typeof e)return o.ValueType.Number;if("boolean"==typeof e)return o.ValueType.Boolean;if(e instanceof Date)return o.ValueType.Date;if(e.text&&e.hyperlink)return o.ValueType.Hyperlink;if(e.formula)return o.ValueType.Formula;if(e.error)return o.ValueType.Error;throw new Error("I could not understand type of value")}t.exports=class extends i{constructor(){super(),this.richTextXForm=new l}get tag(){return"c"}prepare(e,t){const n=t.styles.addStyleModel(e.style||{},function(e){return e.type===o.ValueType.Formula?c(e.result):e.type}(e));switch(n&&(e.styleId=n),e.comment&&t.comments.push(r(r({},e.comment),{},{ref:e.address})),e.type){case o.ValueType.String:case o.ValueType.RichText:t.sharedStrings&&(e.ssId=t.sharedStrings.add(e.value));break;case o.ValueType.Date:t.date1904&&(e.date1904=!0);break;case o.ValueType.Hyperlink:t.sharedStrings&&void 0!==e.text&&null!==e.text&&(e.ssId=t.sharedStrings.add(e.text)),t.hyperlinks.push({address:e.address,target:e.hyperlink,tooltip:e.tooltip});break;case o.ValueType.Merge:t.merges.add(e);break;case o.ValueType.Formula:if(t.date1904&&(e.date1904=!0),"shared"===e.shareType&&(e.si=t.siFormulae++),e.formula)t.formulae[e.address]=e;else if(e.sharedFormula){const n=t.formulae[e.sharedFormula];if(!n)throw new Error("Shared Formula master must exist above and or left of clone for cell "+e.address);void 0===n.si?(n.shareType="shared",n.si=t.siFormulae++,n.range=new a(n.address,e.address)):n.range&&n.range.expandToAddress(e.address),e.si=n.si}}}renderFormula(e,t){let n=null;switch(t.shareType){case"shared":n={t:"shared",ref:t.ref||t.range.range,si:t.si};break;case"array":n={t:"array",ref:t.ref};break;default:void 0!==t.si&&(n={t:"shared",si:t.si})}switch(c(t.result)){case o.ValueType.Null:e.leafNode("f",n,t.formula);break;case o.ValueType.String:e.addAttribute("t","str"),e.leafNode("f",n,t.formula),e.leafNode("v",null,t.result);break;case o.ValueType.Number:e.leafNode("f",n,t.formula),e.leafNode("v",null,t.result);break;case o.ValueType.Boolean:e.addAttribute("t","b"),e.leafNode("f",n,t.formula),e.leafNode("v",null,t.result?1:0);break;case o.ValueType.Error:e.addAttribute("t","e"),e.leafNode("f",n,t.formula),e.leafNode("v",null,t.result.error);break;case o.ValueType.Date:e.leafNode("f",n,t.formula),e.leafNode("v",null,s.dateToExcel(t.result,t.date1904));break;default:throw new Error("I could not understand type of value")}}render(e,t){if(t.type!==o.ValueType.Null||t.styleId){switch(e.openNode("c"),e.addAttribute("r",t.address),t.styleId&&e.addAttribute("s",t.styleId),t.type){case o.ValueType.Null:break;case o.ValueType.Number:e.leafNode("v",null,t.value);break;case o.ValueType.Boolean:e.addAttribute("t","b"),e.leafNode("v",null,t.value?"1":"0");break;case o.ValueType.Error:e.addAttribute("t","e"),e.leafNode("v",null,t.value.error);break;case o.ValueType.String:case o.ValueType.RichText:void 0!==t.ssId?(e.addAttribute("t","s"),e.leafNode("v",null,t.ssId)):t.value&&t.value.richText?(e.addAttribute("t","inlineStr"),e.openNode("is"),t.value.richText.forEach(t=>{this.richTextXForm.render(e,t)}),e.closeNode("is")):(e.addAttribute("t","str"),e.leafNode("v",null,t.value));break;case o.ValueType.Date:e.leafNode("v",null,s.dateToExcel(t.value,t.date1904));break;case o.ValueType.Hyperlink:void 0!==t.ssId?(e.addAttribute("t","s"),e.leafNode("v",null,t.ssId)):(e.addAttribute("t","str"),e.leafNode("v",null,t.text));break;case o.ValueType.Formula:this.renderFormula(e,t);case o.ValueType.Merge:}e.closeNode()}}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"c":return this.model={address:e.attributes.r},this.t=e.attributes.t,e.attributes.s&&(this.model.styleId=parseInt(e.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=e.attributes.si,this.model.shareType=e.attributes.t,this.model.ref=e.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(e),!0;default:return!1}}parseText(e){if(this.parser)this.parser.parseText(e);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+e:e;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+e:e:this.model.value=this.model.value?this.model.value+e:e}}parseClose(e){switch(e){case"c":{const{model:e}=this;if(e.formula||e.shareType)e.type=o.ValueType.Formula,e.value&&("str"===this.t?e.result=s.xmlDecode(e.value):"b"===this.t?e.result=0!==parseInt(e.value,10):"e"===this.t?e.result={error:e.value}:e.result=parseFloat(e.value),e.value=void 0);else if(void 0!==e.value)switch(this.t){case"s":e.type=o.ValueType.String,e.value=parseInt(e.value,10);break;case"str":e.type=o.ValueType.String,e.value=s.xmlDecode(e.value);break;case"inlineStr":e.type=o.ValueType.String;break;case"b":e.type=o.ValueType.Boolean,e.value=0!==parseInt(e.value,10);break;case"e":e.type=o.ValueType.Error,e.value={error:e.value};break;default:e.type=o.ValueType.Number,e.value=parseFloat(e.value)}else e.styleId?e.type=o.ValueType.Null:e.type=o.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(e),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(e),!0)}}reconcile(e,t){const n=e.styleId&&t.styles&&t.styles.getStyleModel(e.styleId);switch(n&&(e.style=n),void 0!==e.styleId&&(e.styleId=void 0),e.type){case o.ValueType.String:"number"==typeof e.value&&t.sharedStrings&&(e.value=t.sharedStrings.getString(e.value)),e.value.richText&&(e.type=o.ValueType.RichText);break;case o.ValueType.Number:n&&s.isDateFmt(n.numFmt)&&(e.type=o.ValueType.Date,e.value=s.excelToDate(e.value,t.date1904));break;case o.ValueType.Formula:void 0!==e.result&&n&&s.isDateFmt(n.numFmt)&&(e.result=s.excelToDate(e.result,t.date1904)),"shared"===e.shareType&&(e.ref?t.formulae[e.si]=e.address:(e.sharedFormula=t.formulae[e.si],delete e.shareType),delete e.si)}const r=t.hyperlinkMap[e.address];r&&(e.type===o.ValueType.Formula?(e.text=e.result,e.result=void 0):(e.text=e.value,e.value=void 0),e.type=o.ValueType.Hyperlink,e.hyperlink=r);const i=t.commentsMap&&t.commentsMap[e.address];i&&(e.comment=i)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{get tag(){return"x14:cfIcon"}render(e,t){e.leafNode(this.tag,{iconSet:t.iconSet,iconId:t.iconId})}parseOpen(e){let{attributes:t}=e;this.model={iconSet:t.iconSet,iconId:r.toIntValue(t.iconId)}}parseClose(e){return e!==this.tag}}},{"../../base-xform":32}],75:[function(e,t,n){"use strict";const{v4:r}=e("uuid"),s=e("../../base-xform"),i=e("../../composite-xform"),a=e("./databar-ext-xform"),o=e("./icon-set-ext-xform"),l={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class c extends i{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new a,"x14:iconSet":this.iconSetXform=new o}}get tag(){return"x14:cfRule"}static isExt(e){return"dataBar"===e.type?a.isExt(e):!("iconSet"!==e.type||!e.custom&&!l[e.iconSet])}prepare(e){c.isExt(e)&&(e.x14Id="{".concat(r(),"}").toUpperCase())}render(e,t){if(c.isExt(t))switch(t.type){case"dataBar":this.renderDataBar(e,t);break;case"iconSet":this.renderIconSet(e,t)}}renderDataBar(e,t){e.openNode(this.tag,{type:"dataBar",id:t.x14Id}),this.databarXform.render(e,t),e.closeNode()}renderIconSet(e,t){e.openNode(this.tag,{type:"iconSet",priority:t.priority,id:t.x14Id||"{".concat(r(),"}")}),this.iconSetXform.render(e,t),e.closeNode()}createNewModel(e){let{attributes:t}=e;return{type:t.type,x14Id:t.id,priority:s.toIntValue(t.priority)}}onParserClose(e,t){Object.assign(this.model,t.model)}}t.exports=c},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(e,t,n){"use strict";const r=e("../../composite-xform"),s=e("./f-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"xm:f":this.fExtXform=new s}}get tag(){return"x14:cfvo"}render(e,t){e.openNode(this.tag,{type:t.type}),void 0!==t.value&&this.fExtXform.render(e,t.value),e.closeNode()}createNewModel(e){return{type:e.attributes.type}}onParserClose(e,t){"xm:f"===e&&(this.model.value=t.model?parseFloat(t.model):0)}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(e,t,n){"use strict";const r=e("../../composite-xform"),s=e("./sqref-ext-xform"),i=e("./cf-rule-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"xm:sqref":this.sqRef=new s,"x14:cfRule":this.cfRule=new i}}get tag(){return"x14:conditionalFormatting"}prepare(e,t){e.rules.forEach(e=>{this.cfRule.prepare(e,t)})}render(e,t){t.rules.some(i.isExt)&&(e.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),t.rules.filter(i.isExt).forEach(t=>this.cfRule.render(e,t)),this.sqRef.render(e,t.ref),e.closeNode())}createNewModel(){return{rules:[]}}onParserClose(e,t){switch(e){case"xm:sqref":this.model.ref=t.model;break;case"x14:cfRule":this.model.rules.push(t.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(e,t,n){"use strict";const r=e("../../composite-xform"),s=e("./cf-rule-ext-xform"),i=e("./conditional-formatting-ext-xform");t.exports=class extends r{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new i}}get tag(){return"x14:conditionalFormattings"}hasContent(e){return void 0===e.hasExtContent&&(e.hasExtContent=e.some(e=>e.rules.some(s.isExt))),e.hasExtContent}prepare(e,t){e.forEach(e=>{this.cfXform.prepare(e,t)})}render(e,t){this.hasContent(t)&&(e.openNode(this.tag),t.forEach(t=>this.cfXform.render(e,t)),e.closeNode())}createNewModel(){return[]}onParserClose(e,t){this.model.push(t.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(e,t,n){"use strict";const r=e("../../base-xform"),s=e("../../composite-xform"),i=e("../../style/color-xform"),a=e("./cfvo-ext-xform");t.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new a,"x14:borderColor":this.borderColorXform=new i("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new i("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new i("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new i("x14:axisColor")}}static isExt(e){return!e.gradient}get tag(){return"x14:dataBar"}render(e,t){e.openNode(this.tag,{minLength:r.toIntAttribute(t.minLength,0,!0),maxLength:r.toIntAttribute(t.maxLength,100,!0),border:r.toBoolAttribute(t.border,!1),gradient:r.toBoolAttribute(t.gradient,!0),negativeBarColorSameAsPositive:r.toBoolAttribute(t.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:r.toBoolAttribute(t.negativeBarBorderColorSameAsPositive,!0),axisPosition:r.toAttribute(t.axisPosition,"auto"),direction:r.toAttribute(t.direction,"leftToRight")}),t.cfvo.forEach(t=>{this.cfvoXform.render(e,t)}),this.borderColorXform.render(e,t.borderColor),this.negativeBorderColorXform.render(e,t.negativeBorderColor),this.negativeFillColorXform.render(e,t.negativeFillColor),this.axisColorXform.render(e,t.axisColor),e.closeNode()}createNewModel(e){let{attributes:t}=e;return{cfvo:[],minLength:r.toIntValue(t.minLength,0),maxLength:r.toIntValue(t.maxLength,100),border:r.toBoolValue(t.border,!1),gradient:r.toBoolValue(t.gradient,!0),negativeBarColorSameAsPositive:r.toBoolValue(t.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:r.toBoolValue(t.negativeBarBorderColorSameAsPositive,!0),axisPosition:r.toStringValue(t.axisPosition,"auto"),direction:r.toStringValue(t.direction,"leftToRight")}}onParserClose(e,t){const[,n]=e.split(":");"cfvo"===n?this.model.cfvo.push(t.model):this.model[n]=t.model}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{get tag(){return"xm:f"}render(e,t){e.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(e){this.model+=e}parseClose(e){return e!==this.tag}}},{"../../base-xform":32}],81:[function(e,t,n){"use strict";const r=e("../../base-xform"),s=e("../../composite-xform"),i=e("./cfvo-ext-xform"),a=e("./cf-icon-ext-xform");t.exports=class extends s{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new i,"x14:cfIcon":this.cfIconXform=new a}}get tag(){return"x14:iconSet"}render(e,t){e.openNode(this.tag,{iconSet:r.toStringAttribute(t.iconSet),reverse:r.toBoolAttribute(t.reverse,!1),showValue:r.toBoolAttribute(t.showValue,!0),custom:r.toBoolAttribute(t.icons,!1)}),t.cfvo.forEach(t=>{this.cfvoXform.render(e,t)}),t.icons&&t.icons.forEach((t,n)=>{t.iconId=n,this.cfIconXform.render(e,t)}),e.closeNode()}createNewModel(e){let{attributes:t}=e;return{cfvo:[],iconSet:r.toStringValue(t.iconSet,"3TrafficLights"),reverse:r.toBoolValue(t.reverse,!1),showValue:r.toBoolValue(t.showValue,!0)}}onParserClose(e,t){const[,n]=e.split(":");switch(n){case"cfvo":this.model.cfvo.push(t.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(t.model);break;default:this.model[n]=t.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{get tag(){return"xm:sqref"}render(e,t){e.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(e){this.model+=e}parseClose(e){return e!==this.tag}}},{"../../base-xform":32}],83:[function(e,t,n){"use strict";const s=e("../../base-xform"),i=e("../../composite-xform"),a=e("../../../../doc/range"),o=e("./databar-xform"),l=e("./ext-lst-ref-xform"),c=e("./formula-xform"),u=e("./color-scale-xform"),d=e("./icon-set-xform"),h={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},f=e=>{const{type:t,operator:n}=e;switch(t){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:t};default:return{type:t,operator:n}}};class p extends i{constructor(){super(),this.map={dataBar:this.databarXform=new o,extLst:this.extLstRefXform=new l,formula:this.formulaXform=new c,colorScale:this.colorScaleXform=new u,iconSet:this.iconSetXform=new d}}get tag(){return"cfRule"}static isPrimitive(e){return"iconSet"!==e.type||!e.custom&&!h[e.iconSet]}render(e,t){switch(t.type){case"expression":this.renderExpression(e,t);break;case"cellIs":this.renderCellIs(e,t);break;case"top10":this.renderTop10(e,t);break;case"aboveAverage":this.renderAboveAverage(e,t);break;case"dataBar":this.renderDataBar(e,t);break;case"colorScale":this.renderColorScale(e,t);break;case"iconSet":this.renderIconSet(e,t);break;case"containsText":this.renderText(e,t);break;case"timePeriod":this.renderTimePeriod(e,t)}}renderExpression(e,t){e.openNode(this.tag,{type:"expression",dxfId:t.dxfId,priority:t.priority}),this.formulaXform.render(e,t.formulae[0]),e.closeNode()}renderCellIs(e,t){e.openNode(this.tag,{type:"cellIs",dxfId:t.dxfId,priority:t.priority,operator:t.operator}),t.formulae.forEach(t=>{this.formulaXform.render(e,t)}),e.closeNode()}renderTop10(e,t){e.leafNode(this.tag,{type:"top10",dxfId:t.dxfId,priority:t.priority,percent:s.toBoolAttribute(t.percent,!1),bottom:s.toBoolAttribute(t.bottom,!1),rank:s.toIntValue(t.rank,10,!0)})}renderAboveAverage(e,t){e.leafNode(this.tag,{type:"aboveAverage",dxfId:t.dxfId,priority:t.priority,aboveAverage:s.toBoolAttribute(t.aboveAverage,!0)})}renderDataBar(e,t){e.openNode(this.tag,{type:"dataBar",priority:t.priority}),this.databarXform.render(e,t),this.extLstRefXform.render(e,t),e.closeNode()}renderColorScale(e,t){e.openNode(this.tag,{type:"colorScale",priority:t.priority}),this.colorScaleXform.render(e,t),e.closeNode()}renderIconSet(e,t){p.isPrimitive(t)&&(e.openNode(this.tag,{type:"iconSet",priority:t.priority}),this.iconSetXform.render(e,t),e.closeNode())}renderText(e,t){e.openNode(this.tag,{type:t.operator,dxfId:t.dxfId,priority:t.priority,operator:s.toStringAttribute(t.operator,"containsText")});const n=(e=>{if(e.formulae&&e.formulae[0])return e.formulae[0];const t=new a(e.ref),{tl:n}=t;switch(e.operator){case"containsText":return'NOT(ISERROR(SEARCH("'.concat(e.text,'",').concat(n,")))");case"containsBlanks":return"LEN(TRIM(".concat(n,"))=0");case"notContainsBlanks":return"LEN(TRIM(".concat(n,"))>0");case"containsErrors":return"ISERROR(".concat(n,")");case"notContainsErrors":return"NOT(ISERROR(".concat(n,"))");default:return}})(t);n&&this.formulaXform.render(e,n),e.closeNode()}renderTimePeriod(e,t){e.openNode(this.tag,{type:"timePeriod",dxfId:t.dxfId,priority:t.priority,timePeriod:t.timePeriod});const n=(e=>{if(e.formulae&&e.formulae[0])return e.formulae[0];const t=new a(e.ref),{tl:n}=t;switch(e.timePeriod){case"thisWeek":return"AND(TODAY()-ROUNDDOWN(".concat(n,",0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(").concat(n,",0)-TODAY()<=7-WEEKDAY(TODAY()))");case"lastWeek":return"AND(TODAY()-ROUNDDOWN(".concat(n,",0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(").concat(n,",0)<(WEEKDAY(TODAY())+7))");case"nextWeek":return"AND(ROUNDDOWN(".concat(n,",0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(").concat(n,",0)-TODAY()<(15-WEEKDAY(TODAY())))");case"yesterday":return"FLOOR(".concat(n,",1)=TODAY()-1");case"today":return"FLOOR(".concat(n,",1)=TODAY()");case"tomorrow":return"FLOOR(".concat(n,",1)=TODAY()+1");case"last7Days":return"AND(TODAY()-FLOOR(".concat(n,",1)<=6,FLOOR(").concat(n,",1)<=TODAY())");case"lastMonth":return"AND(MONTH(".concat(n,")=MONTH(EDATE(TODAY(),0-1)),YEAR(").concat(n,")=YEAR(EDATE(TODAY(),0-1)))");case"thisMonth":return"AND(MONTH(".concat(n,")=MONTH(TODAY()),YEAR(").concat(n,")=YEAR(TODAY()))");case"nextMonth":return"AND(MONTH(".concat(n,")=MONTH(EDATE(TODAY(),0+1)),YEAR(").concat(n,")=YEAR(EDATE(TODAY(),0+1)))");default:return}})(t);n&&this.formulaXform.render(e,n),e.closeNode()}createNewModel(e){let{attributes:t}=e;return r(r({},f(t)),{},{dxfId:s.toIntValue(t.dxfId),priority:s.toIntValue(t.priority),timePeriod:t.timePeriod,percent:s.toBoolValue(t.percent),bottom:s.toBoolValue(t.bottom),rank:s.toIntValue(t.rank),aboveAverage:s.toBoolValue(t.aboveAverage)})}onParserClose(e,t){switch(e){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,t.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(t.model)}}}t.exports=p},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{get tag(){return"cfvo"}render(e,t){e.leafNode(this.tag,{type:t.type,val:t.value})}parseOpen(e){this.model={type:e.attributes.type,value:r.toFloatValue(e.attributes.val)}}parseClose(e){return e!==this.tag}}},{"../../base-xform":32}],85:[function(e,t,n){"use strict";const r=e("../../composite-xform"),s=e("../../style/color-xform"),i=e("./cfvo-xform");t.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new i,color:this.colorXform=new s}}get tag(){return"colorScale"}render(e,t){e.openNode(this.tag),t.cfvo.forEach(t=>{this.cfvoXform.render(e,t)}),t.color.forEach(t=>{this.colorXform.render(e,t)}),e.closeNode()}createNewModel(e){return{cfvo:[],color:[]}}onParserClose(e,t){this.model[e].push(t.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(e,t,n){"use strict";const r=e("../../composite-xform"),s=e("./cf-rule-xform");t.exports=class extends r{constructor(){super(),this.map={cfRule:new s}}get tag(){return"conditionalFormatting"}render(e,t){t.rules.some(s.isPrimitive)&&(e.openNode(this.tag,{sqref:t.ref}),t.rules.forEach(n=>{s.isPrimitive(n)&&(n.ref=t.ref,this.map.cfRule.render(e,n))}),e.closeNode())}createNewModel(e){let{attributes:t}=e;return{ref:t.sqref,rules:[]}}onParserClose(e,t){this.model.rules.push(t.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(e,t,n){"use strict";const r=e("../../base-xform"),s=e("./conditional-formatting-xform");t.exports=class extends r{constructor(){super(),this.cfXform=new s}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(e,t){let n=e.reduce((e,t)=>Math.max(e,...t.rules.map(e=>e.priority||0)),1);e.forEach(e=>{e.rules.forEach(e=>{e.priority||(e.priority=n++),e.style&&(e.dxfId=t.styles.addDxfStyle(e.style))})})}render(e,t){t.forEach(t=>{this.cfXform.render(e,t)})}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"conditionalFormatting"===e.name&&(this.parser=this.cfXform,this.parser.parseOpen(e),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return!!this.parser&&(!!this.parser.parseClose(e)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(e,t){e.forEach(e=>{e.rules.forEach(e=>{void 0!==e.dxfId&&(e.style=t.styles.getDxfStyle(e.dxfId),delete e.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(e,t,n){"use strict";const r=e("../../composite-xform"),s=e("../../style/color-xform"),i=e("./cfvo-xform");t.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new i,color:this.colorXform=new s}}get tag(){return"dataBar"}render(e,t){e.openNode(this.tag),t.cfvo.forEach(t=>{this.cfvoXform.render(e,t)}),this.colorXform.render(e,t.color),e.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(e,t){switch(e){case"cfvo":this.model.cfvo.push(t.model);break;case"color":this.model.color=t.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(e,t,n){"use strict";const r=e("../../base-xform"),s=e("../../composite-xform");class i extends r{get tag(){return"x14:id"}render(e,t){e.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(e){this.model+=e}parseClose(e){return e!==this.tag}}class a extends s{constructor(){super(),this.map={"x14:id":this.idXform=new i}}get tag(){return"ext"}render(e,t){e.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(e,t.x14Id),e.closeNode()}createNewModel(){return{}}onParserClose(e,t){this.model.x14Id=t.model}}t.exports=class extends s{constructor(){super(),this.map={ext:new a}}get tag(){return"extLst"}render(e,t){e.openNode(this.tag),this.map.ext.render(e,t),e.closeNode()}createNewModel(){return{}}onParserClose(e,t){Object.assign(this.model,t.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(e,t,n){"use strict";const r=e("../../base-xform");t.exports=class extends r{get tag(){return"formula"}render(e,t){e.leafNode(this.tag,null,t)}parseOpen(){this.model=""}parseText(e){this.model+=e}parseClose(e){return e!==this.tag}}},{"../../base-xform":32}],91:[function(e,t,n){"use strict";const r=e("../../base-xform"),s=e("../../composite-xform"),i=e("./cfvo-xform");t.exports=class extends s{constructor(){super(),this.map={cfvo:this.cfvoXform=new i}}get tag(){return"iconSet"}render(e,t){e.openNode(this.tag,{iconSet:r.toStringAttribute(t.iconSet,"3TrafficLights"),reverse:r.toBoolAttribute(t.reverse,!1),showValue:r.toBoolAttribute(t.showValue,!0)}),t.cfvo.forEach(t=>{this.cfvoXform.render(e,t)}),e.closeNode()}createNewModel(e){let{attributes:t}=e;return{iconSet:r.toStringValue(t.iconSet,"3TrafficLights"),reverse:r.toBoolValue(t.reverse),showValue:r.toBoolValue(t.showValue),cfvo:[]}}onParserClose(e,t){this.model[e].push(t.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(e,t,n){"use strict";const r=e("../../../utils/utils"),s=e("../base-xform");t.exports=class extends s{get tag(){return"col"}prepare(e,t){const n=t.styles.addStyleModel(e.style||{});n&&(e.styleId=n)}render(e,t){e.openNode("col"),e.addAttribute("min",t.min),e.addAttribute("max",t.max),t.width&&e.addAttribute("width",t.width),t.styleId&&e.addAttribute("style",t.styleId),t.hidden&&e.addAttribute("hidden","1"),t.bestFit&&e.addAttribute("bestFit","1"),t.outlineLevel&&e.addAttribute("outlineLevel",t.outlineLevel),t.collapsed&&e.addAttribute("collapsed","1"),e.addAttribute("customWidth","1"),e.closeNode()}parseOpen(e){if("col"===e.name){const t=this.model={min:parseInt(e.attributes.min||"0",10),max:parseInt(e.attributes.max||"0",10),width:void 0===e.attributes.width?void 0:parseFloat(e.attributes.width||"0")};return e.attributes.style&&(t.styleId=parseInt(e.attributes.style,10)),r.parseBoolean(e.attributes.hidden)&&(t.hidden=!0),r.parseBoolean(e.attributes.bestFit)&&(t.bestFit=!0),e.attributes.outlineLevel&&(t.outlineLevel=parseInt(e.attributes.outlineLevel,10)),r.parseBoolean(e.attributes.collapsed)&&(t.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(e,t){e.styleId&&(e.style=t.styles.getStyleModel(e.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(e,t,n){"use strict";const s=e("../../../utils/under-dash"),i=e("../../../utils/utils"),a=e("../../../utils/col-cache"),o=e("../base-xform"),l=e("../../../doc/range");function c(e,t,n,r){const s=t[n];void 0!==s?e[n]=s:void 0!==r&&(e[n]=r)}function u(e,t,n,r){const s=t[n];void 0!==s?e[n]=i.parseBoolean(s):void 0!==r&&(e[n]=r)}t.exports=class extends o{get tag(){return"dataValidations"}render(e,t){const n=function(e){const t=s.map(e,(e,t)=>({address:t,dataValidation:e,marked:!1})).sort((e,t)=>s.strcmp(e.address,t.address)),n=s.keyBy(t,"address"),i=(t,n,r)=>{for(let i=0;i<n;i++){const n=a.encodeAddress(t.row+i,r);if(!e[n]||!s.isEqual(e[t.address],e[n]))return!1}return!0};return t.map(t=>{if(!t.marked){const o=a.decodeEx(t.address);if(o.dimensions)return n[o.dimensions].marked=!0,r(r({},t.dataValidation),{},{sqref:t.address});let l=1,c=a.encodeAddress(o.row+l,o.col);for(;e[c]&&s.isEqual(t.dataValidation,e[c]);)l++,c=a.encodeAddress(o.row+l,o.col);let u=1;for(;i(o,l,o.col+u);)u++;for(let e=0;e<l;e++)for(let t=0;t<u;t++)c=a.encodeAddress(o.row+e,o.col+t),n[c].marked=!0;if(l>1||u>1){const e=o.row+(l-1),n=o.col+(u-1);return r(r({},t.dataValidation),{},{sqref:"".concat(t.address,":").concat(a.encodeAddress(e,n))})}return r(r({},t.dataValidation),{},{sqref:t.address})}return null}).filter(Boolean)}(t);n.length&&(e.openNode("dataValidations",{count:n.length}),n.forEach(t=>{e.openNode("dataValidation"),"any"!==t.type&&(e.addAttribute("type",t.type),t.operator&&"list"!==t.type&&"between"!==t.operator&&e.addAttribute("operator",t.operator),t.allowBlank&&e.addAttribute("allowBlank","1")),t.showInputMessage&&e.addAttribute("showInputMessage","1"),t.promptTitle&&e.addAttribute("promptTitle",t.promptTitle),t.prompt&&e.addAttribute("prompt",t.prompt),t.showErrorMessage&&e.addAttribute("showErrorMessage","1"),t.errorStyle&&e.addAttribute("errorStyle",t.errorStyle),t.errorTitle&&e.addAttribute("errorTitle",t.errorTitle),t.error&&e.addAttribute("error",t.error),e.addAttribute("sqref",t.sqref),(t.formulae||[]).forEach((n,r)=>{e.openNode("formula"+(r+1)),"date"===t.type?e.writeText(i.dateToExcel(new Date(n))):e.writeText(n),e.closeNode()}),e.closeNode()}),e.closeNode())}parseOpen(e){switch(e.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=e.attributes.sqref;const t={type:e.attributes.type||"any",formulae:[]};switch(e.attributes.type&&u(t,e.attributes,"allowBlank"),u(t,e.attributes,"showInputMessage"),u(t,e.attributes,"showErrorMessage"),t.type){case"any":case"list":case"custom":break;default:c(t,e.attributes,"operator","between")}return c(t,e.attributes,"promptTitle"),c(t,e.attributes,"prompt"),c(t,e.attributes,"errorStyle"),c(t,e.attributes,"errorTitle"),c(t,e.attributes,"error"),this._dataValidation=t,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(e){this._formula&&this._formula.push(e)}parseClose(e){switch(e){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(e=>{e.includes(":")?new l(e).forEachAddress(e=>{this.model[e]=this._dataValidation}):this.model[e]=this._dataValidation}),!0;case"formula1":case"formula2":{let e=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":e=parseInt(e,10);break;case"decimal":e=parseFloat(e);break;case"date":e=i.excelToDate(parseFloat(e))}return this._dataValidation.formulae.push(e),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"dimension"}render(e,t){t&&e.leafNode("dimension",{ref:t})}parseOpen(e){return"dimension"===e.name&&(this.model=e.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"drawing"}render(e,t){t&&e.leafNode(this.tag,{"r:id":t.rId})}parseOpen(e){return e.name===this.tag&&(this.model={rId:e.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(e,t,n){"use strict";const r=e("../composite-xform"),s=e("./cf-ext/conditional-formattings-ext-xform");class i extends r{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new s}}get tag(){return"ext"}hasContent(e){return this.conditionalFormattings.hasContent(e.conditionalFormattings)}prepare(e,t){this.conditionalFormattings.prepare(e.conditionalFormattings,t)}render(e,t){e.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(e,t.conditionalFormattings),e.closeNode()}createNewModel(){return{}}onParserClose(e,t){this.model[e]=t.model}}t.exports=class extends r{constructor(){super(),this.map={ext:this.ext=new i}}get tag(){return"extLst"}prepare(e,t){this.ext.prepare(e,t)}hasContent(e){return this.ext.hasContent(e)}render(e,t){this.hasContent(t)&&(e.openNode("extLst"),this.ext.render(e,t),e.closeNode())}createNewModel(){return{}}onParserClose(e,t){Object.assign(this.model,t.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"headerFooter"}render(e,t){if(t){e.addRollback();let n=!1;e.openNode("headerFooter"),t.differentFirst&&(e.addAttribute("differentFirst","1"),n=!0),t.differentOddEven&&(e.addAttribute("differentOddEven","1"),n=!0),t.oddHeader&&"string"==typeof t.oddHeader&&(e.leafNode("oddHeader",null,t.oddHeader),n=!0),t.oddFooter&&"string"==typeof t.oddFooter&&(e.leafNode("oddFooter",null,t.oddFooter),n=!0),t.evenHeader&&"string"==typeof t.evenHeader&&(e.leafNode("evenHeader",null,t.evenHeader),n=!0),t.evenFooter&&"string"==typeof t.evenFooter&&(e.leafNode("evenFooter",null,t.evenFooter),n=!0),t.firstHeader&&"string"==typeof t.firstHeader&&(e.leafNode("firstHeader",null,t.firstHeader),n=!0),t.firstFooter&&"string"==typeof t.firstFooter&&(e.leafNode("firstFooter",null,t.firstFooter),n=!0),n?(e.closeNode(),e.commit()):e.rollback()}}parseOpen(e){switch(e.name){case"headerFooter":return this.model={},e.attributes.differentFirst&&(this.model.differentFirst=1===parseInt(e.attributes.differentFirst,0)),e.attributes.differentOddEven&&(this.model.differentOddEven=1===parseInt(e.attributes.differentOddEven,0)),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(e){switch(this.currentNode){case"oddHeader":this.model.oddHeader=e;break;case"oddFooter":this.model.oddFooter=e;break;case"evenHeader":this.model.evenHeader=e;break;case"evenFooter":this.model.evenFooter=e;break;case"firstHeader":this.model.firstHeader=e;break;case"firstFooter":this.model.firstFooter=e}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"hyperlink"}render(e,t){this.isInternalLink(t)?e.leafNode("hyperlink",{ref:t.address,"r:id":t.rId,tooltip:t.tooltip,location:t.target}):e.leafNode("hyperlink",{ref:t.address,"r:id":t.rId,tooltip:t.tooltip})}parseOpen(e){return"hyperlink"===e.name&&(this.model={address:e.attributes.ref,rId:e.attributes["r:id"],tooltip:e.attributes.tooltip},e.attributes.location&&(this.model.target=e.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(e){return e.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(e.target)}}},{"../base-xform":32}],99:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"mergeCell"}render(e,t){e.leafNode("mergeCell",{ref:t})}parseOpen(e){return"mergeCell"===e.name&&(this.model=e.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../../../doc/range"),i=e("../../../utils/col-cache"),a=e("../../../doc/enums");t.exports=class{constructor(){this.merges={}}add(e){if(this.merges[e.master])this.merges[e.master].expandToAddress(e.address);else{const t="".concat(e.master,":").concat(e.address);this.merges[e.master]=new s(t)}}get mergeCells(){return r.map(this.merges,e=>e.range)}reconcile(e,t){r.each(e,e=>{const n=i.decode(e);for(let r=n.top;r<=n.bottom;r++){const e=t[r-1];for(let t=n.left;t<=n.right;t++){const s=e.cells[t-1];s?s.type===a.ValueType.Merge&&(s.master=n.tl):e.cells[t]={type:a.ValueType.Null,address:i.encodeAddress(r,t)}}}})}getMasterAddress(e){const t=this.hash[e];return t&&t.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e=>void 0!==e;t.exports=class extends r{get tag(){return"outlinePr"}render(e,t){return!(!t||!s(t.summaryBelow)&&!s(t.summaryRight))&&(e.leafNode(this.tag,{summaryBelow:s(t.summaryBelow)?Number(t.summaryBelow):void 0,summaryRight:s(t.summaryRight)?Number(t.summaryRight):void 0}),!0)}parseOpen(e){return e.name===this.tag&&(this.model={summaryBelow:s(e.attributes.summaryBelow)?Boolean(Number(e.attributes.summaryBelow)):void 0,summaryRight:s(e.attributes.summaryRight)?Boolean(Number(e.attributes.summaryRight)):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"brk"}render(e,t){e.leafNode("brk",t)}parseOpen(e){return"brk"===e.name&&(this.model=e.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../base-xform");t.exports=class extends s{get tag(){return"pageMargins"}render(e,t){if(t){const n={left:t.left,right:t.right,top:t.top,bottom:t.bottom,header:t.header,footer:t.footer};r.some(n,e=>void 0!==e)&&e.leafNode(this.tag,n)}}parseOpen(e){return e.name===this.tag&&(this.model={left:parseFloat(e.attributes.left||.7),right:parseFloat(e.attributes.right||.7),top:parseFloat(e.attributes.top||.75),bottom:parseFloat(e.attributes.bottom||.75),header:parseFloat(e.attributes.header||.3),footer:parseFloat(e.attributes.footer||.3)},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"pageSetUpPr"}render(e,t){return!(!t||!t.fitToPage)&&(e.leafNode(this.tag,{fitToPage:t.fitToPage?"1":void 0}),!0)}parseOpen(e){return e.name===this.tag&&(this.model={fitToPage:"1"===e.attributes.fitToPage},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../base-xform");function i(e){return e?"1":void 0}function a(e){if("overThenDown"===e)return e}function o(e){switch(e){case"atEnd":case"asDisplyed":return e;default:return}}function l(e){switch(e){case"dash":case"blank":case"NA":return e;default:return}}t.exports=class extends s{get tag(){return"pageSetup"}render(e,t){if(t){const n={paperSize:t.paperSize,orientation:t.orientation,horizontalDpi:t.horizontalDpi,verticalDpi:t.verticalDpi,pageOrder:a(t.pageOrder),blackAndWhite:i(t.blackAndWhite),draft:i(t.draft),cellComments:o(t.cellComments),errors:l(t.errors),scale:t.scale,fitToWidth:t.fitToWidth,fitToHeight:t.fitToHeight,firstPageNumber:t.firstPageNumber,useFirstPageNumber:i(t.firstPageNumber),usePrinterDefaults:i(t.usePrinterDefaults),copies:t.copies};r.some(n,e=>void 0!==e)&&e.leafNode(this.tag,n)}}parseOpen(e){return e.name===this.tag&&(this.model={paperSize:(t=e.attributes.paperSize,void 0!==t?parseInt(t,10):void 0),orientation:e.attributes.orientation||"portrait",horizontalDpi:parseInt(e.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(e.attributes.verticalDpi||"4294967295",10),pageOrder:e.attributes.pageOrder||"downThenOver",blackAndWhite:"1"===e.attributes.blackAndWhite,draft:"1"===e.attributes.draft,cellComments:e.attributes.cellComments||"None",errors:e.attributes.errors||"displayed",scale:parseInt(e.attributes.scale||"100",10),fitToWidth:parseInt(e.attributes.fitToWidth||"1",10),fitToHeight:parseInt(e.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(e.attributes.firstPageNumber||"1",10),useFirstPageNumber:"1"===e.attributes.useFirstPageNumber,usePrinterDefaults:"1"===e.attributes.usePrinterDefaults,copies:parseInt(e.attributes.copies||"1",10)},!0);var t}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"picture"}render(e,t){t&&e.leafNode(this.tag,{"r:id":t.rId})}parseOpen(e){return e.name===this.tag&&(this.model={rId:e.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../base-xform");function i(e){return e?"1":void 0}t.exports=class extends s{get tag(){return"printOptions"}render(e,t){if(t){const n={headings:i(t.showRowColHeaders),gridLines:i(t.showGridLines),horizontalCentered:i(t.horizontalCentered),verticalCentered:i(t.verticalCentered)};r.some(n,e=>void 0!==e)&&e.leafNode(this.tag,n)}}parseOpen(e){return e.name===this.tag&&(this.model={showRowColHeaders:"1"===e.attributes.headings,showGridLines:"1"===e.attributes.gridLines,horizontalCentered:"1"===e.attributes.horizontalCentered,verticalCentered:"1"===e.attributes.verticalCentered},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(e,t,n){"use strict";const r=e("./page-breaks-xform"),s=e("../list-xform");t.exports=class extends s{constructor(){super({tag:"rowBreaks",count:!0,childXform:new r})}render(e,t){if(t&&t.length){e.openNode(this.tag,this.$),this.count&&(e.addAttribute(this.$count,t.length),e.addAttribute("manualBreakCount",t.length));const{childXform:n}=this;t.forEach(t=>{n.render(e,t)}),e.closeNode()}else this.empty&&e.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("../../../utils/utils"),i=e("./cell-xform");t.exports=class extends r{constructor(e){super(),this.maxItems=e&&e.maxItems,this.map={c:new i}}get tag(){return"row"}prepare(e,t){const n=t.styles.addStyleModel(e.style);n&&(e.styleId=n);const r=this.map.c;e.cells.forEach(e=>{r.prepare(e,t)})}render(e,t,n){e.openNode("row"),e.addAttribute("r",t.number),t.height&&(e.addAttribute("ht",t.height),e.addAttribute("customHeight","1")),t.hidden&&e.addAttribute("hidden","1"),t.min>0&&t.max>0&&t.min<=t.max&&e.addAttribute("spans","".concat(t.min,":").concat(t.max)),t.styleId&&(e.addAttribute("s",t.styleId),e.addAttribute("customFormat","1")),e.addAttribute("x14ac:dyDescent","0.25"),t.outlineLevel&&e.addAttribute("outlineLevel",t.outlineLevel),t.collapsed&&e.addAttribute("collapsed","1");const r=this.map.c;t.cells.forEach(t=>{r.render(e,t,n)}),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;if("row"===e.name){this.numRowsSeen+=1;const t=e.attributes.spans?e.attributes.spans.split(":").map(e=>parseInt(e,10)):[void 0,void 0],n=this.model={number:parseInt(e.attributes.r,10),min:t[0],max:t[1],cells:[]};return e.attributes.s&&(n.styleId=parseInt(e.attributes.s,10)),s.parseBoolean(e.attributes.hidden)&&(n.hidden=!0),s.parseBoolean(e.attributes.bestFit)&&(n.bestFit=!0),e.attributes.ht&&(n.height=parseFloat(e.attributes.ht)),e.attributes.outlineLevel&&(n.outlineLevel=parseInt(e.attributes.outlineLevel,10)),s.parseBoolean(e.attributes.collapsed)&&(n.collapsed=!0),!0}return this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser){if(!this.parser.parseClose(e)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error("Max column count (".concat(this.maxItems,") exceeded"));this.parser=void 0}return!0}return!1}reconcile(e,t){e.style=e.styleId?t.styles.getStyleModel(e.styleId):{},void 0!==e.styleId&&(e.styleId=void 0);const n=this.map.c;e.cells.forEach(e=>{n.reconcile(e,t)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../base-xform");t.exports=class extends s{get tag(){return"sheetFormatPr"}render(e,t){if(t){const n={defaultRowHeight:t.defaultRowHeight,outlineLevelRow:t.outlineLevelRow,outlineLevelCol:t.outlineLevelCol,"x14ac:dyDescent":t.dyDescent};t.defaultColWidth&&(n.defaultColWidth=t.defaultColWidth),t.defaultRowHeight&&15===t.defaultRowHeight||(n.customHeight="1"),r.some(n,e=>void 0!==e)&&e.leafNode("sheetFormatPr",n)}}parseOpen(e){return"sheetFormatPr"===e.name&&(this.model={defaultRowHeight:parseFloat(e.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(e.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(e.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(e.attributes.outlineLevelCol||"0",10)},e.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(e.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("../style/color-xform"),i=e("./page-setup-properties-xform"),a=e("./outline-properties-xform");t.exports=class extends r{constructor(){super(),this.map={tabColor:new s("tabColor"),pageSetUpPr:new i,outlinePr:new a}}get tag(){return"sheetPr"}render(e,t){if(t){e.addRollback(),e.openNode("sheetPr");let n=!1;n=this.map.tabColor.render(e,t.tabColor)||n,n=this.map.pageSetUpPr.render(e,t.pageSetup)||n,n=this.map.outlinePr.render(e,t.outlineProperties)||n,n?(e.closeNode(),e.commit()):e.rollback()}}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag?(this.reset(),!0):!!this.map[e.name]&&(this.parser=this.map[e.name],this.parser.parseOpen(e),!0)}parseText(e){return!!this.parser&&(this.parser.parseText(e),!0)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../base-xform");function i(e,t){return e?t:void 0}function a(e,t){return e===t||void 0}t.exports=class extends s{get tag(){return"sheetProtection"}render(e,t){if(t){const n={sheet:i(t.sheet,"1"),selectLockedCells:!1===t.selectLockedCells?"1":void 0,selectUnlockedCells:!1===t.selectUnlockedCells?"1":void 0,formatCells:i(t.formatCells,"0"),formatColumns:i(t.formatColumns,"0"),formatRows:i(t.formatRows,"0"),insertColumns:i(t.insertColumns,"0"),insertRows:i(t.insertRows,"0"),insertHyperlinks:i(t.insertHyperlinks,"0"),deleteColumns:i(t.deleteColumns,"0"),deleteRows:i(t.deleteRows,"0"),sort:i(t.sort,"0"),autoFilter:i(t.autoFilter,"0"),pivotTables:i(t.pivotTables,"0")};t.sheet&&(n.algorithmName=t.algorithmName,n.hashValue=t.hashValue,n.saltValue=t.saltValue,n.spinCount=t.spinCount,n.objects=i(!1===t.objects,"1"),n.scenarios=i(!1===t.scenarios,"1")),r.some(n,e=>void 0!==e)&&e.leafNode(this.tag,n)}}parseOpen(e){return e.name===this.tag&&(this.model={sheet:a(e.attributes.sheet,"1"),objects:"1"!==e.attributes.objects&&void 0,scenarios:"1"!==e.attributes.scenarios&&void 0,selectLockedCells:"1"!==e.attributes.selectLockedCells&&void 0,selectUnlockedCells:"1"!==e.attributes.selectUnlockedCells&&void 0,formatCells:a(e.attributes.formatCells,"0"),formatColumns:a(e.attributes.formatColumns,"0"),formatRows:a(e.attributes.formatRows,"0"),insertColumns:a(e.attributes.insertColumns,"0"),insertRows:a(e.attributes.insertRows,"0"),insertHyperlinks:a(e.attributes.insertHyperlinks,"0"),deleteColumns:a(e.attributes.deleteColumns,"0"),deleteRows:a(e.attributes.deleteRows,"0"),sort:a(e.attributes.sort,"0"),autoFilter:a(e.attributes.autoFilter,"0"),pivotTables:a(e.attributes.pivotTables,"0")},e.attributes.algorithmName&&(this.model.algorithmName=e.attributes.algorithmName,this.model.hashValue=e.attributes.hashValue,this.model.saltValue=e.attributes.saltValue,this.model.spinCount=parseInt(e.attributes.spinCount,10)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(e,t,n){"use strict";const r=e("../../../utils/col-cache"),s=e("../base-xform"),i={frozen:"frozen",frozenSplit:"frozen",split:"split"};t.exports=class extends s{get tag(){return"sheetView"}prepare(e){switch(e.state){case"frozen":case"split":break;default:e.state="normal"}}render(e,t){e.openNode("sheetView",{workbookViewId:t.workbookViewId||0});const n=function(t,n,r){r&&e.addAttribute(t,n)};let s,i,a,o;switch(n("rightToLeft","1",!0===t.rightToLeft),n("tabSelected","1",t.tabSelected),n("showRuler","0",!1===t.showRuler),n("showRowColHeaders","0",!1===t.showRowColHeaders),n("showGridLines","0",!1===t.showGridLines),n("zoomScale",t.zoomScale,t.zoomScale),n("zoomScaleNormal",t.zoomScaleNormal,t.zoomScaleNormal),n("view",t.style,t.style),t.state){case"frozen":i=t.xSplit||0,a=t.ySplit||0,s=t.topLeftCell||r.getAddress(a+1,i+1).address,o=(t.xSplit&&t.ySplit?"bottomRight":t.xSplit&&"topRight")||"bottomLeft",e.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:s,activePane:o,state:"frozen"}),e.leafNode("selection",{pane:o,activeCell:t.activeCell,sqref:t.activeCell});break;case"split":"topLeft"===t.activePane&&(t.activePane=void 0),e.leafNode("pane",{xSplit:t.xSplit||void 0,ySplit:t.ySplit||void 0,topLeftCell:t.topLeftCell,activePane:t.activePane}),e.leafNode("selection",{pane:t.activePane,activeCell:t.activeCell,sqref:t.activeCell});break;case"normal":t.activeCell&&e.leafNode("selection",{activeCell:t.activeCell,sqref:t.activeCell})}e.closeNode()}parseOpen(e){switch(e.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(e.attributes.workbookViewId,10),rightToLeft:"1"===e.attributes.rightToLeft,tabSelected:"1"===e.attributes.tabSelected,showRuler:!("0"===e.attributes.showRuler),showRowColHeaders:!("0"===e.attributes.showRowColHeaders),showGridLines:!("0"===e.attributes.showGridLines),zoomScale:parseInt(e.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(e.attributes.zoomScaleNormal||"100",10),style:e.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(e.attributes.xSplit||"0",10),ySplit:parseInt(e.attributes.ySplit||"0",10),topLeftCell:e.attributes.topLeftCell,activePane:e.attributes.activePane||"topLeft",state:e.attributes.state},!0;case"selection":{const t=e.attributes.pane||"topLeft";return this.selections[t]={pane:t,activeCell:e.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(e){let t,n;return"sheetView"!==e||(this.sheetView&&this.pane?(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:i[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},"split"===this.model.state&&(t.activePane=this.pane.activePane),n=this.selections[this.pane.activePane],n&&n.activeCell&&(t.activeCell=n.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)):(t=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},n=this.selections.topLeft,n&&n.activeCell&&(t.activeCell=n.activeCell),this.sheetView.style&&(t.style=this.sheetView.style)),!1)}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"tablePart"}render(e,t){t&&e.leafNode(this.tag,{"r:id":t.rId})}parseOpen(e){return e.name===this.tag&&(this.model={rId:e.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../../../utils/col-cache"),i=e("../../../utils/xml-stream"),a=e("../../rel-type"),o=e("./merges"),l=e("../base-xform"),c=e("../list-xform"),u=e("./row-xform"),d=e("./col-xform"),h=e("./dimension-xform"),f=e("./hyperlink-xform"),p=e("./merge-cell-xform"),m=e("./data-validations-xform"),g=e("./sheet-properties-xform"),b=e("./sheet-format-properties-xform"),v=e("./sheet-view-xform"),y=e("./sheet-protection-xform"),w=e("./page-margins-xform"),x=e("./page-setup-xform"),k=e("./print-options-xform"),_=e("./auto-filter-xform"),S=e("./picture-xform"),j=e("./drawing-xform"),N=e("./table-part-xform"),T=e("./row-breaks-xform"),E=e("./header-footer-xform"),C=e("./cf/conditional-formattings-xform"),I=e("./ext-lst-xform"),A=(e,t)=>{if(!t||!t.length)return e;if(!e||!e.length)return t;const n={},r={};return e.forEach(e=>{n[e.ref]=e,e.rules.forEach(e=>{const{x14Id:t}=e;t&&(r[t]=e)})}),t.forEach(t=>{t.rules.forEach(s=>{const i=r[s.x14Id];i?((e,t)=>{Object.keys(t).forEach(n=>{const r=e[n],s=t[n];void 0===r&&void 0!==s&&(e[n]=s)})})(i,s):n[t.ref]?n[t.ref].rules.push(s):e.push({ref:t.ref,rules:[s]})})}),e};class M extends l{constructor(e){super();const{maxRows:t,maxCols:n,ignoreNodes:r}=e||{};this.ignoreNodes=r||[],this.map={sheetPr:new g,dimension:new h,sheetViews:new c({tag:"sheetViews",count:!1,childXform:new v}),sheetFormatPr:new b,cols:new c({tag:"cols",count:!1,childXform:new d}),sheetData:new c({tag:"sheetData",count:!1,empty:!0,childXform:new u({maxItems:n}),maxItems:t}),autoFilter:new _,mergeCells:new c({tag:"mergeCells",count:!0,childXform:new p}),rowBreaks:new T,hyperlinks:new c({tag:"hyperlinks",count:!1,childXform:new f}),pageMargins:new w,dataValidations:new m,pageSetup:new x,headerFooter:new E,printOptions:new k,picture:new S,drawing:new j,sheetProtection:new y,tableParts:new c({tag:"tableParts",count:!0,childXform:new N}),conditionalFormatting:new C,extLst:new I}}prepare(e,t){t.merges=new o,e.hyperlinks=t.hyperlinks=[],e.comments=t.comments=[],t.formulae={},t.siFormulae=0,this.map.cols.prepare(e.cols,t),this.map.sheetData.prepare(e.rows,t),this.map.conditionalFormatting.prepare(e.conditionalFormattings,t),e.mergeCells=t.merges.mergeCells;const n=e.rels=[];function r(e){return"rId"+(e.length+1)}if(e.hyperlinks.forEach(e=>{const t=r(n);e.rId=t,n.push({Id:t,Type:a.Hyperlink,Target:e.target,TargetMode:"External"})}),e.comments.length>0){const i={Id:r(n),Type:a.Comments,Target:"../comments".concat(e.id,".xml")};n.push(i);const o={Id:r(n),Type:a.VmlDrawing,Target:"../drawings/vmlDrawing".concat(e.id,".vml")};n.push(o),e.comments.forEach(e=>{e.refAddress=s.decodeAddress(e.ref)}),t.commentRefs.push({commentName:"comments"+e.id,vmlDrawing:"vmlDrawing"+e.id})}const i=[];let l;e.media.forEach(s=>{if("background"===s.type){const i=r(n);l=t.media[s.imageId],n.push({Id:i,Type:a.Image,Target:"../media/".concat(l.name,".").concat(l.extension)}),e.background={rId:i},e.image=t.media[s.imageId]}else if("image"===s.type){let{drawing:o}=e;l=t.media[s.imageId],o||(o=e.drawing={rId:r(n),name:"drawing"+ ++t.drawingsCount,anchors:[],rels:[]},t.drawings.push(o),n.push({Id:o.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/".concat(o.name,".xml")}));let c=this.preImageId===s.imageId?i[s.imageId]:i[o.rels.length];c||(c=r(o.rels),i[o.rels.length]=c,o.rels.push({Id:c,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/".concat(l.name,".").concat(l.extension)}));const u={picture:{rId:c},range:s.range};if(s.hyperlinks&&s.hyperlinks.hyperlink){const e=r(o.rels);i[o.rels.length]=e,u.picture.hyperlinks={tooltip:s.hyperlinks.tooltip,rId:e},o.rels.push({Id:e,Type:a.Hyperlink,Target:s.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=s.imageId,o.anchors.push(u)}}),e.tables.forEach(e=>{const s=r(n);e.rId=s,n.push({Id:s,Type:a.Table,Target:"../tables/"+e.target}),e.columns.forEach(e=>{const{style:n}=e;n&&(e.dxfId=t.styles.addDxfStyle(n))})}),this.map.extLst.prepare(e,t)}render(e,t){e.openXml(i.StdDocAttributes),e.openNode("worksheet",M.WORKSHEET_ATTRIBUTES);const n=t.properties?{defaultRowHeight:t.properties.defaultRowHeight,dyDescent:t.properties.dyDescent,outlineLevelCol:t.properties.outlineLevelCol,outlineLevelRow:t.properties.outlineLevelRow}:void 0;t.properties&&t.properties.defaultColWidth&&(n.defaultColWidth=t.properties.defaultColWidth);const r={outlineProperties:t.properties&&t.properties.outlineProperties,tabColor:t.properties&&t.properties.tabColor,pageSetup:t.pageSetup&&t.pageSetup.fitToPage?{fitToPage:t.pageSetup.fitToPage}:void 0},s=t.pageSetup&&t.pageSetup.margins,o={showRowColHeaders:t.pageSetup&&t.pageSetup.showRowColHeaders,showGridLines:t.pageSetup&&t.pageSetup.showGridLines,horizontalCentered:t.pageSetup&&t.pageSetup.horizontalCentered,verticalCentered:t.pageSetup&&t.pageSetup.verticalCentered},l=t.sheetProtection;this.map.sheetPr.render(e,r),this.map.dimension.render(e,t.dimensions),this.map.sheetViews.render(e,t.views),this.map.sheetFormatPr.render(e,n),this.map.cols.render(e,t.cols),this.map.sheetData.render(e,t.rows),this.map.sheetProtection.render(e,l),this.map.autoFilter.render(e,t.autoFilter),this.map.mergeCells.render(e,t.mergeCells),this.map.conditionalFormatting.render(e,t.conditionalFormattings),this.map.dataValidations.render(e,t.dataValidations),this.map.hyperlinks.render(e,t.hyperlinks),this.map.printOptions.render(e,o),this.map.pageMargins.render(e,s),this.map.pageSetup.render(e,t.pageSetup),this.map.headerFooter.render(e,t.headerFooter),this.map.rowBreaks.render(e,t.rowBreaks),this.map.drawing.render(e,t.drawing),this.map.picture.render(e,t.background),this.map.tableParts.render(e,t.tables),this.map.extLst.render(e,t),t.rels&&t.rels.forEach(t=>{t.Type===a.VmlDrawing&&e.leafNode("legacyDrawing",{"r:id":t.Id})}),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"worksheet"===e.name?(r.each(this.map,e=>{e.reset()}),!0):(this.map[e.name]&&!this.ignoreNodes.includes(e.name)&&(this.parser=this.map[e.name],this.parser.parseOpen(e)),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;if("worksheet"===e){const e=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(e.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(e.outlineProperties=this.map.sheetPr.model.outlineProperties);const t={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},n=Object.assign(t,this.map.pageSetup.model,this.map.printOptions.model),r=A(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:e,views:this.map.sheetViews.model,pageSetup:n,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:r},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}return!0}reconcile(e,t){const n=(e.relationships||[]).reduce((n,r)=>{if(n[r.Id]=r,r.Type===a.Comments&&(e.comments=t.comments[r.Target].comments),r.Type===a.VmlDrawing&&e.comments&&e.comments.length){const n=t.vmlDrawings[r.Target].comments;e.comments.forEach((e,t)=>{e.note=Object.assign({},e.note,n[t])})}return n},{});if(t.commentsMap=(e.comments||[]).reduce((e,t)=>(t.ref&&(e[t.ref]=t),e),{}),t.hyperlinkMap=(e.hyperlinks||[]).reduce((e,t)=>(t.rId&&(e[t.address]=n[t.rId].Target),e),{}),t.formulae={},e.rows=e.rows&&e.rows.filter(Boolean)||[],e.rows.forEach(e=>{e.cells=e.cells&&e.cells.filter(Boolean)||[]}),this.map.cols.reconcile(e.cols,t),this.map.sheetData.reconcile(e.rows,t),this.map.conditionalFormatting.reconcile(e.conditionalFormattings,t),e.media=[],e.drawing){const r=n[e.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(r){const n=r[1];t.drawings[n].anchors.forEach(t=>{if(t.medium){const n={type:"image",imageId:t.medium.index,range:t.range,hyperlinks:t.picture.hyperlinks};e.media.push(n)}})}}const r=e.background&&n[e.background.rId];if(r){const n=r.Target.split("/media/")[1],s=t.mediaIndex&&t.mediaIndex[n];void 0!==s&&e.media.push({type:"background",imageId:s})}e.tables=(e.tables||[]).map(e=>{const r=n[e.rId];return t.tables[r.Target]}),delete e.relationships,delete e.hyperlinks,delete e.comments}}M.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},t.exports=M},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.attr=e.attr}render(e,t){t&&(e.openNode(this.tag),e.closeNode())}parseOpen(e){e.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.attr=e.attr,this.attrs=e.attrs,this._format=e.format||function(e){try{return Number.isNaN(e.getTime())?"":e.toISOString()}catch(e){return""}},this._parse=e.parse||function(e){return new Date(e)}}render(e,t){t&&(e.openNode(this.tag),this.attrs&&e.addAttributes(this.attrs),this.attr?e.addAttribute(this.attr,this._format(t)):e.writeText(this._format(t)),e.closeNode())}parseOpen(e){e.name===this.tag&&(this.attr?this.model=this._parse(e.attributes[this.attr]):this.text=[])}parseText(e){this.attr||this.text.push(e)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.attr=e.attr,this.attrs=e.attrs,this.zero=e.zero}render(e,t){(t||this.zero)&&(e.openNode(this.tag),this.attrs&&e.addAttributes(this.attrs),this.attr?e.addAttribute(this.attr,t):e.writeText(t),e.closeNode())}parseOpen(e){return e.name===this.tag&&(this.attr?this.model=parseInt(e.attributes[this.attr],10):this.text=[],!0)}parseText(e){this.attr||this.text.push(e)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{constructor(e){super(),this.tag=e.tag,this.attr=e.attr,this.attrs=e.attrs}render(e,t){void 0!==t&&(e.openNode(this.tag),this.attrs&&e.addAttributes(this.attrs),this.attr?e.addAttribute(this.attr,t):e.writeText(t),e.closeNode())}parseOpen(e){e.name===this.tag&&(this.attr?this.model=e.attributes[this.attr]:this.text=[])}parseText(e){this.attr||this.text.push(e)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(e,t,n){"use strict";const r=e("./base-xform"),s=e("../../utils/xml-stream");t.exports=class extends r{constructor(e){super(),this._model=e}render(e){if(!this._xml){const e=new s;!function e(t,n){t.openNode(n.tag,n.$),n.c&&n.c.forEach(n=>{e(t,n)}),n.t&&t.writeText(n.t),t.closeNode()}(e,this._model),this._xml=e.xml}e.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(e){return e!==this._model.tag}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(e,t,n){"use strict";const r=e("./text-xform"),s=e("./rich-text-xform"),i=e("../base-xform");t.exports=class extends i{constructor(){super(),this.map={r:new s,t:new r}}get tag(){return"rPh"}render(e,t){if(e.openNode(this.tag,{sb:t.sb||0,eb:t.eb||0}),t&&t.hasOwnProperty("richText")&&t.richText){const{r:n}=this.map;t.richText.forEach(t=>{n.render(e,t)})}else t&&this.map.t.render(e,t.text);e.closeNode()}parseOpen(e){const{name:t}=e;return this.parser?(this.parser.parseOpen(e),!0):t===this.tag?(this.model={sb:parseInt(e.attributes.sb,10),eb:parseInt(e.attributes.eb,10)},!0):(this.parser=this.map[t],!!this.parser&&(this.parser.parseOpen(e),!0))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser){if(!this.parser.parseClose(e)){switch(e){case"r":{let e=this.model.richText;e||(e=this.model.richText=[]),e.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}return e!==this.tag}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(e,t,n){"use strict";const r=e("./text-xform"),s=e("../style/font-xform"),i=e("../base-xform");class a extends i{constructor(e){super(),this.model=e}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new r)}get fontXform(){return this._fontXform||(this._fontXform=new s(a.FONT_OPTIONS))}render(e,t){t=t||this.model,e.openNode("r"),t.font&&this.fontXform.render(e,t.font),this.textXform.render(e,t.text),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(e),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(e),!0;default:return!1}}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){switch(e){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(e),!0}}}a.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},t.exports=a},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(e,t,n){"use strict";const r=e("./text-xform"),s=e("./rich-text-xform"),i=e("./phonetic-text-xform"),a=e("../base-xform");t.exports=class extends a{constructor(e){super(),this.model=e,this.map={r:new s,t:new r,rPh:new i}}get tag(){return"si"}render(e,t){e.openNode(this.tag),t&&t.hasOwnProperty("richText")&&t.richText?t.richText.length?t.richText.forEach(t=>{this.map.r.render(e,t)}):this.map.t.render(e,""):null!=t&&this.map.t.render(e,t),e.closeNode()}parseOpen(e){const{name:t}=e;return this.parser?(this.parser.parseOpen(e),!0):t===this.tag?(this.model={},!0):(this.parser=this.map[t],!!this.parser&&(this.parser.parseOpen(e),!0))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser){if(!this.parser.parseClose(e)){switch(e){case"r":{let e=this.model.richText;e||(e=this.model.richText=[]),e.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}return e!==this.tag}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(e,t,n){"use strict";const r=e("../../../utils/xml-stream"),s=e("../base-xform"),i=e("./shared-string-xform");t.exports=class extends s{constructor(e){super(),this.model=e||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new i)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(e){return this.model.values[e]}add(e){return e.richText?this.addRichText(e):this.addText(e)}addText(e){let t=this.hash[e];return void 0===t&&(t=this.hash[e]=this.model.values.length,this.model.values.push(e)),this.model.count++,t}addRichText(e){const t=this.sharedStringXform.toXml(e);let n=this.rich[t];return void 0===n&&(n=this.rich[t]=this.model.values.length,this.model.values.push(e)),this.model.count++,n}render(e,t){t=t||this._values,e.openXml(r.StdDocAttributes),e.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.count,uniqueCount:t.values.length});const n=this.sharedStringXform;t.values.forEach(t=>{n.render(e,t)}),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(e),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(e))}}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;if("sst"===e)return!1;throw new Error("Unexpected xml node in parseClose: "+e)}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"t"}render(e,t){e.openNode("t"),/^\s|\n|\s$/.test(t)&&e.addAttribute("xml:space","preserve"),e.writeText(t),e.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(e,t)=>String.fromCharCode(parseInt(t,16)))}parseOpen(e){return"t"===e.name&&(this._text=[],!0)}parseText(e){this._text.push(e)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(e,t,n){"use strict";const r=e("../../../doc/enums"),s=e("../../../utils/utils"),i=e("../base-xform"),a={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((e,t)=>(e[t]=!0,e),{}),horizontal(e){return this.horizontalValues[e]?e:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((e,t)=>(e[t]=!0,e),{}),vertical(e){return"middle"===e?"center":this.verticalValues[e]?e:void 0},wrapText:e=>!!e||void 0,shrinkToFit:e=>!!e||void 0,textRotation:e=>"vertical"===e||(e=s.validInt(e))>=-90&&e<=90?e:void 0,indent:e=>(e=s.validInt(e),Math.max(0,e)),readingOrder(e){switch(e){case"ltr":return r.ReadingOrder.LeftToRight;case"rtl":return r.ReadingOrder.RightToLeft;default:return}}},o={toXml(e){if(e=a.textRotation(e)){if("vertical"===e)return 255;const t=Math.round(e);if(t>=0&&t<=90)return t;if(t<0&&t>=-90)return 90-t}},toModel(e){const t=s.validInt(e);if(void 0!==t){if(255===t)return"vertical";if(t>=0&&t<=90)return t;if(t>90&&t<=180)return 90-t}}};t.exports=class extends i{get tag(){return"alignment"}render(e,t){e.addRollback(),e.openNode("alignment");let n=!1;function r(t,r){r&&(e.addAttribute(t,r),n=!0)}r("horizontal",a.horizontal(t.horizontal)),r("vertical",a.vertical(t.vertical)),r("wrapText",!!a.wrapText(t.wrapText)&&"1"),r("shrinkToFit",!!a.shrinkToFit(t.shrinkToFit)&&"1"),r("indent",a.indent(t.indent)),r("textRotation",o.toXml(t.textRotation)),r("readingOrder",a.readingOrder(t.readingOrder)),e.closeNode(),n?e.commit():e.rollback()}parseOpen(e){const t={};let n=!1;function r(e,r,s){e&&(t[r]=s,n=!0)}r(e.attributes.horizontal,"horizontal",e.attributes.horizontal),r(e.attributes.vertical,"vertical","center"===e.attributes.vertical?"middle":e.attributes.vertical),r(e.attributes.wrapText,"wrapText",s.parseBoolean(e.attributes.wrapText)),r(e.attributes.shrinkToFit,"shrinkToFit",s.parseBoolean(e.attributes.shrinkToFit)),r(e.attributes.indent,"indent",parseInt(e.attributes.indent,10)),r(e.attributes.textRotation,"textRotation",o.toModel(e.attributes.textRotation)),r(e.attributes.readingOrder,"readingOrder","2"===e.attributes.readingOrder?"rtl":"ltr"),this.model=n?t:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(e,t,n){"use strict";const s=e("../base-xform"),i=e("../../../utils/utils"),a=e("./color-xform");class o extends s{constructor(e){super(),this.name=e,this.map={color:new a}}get tag(){return this.name}render(e,t,n){const r=t&&t.color||n||this.defaultColor;e.openNode(this.name),t&&t.style&&(e.addAttribute("style",t.style),r&&this.map.color.render(e,r)),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case this.name:{const{style:t}=e.attributes;return this.model=t?{style:t}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(e),!0;default:return!1}}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):(e===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(e){return o.validStyleValues[e]}}o.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((e,t)=>(e[t]=!0,e),{}),t.exports=class extends s{constructor(){super(),this.map={top:new o("top"),left:new o("left"),bottom:new o("bottom"),right:new o("right"),diagonal:new o("diagonal")}}render(e,t){const{color:n}=t;function s(s,i){s&&!s.color&&t.color&&(s=r(r({},s),{},{color:t.color})),i.render(e,s,n)}e.openNode("border"),t.diagonal&&t.diagonal.style&&(t.diagonal.up&&e.addAttribute("diagonalUp","1"),t.diagonal.down&&e.addAttribute("diagonalDown","1")),s(t.left,this.map.left),s(t.right,this.map.right),s(t.top,this.map.top),s(t.bottom,this.map.bottom),s(t.diagonal,this.map.diagonal),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"border"===e.name?(this.reset(),this.diagonalUp=i.parseBoolean(e.attributes.diagonalUp),this.diagonalDown=i.parseBoolean(e.attributes.diagonalDown),!0):(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;if("border"===e){const e=this.model={},t=function(t,n,r){n&&(r&&Object.assign(n,r),e[t]=n)};t("left",this.map.left.model),t("right",this.map.right.model),t("top",this.map.top.model),t("bottom",this.map.bottom.model),t("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{constructor(e){super(),this.name=e||"color"}get tag(){return this.name}render(e,t){return!!t&&(e.openNode(this.name),t.argb?e.addAttribute("rgb",t.argb):void 0!==t.theme?(e.addAttribute("theme",t.theme),void 0!==t.tint&&e.addAttribute("tint",t.tint)):void 0!==t.indexed?e.addAttribute("indexed",t.indexed):e.addAttribute("auto","1"),e.closeNode(),!0)}parseOpen(e){return e.name===this.name&&(e.attributes.rgb?this.model={argb:e.attributes.rgb}:e.attributes.theme?(this.model={theme:parseInt(e.attributes.theme,10)},e.attributes.tint&&(this.model.tint=parseFloat(e.attributes.tint))):e.attributes.indexed?this.model={indexed:parseInt(e.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./alignment-xform"),i=e("./border-xform"),a=e("./fill-xform"),o=e("./font-xform"),l=e("./numfmt-xform"),c=e("./protection-xform");t.exports=class extends r{constructor(){super(),this.map={alignment:new s,border:new i,fill:new a,font:new o,numFmt:new l,protection:new c}}get tag(){return"dxf"}render(e,t){if(e.openNode(this.tag),t.font&&this.map.font.render(e,t.font),t.numFmt&&t.numFmtId){const n={id:t.numFmtId,formatCode:t.numFmt};this.map.numFmt.render(e,n)}t.fill&&this.map.fill.render(e,t.fill),t.alignment&&this.map.alignment.render(e,t.alignment),t.border&&this.map.border.render(e,t.border),t.protection&&this.map.protection.render(e,t.protection),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):e.name===this.tag?(this.reset(),!0):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./color-xform");class i extends r{constructor(){super(),this.map={color:new s}}get tag(){return"stop"}render(e,t){e.openNode("stop"),e.addAttribute("position",t.position),this.map.color.render(e,t.color),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"stop":return this.model={position:parseFloat(e.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(e),!0;default:return!1}}parseText(){}parseClose(e){return!!this.parser&&(this.parser.parseClose(e)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class a extends r{constructor(){super(),this.map={fgColor:new s("fgColor"),bgColor:new s("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(e,t){e.openNode("patternFill"),e.addAttribute("patternType",t.pattern),t.fgColor&&this.map.fgColor.render(e,t.fgColor),t.bgColor&&this.map.bgColor.render(e,t.bgColor),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"patternFill"===e.name?(this.model={type:"pattern",pattern:e.attributes.patternType},!0):(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return!!this.parser&&(this.parser.parseClose(e)||(this.parser.model&&(this.model[e]=this.parser.model),this.parser=void 0),!0)}}class o extends r{constructor(){super(),this.map={stop:new i}}get name(){return"gradient"}get tag(){return"gradientFill"}render(e,t){switch(e.openNode("gradientFill"),t.gradient){case"angle":e.addAttribute("degree",t.degree);break;case"path":e.addAttribute("type","path"),t.center.left&&(e.addAttribute("left",t.center.left),void 0===t.center.right&&e.addAttribute("right",t.center.left)),t.center.right&&e.addAttribute("right",t.center.right),t.center.top&&(e.addAttribute("top",t.center.top),void 0===t.center.bottom&&e.addAttribute("bottom",t.center.top)),t.center.bottom&&e.addAttribute("bottom",t.center.bottom)}const n=this.map.stop;t.stops.forEach(t=>{n.render(e,t)}),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"gradientFill":{const t=this.model={stops:[]};return e.attributes.degree?(t.gradient="angle",t.degree=parseInt(e.attributes.degree,10)):"path"===e.attributes.type&&(t.gradient="path",t.center={left:e.attributes.left?parseFloat(e.attributes.left):0,top:e.attributes.top?parseFloat(e.attributes.top):0},e.attributes.right!==e.attributes.left&&(t.center.right=e.attributes.right?parseFloat(e.attributes.right):0),e.attributes.bottom!==e.attributes.top&&(t.center.bottom=e.attributes.bottom?parseFloat(e.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(e),!0;default:return!1}}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return!!this.parser&&(this.parser.parseClose(e)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class l extends r{constructor(){super(),this.map={patternFill:new a,gradientFill:new o}}get tag(){return"fill"}render(e,t){switch(e.addRollback(),e.openNode("fill"),t.type){case"pattern":this.map.patternFill.render(e,t);break;case"gradient":this.map.gradientFill.render(e,t);break;default:return void e.rollback()}e.closeNode(),e.commit()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"fill"===e.name?(this.model={},!0):(this.parser=this.map[e.name],!!this.parser&&(this.parser.parseOpen(e),!0))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return!!this.parser&&(this.parser.parseClose(e)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(e){return l.validPatternValues[e]}}l.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((e,t)=>(e[t]=!0,e),{}),l.StopXform=i,l.PatternFillXform=a,l.GradientFillXform=o,t.exports=l},{"../base-xform":32,"./color-xform":128}],131:[function(e,t,n){"use strict";const r=e("./color-xform"),s=e("../simple/boolean-xform"),i=e("../simple/integer-xform"),a=e("../simple/string-xform"),o=e("./underline-xform"),l=e("../../../utils/under-dash"),c=e("../base-xform");class u extends c{constructor(e){super(),this.options=e||u.OPTIONS,this.map={b:{prop:"bold",xform:new s({tag:"b",attr:"val"})},i:{prop:"italic",xform:new s({tag:"i",attr:"val"})},u:{prop:"underline",xform:new o},charset:{prop:"charset",xform:new i({tag:"charset",attr:"val"})},color:{prop:"color",xform:new r},condense:{prop:"condense",xform:new s({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new s({tag:"extend",attr:"val"})},family:{prop:"family",xform:new i({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new s({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new a({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new a({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new s({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new s({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new i({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new a({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(e,t){const{map:n}=this;e.openNode(this.options.tagName),l.each(this.map,(r,s)=>{n[s].xform.render(e,t[r.prop])}),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):this.map[e.name]?(this.parser=this.map[e.name].xform,this.parser.parseOpen(e)):e.name===this.options.tagName&&(this.model={},!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser&&!this.parser.parseClose(e)){const t=this.map[e];return this.parser.model&&(this.model[t.prop]=this.parser.model),this.parser=void 0,!0}return e!==this.options.tagName}}u.OPTIONS={tagName:"font",fontNameTag:"name"},t.exports=u},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(e,t,n){"use strict";const r=e("../../../utils/under-dash"),s=e("../../defaultnumformats"),i=e("../base-xform"),a=function(){const e={};return r.each(s,(t,n)=>{t.f&&(e[t.f]=parseInt(n,10))}),e}();class o extends i{constructor(e,t){super(),this.id=e,this.formatCode=t}get tag(){return"numFmt"}render(e,t){e.leafNode("numFmt",{numFmtId:t.id,formatCode:t.formatCode})}parseOpen(e){return"numFmt"===e.name&&(this.model={id:parseInt(e.attributes.numFmtId,10),formatCode:e.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0)}parseText(){}parseClose(){return!1}}o.getDefaultFmtId=function(e){return a[e]},o.getDefaultFmtCode=function(e){return s[e]&&s[e].f},t.exports=o},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(e,t,n){"use strict";const r=e("../base-xform"),s={boolean:(e,t)=>void 0===e?t:e};t.exports=class extends r{get tag(){return"protection"}render(e,t){e.addRollback(),e.openNode("protection");let n=!1;function r(t,r){void 0!==r&&(e.addAttribute(t,r),n=!0)}r("locked",s.boolean(t.locked,!0)?void 0:"0"),r("hidden",s.boolean(t.hidden,!1)?"1":void 0),e.closeNode(),n?e.commit():e.rollback()}parseOpen(e){const t={locked:!("0"===e.attributes.locked),hidden:"1"===e.attributes.hidden},n=!t.locked||t.hidden;this.model=n?t:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./alignment-xform"),i=e("./protection-xform");t.exports=class extends r{constructor(e){super(),this.xfId=!(!e||!e.xfId),this.map={alignment:new s,protection:new i}}get tag(){return"xf"}render(e,t){e.openNode("xf",{numFmtId:t.numFmtId||0,fontId:t.fontId||0,fillId:t.fillId||0,borderId:t.borderId||0}),this.xfId&&e.addAttribute("xfId",t.xfId||0),t.numFmtId&&e.addAttribute("applyNumberFormat","1"),t.fontId&&e.addAttribute("applyFont","1"),t.fillId&&e.addAttribute("applyFill","1"),t.borderId&&e.addAttribute("applyBorder","1"),t.alignment&&e.addAttribute("applyAlignment","1"),t.protection&&e.addAttribute("applyProtection","1"),t.alignment&&this.map.alignment.render(e,t.alignment),t.protection&&this.map.protection.render(e,t.protection),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;switch(e.name){case"xf":return this.model={numFmtId:parseInt(e.attributes.numFmtId,10),fontId:parseInt(e.attributes.fontId,10),fillId:parseInt(e.attributes.fillId,10),borderId:parseInt(e.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(e.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(e),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(e),!0;default:return!1}}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):"xf"!==e}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(e,t,n){"use strict";const r=e("../../../doc/enums"),s=e("../../../utils/xml-stream"),i=e("../base-xform"),a=e("../static-xform"),o=e("../list-xform"),l=e("./font-xform"),c=e("./fill-xform"),u=e("./border-xform"),d=e("./numfmt-xform"),h=e("./style-xform"),f=e("./dxf-xform");class p extends i{constructor(e){super(),this.map={numFmts:new o({tag:"numFmts",count:!0,childXform:new d}),fonts:new o({tag:"fonts",count:!0,childXform:new l,$:{"x14ac:knownFonts":1}}),fills:new o({tag:"fills",count:!0,childXform:new c}),borders:new o({tag:"borders",count:!0,childXform:new u}),cellStyleXfs:new o({tag:"cellStyleXfs",count:!0,childXform:new h}),cellXfs:new o({tag:"cellXfs",count:!0,childXform:new h({xfId:!0})}),dxfs:new o({tag:"dxfs",always:!0,count:!0,childXform:new f}),numFmt:new d,font:new l,fill:new c,border:new u,style:new h({xfId:!0}),cellStyles:p.STATIC_XFORMS.cellStyles,tableStyles:p.STATIC_XFORMS.tableStyles,extLst:p.STATIC_XFORMS.extLst},e&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(e,t){t=t||this.model,e.openXml(s.StdDocAttributes),e.openNode("styleSheet",p.STYLESHEET_ATTRIBUTES),this.index?(t.numFmts&&t.numFmts.length&&(e.openNode("numFmts",{count:t.numFmts.length}),t.numFmts.forEach(t=>{e.writeXml(t)}),e.closeNode()),t.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),e.openNode("fonts",{count:t.fonts.length,"x14ac:knownFonts":1}),t.fonts.forEach(t=>{e.writeXml(t)}),e.closeNode(),e.openNode("fills",{count:t.fills.length}),t.fills.forEach(t=>{e.writeXml(t)}),e.closeNode(),e.openNode("borders",{count:t.borders.length}),t.borders.forEach(t=>{e.writeXml(t)}),e.closeNode(),this.map.cellStyleXfs.render(e,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),e.openNode("cellXfs",{count:t.styles.length}),t.styles.forEach(t=>{e.writeXml(t)}),e.closeNode()):(this.map.numFmts.render(e,t.numFmts),this.map.fonts.render(e,t.fonts),this.map.fills.render(e,t.fills),this.map.borders.render(e,t.borders),this.map.cellStyleXfs.render(e,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(e,t.styles)),p.STATIC_XFORMS.cellStyles.render(e),this.map.dxfs.render(e,t.dxfs),p.STATIC_XFORMS.tableStyles.render(e),p.STATIC_XFORMS.extLst.render(e),e.closeNode()}parseOpen(e){return this.parser?(this.parser.parseOpen(e),!0):"styleSheet"===e.name?(this.initIndex(),!0):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e),!0)}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.parser=void 0),!0;if("styleSheet"===e){this.model={};const e=(e,t)=>{t.model&&t.model.length&&(this.model[e]=t.model)};if(e("numFmts",this.map.numFmts),e("fonts",this.map.fonts),e("fills",this.map.fills),e("borders",this.map.borders),e("styles",this.map.cellXfs),e("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const e=this.index.numFmt;this.model.numFmts.forEach(t=>{e[t.id]=t.formatCode})}return!1}return!0}addStyleModel(e,t){if(!e)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(e))return this.weakMap.get(e);const n={};if(t=t||r.ValueType.Number,e.numFmt)n.numFmtId=this._addNumFmtStr(e.numFmt);else switch(t){case r.ValueType.Number:n.numFmtId=this._addNumFmtStr("General");break;case r.ValueType.Date:n.numFmtId=this._addNumFmtStr("mm-dd-yy")}e.font&&(n.fontId=this._addFont(e.font)),e.border&&(n.borderId=this._addBorder(e.border)),e.fill&&(n.fillId=this._addFill(e.fill)),e.alignment&&(n.alignment=e.alignment),e.protection&&(n.protection=e.protection);const s=this._addStyle(n);return this.weakMap&&this.weakMap.set(e,s),s}getStyleModel(e){const t=this.model.styles[e];if(!t)return null;let n=this.index.model[e];if(n)return n;if(n=this.index.model[e]={},t.numFmtId){const e=this.index.numFmt[t.numFmtId]||d.getDefaultFmtCode(t.numFmtId);e&&(n.numFmt=e)}function r(e,t,r){if(r||0===r){const s=t[r];s&&(n[e]=s)}}return r("font",this.model.fonts,t.fontId),r("border",this.model.borders,t.borderId),r("fill",this.model.fills,t.fillId),t.alignment&&(n.alignment=t.alignment),t.protection&&(n.protection=t.protection),n}addDxfStyle(e){return e.numFmt&&(e.numFmtId=this._addNumFmtStr(e.numFmt)),this.model.dxfs.push(e),this.model.dxfs.length-1}getDxfStyle(e){return this.model.dxfs[e]}_addStyle(e){const t=this.map.style.toXml(e);let n=this.index.style[t];return void 0===n&&(n=this.index.style[t]=this.model.styles.length,this.model.styles.push(t)),n}_addNumFmtStr(e){let t=d.getDefaultFmtId(e);if(void 0!==t)return t;if(t=this.index.numFmt[e],void 0!==t)return t;t=this.index.numFmt[e]=164+this.model.numFmts.length;const n=this.map.numFmt.toXml({id:t,formatCode:e});return this.model.numFmts.push(n),t}_addFont(e){const t=this.map.font.toXml(e);let n=this.index.font[t];return void 0===n&&(n=this.index.font[t]=this.model.fonts.length,this.model.fonts.push(t)),n}_addBorder(e){const t=this.map.border.toXml(e);let n=this.index.border[t];return void 0===n&&(n=this.index.border[t]=this.model.borders.length,this.model.borders.push(t)),n}_addFill(e){const t=this.map.fill.toXml(e);let n=this.index.fill[t];return void 0===n&&(n=this.index.fill[t]=this.model.fills.length,this.model.fills.push(t)),n}}p.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},p.STATIC_XFORMS={cellStyles:new a({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new a({tag:"dxfs",$:{count:0}}),tableStyles:new a({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new a({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},p.Mock=class extends p{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(e){return e.autodrain(),Promise.resolve()}addStyleModel(e,t){return t===r.ValueType.Date?this.dateStyleId:0}get dateStyleId(){if(!this._dateStyleId){const e={numFmtId:d.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(e)}return this._dateStyleId}getStyleModel(){return{}}},t.exports=p},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(e,t,n){"use strict";const r=e("../base-xform");class s extends r{constructor(e){super(),this.model=e}get tag(){return"u"}render(e,t){if(!0===(t=t||this.model))e.leafNode("u");else{const n=s.Attributes[t];n&&e.leafNode("u",n)}}parseOpen(e){"u"===e.name&&(this.model=e.attributes.val||!0)}parseText(){}parseClose(){return!1}}s.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},t.exports=s},{"../base-xform":32}],137:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("./filter-column-xform");t.exports=class extends r{constructor(){super(),this.map={filterColumn:new s}}get tag(){return"autoFilter"}prepare(e){e.columns.forEach((e,t)=>{this.map.filterColumn.prepare(e,{index:t})})}render(e,t){return e.openNode(this.tag,{ref:t.autoFilterRef}),t.columns.forEach(t=>{this.map.filterColumn.render(e,t)}),e.closeNode(),!0}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;if(e.name===this.tag)return this.model={autoFilterRef:e.attributes.ref,columns:[]},!0;if(this.parser=this.map[e.name],this.parser)return this.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(e))}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){if(this.parser)return this.parser.parseClose(e)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;if(e===this.tag)return!1;throw new Error("Unexpected xml node in parseClose: "+e)}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"customFilter"}render(e,t){e.leafNode(this.tag,{val:t.val,operator:t.operator})}parseOpen(e){return e.name===this.tag&&(this.model={val:e.attributes.val,operator:e.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(e,t,n){"use strict";const r=e("../base-xform"),s=e("../list-xform"),i=e("./custom-filter-xform"),a=e("./filter-xform");t.exports=class extends r{constructor(){super(),this.map={customFilters:new s({tag:"customFilters",count:!1,empty:!0,childXform:new i}),filters:new s({tag:"filters",count:!1,empty:!0,childXform:new a})}}get tag(){return"filterColumn"}prepare(e,t){e.colId=t.index.toString()}render(e,t){return t.customFilters?(e.openNode(this.tag,{colId:t.colId,hiddenButton:t.filterButton?"0":"1"}),this.map.customFilters.render(e,t.customFilters),e.closeNode(),!0):(e.leafNode(this.tag,{colId:t.colId,hiddenButton:t.filterButton?"0":"1"}),!0)}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;const{attributes:t}=e;if(e.name===this.tag)return this.model={filterButton:"0"===t.hiddenButton},!0;if(this.parser=this.map[e.name],this.parser)return this.parseOpen(e),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(e))}parseText(){}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.customFilters=this.map.customFilters.model,!1)}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"filter"}render(e,t){e.leafNode(this.tag,{val:t.val})}parseOpen(e){return e.name===this.tag&&(this.model={val:e.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"tableColumn"}prepare(e,t){e.id=t.index+1}render(e,t){return e.leafNode(this.tag,{id:t.id.toString(),name:t.name,totalsRowLabel:t.totalsRowLabel,totalsRowFunction:t.totalsRowFunction,dxfId:t.dxfId}),!0}parseOpen(e){if(e.name===this.tag){const{attributes:t}=e;return this.model={name:t.name,totalsRowLabel:t.totalsRowLabel,totalsRowFunction:t.totalsRowFunction,dxfId:t.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(e,t,n){"use strict";const r=e("../base-xform");t.exports=class extends r{get tag(){return"tableStyleInfo"}render(e,t){return e.leafNode(this.tag,{name:t.theme?t.theme:void 0,showFirstColumn:t.showFirstColumn?"1":"0",showLastColumn:t.showLastColumn?"1":"0",showRowStripes:t.showRowStripes?"1":"0",showColumnStripes:t.showColumnStripes?"1":"0"}),!0}parseOpen(e){if(e.name===this.tag){const{attributes:t}=e;return this.model={theme:t.name?t.name:null,showFirstColumn:"1"===t.showFirstColumn,showLastColumn:"1"===t.showLastColumn,showRowStripes:"1"===t.showRowStripes,showColumnStripes:"1"===t.showColumnStripes},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(e,t,n){"use strict";const s=e("../../../utils/xml-stream"),i=e("../base-xform"),a=e("../list-xform"),o=e("./auto-filter-xform"),l=e("./table-column-xform"),c=e("./table-style-info-xform");class u extends i{constructor(){super(),this.map={autoFilter:new o,tableColumns:new a({tag:"tableColumns",count:!0,empty:!0,childXform:new l}),tableStyleInfo:new c}}prepare(e,t){this.map.autoFilter.prepare(e),this.map.tableColumns.prepare(e.columns,t)}get tag(){return"table"}render(e,t){e.openXml(s.StdDocAttributes),e.openNode(this.tag,r(r({},u.TABLE_ATTRIBUTES),{},{id:t.id,name:t.name,displayName:t.displayName||t.name,ref:t.tableRef,totalsRowCount:t.totalsRow?"1":void 0,totalsRowShown:t.totalsRow?void 0:"1",headerRowCount:t.headerRow?"1":"0"})),this.map.autoFilter.render(e,t),this.map.tableColumns.render(e,t.columns),this.map.tableStyleInfo.render(e,t.style),e.closeNode()}parseOpen(e){if(this.parser)return this.parser.parseOpen(e),!0;const{name:t,attributes:n}=e;return t===this.tag?(this.reset(),this.model={name:n.name,displayName:n.displayName||n.name,tableRef:n.ref,totalsRow:"1"===n.totalsRowCount,headerRow:"1"===n.headerRowCount}):(this.parser=this.map[e.name],this.parser&&this.parser.parseOpen(e)),!0}parseText(e){this.parser&&this.parser.parseText(e)}parseClose(e){return this.parser?(this.parser.parseClose(e)||(this.parser=void 0),!0):e!==this.tag||(this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((e,t)=>{this.model.columns[t].filterButton=e.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1)}reconcile(e,t){e.columns.forEach(e=>{void 0!==e.dxfId&&(e.style=t.styles.getDxfStyle(e.dxfId))})}}u.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},t.exports=u},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(e,t,n){(function(n,r){(function(){"use strict";const s=e("fs"),i=e("jszip"),{PassThrough:o}=e("readable-stream"),l=e("../utils/zip-stream"),c=e("../utils/stream-buf"),u=e("../utils/utils"),d=e("../utils/xml-stream"),{bufferToString:h}=e("../utils/browser-buffer-decode"),f=e("./xform/style/styles-xform"),p=e("./xform/core/core-xform"),m=e("./xform/strings/shared-strings-xform"),g=e("./xform/core/relationships-xform"),b=e("./xform/core/content-types-xform"),v=e("./xform/core/app-xform"),y=e("./xform/book/workbook-xform"),w=e("./xform/sheet/worksheet-xform"),x=e("./xform/drawing/drawing-xform"),k=e("./xform/table/table-xform"),_=e("./xform/comment/comments-xform"),S=e("./xform/comment/vml-notes-xform"),j=e("./xml/theme1");class N{constructor(e){this.workbook=e}async readFile(e,t){if(!await u.fs.exists(e))throw new Error("File not found: "+e);const n=s.createReadStream(e);try{const e=await this.read(n,t);return n.close(),e}catch(e){throw n.close(),e}}parseRels(e){return(new g).parseStream(e)}parseWorkbook(e){return(new y).parseStream(e)}parseSharedStrings(e){return(new m).parseStream(e)}reconcile(e,t){const n=new y,r=new w(t),s=new x,i=new k;n.reconcile(e);const a={media:e.media,mediaIndex:e.mediaIndex};Object.keys(e.drawings).forEach(t=>{const n=e.drawings[t],r=e.drawingRels[t];r&&(a.rels=r.reduce((e,t)=>(e[t.Id]=t,e),{}),(n.anchors||[]).forEach(e=>{const t=e.picture&&e.picture.hyperlinks;t&&a.rels[t.rId]&&(t.hyperlink=a.rels[t.rId].Target,delete t.rId)}),s.reconcile(n,a))});const o={styles:e.styles};Object.values(e.tables).forEach(e=>{i.reconcile(e,o)});const l={styles:e.styles,sharedStrings:e.sharedStrings,media:e.media,mediaIndex:e.mediaIndex,date1904:e.properties&&e.properties.date1904,drawings:e.drawings,comments:e.comments,tables:e.tables,vmlDrawings:e.vmlDrawings};e.worksheets.forEach(t=>{t.relationships=e.worksheetRels[t.sheetNo],r.reconcile(t,l)}),delete e.worksheetHash,delete e.worksheetRels,delete e.globalRels,delete e.sharedStrings,delete e.workbookRels,delete e.sheetDefs,delete e.styles,delete e.mediaIndex,delete e.drawings,delete e.drawingRels,delete e.vmlDrawings}async _processWorksheetEntry(e,t,n,r,s){const i=new w(r),a=await i.parseStream(e);a.sheetNo=n,t.worksheetHash[s]=a,t.worksheets.push(a)}async _processCommentEntry(e,t,n){const r=new _,s=await r.parseStream(e);t.comments["../".concat(n,".xml")]=s}async _processTableEntry(e,t,n){const r=new k,s=await r.parseStream(e);t.tables["../tables/".concat(n,".xml")]=s}async _processWorksheetRelsEntry(e,t,n){const r=new g,s=await r.parseStream(e);t.worksheetRels[n]=s}async _processMediaEntry(e,t,n){const r=n.lastIndexOf(".");if(r>=1){const s=n.substr(r+1),i=n.substr(0,r);await new Promise((r,a)=>{const o=new c;o.on("finish",()=>{t.mediaIndex[n]=t.media.length,t.mediaIndex[i]=t.media.length;const e={type:"image",name:i,extension:s,buffer:o.toBuffer()};t.media.push(e),r()}),e.on("error",e=>{a(e)}),e.pipe(o)})}}async _processDrawingEntry(e,t,n){const r=new x,s=await r.parseStream(e);t.drawings[n]=s}async _processDrawingRelsEntry(e,t,n){const r=new g,s=await r.parseStream(e);t.drawingRels[n]=s}async _processVmlDrawingEntry(e,t,n){const r=new S,s=await r.parseStream(e);t.vmlDrawings["../drawings/".concat(n,".vml")]=s}async _processThemeEntry(e,t,n){await new Promise((r,s)=>{const i=new c;e.on("error",s),i.on("error",s),i.on("finish",()=>{t.themes[n]=i.read().toString(),r()}),e.pipe(i)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(e,t){!e[Symbol.asyncIterator]&&e.pipe&&(e=e.pipe(new o));const n=[];var s,i=!1,l=!1;try{for(var c,u=a(e);i=!(c=await u.next()).done;i=!1){const e=c.value;n.push(e)}}catch(d){l=!0,s=d}finally{try{i&&null!=u.return&&await u.return()}finally{if(l)throw s}}return this.load(r.concat(n),t)}async load(e,t){let s;s=t&&t.base64?r.from(e.toString(),"base64"):e;const a={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},l=await i.loadAsync(s);for(const r of Object.values(l.files))if(!r.dir){let e,s=r.name;if("/"===s[0]&&(s=s.substr(1)),s.match(/xl\/media\//)||s.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))e=new o,e.write(await r.async("nodebuffer"));else{let t;e=new o({writableObjectMode:!0,readableObjectMode:!0}),t=n.browser?h(await r.async("nodebuffer")):await r.async("string");const s=16384;for(let n=0;n<t.length;n+=s)e.write(t.substring(n,n+s))}switch(e.end(),s){case"_rels/.rels":a.globalRels=await this.parseRels(e);break;case"xl/workbook.xml":{const t=await this.parseWorkbook(e);a.sheets=t.sheets,a.definedNames=t.definedNames,a.views=t.views,a.properties=t.properties,a.calcProperties=t.calcProperties;break}case"xl/_rels/workbook.xml.rels":a.workbookRels=await this.parseRels(e);break;case"xl/sharedStrings.xml":a.sharedStrings=new m,await a.sharedStrings.parseStream(e);break;case"xl/styles.xml":a.styles=new f,await a.styles.parseStream(e);break;case"docProps/app.xml":{const t=new v,n=await t.parseStream(e);a.company=n.company,a.manager=n.manager;break}case"docProps/core.xml":{const t=new p,n=await t.parseStream(e);Object.assign(a,n);break}default:{let n=s.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(n){await this._processWorksheetEntry(e,a,n[1],t,s);break}if(n=s.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),n){await this._processWorksheetRelsEntry(e,a,n[1]);break}if(n=s.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),n){await this._processThemeEntry(e,a,n[1]);break}if(n=s.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),n){await this._processMediaEntry(e,a,n[1]);break}if(n=s.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),n){await this._processDrawingEntry(e,a,n[1]);break}if(n=s.match(/xl\/(comments\d+)[.]xml/),n){await this._processCommentEntry(e,a,n[1]);break}if(n=s.match(/xl\/tables\/(table\d+)[.]xml/),n){await this._processTableEntry(e,a,n[1]);break}if(n=s.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),n){await this._processDrawingRelsEntry(e,a,n[1]);break}if(n=s.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),n){await this._processVmlDrawingEntry(e,a,n[1]);break}}}}return this.reconcile(a,t),this.workbook.model=a,this.workbook}async addMedia(e,t){await Promise.all(t.media.map(async t=>{if("image"===t.type){const n="xl/media/".concat(t.name,".").concat(t.extension);if(t.filename){const r=await function(e,t){return new Promise((n,r)=>{s.readFile(e,t,(e,t)=>{e?r(e):n(t)})})}(t.filename);return e.append(r,{name:n})}if(t.buffer)return e.append(t.buffer,{name:n});if(t.base64){const r=t.base64,s=r.substring(r.indexOf(",")+1);return e.append(s,{name:n,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(e,t){const n=new x,r=new g;t.worksheets.forEach(t=>{const{drawing:s}=t;if(s){n.prepare(s,{});let t=n.toXml(s);e.append(t,{name:"xl/drawings/".concat(s.name,".xml")}),t=r.toXml(s.rels),e.append(t,{name:"xl/drawings/_rels/".concat(s.name,".xml.rels")})}})}addTables(e,t){const n=new k;t.worksheets.forEach(t=>{const{tables:r}=t;r.forEach(t=>{n.prepare(t,{});const r=n.toXml(t);e.append(r,{name:"xl/tables/"+t.target})})})}async addContentTypes(e,t){const n=(new b).toXml(t);e.append(n,{name:"[Content_Types].xml"})}async addApp(e,t){const n=(new v).toXml(t);e.append(n,{name:"docProps/app.xml"})}async addCore(e,t){const n=new p;e.append(n.toXml(t),{name:"docProps/core.xml"})}async addThemes(e,t){const n=t.themes||{theme1:j};Object.keys(n).forEach(t=>{const r=n[t],s="xl/theme/".concat(t,".xml");e.append(r,{name:s})})}async addOfficeRels(e){const t=(new g).toXml([{Id:"rId1",Type:N.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:N.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:N.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);e.append(t,{name:"_rels/.rels"})}async addWorkbookRels(e,t){let n=1;const r=[{Id:"rId"+n++,Type:N.RelType.Styles,Target:"styles.xml"},{Id:"rId"+n++,Type:N.RelType.Theme,Target:"theme/theme1.xml"}];t.sharedStrings.count&&r.push({Id:"rId"+n++,Type:N.RelType.SharedStrings,Target:"sharedStrings.xml"}),t.worksheets.forEach(e=>{e.rId="rId"+n++,r.push({Id:e.rId,Type:N.RelType.Worksheet,Target:"worksheets/sheet".concat(e.id,".xml")})});const s=(new g).toXml(r);e.append(s,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(e,t){t.sharedStrings&&t.sharedStrings.count&&e.append(t.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(e,t){const{xml:n}=t.styles;n&&e.append(n,{name:"xl/styles.xml"})}async addWorkbook(e,t){const n=new y;e.append(n.toXml(t),{name:"xl/workbook.xml"})}async addWorksheets(e,t){const n=new w,r=new g,s=new _,i=new S;t.worksheets.forEach(t=>{let a=new d;n.render(a,t),e.append(a.xml,{name:"xl/worksheets/sheet".concat(t.id,".xml")}),t.rels&&t.rels.length&&(a=new d,r.render(a,t.rels),e.append(a.xml,{name:"xl/worksheets/_rels/sheet".concat(t.id,".xml.rels")})),t.comments.length>0&&(a=new d,s.render(a,t),e.append(a.xml,{name:"xl/comments".concat(t.id,".xml")}),a=new d,i.render(a,t),e.append(a.xml,{name:"xl/drawings/vmlDrawing".concat(t.id,".vml")}))})}_finalize(e){return new Promise((t,n)=>{e.on("finish",()=>{t(this)}),e.on("error",n),e.finalize()})}prepareModel(e,t){e.creator=e.creator||"ExcelJS",e.lastModifiedBy=e.lastModifiedBy||"ExcelJS",e.created=e.created||new Date,e.modified=e.modified||new Date,e.useSharedStrings=void 0===t.useSharedStrings||t.useSharedStrings,e.useStyles=void 0===t.useStyles||t.useStyles,e.sharedStrings=new m,e.styles=e.useStyles?new f(!0):new f.Mock;const n=new y,r=new w;n.prepare(e);const s={sharedStrings:e.sharedStrings,styles:e.styles,date1904:e.properties.date1904,drawingsCount:0,media:e.media};s.drawings=e.drawings=[],s.commentRefs=e.commentRefs=[];let i=0;e.tables=[],e.worksheets.forEach(t=>{t.tables.forEach(t=>{i++,t.target="table".concat(i,".xml"),t.id=i,e.tables.push(t)}),r.prepare(t,s)})}async write(e,t){t=t||{};const{model:n}=this.workbook,r=new l.ZipWriter(t.zip);return r.pipe(e),this.prepareModel(n,t),await this.addContentTypes(r,n),await this.addOfficeRels(r,n),await this.addWorkbookRels(r,n),await this.addWorksheets(r,n),await this.addSharedStrings(r,n),await this.addDrawings(r,n),await this.addTables(r,n),await Promise.all([this.addThemes(r,n),this.addStyles(r,n)]),await this.addMedia(r,n),await Promise.all([this.addApp(r,n),this.addCore(r,n)]),await this.addWorkbook(r,n),this._finalize(r)}writeFile(e,t){const n=s.createWriteStream(e);return new Promise((e,r)=>{n.on("finish",()=>{e()}),n.on("error",e=>{r(e)}),this.write(n,t).then(()=>{n.end()}).catch(e=>{r(e)})})}async writeBuffer(e){const t=new c;return await this.write(t,e),t.read()}}N.RelType=e("./rel-type"),t.exports=N}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(e,t,n){"use strict";t.exports='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/> <a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/> <a:font script="Hans" typeface="\u5b8b\u4f53"/> <a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/> <a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/> <a:font script="Hans" typeface="\u5b8b\u4f53"/> <a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>'},{}],146:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CsvFormatterStream=void 0;const r=e("stream"),s=e("./formatter");class i extends r.Transform{constructor(e){super({writableObjectMode:e.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=e,this.rowFormatter=new s.RowFormatter(e),this.hasWrittenBOM=!e.writeBOM}transform(e){return this.rowFormatter.rowTransform=e,this}_transform(e,n,r){let s=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(e,(e,n)=>e?(s=!0,r(e)):(n&&n.forEach(e=>{this.push(t.from(e,"utf8"))}),s=!0,r()))}catch(e){if(s)throw e;r(e)}}_flush(e){this.rowFormatter.finish((n,r)=>n?e(n):(r&&r.forEach(e=>{this.push(t.from(e,"utf8"))}),e()))}}n.CsvFormatterStream=i}).call(this)}).call(this,e("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FormatterOptions=void 0,n.FormatterOptions=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this.objectMode=!0,this.delimiter=",",this.rowDelimiter="\n",this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\ufeff",this.alwaysWriteHeaders=!1,Object.assign(this,e||{}),void 0===(null==e?void 0:e.quoteHeaders)&&(this.quoteHeaders=this.quoteColumns),!0===(null==e?void 0:e.quote)?this.quote='"':!1===(null==e?void 0:e.quote)&&(this.quote=""),"string"!=typeof(null==e?void 0:e.escape)&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&(null===(t=e.writeHeaders)||void 0===t||t),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote="".concat(this.escape).concat(this.quote)}}},{}],148:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.FieldFormatter=void 0;const s=r(e("lodash.isboolean")),i=r(e("lodash.isnil")),a=r(e("lodash.escaperegexp"));n.FieldFormatter=class{constructor(e){this._headers=null,this.formatterOptions=e,null!==e.headers&&(this.headers=e.headers),this.REPLACE_REGEXP=new RegExp(e.quote,"g");const t="[".concat(e.delimiter).concat(a.default(e.rowDelimiter),"|\r|\n]");this.ESCAPE_REGEXP=new RegExp(t)}set headers(e){this._headers=e}shouldQuote(e,t){const n=t?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return s.default(n)?n:Array.isArray(n)?n[e]:null!==this._headers&&n[this._headers[e]]}format(e,t,n){const r=(""+(i.default(e)?"":e)).replace(/\0/g,""),{formatterOptions:s}=this;return""!==s.quote&&-1!==r.indexOf(s.quote)?this.quoteField(r.replace(this.REPLACE_REGEXP,s.escapedQuote)):-1!==r.search(this.ESCAPE_REGEXP)||this.shouldQuote(t,n)?this.quoteField(r):r}quoteField(e){const{quote:t}=this.formatterOptions;return"".concat(t).concat(e).concat(t)}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.RowFormatter=void 0;const s=r(e("lodash.isfunction")),i=r(e("lodash.isequal")),a=e("./FieldFormatter"),o=e("../types");class l{constructor(e){this.rowCount=0,this.formatterOptions=e,this.fieldFormatter=new a.FieldFormatter(e),this.headers=e.headers,this.shouldWriteHeaders=e.shouldWriteHeaders,this.hasWrittenHeaders=!1,null!==this.headers&&(this.fieldFormatter.headers=this.headers),e.transform&&(this.rowTransform=e.transform)}static isRowHashArray(e){return!!Array.isArray(e)&&Array.isArray(e[0])&&2===e[0].length}static isRowArray(e){return Array.isArray(e)&&!this.isRowHashArray(e)}static gatherHeaders(e){return l.isRowHashArray(e)?e.map(e=>e[0]):Array.isArray(e)?e:Object.keys(e)}static createTransform(e){return o.isSyncTransform(e)?(t,n)=>{let r=null;try{r=e(t)}catch(e){return n(e)}return n(null,r)}:(t,n)=>{e(t,n)}}set rowTransform(e){if(!s.default(e))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(e)}format(e,t){this.callTransformer(e,(n,r)=>{if(n)return t(n);if(!e)return t(null);const s=[];if(r){const{shouldFormatColumns:e,headers:t}=this.checkHeaders(r);if(this.shouldWriteHeaders&&t&&!this.hasWrittenHeaders&&(s.push(this.formatColumns(t,!0)),this.hasWrittenHeaders=!0),e){const e=this.gatherColumns(r);s.push(this.formatColumns(e,!1))}}return t(null,s)})}finish(e){const t=[];if(this.formatterOptions.alwaysWriteHeaders&&0===this.rowCount){if(!this.headers)return e(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));t.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&t.push(this.formatterOptions.rowDelimiter),e(null,t)}checkHeaders(e){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const t=l.gatherHeaders(e);return this.headers=t,this.fieldFormatter.headers=t,this.shouldWriteHeaders?{shouldFormatColumns:!i.default(t,e),headers:t}:{shouldFormatColumns:!0,headers:null}}gatherColumns(e){if(null===this.headers)throw new Error("Headers is currently null");return Array.isArray(e)?l.isRowHashArray(e)?this.headers.map((t,n)=>{const r=e[n];return r?r[1]:""}):l.isRowArray(e)&&!this.shouldWriteHeaders?e:this.headers.map((t,n)=>e[n]):this.headers.map(t=>e[t])}callTransformer(e,t){return this._rowTransform?this._rowTransform(e,t):t(null,e)}formatColumns(e,t){const n=e.map((e,n)=>this.fieldFormatter.format(e,n,t)).join(this.formatterOptions.delimiter),{rowCount:r}=this;return this.rowCount+=1,r?[this.formatterOptions.rowDelimiter,n].join(""):n}}n.RowFormatter=l},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FieldFormatter=n.RowFormatter=void 0;var r=e("./RowFormatter");Object.defineProperty(n,"RowFormatter",{enumerable:!0,get:function(){return r.RowFormatter}});var s=e("./FieldFormatter");Object.defineProperty(n,"FieldFormatter",{enumerable:!0,get:function(){return s.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(e,t,n){(function(t){(function(){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},s=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},a=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.writeToPath=n.writeToString=n.writeToBuffer=n.writeToStream=n.write=n.format=n.FormatterOptions=n.CsvFormatterStream=void 0;const o=e("util"),l=e("stream"),c=i(e("fs")),u=e("./FormatterOptions"),d=e("./CsvFormatterStream");a(e("./types"),n);var h=e("./CsvFormatterStream");Object.defineProperty(n,"CsvFormatterStream",{enumerable:!0,get:function(){return h.CsvFormatterStream}});var f=e("./FormatterOptions");Object.defineProperty(n,"FormatterOptions",{enumerable:!0,get:function(){return f.FormatterOptions}}),n.format=e=>new d.CsvFormatterStream(new u.FormatterOptions(e)),n.write=(e,t)=>{const r=n.format(t),s=o.promisify((e,t)=>{r.write(e,void 0,t)});return e.reduce((e,t)=>e.then(()=>s(t)),Promise.resolve()).then(()=>r.end()).catch(e=>{r.emit("error",e)}),r},n.writeToStream=(e,t,r)=>n.write(t,r).pipe(e),n.writeToBuffer=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[],i=new l.Writable({write(e,t,n){s.push(e),n()}});return new Promise((a,o)=>{i.on("error",o).on("finish",()=>a(t.concat(s))),n.write(e,r).pipe(i)})},n.writeToString=(e,t)=>n.writeToBuffer(e,t).then(e=>e.toString()),n.writeToPath=(e,t,r)=>{const s=c.createWriteStream(e,{encoding:"utf8"});return n.write(t,r).pipe(s)}}).call(this)}).call(this,e("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSyncTransform=void 0,n.isSyncTransform=e=>1===e.length},{}],153:[function(e,t,n){(function(t){(function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CsvParserStream=void 0;const r=e("string_decoder"),s=e("stream"),i=e("./transforms"),a=e("./parser");class o extends s.Transform{constructor(e){super({objectMode:e.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=e,this.parser=new a.Parser(e),this.headerTransformer=new i.HeaderTransformer(e),this.decoder=new r.StringDecoder(e.encoding),this.rowTransformerValidator=new i.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(e){return this.rowTransformerValidator.rowTransform=e,this}validate(e){return this.rowTransformerValidator.rowValidator=e,this}emit(e){if("end"===e)return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return super.emit(e,...n)}_transform(e,t,n){if(this.hasHitRowLimit)return n();const r=o.wrapDoneCallback(n);try{const{lines:t}=this,n=t+this.decoder.write(e),s=this.parse(n,!0);return this.processRows(s,r)}catch(e){return r(e)}}_flush(e){const t=o.wrapDoneCallback(e);if(this.hasHitRowLimit)return t();try{const e=this.lines+this.decoder.end(),n=this.parse(e,!1);return this.processRows(n,t)}catch(e){return t(e)}}parse(e,t){if(!e)return[];const{line:n,rows:r}=this.parser.parse(e,t);return this.lines=n,r}processRows(e,n){const r=e.length,s=i=>{const a=e=>e?n(e):i%100!=0?s(i+1):void t(()=>s(i+1));if(this.checkAndEmitHeaders(),i>=r||this.hasHitRowLimit)return n();if(this.parsedLineCount+=1,this.shouldSkipLine)return a();const o=e[i];this.rowCount+=1,this.parsedRowCount+=1;const l=this.rowCount;return this.transformRow(o,(e,t)=>{if(e)return this.rowCount-=1,a(e);if(!t)return a(new Error("expected transform result"));if(t.isValid){if(t.row)return this.pushRow(t.row,a)}else this.emit("data-invalid",t.row,l,t.reason);return a()})};s(0)}transformRow(e,t){try{this.headerTransformer.transform(e,(n,r)=>n?t(n):r?r.isValid?r.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(r.row,t):this.skipRow(t):(this.rowCount-=1,this.parsedRowCount-=1,t(null,{row:null,isValid:!0})):this.shouldEmitRows?t(null,{isValid:!1,row:e}):this.skipRow(t):t(new Error("Expected result from header transform")))}catch(e){t(e)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(e){return this.rowCount-=1,e(null,{row:null,isValid:!0})}pushRow(e,t){try{this.parserOptions.objectMode?this.push(e):this.push(JSON.stringify(e)),t()}catch(e){t(e)}}static wrapDoneCallback(e){let t=!1;return function(n){if(n){if(t)throw n;return t=!0,void e(n)}for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];e(...s)}}}n.CsvParserStream=o}).call(this)}).call(this,e("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.ParserOptions=void 0;const s=r(e("lodash.escaperegexp")),i=r(e("lodash.isnil"));n.ParserOptions=class{constructor(e){var t;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,e||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=s.default(this.delimiter),this.escapeChar=null!==(t=this.escape)&&void 0!==t?t:this.quote,this.supportsComments=!i.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp("([^\\s]|\\r\\n|\\n|\\r|".concat(this.escapedDelimiter,")")),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(e,t,n){"use strict";var r=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},s=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},a=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.parseString=n.parseFile=n.parseStream=n.parse=n.ParserOptions=n.CsvParserStream=void 0;const o=i(e("fs")),l=e("stream"),c=e("./ParserOptions"),u=e("./CsvParserStream");a(e("./types"),n);var d=e("./CsvParserStream");Object.defineProperty(n,"CsvParserStream",{enumerable:!0,get:function(){return d.CsvParserStream}});var h=e("./ParserOptions");Object.defineProperty(n,"ParserOptions",{enumerable:!0,get:function(){return h.ParserOptions}}),n.parse=e=>new u.CsvParserStream(new c.ParserOptions(e)),n.parseStream=(e,t)=>e.pipe(new u.CsvParserStream(new c.ParserOptions(t))),n.parseFile=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.createReadStream(e).pipe(new u.CsvParserStream(new c.ParserOptions(t)))},n.parseString=(e,t)=>{const n=new l.Readable;return n.push(e),n.push(null),n.pipe(new u.CsvParserStream(new c.ParserOptions(t)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=void 0;const r=e("./Scanner"),s=e("./RowParser"),i=e("./Token");class a{constructor(e){this.parserOptions=e,this.rowParser=new s.RowParser(this.parserOptions)}static removeBOM(e){return e&&65279===e.charCodeAt(0)?e.slice(1):e}parse(e,t){const n=new r.Scanner({line:a.removeBOM(e),parserOptions:this.parserOptions,hasMoreData:t});return this.parserOptions.supportsComments?this.parseWithComments(n):this.parseWithoutComments(n)}parseWithoutComments(e){const t=[];let n=!0;for(;n;)n=this.parseRow(e,t);return{line:e.line,rows:t}}parseWithComments(e){const{parserOptions:t}=this,n=[];for(let r=e.nextCharacterToken;null!==r;r=e.nextCharacterToken)if(i.Token.isTokenComment(r,t)){if(null===e.advancePastLine())return{line:e.lineFromCursor,rows:n};if(!e.hasMoreCharacters)return{line:e.lineFromCursor,rows:n};e.truncateToCursor()}else if(!this.parseRow(e,n))break;return{line:e.line,rows:n}}parseRow(e,t){if(!e.nextNonSpaceToken)return!1;const n=this.rowParser.parse(e);return null!==n&&(this.parserOptions.ignoreEmpty&&s.RowParser.isEmptyRow(n)||t.push(n),!0)}}n.Parser=a},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RowParser=void 0;const r=e("./column"),s=e("./Token");n.RowParser=class{constructor(e){this.parserOptions=e,this.columnParser=new r.ColumnParser(e)}static isEmptyRow(e){return""===e.join("").replace(/\s+/g,"")}parse(e){const{parserOptions:t}=this,{hasMoreData:n}=e,r=e,i=[];let a=this.getStartToken(r,i);for(;a;){if(s.Token.isTokenRowDelimiter(a))return r.advancePastToken(a),!r.hasMoreCharacters&&s.Token.isTokenCarriageReturn(a,t)&&n?null:(r.truncateToCursor(),i);if(!this.shouldSkipColumnParse(r,a,i)){const e=this.columnParser.parse(r);if(null===e)return null;i.push(e)}a=r.nextNonSpaceToken}return n?null:(r.truncateToCursor(),i)}getStartToken(e,t){const n=e.nextNonSpaceToken;return null!==n&&s.Token.isTokenDelimiter(n,this.parserOptions)?(t.push(""),e.nextNonSpaceToken):n}shouldSkipColumnParse(e,t,n){const{parserOptions:r}=this;if(s.Token.isTokenDelimiter(t,r)){e.advancePastToken(t);const i=e.nextCharacterToken;if(!e.hasMoreCharacters||null!==i&&s.Token.isTokenRowDelimiter(i))return n.push(""),!0;if(null!==i&&s.Token.isTokenDelimiter(i,r))return n.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Scanner=void 0;const r=e("./Token"),s=/((?:\r\n)|\n|\r)/;n.Scanner=class{constructor(e){this.cursor=0,this.line=e.line,this.lineLength=this.line.length,this.parserOptions=e.parserOptions,this.hasMoreData=e.hasMoreData,this.cursor=e.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:e}=this,t=this.parserOptions.NEXT_TOKEN_REGEXP;if(-1===e.search(t))return null;const n=t.exec(e);if(null==n)return null;const s=n[1],i=this.cursor+(n.index||0);return new r.Token({token:s,startCursor:i,endCursor:i+s.length-1})}get nextCharacterToken(){const{cursor:e,lineLength:t}=this;return t<=e?null:new r.Token({token:this.line[e],startCursor:e,endCursor:e})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const e=s.exec(this.lineFromCursor);return e?(this.cursor+=(e.index||0)+e[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(e){return this.cursor=e,this}advanceToToken(e){return this.cursor=e.startCursor,this}advancePastToken(e){return this.cursor=e.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Token=void 0,n.Token=class{constructor(e){this.token=e.token,this.startCursor=e.startCursor,this.endCursor=e.endCursor}static isTokenRowDelimiter(e){const t=e.token;return"\r"===t||"\n"===t||"\r\n"===t}static isTokenCarriageReturn(e,t){return e.token===t.carriageReturn}static isTokenComment(e,t){return t.supportsComments&&!!e&&e.token===t.comment}static isTokenEscapeCharacter(e,t){return e.token===t.escapeChar}static isTokenQuote(e,t){return e.token===t.quote}static isTokenDelimiter(e,t){return e.token===t.delimiter}}},{}],160:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnFormatter=void 0,n.ColumnFormatter=class{constructor(e){e.trim?this.format=e=>e.trim():e.ltrim?this.format=e=>e.trimLeft():e.rtrim?this.format=e=>e.trimRight():this.format=e=>e}}},{}],161:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnParser=void 0;const r=e("./NonQuotedColumnParser"),s=e("./QuotedColumnParser"),i=e("../Token");n.ColumnParser=class{constructor(e){this.parserOptions=e,this.quotedColumnParser=new s.QuotedColumnParser(e),this.nonQuotedColumnParser=new r.NonQuotedColumnParser(e)}parse(e){const{nextNonSpaceToken:t}=e;return null!==t&&i.Token.isTokenQuote(t,this.parserOptions)?(e.advanceToToken(t),this.quotedColumnParser.parse(e)):this.nonQuotedColumnParser.parse(e)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NonQuotedColumnParser=void 0;const r=e("./ColumnFormatter"),s=e("../Token");n.NonQuotedColumnParser=class{constructor(e){this.parserOptions=e,this.columnFormatter=new r.ColumnFormatter(e)}parse(e){if(!e.hasMoreCharacters)return null;const{parserOptions:t}=this,n=[];let r=e.nextCharacterToken;for(;r&&!s.Token.isTokenDelimiter(r,t)&&!s.Token.isTokenRowDelimiter(r);r=e.nextCharacterToken)n.push(r.token),e.advancePastToken(r);return this.columnFormatter.format(n.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QuotedColumnParser=void 0;const r=e("./ColumnFormatter"),s=e("../Token");n.QuotedColumnParser=class{constructor(e){this.parserOptions=e,this.columnFormatter=new r.ColumnFormatter(e)}parse(e){if(!e.hasMoreCharacters)return null;const t=e.cursor,{foundClosingQuote:n,col:r}=this.gatherDataBetweenQuotes(e);if(!n){if(e.advanceTo(t),!e.hasMoreData)throw new Error("Parse Error: missing closing: '".concat(this.parserOptions.quote||"","' in line: at '").concat(e.lineFromCursor.replace(/[\r\n]/g,"\\n'"),"'"));return null}return this.checkForMalformedColumn(e),r}gatherDataBetweenQuotes(e){const{parserOptions:t}=this;let n=!1,r=!1;const i=[];let a=e.nextCharacterToken;for(;!r&&null!==a;a=e.nextCharacterToken){const o=s.Token.isTokenQuote(a,t);if(!n&&o)n=!0;else if(n)if(s.Token.isTokenEscapeCharacter(a,t)){e.advancePastToken(a);const n=e.nextCharacterToken;null!==n&&(s.Token.isTokenQuote(n,t)||s.Token.isTokenEscapeCharacter(n,t))?(i.push(n.token),a=n):o?r=!0:i.push(a.token)}else o?r=!0:i.push(a.token);e.advancePastToken(a)}return{col:this.columnFormatter.format(i.join("")),foundClosingQuote:r}}checkForMalformedColumn(e){const{parserOptions:t}=this,{nextNonSpaceToken:n}=e;if(n){const r=s.Token.isTokenDelimiter(n,t),i=s.Token.isTokenRowDelimiter(n);if(!r&&!i){const r=e.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error("Parse Error: expected: '".concat(t.escapedDelimiter,"' OR new line got: '").concat(n.token,"'. at '").concat(r))}e.advanceToToken(n)}else e.hasMoreData||e.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnFormatter=n.QuotedColumnParser=n.NonQuotedColumnParser=n.ColumnParser=void 0;var r=e("./ColumnParser");Object.defineProperty(n,"ColumnParser",{enumerable:!0,get:function(){return r.ColumnParser}});var s=e("./NonQuotedColumnParser");Object.defineProperty(n,"NonQuotedColumnParser",{enumerable:!0,get:function(){return s.NonQuotedColumnParser}});var i=e("./QuotedColumnParser");Object.defineProperty(n,"QuotedColumnParser",{enumerable:!0,get:function(){return i.QuotedColumnParser}});var a=e("./ColumnFormatter");Object.defineProperty(n,"ColumnFormatter",{enumerable:!0,get:function(){return a.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QuotedColumnParser=n.NonQuotedColumnParser=n.ColumnParser=n.Token=n.Scanner=n.RowParser=n.Parser=void 0;var r=e("./Parser");Object.defineProperty(n,"Parser",{enumerable:!0,get:function(){return r.Parser}});var s=e("./RowParser");Object.defineProperty(n,"RowParser",{enumerable:!0,get:function(){return s.RowParser}});var i=e("./Scanner");Object.defineProperty(n,"Scanner",{enumerable:!0,get:function(){return i.Scanner}});var a=e("./Token");Object.defineProperty(n,"Token",{enumerable:!0,get:function(){return a.Token}});var o=e("./column");Object.defineProperty(n,"ColumnParser",{enumerable:!0,get:function(){return o.ColumnParser}}),Object.defineProperty(n,"NonQuotedColumnParser",{enumerable:!0,get:function(){return o.NonQuotedColumnParser}}),Object.defineProperty(n,"QuotedColumnParser",{enumerable:!0,get:function(){return o.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.HeaderTransformer=void 0;const s=r(e("lodash.isundefined")),i=r(e("lodash.isfunction")),a=r(e("lodash.uniq")),o=r(e("lodash.groupby"));n.HeaderTransformer=class{constructor(e){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=e,!0===e.headers?this.shouldUseFirstRow=!0:Array.isArray(e.headers)?this.setHeaders(e.headers):i.default(e.headers)&&(this.headersTransform=e.headers)}transform(e,t){return this.shouldMapRow(e)?t(null,this.processRow(e)):t(null,{row:null,isValid:!0})}shouldMapRow(e){const{parserOptions:t}=this;if(!this.headersTransform&&t.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(e)){if(this.headersTransform)this.setHeaders(this.headersTransform(e));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(e)}return!1}return!0}processRow(e){if(!this.headers)return{row:e,isValid:!0};const{parserOptions:t}=this;if(!t.discardUnmappedColumns&&e.length>this.headersLength){if(!t.strictColumnHandling)throw new Error("Unexpected Error: column header mismatch expected: ".concat(this.headersLength," columns got: ").concat(e.length));return{row:e,isValid:!1,reason:"Column header mismatch expected: ".concat(this.headersLength," columns got: ").concat(e.length)}}return t.strictColumnHandling&&e.length<this.headersLength?{row:e,isValid:!1,reason:"Column header mismatch expected: ".concat(this.headersLength," columns got: ").concat(e.length)}:{row:this.mapHeaders(e),isValid:!0}}mapHeaders(e){const t={},{headers:n,headersLength:r}=this;for(let i=0;i<r;i+=1){const r=n[i];if(!s.default(r)){const n=e[i];s.default(n)?t[r]="":t[r]=n}}return t}setHeaders(e){var t;const n=e.filter(e=>!!e);if(a.default(n).length!==n.length){const e=o.default(n),t=Object.keys(e).filter(t=>e[t].length>1);throw new Error("Duplicate headers found "+JSON.stringify(t))}this.headers=e,this.receivedHeaders=!0,this.headersLength=(null===(t=this.headers)||void 0===t?void 0:t.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.RowTransformerValidator=void 0;const s=r(e("lodash.isfunction")),i=e("../types");class a{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(e){return i.isSyncTransform(e)?(t,n)=>{let r=null;try{r=e(t)}catch(e){return n(e)}return n(null,r)}:e}static createValidator(e){return i.isSyncValidate(e)?(t,n)=>{n(null,{row:t,isValid:e(t)})}:(t,n)=>{e(t,(e,r,s)=>e?n(e):n(null,r?{row:t,isValid:r,reason:s}:{row:t,isValid:!1,reason:s}))}}set rowTransform(e){if(!s.default(e))throw new TypeError("The transform should be a function");this._rowTransform=a.createTransform(e)}set rowValidator(e){if(!s.default(e))throw new TypeError("The validate should be a function");this._rowValidator=a.createValidator(e)}transformAndValidate(e,t){return this.callTransformer(e,(e,n)=>e?t(e):n?this.callValidator(n,(e,r)=>e?t(e):r&&!r.isValid?t(null,{row:n,isValid:!1,reason:r.reason}):t(null,{row:n,isValid:!0})):t(null,{row:null,isValid:!0}))}callTransformer(e,t){return this._rowTransform?this._rowTransform(e,t):t(null,e)}callValidator(e,t){return this._rowValidator?this._rowValidator(e,t):t(null,{row:e,isValid:!0})}}n.RowTransformerValidator=a},{"../types":169,"lodash.isfunction":446}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.HeaderTransformer=n.RowTransformerValidator=void 0;var r=e("./RowTransformerValidator");Object.defineProperty(n,"RowTransformerValidator",{enumerable:!0,get:function(){return r.RowTransformerValidator}});var s=e("./HeaderTransformer");Object.defineProperty(n,"HeaderTransformer",{enumerable:!0,get:function(){return s.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isSyncValidate=n.isSyncTransform=void 0,n.isSyncTransform=e=>1===e.length,n.isSyncValidate=e=>1===e.length},{}],170:[function(e,t,n){"use strict";const r=n;r.bignum=e("bn.js"),r.define=e("./asn1/api").define,r.base=e("./asn1/base"),r.constants=e("./asn1/constants"),r.decoders=e("./asn1/decoders"),r.encoders=e("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(e,t,n){"use strict";const r=e("./encoders"),s=e("./decoders"),i=e("inherits");function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}n.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return i(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(s[e])),this.decoders[e]},a.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r[e])),this.encoders[e]},a.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(e,t,n){"use strict";const r=e("inherits"),s=e("../base/reporter").Reporter,i=e("safer-buffer").Buffer;function a(e,t){s.call(this,t),i.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return o.isEncoderBuffer(e)||(e=new o(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=i.byteLength(e);else{if(!i.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}r(a,s),n.DecoderBuffer=a,a.isDecoderBuffer=function(e){return e instanceof a||"object"==typeof e&&i.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},a.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},a.prototype.restore=function(e){const t=new a(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,s.prototype.restore.call(this,e.reporter),t},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},a.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new a(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},a.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},n.EncoderBuffer=o,o.isEncoderBuffer=function(e){return e instanceof o||"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},o.prototype.join=function(e,t){return e||(e=i.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):i.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(e,t,n){"use strict";const r=n;r.Reporter=e("./reporter").Reporter,r.DecoderBuffer=e("./buffer").DecoderBuffer,r.EncoderBuffer=e("./buffer").EncoderBuffer,r.Node=e("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(e,t,n){"use strict";const r=e("../base/reporter").Reporter,s=e("../base/buffer").EncoderBuffer,i=e("../base/buffer").DecoderBuffer,a=e("minimalistic-assert"),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function c(e,t,n){const r={};this._baseState=r,r.name=n,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=c;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};u.forEach(function(n){t[n]=e[n]});const n=new this.constructor(t.parent);return n._baseState=t,n},c.prototype._wrap=function(){const e=this._baseState;l.forEach(function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}},this)},c.prototype._init=function(e){const t=this._baseState;a(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),a.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(a(null===t.children),t.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(a(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);const r=e[n];t[r]=n}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),o.forEach(function(e){c.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return a(null===t.tag),t.tag=e,this._useArgs(n),this}}),c.prototype.use=function(e){a(e);const t=this._baseState;return a(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return a(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return a(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return a(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},c.prototype.contains=function(e){const t=this._baseState;return a(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let r,s=n.default,a=!0,o=null;if(null!==n.key&&(o=e.enterKey(n.key)),n.optional){let r=null;if(null!==n.explicit?r=n.explicit:null!==n.implicit?r=n.implicit:null!==n.tag&&(r=n.tag),null!==r||n.any){if(a=this._peekTag(e,r,n.any),e.isError(a))return a}else{const r=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),a=!0}catch(e){a=!1}e.restore(r)}}if(n.obj&&a&&(r=e.enterObject()),a){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const r=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const r=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(r))return r;n.any?s=e.raw(t):e=r}if(t&&t.track&&null!==n.tag&&t.track(e.path(),r,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(s=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(s))return s;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(e,t)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const r=new i(s);s=this._getUse(n.contains,e._reporterState.obj)._decode(r,t)}}return n.obj&&a&&(s=e.leaveObject(r)),null===n.key||null===s&&!0!==a?null!==o&&e.exitKey(o):e.leaveKey(o,n.key,s),s},c.prototype._decodeGeneric=function(e,t,n){const r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),a(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(e,t){const n=this._baseState;let r=null,s=!1;return Object.keys(n.choice).some(function(i){const a=e.save(),o=n.choice[i];try{const n=o._decode(e,t);if(e.isError(n))return!1;r={type:i,value:n},s=!0}catch(t){return e.restore(a),!1}return!0},this),s?r:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new s(e,this.reporter)},c.prototype._encode=function(e,t,n){const r=this._baseState;if(null!==r.default&&r.default===e)return;const s=this._encodeValue(e,t,n);return void 0===s||this._skipDefault(s,t,n)?void 0:s},c.prototype._encodeValue=function(e,t,n){const s=this._baseState;if(null===s.parent)return s.children[0]._encode(e,t||new r);let i=null;if(this.reporter=t,s.optional&&void 0===e){if(null===s.default)return;e=s.default}let a=null,o=!1;if(s.any)i=this._createEncoderBuffer(e);else if(s.choice)i=this._encodeChoice(e,t);else if(s.contains)a=this._getUse(s.contains,n)._encode(e,t),o=!0;else if(s.children)a=s.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const s=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),s},this).filter(function(e){return e}),a=this._createEncoderBuffer(a);else if("seqof"===s.tag||"setof"===s.tag){if(!s.args||1!==s.args.length)return t.error("Too many args for : "+s.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(n){const r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)},n))}else null!==s.use?i=this._getUse(s.use,n)._encode(e,t):(a=this._encodePrimitive(s.tag,e),o=!0);if(!s.any&&null===s.choice){const e=null!==s.implicit?s.implicit:s.tag,n=null===s.implicit?"universal":"context";null===e?null===s.use&&t.error("Tag could be omitted only for .use()"):null===s.use&&(i=this._encodeComposite(e,o,n,a))}return null!==s.explicit&&(i=this._encodeComposite(s.explicit,!1,"context",i)),i},c.prototype._encodeChoice=function(e,t){const n=this._baseState,r=n.choice[e.type];return r||a(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(e,t,n){"use strict";const r=e("inherits");function s(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}n.Reporter=s,s.prototype.isError=function(e){return e instanceof i},s.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},s.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},s.prototype.enterKey=function(e){return this._reporterState.path.push(e)},s.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},s.prototype.leaveKey=function(e,t,n){const r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},s.prototype.path=function(){return this._reporterState.path.join("/")},s.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},s.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},s.prototype.error=function(e){let t;const n=this._reporterState,r=e instanceof i;if(t=r?e:new i(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},s.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},{inherits:440}],176:[function(e,t,n){"use strict";function r(e){const t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n}),t}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=r(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=r(n.tag)},{}],177:[function(e,t,n){"use strict";const r=n;r._reverse=function(e){const t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n}),t},r.der=e("./der")},{"./der":176}],178:[function(e,t,n){"use strict";const r=e("inherits"),s=e("bn.js"),i=e("../base/buffer").DecoderBuffer,a=e("../base/node"),o=e("../constants/der");function l(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.call(this,"der",e)}function u(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const r=o.tagClass[n>>6],s=0==(32&n);if(31==(31&n)){let r=n;for(n=0;128==(128&r);){if(r=e.readUInt8(t),e.isError(r))return r;n<<=7,n|=127&r}}else n&=31;return{cls:r,primitive:s,tag:n,tagStr:o.tag[n]}}function d(e,t,n){let r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;const s=127&r;if(s>4)return e.error("length octect is too long");r=0;for(let i=0;i<s;i++){r<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;r|=t}return r}t.exports=l,l.prototype.decode=function(e,t){return i.isDecoderBuffer(e)||(e=new i(e,t)),this.tree._decode(e,t)},r(c,a),c.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const r=e.save(),s=u(e,'Failed to peek tag: "'+t+'"');return e.isError(s)?s:(e.restore(r),s.tag===t||s.tagStr===t||s.tagStr+"of"===t||n)},c.prototype._decodeTag=function(e,t,n){const r=u(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;let s=d(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==s)return e.skip(s,'Failed to match body of: "'+t+'"');const i=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(s=e.offset-i.offset,e.restore(i),e.skip(s,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){const n=u(e,t);if(e.isError(n))return n;const r=d(e,n.primitive,t);if(e.isError(r))return r;let s;if(s=n.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(s))return s;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,n,r){const s=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const i=n.decode(e,"der",r);if(e.isError(i)&&t)break;s.push(i)}return s},c.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,n){let r;const s=[];let i=0,a=0;for(;!e.isEmpty();)a=e.readUInt8(),i<<=7,i|=127&a,0==(128&a)&&(s.push(i),i=0);128&a&&s.push(i);const o=s[0]/40|0,l=s[0]%40;if(r=n?s:[o,l].concat(s.slice(1)),t){let e=t[r.join(" ")];void 0===e&&(e=t[r.join(".")]),void 0!==e&&(r=e)}return r},c.prototype._decodeTime=function(e,t){const n=e.raw().toString();let r,s,i,a,o,l;if("gentime"===t)r=0|n.slice(0,4),s=0|n.slice(4,6),i=0|n.slice(6,8),a=0|n.slice(8,10),o=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),s=0|n.slice(2,4),i=0|n.slice(4,6),a=0|n.slice(6,8),o=0|n.slice(8,10),l=0|n.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,s-1,i,a,o,l,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){const n=e.raw();let r=new s(n);return t&&(r=t[r.toString(10)]||r),r},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(e,t,n){"use strict";const r=n;r.der=e("./der"),r.pem=e("./pem")},{"./der":178,"./pem":180}],180:[function(e,t,n){"use strict";const r=e("inherits"),s=e("safer-buffer").Buffer,i=e("./der");function a(e){i.call(this,e),this.enc="pem"}r(a,i),t.exports=a,a.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,l=-1;for(let s=0;s<n.length;s++){const e=n[s].match(a);if(null!==e&&e[2]===r){if(-1!==o){if("END"!==e[1])break;l=s;break}if("BEGIN"!==e[1])break;o=s}}if(-1===o||-1===l)throw new Error("PEM section not found for: "+r);const c=n.slice(o+1,l).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const u=s.from(c,"base64");return i.prototype.decode.call(this,u,t)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(e,t,n){"use strict";const r=e("inherits"),s=e("safer-buffer").Buffer,i=e("../base/node"),a=e("../constants/der");function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){i.call(this,"der",e)}function c(e){return e<10?"0"+e:e}t.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(l,i),l.prototype._encodeComposite=function(e,t,n,r){const i=function(e,t,n,r){let s;if("seqof"===e?e="seq":"setof"===e&&(e="set"),a.tagByName.hasOwnProperty(e))s=a.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);s=e}return s>=31?r.error("Multi-octet tag encoding unsupported"):(t||(s|=32),s|=a.tagClassByName[n||"universal"]<<6,s)}(e,t,n,this.reporter);if(r.length<128){const e=s.alloc(2);return e[0]=i,e[1]=r.length,this._createEncoderBuffer([e,r])}let o=1;for(let s=r.length;s>=256;s>>=8)o++;const l=s.alloc(2+o);l[0]=i,l[1]=128|o;for(let s=1+o,a=r.length;a>0;s--,a>>=8)l[s]=255&a;return this._createEncoderBuffer([l,r])},l.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=s.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},l.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let r=0;for(let s=0;s<e.length;s++){let t=e[s];for(r++;t>=128;t>>=7)r++}const i=s.alloc(r);let a=i.length-1;for(let s=e.length-1;s>=0;s--){let t=e[s];for(i[a--]=127&t;(t>>=7)>0;)i[a--]=128|127&t}return this._createEncoderBuffer(i)},l.prototype._encodeTime=function(e,t){let n;const r=new Date(e);return"gentime"===t?n=[c(r.getUTCFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[c(r.getUTCFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!s.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=s.from(t)}if(s.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=s.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let s=e;s>=256;s>>=8)n++;const r=new Array(n);for(let s=r.length-1;s>=0;s--)r[s]=255&e,e>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(s.from(r))},l.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},l.prototype._skipDefault=function(e,t,n){const r=this._baseState;let s;if(null===r.default)return!1;const i=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,n).join()),i.length!==r.defaultBuffer.length)return!1;for(s=0;s<i.length;s++)if(i[s]!==r.defaultBuffer[s])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(e,t,n){"use strict";const r=n;r.der=e("./der"),r.pem=e("./pem")},{"./der":181,"./pem":183}],183:[function(e,t,n){"use strict";const r=e("inherits"),s=e("./der");function i(e){s.call(this,e),this.enc="pem"}r(i,s),t.exports=i,i.prototype.encode=function(e,t){const n=s.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"];for(let s=0;s<n.length;s+=64)r.push(n.slice(s,s+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},{"./der":181,inherits:440}],184:[function(e,t,n){"use strict";!function(t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var i;"object"==typeof t?t.exports=s:(void 0).BN=s,s.BN=s,s.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(e){}function a(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function o(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function l(e,t,n,r){for(var s=0,i=Math.min(e.length,n),a=t;a<i;a++){var o=e.charCodeAt(a)-48;s*=r,s+=o>=49?o-49+10:o>=17?o-17+10:o}return s}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,r):(this._parseBase(e,t,s),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i,a,o=0;if("be"===r)for(s=e.length-1,i=0;s>=0;s-=3)a=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=a<<o&67108863,this.words[i+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===r)for(s=0,i=0;s<e.length;s+=3)a=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=a<<o&67108863,this.words[i+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},s.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,i=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)s=o(e,t,r)<<i,this.words[a]|=67108863&s,i>=18?(i-=18,a+=1,this.words[a]|=s>>>26):i+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)s=o(e,t,r)<<i,this.words[a]|=67108863&s,i>=18?(i-=18,a+=1,this.words[a]|=s>>>26):i+=8;this.strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=t)r++;r--,s=s/t|0;for(var i=e.length-n,a=i%r,o=Math.min(i,i-a)+n,c=0,u=n;u<o;u+=r)c=l(e,u,u+r,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var d=1;for(c=l(e,u,e.length,t),u=0;u<a;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var s=0|e.words[0],i=0|t.words[0],a=s*i,o=67108863&a,l=a/67108864|0;n.words[0]=o;for(var c=1;c<r;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=h;f++){var p=c-f|0;u+=(a=(s=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&a}n.words[c]=0|d,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var s=0,i=0,a=0;a<this.length;a++){var o=this.words[a],l=(16777215&(o<<s|i)).toString(16);r=0!==(i=o>>>24-s&16777215)||a!==this.length-1?c[6-l.length]+l+r:l+r,(s+=2)>=26&&(s-=26,a--)}for(0!==i&&(r=i.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var h=u[e],f=d[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?m+r:c[h-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return n(void 0!==i),this.toArrayLike(i,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var s=this.byteLength(),i=r||Math.max(1,s);n(s<=i,"byte array longer than desired length"),n(i>0,"Requested array length <= 0"),this.strip();var a,o,l="le"===t,c=new e(i),u=this.clone();if(l){for(o=0;!u.isZero();o++)a=u.andln(255),u.iushrn(8),c[o]=a;for(;o<i;o++)c[o]=0}else{for(o=0;o<i-s;o++)c[o]=0;for(o=0;!u.isZero();o++)a=u.andln(255),u.iushrn(8),c[i-o-1]=a}return c},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return r>0&&(this.words[s]=~this.words[s]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,s=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<s:this.words[r]&~(1<<s),this.strip()},s.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var s=0,i=0;i<r.length;i++)t=(0|n.words[i])+(0|r.words[i])+s,this.words[i]=67108863&t,s=t>>>26;for(;0!==s&&i<n.length;i++)t=(0|n.words[i])+s,this.words[i]=67108863&t,s=t>>>26;if(this.length=n.length,0!==s)this.words[this.length]=s,this.length++;else if(n!==this)for(;i<n.length;i++)this.words[i]=n.words[i];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)i=(t=(0|n.words[a])-(0|r.words[a])+i)>>26,this.words[a]=67108863&t;for(;0!==i&&a<n.length;a++)i=(t=(0|n.words[a])+i)>>26,this.words[a]=67108863&t;if(0===i&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,n){var r,s,i,a=e.words,o=t.words,l=n.words,c=0,u=0|a[0],d=8191&u,h=u>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],b=8191&g,v=g>>>13,y=0|a[3],w=8191&y,x=y>>>13,k=0|a[4],_=8191&k,S=k>>>13,j=0|a[5],N=8191&j,T=j>>>13,E=0|a[6],C=8191&E,I=E>>>13,A=0|a[7],M=8191&A,O=A>>>13,R=0|a[8],D=8191&R,P=R>>>13,L=0|a[9],F=8191&L,B=L>>>13,U=0|o[0],z=8191&U,V=U>>>13,H=0|o[1],W=8191&H,q=H>>>13,K=0|o[2],G=8191&K,$=K>>>13,X=0|o[3],Y=8191&X,Q=X>>>13,J=0|o[4],Z=8191&J,ee=J>>>13,te=0|o[5],ne=8191&te,re=te>>>13,se=0|o[6],ie=8191&se,ae=se>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(d,z))|0)+((8191&(s=(s=Math.imul(d,V))+Math.imul(h,z)|0))<<13)|0;c=((i=Math.imul(h,V))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,z),s=(s=Math.imul(p,V))+Math.imul(m,z)|0,i=Math.imul(m,V);var be=(c+(r=r+Math.imul(d,W)|0)|0)+((8191&(s=(s=s+Math.imul(d,q)|0)+Math.imul(h,W)|0))<<13)|0;c=((i=i+Math.imul(h,q)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,z),s=(s=Math.imul(b,V))+Math.imul(v,z)|0,i=Math.imul(v,V),r=r+Math.imul(p,W)|0,s=(s=s+Math.imul(p,q)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,q)|0;var ve=(c+(r=r+Math.imul(d,G)|0)|0)+((8191&(s=(s=s+Math.imul(d,$)|0)+Math.imul(h,G)|0))<<13)|0;c=((i=i+Math.imul(h,$)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(w,z),s=(s=Math.imul(w,V))+Math.imul(x,z)|0,i=Math.imul(x,V),r=r+Math.imul(b,W)|0,s=(s=s+Math.imul(b,q)|0)+Math.imul(v,W)|0,i=i+Math.imul(v,q)|0,r=r+Math.imul(p,G)|0,s=(s=s+Math.imul(p,$)|0)+Math.imul(m,G)|0,i=i+Math.imul(m,$)|0;var ye=(c+(r=r+Math.imul(d,Y)|0)|0)+((8191&(s=(s=s+Math.imul(d,Q)|0)+Math.imul(h,Y)|0))<<13)|0;c=((i=i+Math.imul(h,Q)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(_,z),s=(s=Math.imul(_,V))+Math.imul(S,z)|0,i=Math.imul(S,V),r=r+Math.imul(w,W)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,q)|0,r=r+Math.imul(b,G)|0,s=(s=s+Math.imul(b,$)|0)+Math.imul(v,G)|0,i=i+Math.imul(v,$)|0,r=r+Math.imul(p,Y)|0,s=(s=s+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,i=i+Math.imul(m,Q)|0;var we=(c+(r=r+Math.imul(d,Z)|0)|0)+((8191&(s=(s=s+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;c=((i=i+Math.imul(h,ee)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(N,z),s=(s=Math.imul(N,V))+Math.imul(T,z)|0,i=Math.imul(T,V),r=r+Math.imul(_,W)|0,s=(s=s+Math.imul(_,q)|0)+Math.imul(S,W)|0,i=i+Math.imul(S,q)|0,r=r+Math.imul(w,G)|0,s=(s=s+Math.imul(w,$)|0)+Math.imul(x,G)|0,i=i+Math.imul(x,$)|0,r=r+Math.imul(b,Y)|0,s=(s=s+Math.imul(b,Q)|0)+Math.imul(v,Y)|0,i=i+Math.imul(v,Q)|0,r=r+Math.imul(p,Z)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var xe=(c+(r=r+Math.imul(d,ne)|0)|0)+((8191&(s=(s=s+Math.imul(d,re)|0)+Math.imul(h,ne)|0))<<13)|0;c=((i=i+Math.imul(h,re)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(C,z),s=(s=Math.imul(C,V))+Math.imul(I,z)|0,i=Math.imul(I,V),r=r+Math.imul(N,W)|0,s=(s=s+Math.imul(N,q)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,q)|0,r=r+Math.imul(_,G)|0,s=(s=s+Math.imul(_,$)|0)+Math.imul(S,G)|0,i=i+Math.imul(S,$)|0,r=r+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,Q)|0)+Math.imul(x,Y)|0,i=i+Math.imul(x,Q)|0,r=r+Math.imul(b,Z)|0,s=(s=s+Math.imul(b,ee)|0)+Math.imul(v,Z)|0,i=i+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,s=(s=s+Math.imul(p,re)|0)+Math.imul(m,ne)|0,i=i+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(d,ie)|0)|0)+((8191&(s=(s=s+Math.imul(d,ae)|0)+Math.imul(h,ie)|0))<<13)|0;c=((i=i+Math.imul(h,ae)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(M,z),s=(s=Math.imul(M,V))+Math.imul(O,z)|0,i=Math.imul(O,V),r=r+Math.imul(C,W)|0,s=(s=s+Math.imul(C,q)|0)+Math.imul(I,W)|0,i=i+Math.imul(I,q)|0,r=r+Math.imul(N,G)|0,s=(s=s+Math.imul(N,$)|0)+Math.imul(T,G)|0,i=i+Math.imul(T,$)|0,r=r+Math.imul(_,Y)|0,s=(s=s+Math.imul(_,Q)|0)+Math.imul(S,Y)|0,i=i+Math.imul(S,Q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(x,Z)|0,i=i+Math.imul(x,ee)|0,r=r+Math.imul(b,ne)|0,s=(s=s+Math.imul(b,re)|0)+Math.imul(v,ne)|0,i=i+Math.imul(v,re)|0,r=r+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,ae)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,ae)|0;var _e=(c+(r=r+Math.imul(d,le)|0)|0)+((8191&(s=(s=s+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((i=i+Math.imul(h,ce)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(D,z),s=(s=Math.imul(D,V))+Math.imul(P,z)|0,i=Math.imul(P,V),r=r+Math.imul(M,W)|0,s=(s=s+Math.imul(M,q)|0)+Math.imul(O,W)|0,i=i+Math.imul(O,q)|0,r=r+Math.imul(C,G)|0,s=(s=s+Math.imul(C,$)|0)+Math.imul(I,G)|0,i=i+Math.imul(I,$)|0,r=r+Math.imul(N,Y)|0,s=(s=s+Math.imul(N,Q)|0)+Math.imul(T,Y)|0,i=i+Math.imul(T,Q)|0,r=r+Math.imul(_,Z)|0,s=(s=s+Math.imul(_,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,r=r+Math.imul(w,ne)|0,s=(s=s+Math.imul(w,re)|0)+Math.imul(x,ne)|0,i=i+Math.imul(x,re)|0,r=r+Math.imul(b,ie)|0,s=(s=s+Math.imul(b,ae)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,ae)|0,r=r+Math.imul(p,le)|0,s=(s=s+Math.imul(p,ce)|0)+Math.imul(m,le)|0,i=i+Math.imul(m,ce)|0;var Se=(c+(r=r+Math.imul(d,de)|0)|0)+((8191&(s=(s=s+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((i=i+Math.imul(h,he)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(F,z),s=(s=Math.imul(F,V))+Math.imul(B,z)|0,i=Math.imul(B,V),r=r+Math.imul(D,W)|0,s=(s=s+Math.imul(D,q)|0)+Math.imul(P,W)|0,i=i+Math.imul(P,q)|0,r=r+Math.imul(M,G)|0,s=(s=s+Math.imul(M,$)|0)+Math.imul(O,G)|0,i=i+Math.imul(O,$)|0,r=r+Math.imul(C,Y)|0,s=(s=s+Math.imul(C,Q)|0)+Math.imul(I,Y)|0,i=i+Math.imul(I,Q)|0,r=r+Math.imul(N,Z)|0,s=(s=s+Math.imul(N,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,r=r+Math.imul(_,ne)|0,s=(s=s+Math.imul(_,re)|0)+Math.imul(S,ne)|0,i=i+Math.imul(S,re)|0,r=r+Math.imul(w,ie)|0,s=(s=s+Math.imul(w,ae)|0)+Math.imul(x,ie)|0,i=i+Math.imul(x,ae)|0,r=r+Math.imul(b,le)|0,s=(s=s+Math.imul(b,ce)|0)+Math.imul(v,le)|0,i=i+Math.imul(v,ce)|0,r=r+Math.imul(p,de)|0,s=(s=s+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var je=(c+(r=r+Math.imul(d,pe)|0)|0)+((8191&(s=(s=s+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;c=((i=i+Math.imul(h,me)|0)+(s>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(F,W),s=(s=Math.imul(F,q))+Math.imul(B,W)|0,i=Math.imul(B,q),r=r+Math.imul(D,G)|0,s=(s=s+Math.imul(D,$)|0)+Math.imul(P,G)|0,i=i+Math.imul(P,$)|0,r=r+Math.imul(M,Y)|0,s=(s=s+Math.imul(M,Q)|0)+Math.imul(O,Y)|0,i=i+Math.imul(O,Q)|0,r=r+Math.imul(C,Z)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,r=r+Math.imul(N,ne)|0,s=(s=s+Math.imul(N,re)|0)+Math.imul(T,ne)|0,i=i+Math.imul(T,re)|0,r=r+Math.imul(_,ie)|0,s=(s=s+Math.imul(_,ae)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,ae)|0,r=r+Math.imul(w,le)|0,s=(s=s+Math.imul(w,ce)|0)+Math.imul(x,le)|0,i=i+Math.imul(x,ce)|0,r=r+Math.imul(b,de)|0,s=(s=s+Math.imul(b,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ne=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((i=i+Math.imul(m,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(F,G),s=(s=Math.imul(F,$))+Math.imul(B,G)|0,i=Math.imul(B,$),r=r+Math.imul(D,Y)|0,s=(s=s+Math.imul(D,Q)|0)+Math.imul(P,Y)|0,i=i+Math.imul(P,Q)|0,r=r+Math.imul(M,Z)|0,s=(s=s+Math.imul(M,ee)|0)+Math.imul(O,Z)|0,i=i+Math.imul(O,ee)|0,r=r+Math.imul(C,ne)|0,s=(s=s+Math.imul(C,re)|0)+Math.imul(I,ne)|0,i=i+Math.imul(I,re)|0,r=r+Math.imul(N,ie)|0,s=(s=s+Math.imul(N,ae)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,ae)|0,r=r+Math.imul(_,le)|0,s=(s=s+Math.imul(_,ce)|0)+Math.imul(S,le)|0,i=i+Math.imul(S,ce)|0,r=r+Math.imul(w,de)|0,s=(s=s+Math.imul(w,he)|0)+Math.imul(x,de)|0,i=i+Math.imul(x,he)|0;var Te=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(s=(s=s+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((i=i+Math.imul(v,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(F,Y),s=(s=Math.imul(F,Q))+Math.imul(B,Y)|0,i=Math.imul(B,Q),r=r+Math.imul(D,Z)|0,s=(s=s+Math.imul(D,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,r=r+Math.imul(M,ne)|0,s=(s=s+Math.imul(M,re)|0)+Math.imul(O,ne)|0,i=i+Math.imul(O,re)|0,r=r+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,ae)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,ae)|0,r=r+Math.imul(N,le)|0,s=(s=s+Math.imul(N,ce)|0)+Math.imul(T,le)|0,i=i+Math.imul(T,ce)|0,r=r+Math.imul(_,de)|0,s=(s=s+Math.imul(_,he)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,he)|0;var Ee=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(s=(s=s+Math.imul(w,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((i=i+Math.imul(x,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(F,Z),s=(s=Math.imul(F,ee))+Math.imul(B,Z)|0,i=Math.imul(B,ee),r=r+Math.imul(D,ne)|0,s=(s=s+Math.imul(D,re)|0)+Math.imul(P,ne)|0,i=i+Math.imul(P,re)|0,r=r+Math.imul(M,ie)|0,s=(s=s+Math.imul(M,ae)|0)+Math.imul(O,ie)|0,i=i+Math.imul(O,ae)|0,r=r+Math.imul(C,le)|0,s=(s=s+Math.imul(C,ce)|0)+Math.imul(I,le)|0,i=i+Math.imul(I,ce)|0,r=r+Math.imul(N,de)|0,s=(s=s+Math.imul(N,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Ce=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(s=(s=s+Math.imul(_,me)|0)+Math.imul(S,pe)|0))<<13)|0;c=((i=i+Math.imul(S,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(F,ne),s=(s=Math.imul(F,re))+Math.imul(B,ne)|0,i=Math.imul(B,re),r=r+Math.imul(D,ie)|0,s=(s=s+Math.imul(D,ae)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,ae)|0,r=r+Math.imul(M,le)|0,s=(s=s+Math.imul(M,ce)|0)+Math.imul(O,le)|0,i=i+Math.imul(O,ce)|0,r=r+Math.imul(C,de)|0,s=(s=s+Math.imul(C,he)|0)+Math.imul(I,de)|0,i=i+Math.imul(I,he)|0;var Ie=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(s=(s=s+Math.imul(N,me)|0)+Math.imul(T,pe)|0))<<13)|0;c=((i=i+Math.imul(T,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(F,ie),s=(s=Math.imul(F,ae))+Math.imul(B,ie)|0,i=Math.imul(B,ae),r=r+Math.imul(D,le)|0,s=(s=s+Math.imul(D,ce)|0)+Math.imul(P,le)|0,i=i+Math.imul(P,ce)|0,r=r+Math.imul(M,de)|0,s=(s=s+Math.imul(M,he)|0)+Math.imul(O,de)|0,i=i+Math.imul(O,he)|0;var Ae=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(I,pe)|0))<<13)|0;c=((i=i+Math.imul(I,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(F,le),s=(s=Math.imul(F,ce))+Math.imul(B,le)|0,i=Math.imul(B,ce),r=r+Math.imul(D,de)|0,s=(s=s+Math.imul(D,he)|0)+Math.imul(P,de)|0,i=i+Math.imul(P,he)|0;var Me=(c+(r=r+Math.imul(M,pe)|0)|0)+((8191&(s=(s=s+Math.imul(M,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((i=i+Math.imul(O,me)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(F,de),s=(s=Math.imul(F,he))+Math.imul(B,de)|0,i=Math.imul(B,he);var Oe=(c+(r=r+Math.imul(D,pe)|0)|0)+((8191&(s=(s=s+Math.imul(D,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((i=i+Math.imul(P,me)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(r=Math.imul(F,pe))|0)+((8191&(s=(s=Math.imul(F,me))+Math.imul(B,pe)|0))<<13)|0;return c=((i=Math.imul(B,me))+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=be,l[2]=ve,l[3]=ye,l[4]=we,l[5]=xe,l[6]=ke,l[7]=_e,l[8]=Se,l[9]=je,l[10]=Ne,l[11]=Te,l[12]=Ee,l[13]=Ce,l[14]=Ie,l[15]=Ae,l[16]=Me,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,n.length++),n};function p(e,t,n){return(new m).mulp(e,t,n)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),s.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,s=0,i=0;i<n.length-1;i++){var a=s;s=0;for(var o=67108863&r,l=Math.min(i,t.length-1),c=Math.max(0,i-e.length+1);c<=l;c++){var u=i-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),s+=(a=(a=a+(d/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[i]=o,r=a,a=s}return 0!==r?n.words[i]=r:n.length--,n.strip()}(this,e,t):p(this,e,t)},m.prototype.makeRBT=function(e){for(var t=new Array(e),n=s.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},m.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,s=0;s<t;s++)r|=(1&e)<<t-s-1,e>>=1;return r},m.prototype.permute=function(e,t,n,r,s,i){for(var a=0;a<i;a++)r[a]=t[e[a]],s[a]=n[e[a]]},m.prototype.transform=function(e,t,n,r,s,i){this.permute(i,e,t,n,r,s);for(var a=1;a<s;a<<=1)for(var o=a<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),u=0;u<s;u+=o)for(var d=l,h=c,f=0;f<a;f++){var p=n[u+f],m=r[u+f],g=n[u+f+a],b=r[u+f+a],v=d*g-h*b;b=d*b+h*g,g=v,n[u+f]=p+g,r[u+f]=m+b,n[u+f+a]=p-g,r[u+f+a]=m-b,f!==o&&(v=l*d-c*h,h=l*h+c*d,d=v)}},m.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,s=0;for(n=n/2|0;n;n>>>=1)s++;return 1<<s+1+r},m.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var s=e[r];e[r]=e[n-r-1],e[n-r-1]=s,s=t[r],t[r]=-t[n-r-1],t[n-r-1]=-s}},m.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var s=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&s,n=s<67108864?0:s/67108864|0}return e},m.prototype.convert13b=function(e,t,r,s){for(var i=0,a=0;a<t;a++)i+=0|e[a],r[2*a]=8191&i,i>>>=13,r[2*a+1]=8191&i,i>>>=13;for(a=2*t;a<s;++a)r[a]=0;n(0===i),n(0==(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},m.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(r),i=this.stub(r),a=new Array(r),o=new Array(r),l=new Array(r),c=new Array(r),u=new Array(r),d=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,i,o,l,r,s),this.transform(c,i,u,d,r,s);for(var f=0;f<r;f++){var p=o[f]*u[f]-l[f]*d[f];l[f]=o[f]*d[f]+l[f]*u[f],o[f]=p}return this.conjugate(o,l,r),this.transform(o,l,h,i,r,s),this.conjugate(h,i,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),p(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var s=(0|this.words[r])*e,i=(67108863&s)+(67108863&t);t>>=26,t+=s/67108864|0,t+=i>>>26,this.words[r]=67108863&i}return 0!==t&&(this.words[r]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,s=n%26;t[n]=(e.words[r]&1<<s)>>>s}return t}(e);if(0===t.length)return new s(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,s=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&i,l=(0|this.words[t])-o<<r;this.words[t]=l|a,a=o>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this.strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var s;n("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var i=e%26,a=Math.min((e-i)/26,this.length),o=67108863^67108863>>>i<<i,l=r;if(s-=a,s=Math.max(0,s),l){for(var c=0;c<a;c++)l.words[c]=this.words[c];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=s);c--){var d=0|this.words[c];this.words[c]=u<<26-i|d>>>i,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,s=1<<t;return!(this.length<=r)&&!!(this.words[r]&s)},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var s,i,a=e.length+r;this._expand(a);var o=0;for(s=0;s<e.length;s++){i=(0|this.words[s+r])+o;var l=(0|e.words[s])*t;o=((i-=67108863&l)>>26)-(l/67108864|0),this.words[s+r]=67108863&i}for(;s<this.length-r;s++)o=(i=(0|this.words[s+r])+o)>>26,this.words[s+r]=67108863&i;if(0===o)return this.strip();for(n(-1===o),o=0,s=0;s<this.length;s++)o=(i=-(0|this.words[s])+o)>>26,this.words[s]=67108863&i;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,a=0|i.words[i.length-1];0!==(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var o,l=r.length-i.length;if("mod"!==t){(o=new s(null)).length=l+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=r.clone()._ishlnsubmul(i,1,l);0===u.negative&&(r=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|r.words[i.length+d])+(0|r.words[i.length+d-1]);for(h=Math.min(h/a|0,67108863),r._ishlnsubmul(i,h,d);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,d),r.isZero()||(r.negative^=1);o&&(o.words[d]=h)}return o&&o.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:o||null,mod:r}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(i=o.div.neg()),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,a,o},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),s=e.andln(1),i=n.cmp(r);return i<0||1===s&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,s=this.length-1;s>=0;s--)r=(t*r+(0|this.words[s]))%e;return r},s.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var s=(0|this.words[r])+67108864*t;this.words[r]=s/e|0,t=s%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),a=new s(0),o=new s(0),l=new s(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0==(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(u),a.isub(d)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(o),a.isub(l)):(r.isub(t),o.isub(i),l.isub(a))}return{a:o,b:l,gcd:r.iushln(c)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new s(1),o=new s(0),l=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(o)):(r.isub(t),o.isub(a))}return(i=0===t.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var s=t.cmp(n);if(s<0){var i=t;t=n,n=i}else if(0===s||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,s=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var i=s,a=r;0!==i&&a<this.length;a++){var o=0|this.words[a];i=(o+=i)>>>26,o&=67108863,this.words[a]=o}return 0!==i&&(this.words[a]=i,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],s=0|e.words[n];if(r!==s){r<s?t=-1:r>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new k(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function _(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},r(v,b),v.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=4194303&s,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|s>>>22,s=i}s>>>=22,e.words[r-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(y,b),r(w,b),r(x,b),x.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,s=67108863&r;r>>>=26,e.words[n]=s,t=r}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new v;else if("p224"===e)t=new y;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return g[e]=t,t},k.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},k.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var o=new s(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=a;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();n(g<p);var b=this.pow(d,new s(1).iushln(p-g-1));h=h.redMul(b),d=b.redSqr(),f=f.redMul(d),p=g}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new s(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],a=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],u=l-1;u>=0;u--){var d=c>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==d||0!==a?(a<<=1,a|=d,(4===++o||0===r&&0===u)&&(i=this.mul(i,n[a]),o=0,a=0)):o=0}l=26}return i},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new _(e)},r(_,k),_.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},_.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},_.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(r).iushrn(this.shift),i=s;return s.cmp(this.m)>=0?i=s.isub(this.m):s.cmpn(0)<0&&(i=s.iadd(this.m)),i._forceRed(this)},_.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},_.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t)},{buffer:188}],185:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r=c(e),a=r[0],o=r[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,o)),u=0,d=o>0?a-4:a;for(n=0;n<d;n+=4)t=s[e.charCodeAt(n)]<<18|s[e.charCodeAt(n+1)]<<12|s[e.charCodeAt(n+2)]<<6|s[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===o&&(t=s[e.charCodeAt(n)]<<2|s[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===o&&(t=s[e.charCodeAt(n)]<<10|s[e.charCodeAt(n+1)]<<4|s[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},n.fromByteArray=function(e){for(var t,n=e.length,s=n%3,i=[],a=0,o=n-s;a<o;a+=16383)i.push(u(e,a,a+16383>o?o:a+16383));return 1===s?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===s&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],s=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],s[a.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var s,i,a=[],o=t;o<n;o+=3)s=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[(i=s)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],186:[function(e,t,n){"use strict";!function(t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function s(e,t,n){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var i;"object"==typeof t?t.exports=s:(void 0).BN=s,s.BN=s,s.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function o(e,t,n){var r=a(e,n);return n-1>=t&&(r|=a(e,n-1)<<4),r}function l(e,t,r,s){for(var i=0,a=0,o=Math.min(e.length,r),l=t;l<o;l++){var c=e.charCodeAt(l)-48;i*=s,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<s,"Invalid character"),i+=a}return i}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,r):(this._parseBase(e,t,s),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i,a,o=0;if("be"===r)for(s=e.length-1,i=0;s>=0;s-=3)a=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=a<<o&67108863,this.words[i+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===r)for(s=0,i=0;s<e.length;s+=3)a=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=a<<o&67108863,this.words[i+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this._strip()},s.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var s,i=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)s=o(e,t,r)<<i,this.words[a]|=67108863&s,i>=18?(i-=18,a+=1,this.words[a]|=s>>>26):i+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)s=o(e,t,r)<<i,this.words[a]|=67108863&s,i>=18?(i-=18,a+=1,this.words[a]|=s>>>26):i+=8;this._strip()},s.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=t)r++;r--,s=s/t|0;for(var i=e.length-n,a=i%r,o=Math.min(i,i-a)+n,c=0,u=n;u<o;u+=r)c=l(e,u,u+r,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var d=1;for(c=l(e,u,e.length,t),u=0;u<a;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){c(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var s=0|e.words[0],i=0|t.words[0],a=s*i,o=67108863&a,l=a/67108864|0;n.words[0]=o;for(var c=1;c<r;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=h;f++){var p=c-f|0;u+=(a=(s=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&a}n.words[c]=0|d,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n._strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var s=0,i=0,a=0;a<this.length;a++){var o=this.words[a],l=(16777215&(o<<s|i)).toString(16);i=o>>>24-s&16777215,(s+=2)>=26&&(s-=26,a--),r=0!==i||a!==this.length-1?d[6-l.length]+l+r:l+r}for(0!==i&&(r=i.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],u=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(u).toString(e);r=(p=p.idivn(u)).isZero()?m+r:d[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},i&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(i,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var s=this.byteLength(),i=r||Math.max(1,s);n(s<=i,"byte array longer than desired length"),n(i>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,s),a},s.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,s=0,i=0;s<this.length;s++){var a=this.words[s]<<i|r;e[n++]=255&a,n<e.length&&(e[n++]=a>>8&255),n<e.length&&(e[n++]=a>>16&255),6===i?(n<e.length&&(e[n++]=a>>24&255),r=0,i=0):(r=a>>>24,i+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,s=0,i=0;s<this.length;s++){var a=this.words[s]<<i|r;e[n--]=255&a,n>=0&&(e[n--]=a>>8&255),n>=0&&(e[n--]=a>>16&255),6===i?(n>=0&&(e[n--]=a>>24&255),r=0,i=0):(r=a>>>24,i+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return r>0&&(this.words[s]=~this.words[s]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,s=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<s:this.words[r]&~(1<<s),this._strip()},s.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var s=0,i=0;i<r.length;i++)t=(0|n.words[i])+(0|r.words[i])+s,this.words[i]=67108863&t,s=t>>>26;for(;0!==s&&i<n.length;i++)t=(0|n.words[i])+s,this.words[i]=67108863&t,s=t>>>26;if(this.length=n.length,0!==s)this.words[this.length]=s,this.length++;else if(n!==this)for(;i<n.length;i++)this.words[i]=n.words[i];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)i=(t=(0|n.words[a])-(0|r.words[a])+i)>>26,this.words[a]=67108863&t;for(;0!==i&&a<n.length;a++)i=(t=(0|n.words[a])+i)>>26,this.words[a]=67108863&t;if(0===i&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var r,s,i,a=e.words,o=t.words,l=n.words,c=0,u=0|a[0],d=8191&u,h=u>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],b=8191&g,v=g>>>13,y=0|a[3],w=8191&y,x=y>>>13,k=0|a[4],_=8191&k,S=k>>>13,j=0|a[5],N=8191&j,T=j>>>13,E=0|a[6],C=8191&E,I=E>>>13,A=0|a[7],M=8191&A,O=A>>>13,R=0|a[8],D=8191&R,P=R>>>13,L=0|a[9],F=8191&L,B=L>>>13,U=0|o[0],z=8191&U,V=U>>>13,H=0|o[1],W=8191&H,q=H>>>13,K=0|o[2],G=8191&K,$=K>>>13,X=0|o[3],Y=8191&X,Q=X>>>13,J=0|o[4],Z=8191&J,ee=J>>>13,te=0|o[5],ne=8191&te,re=te>>>13,se=0|o[6],ie=8191&se,ae=se>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(c+(r=Math.imul(d,z))|0)+((8191&(s=(s=Math.imul(d,V))+Math.imul(h,z)|0))<<13)|0;c=((i=Math.imul(h,V))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,z),s=(s=Math.imul(p,V))+Math.imul(m,z)|0,i=Math.imul(m,V);var be=(c+(r=r+Math.imul(d,W)|0)|0)+((8191&(s=(s=s+Math.imul(d,q)|0)+Math.imul(h,W)|0))<<13)|0;c=((i=i+Math.imul(h,q)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,z),s=(s=Math.imul(b,V))+Math.imul(v,z)|0,i=Math.imul(v,V),r=r+Math.imul(p,W)|0,s=(s=s+Math.imul(p,q)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,q)|0;var ve=(c+(r=r+Math.imul(d,G)|0)|0)+((8191&(s=(s=s+Math.imul(d,$)|0)+Math.imul(h,G)|0))<<13)|0;c=((i=i+Math.imul(h,$)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(w,z),s=(s=Math.imul(w,V))+Math.imul(x,z)|0,i=Math.imul(x,V),r=r+Math.imul(b,W)|0,s=(s=s+Math.imul(b,q)|0)+Math.imul(v,W)|0,i=i+Math.imul(v,q)|0,r=r+Math.imul(p,G)|0,s=(s=s+Math.imul(p,$)|0)+Math.imul(m,G)|0,i=i+Math.imul(m,$)|0;var ye=(c+(r=r+Math.imul(d,Y)|0)|0)+((8191&(s=(s=s+Math.imul(d,Q)|0)+Math.imul(h,Y)|0))<<13)|0;c=((i=i+Math.imul(h,Q)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(_,z),s=(s=Math.imul(_,V))+Math.imul(S,z)|0,i=Math.imul(S,V),r=r+Math.imul(w,W)|0,s=(s=s+Math.imul(w,q)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,q)|0,r=r+Math.imul(b,G)|0,s=(s=s+Math.imul(b,$)|0)+Math.imul(v,G)|0,i=i+Math.imul(v,$)|0,r=r+Math.imul(p,Y)|0,s=(s=s+Math.imul(p,Q)|0)+Math.imul(m,Y)|0,i=i+Math.imul(m,Q)|0;var we=(c+(r=r+Math.imul(d,Z)|0)|0)+((8191&(s=(s=s+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;c=((i=i+Math.imul(h,ee)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(N,z),s=(s=Math.imul(N,V))+Math.imul(T,z)|0,i=Math.imul(T,V),r=r+Math.imul(_,W)|0,s=(s=s+Math.imul(_,q)|0)+Math.imul(S,W)|0,i=i+Math.imul(S,q)|0,r=r+Math.imul(w,G)|0,s=(s=s+Math.imul(w,$)|0)+Math.imul(x,G)|0,i=i+Math.imul(x,$)|0,r=r+Math.imul(b,Y)|0,s=(s=s+Math.imul(b,Q)|0)+Math.imul(v,Y)|0,i=i+Math.imul(v,Q)|0,r=r+Math.imul(p,Z)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var xe=(c+(r=r+Math.imul(d,ne)|0)|0)+((8191&(s=(s=s+Math.imul(d,re)|0)+Math.imul(h,ne)|0))<<13)|0;c=((i=i+Math.imul(h,re)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(C,z),s=(s=Math.imul(C,V))+Math.imul(I,z)|0,i=Math.imul(I,V),r=r+Math.imul(N,W)|0,s=(s=s+Math.imul(N,q)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,q)|0,r=r+Math.imul(_,G)|0,s=(s=s+Math.imul(_,$)|0)+Math.imul(S,G)|0,i=i+Math.imul(S,$)|0,r=r+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,Q)|0)+Math.imul(x,Y)|0,i=i+Math.imul(x,Q)|0,r=r+Math.imul(b,Z)|0,s=(s=s+Math.imul(b,ee)|0)+Math.imul(v,Z)|0,i=i+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,s=(s=s+Math.imul(p,re)|0)+Math.imul(m,ne)|0,i=i+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(d,ie)|0)|0)+((8191&(s=(s=s+Math.imul(d,ae)|0)+Math.imul(h,ie)|0))<<13)|0;c=((i=i+Math.imul(h,ae)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(M,z),s=(s=Math.imul(M,V))+Math.imul(O,z)|0,i=Math.imul(O,V),r=r+Math.imul(C,W)|0,s=(s=s+Math.imul(C,q)|0)+Math.imul(I,W)|0,i=i+Math.imul(I,q)|0,r=r+Math.imul(N,G)|0,s=(s=s+Math.imul(N,$)|0)+Math.imul(T,G)|0,i=i+Math.imul(T,$)|0,r=r+Math.imul(_,Y)|0,s=(s=s+Math.imul(_,Q)|0)+Math.imul(S,Y)|0,i=i+Math.imul(S,Q)|0,r=r+Math.imul(w,Z)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(x,Z)|0,i=i+Math.imul(x,ee)|0,r=r+Math.imul(b,ne)|0,s=(s=s+Math.imul(b,re)|0)+Math.imul(v,ne)|0,i=i+Math.imul(v,re)|0,r=r+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,ae)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,ae)|0;var _e=(c+(r=r+Math.imul(d,le)|0)|0)+((8191&(s=(s=s+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((i=i+Math.imul(h,ce)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(D,z),s=(s=Math.imul(D,V))+Math.imul(P,z)|0,i=Math.imul(P,V),r=r+Math.imul(M,W)|0,s=(s=s+Math.imul(M,q)|0)+Math.imul(O,W)|0,i=i+Math.imul(O,q)|0,r=r+Math.imul(C,G)|0,s=(s=s+Math.imul(C,$)|0)+Math.imul(I,G)|0,i=i+Math.imul(I,$)|0,r=r+Math.imul(N,Y)|0,s=(s=s+Math.imul(N,Q)|0)+Math.imul(T,Y)|0,i=i+Math.imul(T,Q)|0,r=r+Math.imul(_,Z)|0,s=(s=s+Math.imul(_,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,r=r+Math.imul(w,ne)|0,s=(s=s+Math.imul(w,re)|0)+Math.imul(x,ne)|0,i=i+Math.imul(x,re)|0,r=r+Math.imul(b,ie)|0,s=(s=s+Math.imul(b,ae)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,ae)|0,r=r+Math.imul(p,le)|0,s=(s=s+Math.imul(p,ce)|0)+Math.imul(m,le)|0,i=i+Math.imul(m,ce)|0;var Se=(c+(r=r+Math.imul(d,de)|0)|0)+((8191&(s=(s=s+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((i=i+Math.imul(h,he)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(F,z),s=(s=Math.imul(F,V))+Math.imul(B,z)|0,i=Math.imul(B,V),r=r+Math.imul(D,W)|0,s=(s=s+Math.imul(D,q)|0)+Math.imul(P,W)|0,i=i+Math.imul(P,q)|0,r=r+Math.imul(M,G)|0,s=(s=s+Math.imul(M,$)|0)+Math.imul(O,G)|0,i=i+Math.imul(O,$)|0,r=r+Math.imul(C,Y)|0,s=(s=s+Math.imul(C,Q)|0)+Math.imul(I,Y)|0,i=i+Math.imul(I,Q)|0,r=r+Math.imul(N,Z)|0,s=(s=s+Math.imul(N,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,r=r+Math.imul(_,ne)|0,s=(s=s+Math.imul(_,re)|0)+Math.imul(S,ne)|0,i=i+Math.imul(S,re)|0,r=r+Math.imul(w,ie)|0,s=(s=s+Math.imul(w,ae)|0)+Math.imul(x,ie)|0,i=i+Math.imul(x,ae)|0,r=r+Math.imul(b,le)|0,s=(s=s+Math.imul(b,ce)|0)+Math.imul(v,le)|0,i=i+Math.imul(v,ce)|0,r=r+Math.imul(p,de)|0,s=(s=s+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var je=(c+(r=r+Math.imul(d,pe)|0)|0)+((8191&(s=(s=s+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;c=((i=i+Math.imul(h,me)|0)+(s>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(F,W),s=(s=Math.imul(F,q))+Math.imul(B,W)|0,i=Math.imul(B,q),r=r+Math.imul(D,G)|0,s=(s=s+Math.imul(D,$)|0)+Math.imul(P,G)|0,i=i+Math.imul(P,$)|0,r=r+Math.imul(M,Y)|0,s=(s=s+Math.imul(M,Q)|0)+Math.imul(O,Y)|0,i=i+Math.imul(O,Q)|0,r=r+Math.imul(C,Z)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,r=r+Math.imul(N,ne)|0,s=(s=s+Math.imul(N,re)|0)+Math.imul(T,ne)|0,i=i+Math.imul(T,re)|0,r=r+Math.imul(_,ie)|0,s=(s=s+Math.imul(_,ae)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,ae)|0,r=r+Math.imul(w,le)|0,s=(s=s+Math.imul(w,ce)|0)+Math.imul(x,le)|0,i=i+Math.imul(x,ce)|0,r=r+Math.imul(b,de)|0,s=(s=s+Math.imul(b,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ne=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((i=i+Math.imul(m,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(F,G),s=(s=Math.imul(F,$))+Math.imul(B,G)|0,i=Math.imul(B,$),r=r+Math.imul(D,Y)|0,s=(s=s+Math.imul(D,Q)|0)+Math.imul(P,Y)|0,i=i+Math.imul(P,Q)|0,r=r+Math.imul(M,Z)|0,s=(s=s+Math.imul(M,ee)|0)+Math.imul(O,Z)|0,i=i+Math.imul(O,ee)|0,r=r+Math.imul(C,ne)|0,s=(s=s+Math.imul(C,re)|0)+Math.imul(I,ne)|0,i=i+Math.imul(I,re)|0,r=r+Math.imul(N,ie)|0,s=(s=s+Math.imul(N,ae)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,ae)|0,r=r+Math.imul(_,le)|0,s=(s=s+Math.imul(_,ce)|0)+Math.imul(S,le)|0,i=i+Math.imul(S,ce)|0,r=r+Math.imul(w,de)|0,s=(s=s+Math.imul(w,he)|0)+Math.imul(x,de)|0,i=i+Math.imul(x,he)|0;var Te=(c+(r=r+Math.imul(b,pe)|0)|0)+((8191&(s=(s=s+Math.imul(b,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((i=i+Math.imul(v,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(F,Y),s=(s=Math.imul(F,Q))+Math.imul(B,Y)|0,i=Math.imul(B,Q),r=r+Math.imul(D,Z)|0,s=(s=s+Math.imul(D,ee)|0)+Math.imul(P,Z)|0,i=i+Math.imul(P,ee)|0,r=r+Math.imul(M,ne)|0,s=(s=s+Math.imul(M,re)|0)+Math.imul(O,ne)|0,i=i+Math.imul(O,re)|0,r=r+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,ae)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,ae)|0,r=r+Math.imul(N,le)|0,s=(s=s+Math.imul(N,ce)|0)+Math.imul(T,le)|0,i=i+Math.imul(T,ce)|0,r=r+Math.imul(_,de)|0,s=(s=s+Math.imul(_,he)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,he)|0;var Ee=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(s=(s=s+Math.imul(w,me)|0)+Math.imul(x,pe)|0))<<13)|0;c=((i=i+Math.imul(x,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(F,Z),s=(s=Math.imul(F,ee))+Math.imul(B,Z)|0,i=Math.imul(B,ee),r=r+Math.imul(D,ne)|0,s=(s=s+Math.imul(D,re)|0)+Math.imul(P,ne)|0,i=i+Math.imul(P,re)|0,r=r+Math.imul(M,ie)|0,s=(s=s+Math.imul(M,ae)|0)+Math.imul(O,ie)|0,i=i+Math.imul(O,ae)|0,r=r+Math.imul(C,le)|0,s=(s=s+Math.imul(C,ce)|0)+Math.imul(I,le)|0,i=i+Math.imul(I,ce)|0,r=r+Math.imul(N,de)|0,s=(s=s+Math.imul(N,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Ce=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(s=(s=s+Math.imul(_,me)|0)+Math.imul(S,pe)|0))<<13)|0;c=((i=i+Math.imul(S,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(F,ne),s=(s=Math.imul(F,re))+Math.imul(B,ne)|0,i=Math.imul(B,re),r=r+Math.imul(D,ie)|0,s=(s=s+Math.imul(D,ae)|0)+Math.imul(P,ie)|0,i=i+Math.imul(P,ae)|0,r=r+Math.imul(M,le)|0,s=(s=s+Math.imul(M,ce)|0)+Math.imul(O,le)|0,i=i+Math.imul(O,ce)|0,r=r+Math.imul(C,de)|0,s=(s=s+Math.imul(C,he)|0)+Math.imul(I,de)|0,i=i+Math.imul(I,he)|0;var Ie=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(s=(s=s+Math.imul(N,me)|0)+Math.imul(T,pe)|0))<<13)|0;c=((i=i+Math.imul(T,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(F,ie),s=(s=Math.imul(F,ae))+Math.imul(B,ie)|0,i=Math.imul(B,ae),r=r+Math.imul(D,le)|0,s=(s=s+Math.imul(D,ce)|0)+Math.imul(P,le)|0,i=i+Math.imul(P,ce)|0,r=r+Math.imul(M,de)|0,s=(s=s+Math.imul(M,he)|0)+Math.imul(O,de)|0,i=i+Math.imul(O,he)|0;var Ae=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(I,pe)|0))<<13)|0;c=((i=i+Math.imul(I,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(F,le),s=(s=Math.imul(F,ce))+Math.imul(B,le)|0,i=Math.imul(B,ce),r=r+Math.imul(D,de)|0,s=(s=s+Math.imul(D,he)|0)+Math.imul(P,de)|0,i=i+Math.imul(P,he)|0;var Me=(c+(r=r+Math.imul(M,pe)|0)|0)+((8191&(s=(s=s+Math.imul(M,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((i=i+Math.imul(O,me)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(F,de),s=(s=Math.imul(F,he))+Math.imul(B,de)|0,i=Math.imul(B,he);var Oe=(c+(r=r+Math.imul(D,pe)|0)|0)+((8191&(s=(s=s+Math.imul(D,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((i=i+Math.imul(P,me)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(r=Math.imul(F,pe))|0)+((8191&(s=(s=Math.imul(F,me))+Math.imul(B,pe)|0))<<13)|0;return c=((i=Math.imul(B,me))+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=be,l[2]=ve,l[3]=ye,l[4]=we,l[5]=xe,l[6]=ke,l[7]=_e,l[8]=Se,l[9]=je,l[10]=Ne,l[11]=Te,l[12]=Ee,l[13]=Ce,l[14]=Ie,l[15]=Ae,l[16]=Me,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,n.length++),n};function g(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,s=0,i=0;i<n.length-1;i++){var a=s;s=0;for(var o=67108863&r,l=Math.min(i,t.length-1),c=Math.max(0,i-e.length+1);c<=l;c++){var u=i-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),s+=(a=(a=a+(d/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[i]=o,r=a,a=s}return 0!==r?n.words[i]=r:n.length--,n._strip()}function b(e,t,n){return g(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(m=p),s.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?p(this,e,t):n<1024?g(this,e,t):b(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=s.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,s=0;s<t;s++)r|=(1&e)<<t-s-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,s,i){for(var a=0;a<i;a++)r[a]=t[e[a]],s[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,s,i){this.permute(i,e,t,n,r,s);for(var a=1;a<s;a<<=1)for(var o=a<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),u=0;u<s;u+=o)for(var d=l,h=c,f=0;f<a;f++){var p=n[u+f],m=r[u+f],g=n[u+f+a],b=r[u+f+a],v=d*g-h*b;b=d*b+h*g,g=v,n[u+f]=p+g,r[u+f]=m+b,n[u+f+a]=p-g,r[u+f+a]=m-b,f!==o&&(v=l*d-c*h,h=l*h+c*d,d=v)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,s=0;for(n=n/2|0;n;n>>>=1)s++;return 1<<s+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var s=e[r];e[r]=e[n-r-1],e[n-r-1]=s,s=t[r],t[r]=-t[n-r-1],t[n-r-1]=-s}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var s=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&s,n=s<67108864?0:s/67108864|0}return e},v.prototype.convert13b=function(e,t,r,s){for(var i=0,a=0;a<t;a++)i+=0|e[a],r[2*a]=8191&i,i>>>=13,r[2*a+1]=8191&i,i>>>=13;for(a=2*t;a<s;++a)r[a]=0;n(0===i),n(0==(-8192&i))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(r),i=this.stub(r),a=new Array(r),o=new Array(r),l=new Array(r),c=new Array(r),u=new Array(r),d=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,i,o,l,r,s),this.transform(c,i,u,d,r,s);for(var f=0;f<r;f++){var p=o[f]*u[f]-l[f]*d[f];l[f]=o[f]*d[f]+l[f]*u[f],o[f]=p}return this.conjugate(o,l,r),this.transform(o,l,h,i,r,s),this.conjugate(h,i,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),b(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,s=0;s<this.length;s++){var i=(0|this.words[s])*e,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[s]=67108863&a}return 0!==r&&(this.words[s]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,s=n%26;t[n]=e.words[r]>>>s&1}return t}(e);if(0===t.length)return new s(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,s=(e-r)/26,i=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&i,l=(0|this.words[t])-o<<r;this.words[t]=l|a,a=o>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var s;n("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var i=e%26,a=Math.min((e-i)/26,this.length),o=67108863^67108863>>>i<<i,l=r;if(s-=a,s=Math.max(0,s),l){for(var c=0;c<a;c++)l.words[c]=this.words[c];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=s);c--){var d=0|this.words[c];this.words[c]=u<<26-i|d>>>i,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,s=1<<t;return!(this.length<=r)&&!!(this.words[r]&s)},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var s,i,a=e.length+r;this._expand(a);var o=0;for(s=0;s<e.length;s++){i=(0|this.words[s+r])+o;var l=(0|e.words[s])*t;o=((i-=67108863&l)>>26)-(l/67108864|0),this.words[s+r]=67108863&i}for(;s<this.length-r;s++)o=(i=(0|this.words[s+r])+o)>>26,this.words[s+r]=67108863&i;if(0===o)return this._strip();for(n(-1===o),o=0,s=0;s<this.length;s++)o=(i=-(0|this.words[s])+o)>>26,this.words[s]=67108863&i;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,a=0|i.words[i.length-1];0!==(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var o,l=r.length-i.length;if("mod"!==t){(o=new s(null)).length=l+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=r.clone()._ishlnsubmul(i,1,l);0===u.negative&&(r=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|r.words[i.length+d])+(0|r.words[i.length+d-1]);for(h=Math.min(h/a|0,67108863),r._ishlnsubmul(i,h,d);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,d),r.isZero()||(r.negative^=1);o&&(o.words[d]=h)}return o&&o._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:o||null,mod:r}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(i=o.div.neg()),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,o},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),s=e.andln(1),i=n.cmp(r);return i<0||1===s&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,s=0,i=this.length-1;i>=0;i--)s=(r*s+(0|this.words[i]))%e;return t?-s:s},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,s=this.length-1;s>=0;s--){var i=(0|this.words[s])+67108864*r;this.words[s]=i/e|0,r=i%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),a=new s(0),o=new s(0),l=new s(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0==(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(u),a.isub(d)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(o),a.isub(l)):(r.isub(t),o.isub(i),l.isub(a))}return{a:o,b:l,gcd:r.iushln(c)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new s(1),o=new s(0),l=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(o)):(r.isub(t),o.isub(a))}return(i=0===t.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var s=t.cmp(n);if(s<0){var i=t;t=n,n=i}else if(0===s||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,s=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=s,this;for(var i=s,a=r;0!==i&&a<this.length;a++){var o=0|this.words[a];i=(o+=i)>>>26,o&=67108863,this.words[a]=o}return 0!==i&&(this.words[a]=i,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],s=0|e.words[n];if(r!==s){r<s?t=-1:r>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new j(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function N(e){j.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},r(x,w),x.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=4194303&s,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|s>>>22,s=i}s>>>=22,e.words[r-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(k,w),r(_,w),r(S,w),S.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,s=67108863&r;r>>>=26,e.words[n]=s,t=r}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new k;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return y[e]=t,t},j.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},j.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},j.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},j.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},j.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},j.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},j.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},j.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},j.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},j.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},j.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},j.prototype.isqr=function(e){return this.imul(e,e.clone())},j.prototype.sqr=function(e){return this.mul(e,e)},j.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var o=new s(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=a;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();n(g<p);var b=this.pow(d,new s(1).iushln(p-g-1));h=h.redMul(b),d=b.redSqr(),f=f.redMul(d),p=g}return h},j.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},j.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new s(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],a=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],u=l-1;u>=0;u--){var d=c>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==d||0!==a?(a<<=1,a|=d,(4===++o||0===r&&0===u)&&(i=this.mul(i,n[a]),o=0,a=0)):o=0}l=26}return i},j.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},j.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new N(e)},r(N,j),N.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},N.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},N.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(r).iushrn(this.shift),i=s;return s.cmp(this.m)>=0?i=s.isub(this.m):s.cmpn(0)<0&&(i=s.iadd(this.m)),i._forceRed(this)},N.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},N.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t)},{buffer:188}],187:[function(e,t,n){"use strict";var r;function s(e){this.rand=e}if(t.exports=function(e){return r||(r=new s(null)),r.generate(e)},t.exports.Rand=s,s.prototype.generate=function(e){return this._rand(e)},s.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?s.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(s.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=e("crypto");if("function"!=typeof i.randomBytes)throw new Error("Not supported");s.prototype._rand=function(e){return i.randomBytes(e)}}catch(e){}},{crypto:188}],188:[function(e,t,n){},{}],189:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer;function s(e){r.isBuffer(e)||(e=r.from(e));for(var t=e.length/4|0,n=new Array(t),s=0;s<t;s++)n[s]=e.readUInt32BE(4*s);return n}function i(e){for(;0<e.length;e++)e[0]=0}function a(e,t,n,r,s){for(var i,a,o,l,c=n[0],u=n[1],d=n[2],h=n[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],b=4,v=1;v<s;v++)i=c[f>>>24]^u[p>>>16&255]^d[m>>>8&255]^h[255&g]^t[b++],a=c[p>>>24]^u[m>>>16&255]^d[g>>>8&255]^h[255&f]^t[b++],o=c[m>>>24]^u[g>>>16&255]^d[f>>>8&255]^h[255&p]^t[b++],l=c[g>>>24]^u[f>>>16&255]^d[p>>>8&255]^h[255&m]^t[b++],f=i,p=a,m=o,g=l;return i=(r[f>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^t[b++],a=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&f])^t[b++],o=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[f>>>8&255]<<8|r[255&p])^t[b++],l=(r[g>>>24]<<24|r[f>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^t[b++],[i>>>=0,a>>>=0,o>>>=0,l>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],r=[],s=[[],[],[],[]],i=[[],[],[],[]],a=0,o=0,l=0;l<256;++l){var c=o^o<<1^o<<2^o<<3^o<<4;c=c>>>8^255&c^99,n[a]=c,r[c]=a;var u=e[a],d=e[u],h=e[d],f=257*e[c]^16843008*c;s[0][a]=f<<24|f>>>8,s[1][a]=f<<16|f>>>16,s[2][a]=f<<8|f>>>24,s[3][a]=f,f=16843009*h^65537*d^257*u^16843008*a,i[0][c]=f<<24|f>>>8,i[1][c]=f<<16|f>>>16,i[2][c]=f<<8|f>>>24,i[3][c]=f,0===a?a=o=1:(a=u^e[e[e[h^u]]],o^=e[e[o]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:s,INV_SUB_MIX:i}}();function c(e){this._key=s(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,r=4*(n+1),s=[],i=0;i<t;i++)s[i]=e[i];for(i=t;i<r;i++){var a=s[i-1];i%t==0?(a=a<<8|a>>>24,a=l.SBOX[a>>>24]<<24|l.SBOX[a>>>16&255]<<16|l.SBOX[a>>>8&255]<<8|l.SBOX[255&a],a^=o[i/t|0]<<24):t>6&&i%t==4&&(a=l.SBOX[a>>>24]<<24|l.SBOX[a>>>16&255]<<16|l.SBOX[a>>>8&255]<<8|l.SBOX[255&a]),s[i]=s[i-t]^a}for(var c=[],u=0;u<r;u++){var d=r-u,h=s[d-(u%4?0:4)];c[u]=u<4||d<=4?h:l.INV_SUB_MIX[0][l.SBOX[h>>>24]]^l.INV_SUB_MIX[1][l.SBOX[h>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[h>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&h]]}this._nRounds=n,this._keySchedule=s,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return a(e=s(e),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=r.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},c.prototype.decryptBlock=function(e){var t=(e=s(e))[1];e[1]=e[3],e[3]=t;var n=a(e,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),i=r.allocUnsafe(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[3],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[1],12),i},c.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},t.exports.AES=c},{"safe-buffer":494}],190:[function(e,t,n){"use strict";var r=e("./aes"),s=e("safe-buffer").Buffer,i=e("cipher-base"),a=e("inherits"),o=e("./ghash"),l=e("buffer-xor"),c=e("./incr32");function u(e,t,n,a){i.call(this);var l=s.alloc(4,0);this._cipher=new r.AES(t);var u=this._cipher.encryptBlock(l);this._ghash=new o(u),n=function(e,t,n){if(12===t.length)return e._finID=s.concat([t,s.from([0,0,0,1])]),s.concat([t,s.from([0,0,0,2])]);var r=new o(n),i=t.length,a=i%16;r.update(t),a&&(a=16-a,r.update(s.alloc(a,0))),r.update(s.alloc(8,0));var l=8*i,u=s.alloc(8);u.writeUIntBE(l,0,8),r.update(u),e._finID=r.state;var d=s.from(e._finID);return c(d),d}(this,n,u),this._prev=s.from(n),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}a(u,i),u.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=s.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),s=0;s<r;++s)n+=e[s]^t[s];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!s.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},u.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},t.exports=u},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(e,t,n){"use strict";var r=e("./encrypter"),s=e("./decrypter"),i=e("./modes/list.json");n.createCipher=n.Cipher=r.createCipher,n.createCipheriv=n.Cipheriv=r.createCipheriv,n.createDecipher=n.Decipher=s.createDecipher,n.createDecipheriv=n.Decipheriv=s.createDecipheriv,n.listCiphers=n.getCiphers=function(){return Object.keys(i)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(e,t,n){"use strict";var r=e("./authCipher"),s=e("safe-buffer").Buffer,i=e("./modes"),a=e("./streamCipher"),o=e("cipher-base"),l=e("./aes"),c=e("evp_bytestokey");function u(e,t,n){o.call(this),this._cache=new d,this._last=void 0,this._cipher=new l.AES(t),this._prev=s.from(n),this._mode=e,this._autopadding=!0}function d(){this.cache=s.allocUnsafe(0)}function h(e,t,n){var o=i[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=s.from(n)),"GCM"!==o.mode&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=s.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===o.type?new a(o.module,t,n,!0):"auth"===o.type?new r(o.module,t,n,!0):new u(o.module,t,n)}e("inherits")(u,o),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),r.push(n);return s.concat(r)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=s.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},n.createDecipher=function(e,t){var n=i[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(t,!1,n.key,n.iv);return h(e,r.key,r.iv)},n.createDecipheriv=h},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(e,t,n){"use strict";var r=e("./modes"),s=e("./authCipher"),i=e("safe-buffer").Buffer,a=e("./streamCipher"),o=e("cipher-base"),l=e("./aes"),c=e("evp_bytestokey");function u(e,t,n){o.call(this),this._cache=new h,this._cipher=new l.AES(t),this._prev=i.from(n),this._mode=e,this._autopadding=!0}e("inherits")(u,o),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get();)n=this._mode.encrypt(this,t),r.push(n);return i.concat(r)};var d=i.alloc(16,16);function h(){this.cache=i.allocUnsafe(0)}function f(e,t,n){var o=r[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=i.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=i.from(n)),"GCM"!==o.mode&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===o.type?new a(o.module,t,n):"auth"===o.type?new s(o.module,t,n):new u(o.module,t,n)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=i.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=i.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return i.concat([this.cache,t])},n.createCipheriv=f,n.createCipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var s=c(t,!1,n.key,n.iv);return f(e,s.key,s.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=r.alloc(16,0);function i(e){var t=r.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function a(e){this.h=e,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}a.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},a.prototype._multiply=function(){for(var e,t,n,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],s=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(s[0]^=r[0],s[1]^=r[1],s[2]^=r[2],s[3]^=r[3]),n=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=i(s)},a.prototype.update=function(e){var t;for(this.cache=r.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},a.prototype.final=function(e,t){return this.cache.length&&this.ghash(r.concat([this.cache,s],16)),this.ghash(i([0,e,0,t])),this.state},t.exports=a},{"safe-buffer":494}],195:[function(e,t,n){"use strict";t.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},{}],196:[function(e,t,n){"use strict";var r=e("buffer-xor");n.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},n.decrypt=function(e,t){var n=e._prev;e._prev=t;var s=e._cipher.decryptBlock(t);return r(s,n)}},{"buffer-xor":219}],197:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("buffer-xor");function i(e,t,n){var i=t.length,a=s(t,e._cache);return e._cache=e._cache.slice(i),e._prev=r.concat([e._prev,n?t:a]),a}n.encrypt=function(e,t,n){for(var s,a=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){a=r.concat([a,i(e,t,n)]);break}s=e._cache.length,a=r.concat([a,i(e,t.slice(0,s),n)]),t=t.slice(s)}return a}},{"buffer-xor":219,"safe-buffer":494}],198:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer;function s(e,t,n){for(var r,s,a=-1,o=0;++a<8;)r=t&1<<7-a?128:0,o+=(128&(s=e._cipher.encryptBlock(e._prev)[0]^r))>>a%8,e._prev=i(e._prev,n?r:s);return o}function i(e,t){var n=e.length,s=-1,i=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([t])]);++s<n;)i[s]=e[s]<<1|e[s+1]>>7;return i}n.encrypt=function(e,t,n){for(var i=t.length,a=r.allocUnsafe(i),o=-1;++o<i;)a[o]=s(e,t[o],n);return a}},{"safe-buffer":494}],199:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer;function s(e,t,n){var s=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([n?t:s])]),s}n.encrypt=function(e,t,n){for(var i=t.length,a=r.allocUnsafe(i),o=-1;++o<i;)a[o]=s(e,t[o],n);return a}},{"safe-buffer":494}],200:[function(e,t,n){"use strict";var r=e("buffer-xor"),s=e("safe-buffer").Buffer,i=e("../incr32");function a(e){var t=e._cipher.encryptBlockRaw(e._prev);return i(e._prev),t}n.encrypt=function(e,t){var n=Math.ceil(t.length/16),i=e._cache.length;e._cache=s.concat([e._cache,s.allocUnsafe(16*n)]);for(var o=0;o<n;o++){var l=a(e),c=i+16*o;e._cache.writeUInt32BE(l[0],c+0),e._cache.writeUInt32BE(l[1],c+4),e._cache.writeUInt32BE(l[2],c+8),e._cache.writeUInt32BE(l[3],c+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,u)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(e,t,n){"use strict";n.encrypt=function(e,t){return e._cipher.encryptBlock(t)},n.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],202:[function(e,t,n){"use strict";var r={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},s=e("./list.json");for(var i in s)s[i].module=r[s[i].mode];t.exports=s},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(e,t,n){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(e,t,n){(function(t){(function(){"use strict";var r=e("buffer-xor");function s(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,s(e)]);var i=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,i)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(e,t,n){"use strict";var r=e("./aes"),s=e("safe-buffer").Buffer,i=e("cipher-base");function a(e,t,n,a){i.call(this),this._cipher=new r.AES(t),this._prev=s.from(n),this._cache=s.allocUnsafe(0),this._secCache=s.allocUnsafe(0),this._decrypt=a,this._mode=e}e("inherits")(a,i),a.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(e,t,n){"use strict";var r=e("browserify-des"),s=e("browserify-aes/browser"),i=e("browserify-aes/modes"),a=e("browserify-des/modes"),o=e("evp_bytestokey");function l(e,t,n){if(e=e.toLowerCase(),i[e])return s.createCipheriv(e,t,n);if(a[e])return new r({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function c(e,t,n){if(e=e.toLowerCase(),i[e])return s.createDecipheriv(e,t,n);if(a[e])return new r({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}n.createCipher=n.Cipher=function(e,t){var n,r;if(e=e.toLowerCase(),i[e])n=i[e].key,r=i[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");n=8*a[e].key,r=a[e].iv}var s=o(t,!1,n,r);return l(e,s.key,s.iv)},n.createCipheriv=n.Cipheriv=l,n.createDecipher=n.Decipher=function(e,t){var n,r;if(e=e.toLowerCase(),i[e])n=i[e].key,r=i[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");n=8*a[e].key,r=a[e].iv}var s=o(t,!1,n,r);return c(e,s.key,s.iv)},n.createDecipheriv=n.Decipheriv=c,n.listCiphers=n.getCiphers=function(){return Object.keys(a).concat(s.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(e,t,n){"use strict";var r=e("cipher-base"),s=e("des.js"),i=e("inherits"),a=e("safe-buffer").Buffer,o={"des-ede3-cbc":s.CBC.instantiate(s.EDE),"des-ede3":s.EDE,"des-ede-cbc":s.CBC.instantiate(s.EDE),"des-ede":s.EDE,"des-cbc":s.CBC.instantiate(s.DES),"des-ecb":s.DES};function l(e){r.call(this);var t,n=e.mode.toLowerCase(),s=o[n];t=e.decrypt?"decrypt":"encrypt";var i=e.key;a.isBuffer(i)||(i=a.from(i)),"des-ede"!==n&&"des-ede-cbc"!==n||(i=a.concat([i,i.slice(0,8)]));var l=e.iv;a.isBuffer(l)||(l=a.from(l)),this._des=s.create({key:i,iv:l,type:t})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],t.exports=l,i(l,r),l.prototype._update=function(e){return a.from(this._des.update(e))},l.prototype._final=function(){return a.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(e,t,n){"use strict";n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}},{}],209:[function(e,t,n){(function(n){(function(){"use strict";var r=e("bn.js"),s=e("randombytes");function i(e){var t,n=e.modulus.byteLength();do{t=new r(s(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function a(e,t){var s=function(e){var t=i(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),a=t.modulus.byteLength(),o=new r(e).mul(s.blinder).umod(t.modulus),l=o.toRed(r.mont(t.prime1)),c=o.toRed(r.mont(t.prime2)),u=t.coefficient,d=t.prime1,h=t.prime2,f=l.redPow(t.exponent1).fromRed(),p=c.redPow(t.exponent2).fromRed(),m=f.isub(p).imul(u).umod(d).imul(h);return p.iadd(m).imul(s.unblinder).umod(t.modulus).toArrayLike(n,"be",a)}a.getr=i,t.exports=a}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(e,t,n){"use strict";t.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(e,t,n){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(e,t,n){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("create-hash"),i=e("readable-stream"),a=e("inherits"),o=e("./sign"),l=e("./verify"),c=e("./algorithms.json");function u(e){i.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){i.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hash=s(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){return new u(e)}function f(e){return new d(e)}Object.keys(c).forEach(function(e){c[e].id=r.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]}),a(u,i.Writable),u.prototype._write=function(e,t,n){this._hash.update(e),n()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},u.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),r=o(n,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},a(d,i.Writable),d.prototype._write=function(e,t,n){this._hash.update(e),n()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,n){"string"==typeof t&&(t=r.from(t,n)),this.end();var s=this._hash.digest();return l(t,s,e,this._signType,this._tag)},t.exports={Sign:h,Verify:f,createSign:h,createVerify:f}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("create-hmac"),i=e("browserify-rsa"),a=e("elliptic").ec,o=e("bn.js"),l=e("parse-asn1"),c=e("./curves.json");function u(e,t,n,i){if((e=r.from(e.toArray())).length<t.byteLength()){var a=r.alloc(t.byteLength()-e.length);e=r.concat([a,e])}var o=n.length,l=function(e,t){e=(e=d(e,t)).mod(t);var n=r.from(e.toArray());if(n.length<t.byteLength()){var s=r.alloc(t.byteLength()-n.length);n=r.concat([s,n])}return n}(n,t),c=r.alloc(o);c.fill(1);var u=r.alloc(o);return u=s(i,u).update(c).update(r.from([0])).update(e).update(l).digest(),c=s(i,u).update(c).digest(),{k:u=s(i,u).update(c).update(r.from([1])).update(e).update(l).digest(),v:c=s(i,u).update(c).digest()}}function d(e,t){var n=new o(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function h(e,t,n){var i,a;do{for(i=r.alloc(0);8*i.length<e.bitLength();)t.v=s(n,t.k).update(t.v).digest(),i=r.concat([i,t.v]);a=d(i,e),t.k=s(n,t.k).update(t.v).update(r.from([0])).digest(),t.v=s(n,t.k).update(t.v).digest()}while(-1!==a.cmp(e));return a}function f(e,t,n,r){return e.toRed(o.mont(n)).redPow(t).fromRed().mod(r)}t.exports=function(e,t,n,s,p){var m=l(t);if(m.curve){if("ecdsa"!==s&&"ecdsa/rsa"!==s)throw new Error("wrong private key type");return function(e,t){var n=c[t.curve.join(".")];if(!n)throw new Error("unknown curve "+t.curve.join("."));var s=new a(n).keyFromPrivate(t.privateKey).sign(e);return r.from(s.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==s)throw new Error("wrong private key type");return function(e,t,n){for(var s,i=t.params.priv_key,a=t.params.p,l=t.params.q,c=t.params.g,p=new o(0),m=d(e,l).mod(l),g=!1,b=u(i,l,e,n);!1===g;)p=f(c,s=h(l,b,n),a,l),0===(g=s.invm(l).imul(m.add(i.mul(p))).mod(l)).cmpn(0)&&(g=!1,p=new o(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var n=[48,e.length+t.length+4,2,e.length];return n=n.concat(e,[2,t.length],t),r.from(n)}(p,g)}(e,m,n)}if("rsa"!==s&&"ecdsa/rsa"!==s)throw new Error("wrong private key type");e=r.concat([p,e]);for(var g=m.modulus.byteLength(),b=[0,1];e.length+b.length+1<g;)b.push(255);b.push(0);for(var v=-1;++v<e.length;)b.push(e[v]);return i(b,m)},t.exports.getKey=u,t.exports.makeKey=h},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("bn.js"),i=e("elliptic").ec,a=e("parse-asn1"),o=e("./curves.json");function l(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}t.exports=function(e,t,n,c,u){var d=a(n);if("ec"===d.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=o[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var s=new i(r),a=n.data.subjectPrivateKey.data;return s.verify(t,e,a)}(e,t,d)}if("dsa"===d.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=n.data.p,i=n.data.q,o=n.data.g,c=n.data.pub_key,u=a.signature.decode(e,"der"),d=u.s,h=u.r;l(d,i),l(h,i);var f=s.mont(r),p=d.invm(i);return 0===o.toRed(f).redPow(new s(t).mul(p).mod(i)).fromRed().mul(c.toRed(f).redPow(h.mul(p).mod(i)).fromRed()).mod(r).mod(i).cmp(h)}(e,t,d)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=r.concat([u,t]);for(var h=d.modulus.byteLength(),f=[1],p=0;t.length+f.length+2<h;)f.push(255),p++;f.push(0);for(var m=-1;++m<t.length;)f.push(t[m]);f=r.from(f);var g=s.mont(d.modulus);e=(e=new s(e).toRed(g)).redPow(new s(d.publicExponent)),e=r.from(e.fromRed().toArray());var b=p<8?1:0;for(h=Math.min(e.length,f.length),e.length!==f.length&&(b=1),m=-1;++m<h;)b|=e[m]^f[m];return 0===b}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(e,t,n){},{}],217:[function(e,t,n){"use strict";var r=e("buffer"),s=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return s(e,t,n)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=a),i(s,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:220}],218:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var s=a(t[r]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--r<n||-2===s?0:(s=a(t[r]))>=0?(s>0&&(e.lastNeed=s-2),s):--r<n||-2===s?0:(s=a(t[r]))>=0?(s>0&&(2===s?s=0:e.lastNeed=s-3),s):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":217}],219:[function(e,t,n){(function(e){(function(){"use strict";t.exports=function(t,n){for(var r=Math.min(t.length,n.length),s=new e(r),i=0;i<r;++i)s[i]=t[i]^n[i];return s}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:220}],220:[function(e,t,n){(function(t){(function(){"use strict";var t=e("base64-js"),r=e("ieee754");function s(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),r=s(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=i.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return i.from(r,t,n);var a=function(e){if(i.isBuffer(e)){var t=0|u(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||B(e.length)?s(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return o(e),s(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function u(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function d(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(s)return r?-1:D(e).length;t=(""+t).toLowerCase(),s=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return j(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,s){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),B(n=+n)&&(n=s?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(s)return-1;n=e.length-1}else if(n<0){if(!s)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,s);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,s){var i,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){var u=-1;for(i=n;i<o;i++)if(c(e,i)===c(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===l)return u*a}else-1!==u&&(i-=i-u),u=-1}else for(n+l>o&&(n=o-l),i=n;i>=0;i--){for(var d=!0,h=0;h<l;h++)if(c(e,i+h)!==c(t,h)){d=!1;break}if(d)return i}return-1}function g(e,t,n,r){n=Number(n)||0;var s=e.length-n;r?(r=Number(r))>s&&(r=s):r=s;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(B(o))return a;e[n+a]=o}return a}function b(e,t,n,r){return L(D(t,e.length-n),e,n,r)}function v(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function y(e,t,n,r){return v(e,t,n,r)}function w(e,t,n,r){return L(P(t),e,n,r)}function x(e,t,n,r){return L(function(e,t){for(var n,r,s,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,s=n%256,i.push(s),i.push(r);return i}(t,e.length-n),e,n,r)}function k(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],s=t;s<n;){var i,a,o,l,c=e[s],u=null,d=c>239?4:c>223?3:c>191?2:1;if(s+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(i=e[s+1]))&&(l=(31&c)<<6|63&i)>127&&(u=l);break;case 3:i=e[s+1],a=e[s+2],128==(192&i)&&128==(192&a)&&(l=(15&c)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:i=e[s+1],a=e[s+2],o=e[s+3],128==(192&i)&&128==(192&a)&&128==(192&o)&&(l=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),s+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var s=t;s<n;++s)r+=String.fromCharCode(127&e[s]);return r}function j(e,t,n){var r="";n=Math.min(e.length,n);for(var s=t;s<n;++s)r+=String.fromCharCode(e[s]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var s="",i=t;i<n;++i)s+=R(e[i]);return s}function T(e,t,n){for(var r=e.slice(t,n),s="",i=0;i<r.length;i+=2)s+=String.fromCharCode(r[i]+256*r[i+1]);return s}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,n,r,s,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r,s,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function A(e,t,n,s,i){return t=+t,n>>>=0,i||I(e,0,n,4),r.write(e,t,n,s,23,4),n+4}function M(e,t,n,s,i){return t=+t,n>>>=0,i||I(e,0,n,8),r.write(e,t,n,s,52,8),n+8}n.Buffer=i,n.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,n){return a(e,t,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,n){return function(e,t,n){return o(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},i.allocUnsafe=function(e){return l(e)},i.allocUnsafeSlow=function(e){return l(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(F(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,s=0,a=Math.min(n,r);s<a;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),s=0;for(n=0;n<e.length;++n){var a=e[n];if(F(a,Uint8Array)&&(a=i.from(a)),!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,s),s+=a.length}return r},i.byteLength=d,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):h.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,s){if(F(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),t<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(s>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),l=Math.min(a,o),c=this.slice(r,s),u=e.slice(t,n),d=0;d<l;++d)if(c[d]!==u[d]){a=c[d],o=u[d];break}return a<o?-1:o<a?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var s=this.length-t;if((void 0===n||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return y(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e],s=1,i=0;++i<t&&(s*=256);)r+=this[e+i]*s;return r},i.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r},i.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=this[e],s=1,i=0;++i<t&&(s*=256);)r+=this[e+i]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||E(e,t,this.length);for(var r=t,s=1,i=this[e+--r];r>0&&(s*=256);)i+=this[e+--r]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),r.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),r.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),r.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),r.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);var s=1,i=0;for(this[t]=255&e;++i<n&&(s*=256);)this[t+i]=e/s&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||C(this,e,t,n,Math.pow(2,8*n)-1,0);var s=n-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*n-1);C(this,e,t,n,s-1,-s)}var i=0,a=1,o=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*n-1);C(this,e,t,n,s-1,-s)}var i=n-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var s=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=s-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return s},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=i.isBuffer(e)?e:i.from(e,r),l=o.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%l]}return this};var O=/[^+/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,s=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function P(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var s=0;s<r&&!(s+n>=t.length||s>=e.length);++s)t[s+n]=e[s];return s}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function B(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("stream").Transform,i=e("string_decoder").StringDecoder;function a(e){s.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(a,s),a.prototype.update=function(e,t,n){"string"==typeof e&&(e=r.from(e,t));var s=this._update(e);return this.hashMode?this:(n&&(s=this._toString(s,n)),s)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},a.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},a.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},a.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},t.exports=a},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(e,t,n){"use strict";var r=e("../internals/is-callable"),s=e("../internals/try-to-string"),i=TypeError;t.exports=function(e){if(r(e))return e;throw new i(s(e)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(e,t,n){"use strict";var r=e("../internals/is-constructor"),s=e("../internals/try-to-string"),i=TypeError;t.exports=function(e){if(r(e))return e;throw new i(s(e)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(e,t,n){"use strict";var r=e("../internals/is-callable"),s=String,i=TypeError;t.exports=function(e){if("object"==typeof e||r(e))return e;throw new i("Can't set "+s(e)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(e,t,n){"use strict";var r=e("../internals/well-known-symbol"),s=e("../internals/object-create"),i=e("../internals/object-define-property").f,a=r("unscopables"),o=Array.prototype;void 0===o[a]&&i(o,a,{configurable:!0,value:s(null)}),t.exports=function(e){o[a][e]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(e,t,n){"use strict";var r=e("../internals/object-is-prototype-of"),s=TypeError;t.exports=function(e,t){if(r(t,e))return e;throw new s("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(e,t,n){"use strict";var r=e("../internals/is-object"),s=String,i=TypeError;t.exports=function(e){if(r(e))return e;throw new i(s(e)+" is not an object")}},{"../internals/is-object":289}],228:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),s=e("../internals/to-absolute-index"),i=e("../internals/length-of-array-like"),a=function(e){return function(t,n,a){var o,l=r(t),c=i(l),u=s(a,c);if(e&&n!=n){for(;c>u;)if((o=l[u++])!=o)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),s=e("../internals/function-uncurry-this"),i=e("../internals/indexed-object"),a=e("../internals/to-object"),o=e("../internals/length-of-array-like"),l=e("../internals/array-species-create"),c=s([].push),u=function(e){var t=1===e,n=2===e,s=3===e,u=4===e,d=6===e,h=7===e,f=5===e||d;return function(p,m,g,b){for(var v,y,w=a(p),x=i(w),k=r(m,g),_=o(x),S=0,j=b||l,N=t?j(p,_):n||h?j(p,0):void 0;_>S;S++)if((f||S in x)&&(y=k(v=x[S],S,w),e))if(t)N[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:c(N,v)}else switch(e){case 4:return!1;case 7:c(N,v)}return d?-1:s||u?u:N}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(e,t,n){"use strict";var r=e("../internals/to-absolute-index"),s=e("../internals/length-of-array-like"),i=e("../internals/create-property"),a=Array,o=Math.max;t.exports=function(e,t,n){for(var l=s(e),c=r(t,l),u=r(void 0===n?l:n,l),d=a(o(u-c,0)),h=0;c<u;c++,h++)i(d,h,e[c]);return d.length=h,d}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this");t.exports=r([].slice)},{"../internals/function-uncurry-this":268}],232:[function(e,t,n){"use strict";var r=e("../internals/is-array"),s=e("../internals/is-constructor"),i=e("../internals/is-object"),a=e("../internals/well-known-symbol")("species"),o=Array;t.exports=function(e){var t;return r(e)&&(t=e.constructor,(s(t)&&(t===o||r(t.prototype))||i(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?o:t}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(e,t,n){"use strict";var r=e("../internals/array-species-constructor");t.exports=function(e,t){return new(r(e))(0===t?0:t)}},{"../internals/array-species-constructor":232}],234:[function(e,t,n){"use strict";var r=e("../internals/well-known-symbol")("iterator"),s=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){s=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}t.exports=function(e,t){try{if(!t&&!s)return!1}catch(e){return!1}var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},{"../internals/well-known-symbol":357}],235:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=r({}.toString),i=r("".slice);t.exports=function(e){return i(s(e),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),s=e("../internals/is-callable"),i=e("../internals/classof-raw"),a=e("../internals/well-known-symbol")("toStringTag"),o=Object,l="Arguments"===i(function(){return arguments}());t.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=o(e),a))?n:l?i(t):"Object"===(r=i(t))&&s(t.callee)?"Arguments":r}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(e,t,n){"use strict";var r=e("../internals/has-own-property"),s=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");t.exports=function(e,t,n){for(var o=s(t),l=a.f,c=i.f,u=0;u<o.length;u++){var d=o[u];r(e,d)||n&&r(n,d)||l(e,d,c(t,d))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(e,t,n){"use strict";var r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":357}],239:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},{"../internals/fails":260}],240:[function(e,t,n){"use strict";t.exports=function(e,t){return{value:e,done:t}}},{}],241:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return s.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(e,t,n){"use strict";t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],243:[function(e,t,n){"use strict";var r=e("../internals/to-property-key"),s=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=function(e,t,n){var a=r(t);a in e?s.f(e,a,i(0,n)):e[a]=n}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(e,t,n){"use strict";var r=e("../internals/make-built-in"),s=e("../internals/object-define-property");t.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),s.f(e,t,n)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(e,t,n){"use strict";var r=e("../internals/is-callable"),s=e("../internals/object-define-property"),i=e("../internals/make-built-in"),a=e("../internals/define-global-property");t.exports=function(e,t,n,o){o||(o={});var l=o.enumerable,c=void 0!==o.name?o.name:t;if(r(n)&&i(n,c,o),o.global)l?e[t]=n:a(t,n);else{try{o.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:s.f(e,t,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(e,t,n){"use strict";var r=e("../internals/global"),s=Object.defineProperty;t.exports=function(e,t){try{s(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},{"../internals/global":274}],247:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=!r(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":260}],248:[function(e,t,n){"use strict";var r="object"==typeof document&&document.all,s=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:s}},{}],249:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/is-object"),i=r.document,a=s(i)&&s(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(e,t,n){"use strict";var r=e("../internals/engine-is-deno"),s=e("../internals/engine-is-node");t.exports=!r&&!s&&"object"==typeof window&&"object"==typeof document},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(e,t,n){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},{}],252:[function(e,t,n){"use strict";var r=e("../internals/engine-user-agent");t.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},{"../internals/engine-user-agent":256}],253:[function(e,t,n){"use strict";var r=e("../internals/engine-user-agent");t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},{"../internals/engine-user-agent":256}],254:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/classof-raw");t.exports="process"===s(r.process)},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(e,t,n){"use strict";var r=e("../internals/engine-user-agent");t.exports=/web0s(?!.*chrome)/i.test(r)},{"../internals/engine-user-agent":256}],256:[function(e,t,n){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},{}],257:[function(e,t,n){"use strict";var r,s,i=e("../internals/global"),a=e("../internals/engine-user-agent"),o=i.process,l=i.Deno,c=o&&o.versions||l&&l.version,u=c&&c.v8;u&&(s=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!s&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(s=+r[1]),t.exports=s},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(e,t,n){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),a=e("../internals/define-built-in"),o=e("../internals/define-global-property"),l=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");t.exports=function(e,t){var n,u,d,h,f,p=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[p]||o(p,{}):(r[p]||{}).prototype)for(u in t){if(h=t[u],d=e.dontCallGetSet?(f=s(n,u))&&f.value:n[u],!c(m?u:p+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&i(h,"sham",!0),a(n,u,h,e)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(e,t,n){"use strict";t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],261:[function(e,t,n){"use strict";var r=e("../internals/function-bind-native"),s=Function.prototype,i=s.apply,a=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},{"../internals/function-bind-native":263}],262:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this-clause"),s=e("../internals/a-callable"),i=e("../internals/function-bind-native"),a=r(r.bind);t.exports=function(e,t){return s(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=!r(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(e,t,n){"use strict";var r=e("../internals/function-bind-native"),s=Function.prototype.call;t.exports=r?s.bind(s):function(){return s.apply(s,arguments)}},{"../internals/function-bind-native":263}],265:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/has-own-property"),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,o=s(i,"name"),l=o&&"something"===function(){}.name,c=o&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/a-callable");t.exports=function(e,t,n){try{return r(s(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(e,t,n){"use strict";var r=e("../internals/classof-raw"),s=e("../internals/function-uncurry-this");t.exports=function(e){if("Function"===r(e))return s(e)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(e,t,n){"use strict";var r=e("../internals/function-bind-native"),s=Function.prototype,i=s.call,a=r&&s.bind.bind(i,i);t.exports=r?a:function(e){return function(){return i.apply(e,arguments)}}},{"../internals/function-bind-native":263}],269:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/is-callable"),i=function(e){return s(e)?e:void 0};t.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(e,t,n){"use strict";var r=e("../internals/classof"),s=e("../internals/get-method"),i=e("../internals/is-null-or-undefined"),a=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(!i(e))return s(e,o)||s(e,"@@iterator")||a[r(e)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(e,t,n){"use strict";var r=e("../internals/function-call"),s=e("../internals/a-callable"),i=e("../internals/an-object"),a=e("../internals/try-to-string"),o=e("../internals/get-iterator-method"),l=TypeError;t.exports=function(e,t){var n=arguments.length<2?o(e):t;if(s(n))return i(r(n,e));throw new l(a(e)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/is-array"),i=e("../internals/is-callable"),a=e("../internals/classof-raw"),o=e("../internals/to-string"),l=r([].push);t.exports=function(e){if(i(e))return e;if(s(e)){for(var t=e.length,n=[],r=0;r<t;r++){var c=e[r];"string"==typeof c?l(n,c):"number"!=typeof c&&"Number"!==a(c)&&"String"!==a(c)||l(n,o(c))}var u=n.length,d=!0;return function(e,t){if(d)return d=!1,t;if(s(this))return t;for(var r=0;r<u;r++)if(n[r]===e)return t}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(e,t,n){"use strict";var r=e("../internals/a-callable"),s=e("../internals/is-null-or-undefined");t.exports=function(e,t){var n=e[t];return s(n)?void 0:r(n)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(e,t,r){(function(e){(function(){"use strict";var n=function(e){return e&&e.Math===Math&&e};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],275:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/to-object"),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(e,t){return i(s(e),t)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(e,t,n){"use strict";t.exports={}},{}],277:[function(e,t,n){"use strict";t.exports=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}}},{}],278:[function(e,t,n){"use strict";var r=e("../internals/get-built-in");t.exports=r("document","documentElement")},{"../internals/get-built-in":269}],279:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/fails"),i=e("../internals/document-create-element");t.exports=!r&&!s(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/fails"),i=e("../internals/classof-raw"),a=Object,o=r("".split);t.exports=s(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?o(e,""):a(e)}:a},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/is-callable"),i=e("../internals/shared-store"),a=r(Function.toString);s(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),t.exports=i.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(e,t,n){"use strict";var r,s,i,a=e("../internals/weak-map-basic-detection"),o=e("../internals/global"),l=e("../internals/is-object"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/has-own-property"),d=e("../internals/shared-store"),h=e("../internals/shared-key"),f=e("../internals/hidden-keys"),p=o.TypeError,m=o.WeakMap;if(a||d.state){var g=d.state||(d.state=new m);g.get=g.get,g.has=g.has,g.set=g.set,r=function(e,t){if(g.has(e))throw new p("Object already initialized");return t.facade=e,g.set(e,t),t},s=function(e){return g.get(e)||{}},i=function(e){return g.has(e)}}else{var b=h("state");f[b]=!0,r=function(e,t){if(u(e,b))throw new p("Object already initialized");return t.facade=e,c(e,b,t),t},s=function(e){return u(e,b)?e[b]:{}},i=function(e){return u(e,b)}}t.exports={set:r,get:s,has:i,enforce:function(e){return i(e)?s(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=s(t)).type!==e)throw new p("Incompatible receiver, "+e+" required");return n}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(e,t,n){"use strict";var r=e("../internals/well-known-symbol"),s=e("../internals/iterators"),i=r("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(s.Array===e||a[i]===e)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(e,t,n){"use strict";var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"===r(e)}},{"../internals/classof-raw":235}],285:[function(e,t,n){"use strict";var r=e("../internals/document-all"),s=r.all;t.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===s}:function(e){return"function"==typeof e}},{"../internals/document-all":248}],286:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/fails"),i=e("../internals/is-callable"),a=e("../internals/classof"),o=e("../internals/get-built-in"),l=e("../internals/inspect-source"),c=function(){},u=[],d=o("Reflect","construct"),h=/^\s*(?:class|function)\b/,f=r(h.exec),p=!h.test(c),m=function(e){if(!i(e))return!1;try{return d(c,u,e),!0}catch(e){return!1}},g=function(e){if(!i(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(h,l(e))}catch(e){return!0}};g.sham=!0,t.exports=!d||s(function(){var e;return m(m.call)||!m(Object)||!m(function(){e=!0})||e})?g:m},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(e,t,n){"use strict";var r=e("../internals/fails"),s=e("../internals/is-callable"),i=/#|\.prototype\./,a=function(e,t){var n=l[o(e)];return n===u||n!==c&&(s(t)?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(e,t,n){"use strict";t.exports=function(e){return null==e}},{}],289:[function(e,t,n){"use strict";var r=e("../internals/is-callable"),s=e("../internals/document-all"),i=s.all;t.exports=s.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===i}:function(e){return"object"==typeof e?null!==e:r(e)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(e,t,n){"use strict";t.exports=!1},{}],291:[function(e,t,n){"use strict";var r=e("../internals/is-object"),s=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"===s(e))}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),s=e("../internals/is-callable"),i=e("../internals/object-is-prototype-of"),a=e("../internals/use-symbol-as-uid"),o=Object;t.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return s(t)&&i(t.prototype,o(e))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),s=e("../internals/function-call"),i=e("../internals/an-object"),a=e("../internals/try-to-string"),o=e("../internals/is-array-iterator-method"),l=e("../internals/length-of-array-like"),c=e("../internals/object-is-prototype-of"),u=e("../internals/get-iterator"),d=e("../internals/get-iterator-method"),h=e("../internals/iterator-close"),f=TypeError,p=function(e,t){this.stopped=e,this.result=t},m=p.prototype;t.exports=function(e,t,n){var g,b,v,y,w,x,k,_=n&&n.that,S=!(!n||!n.AS_ENTRIES),j=!(!n||!n.IS_RECORD),N=!(!n||!n.IS_ITERATOR),T=!(!n||!n.INTERRUPTED),E=r(t,_),C=function(e){return g&&h(g,"normal",e),new p(!0,e)},I=function(e){return S?(i(e),T?E(e[0],e[1],C):E(e[0],e[1])):T?E(e,C):E(e)};if(j)g=e.iterator;else if(N)g=e;else{if(!(b=d(e)))throw new f(a(e)+" is not iterable");if(o(b)){for(v=0,y=l(e);y>v;v++)if((w=I(e[v]))&&c(m,w))return w;return new p(!1)}g=u(e,b)}for(x=j?e.next:g.next;!(k=s(x,g)).done;){try{w=I(k.value)}catch(e){h(g,"throw",e)}if("object"==typeof w&&w&&c(m,w))return w}return new p(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(e,t,n){"use strict";var r=e("../internals/function-call"),s=e("../internals/an-object"),i=e("../internals/get-method");t.exports=function(e,t,n){var a,o;s(e);try{if(!(a=i(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(e){o=!0,a=e}if("throw"===t)throw n;if(o)throw a;return s(a),n}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(e,t,n){"use strict";var r=e("../internals/iterators-core").IteratorPrototype,s=e("../internals/object-create"),i=e("../internals/create-property-descriptor"),a=e("../internals/set-to-string-tag"),o=e("../internals/iterators"),l=function(){return this};t.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=s(r,{next:i(+!c,n)}),a(e,u,!1,!0),o[u]=l,e}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/is-pure"),a=e("../internals/function-name"),o=e("../internals/is-callable"),l=e("../internals/iterator-create-constructor"),c=e("../internals/object-get-prototype-of"),u=e("../internals/object-set-prototype-of"),d=e("../internals/set-to-string-tag"),h=e("../internals/create-non-enumerable-property"),f=e("../internals/define-built-in"),p=e("../internals/well-known-symbol"),m=e("../internals/iterators"),g=e("../internals/iterators-core"),b=a.PROPER,v=a.CONFIGURABLE,y=g.IteratorPrototype,w=g.BUGGY_SAFARI_ITERATORS,x=p("iterator"),k=function(){return this};t.exports=function(e,t,n,a,p,g,_){l(n,t,a);var S,j,N,T=function(e){if(e===p&&M)return M;if(!w&&e&&e in I)return I[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},E=t+" Iterator",C=!1,I=e.prototype,A=I[x]||I["@@iterator"]||p&&I[p],M=!w&&A||T(p),O="Array"===t&&I.entries||A;if(O&&(S=c(O.call(new e)))!==Object.prototype&&S.next&&(i||c(S)===y||(u?u(S,y):o(S[x])||f(S,x,k)),d(S,E,!0,!0),i&&(m[E]=k)),b&&"values"===p&&A&&"values"!==A.name&&(!i&&v?h(I,"name","values"):(C=!0,M=function(){return s(A,this)})),p)if(j={values:T("values"),keys:g?M:T("keys"),entries:T("entries")},_)for(N in j)(w||C||!(N in I))&&f(I,N,j[N]);else r({target:t,proto:!0,forced:w||C},j);return i&&!_||I[x]===M||f(I,x,M,{name:p}),m[t]=M,j}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(e,t,n){"use strict";var r,s,i,a=e("../internals/fails"),o=e("../internals/is-callable"),l=e("../internals/is-object"),c=e("../internals/object-create"),u=e("../internals/object-get-prototype-of"),d=e("../internals/define-built-in"),h=e("../internals/well-known-symbol"),f=e("../internals/is-pure"),p=h("iterator"),m=!1;[].keys&&("next"in(i=[].keys())?(s=u(u(i)))!==Object.prototype&&(r=s):m=!0),!l(r)||a(function(){var e={};return r[p].call(e)!==e})?r={}:f&&(r=c(r)),o(r[p])||d(r,p,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(e,t,n){arguments[4][276][0].apply(n,arguments)},{dup:276}],299:[function(e,t,n){"use strict";var r=e("../internals/to-length");t.exports=function(e){return r(e.length)}},{"../internals/to-length":343}],300:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/fails"),i=e("../internals/is-callable"),a=e("../internals/has-own-property"),o=e("../internals/descriptors"),l=e("../internals/function-name").CONFIGURABLE,c=e("../internals/inspect-source"),u=e("../internals/internal-state"),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,m=r("".slice),g=r("".replace),b=r([].join),v=o&&!s(function(){return 8!==p(function(){},"length",{value:8}).length}),y=String(String).split("String"),w=t.exports=function(e,t,n){"Symbol("===m(f(t),0,7)&&(t="["+g(f(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(o?p(e,"name",{value:t,configurable:!0}):e.name=t),v&&n&&a(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?o&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return a(r,"source")||(r.source=b(y,"string"==typeof t?t:"")),e};Function.prototype.toString=w(function(){return i(this)&&h(this).source||c(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(e,t,n){"use strict";var r=Math.ceil,s=Math.floor;t.exports=Math.trunc||function(e){var t=+e;return(t>0?s:r)(t)}},{}],302:[function(e,t,n){"use strict";var r,s,i,a,o,l=e("../internals/global"),c=e("../internals/function-bind-context"),u=e("../internals/object-get-own-property-descriptor").f,d=e("../internals/task").set,h=e("../internals/queue"),f=e("../internals/engine-is-ios"),p=e("../internals/engine-is-ios-pebble"),m=e("../internals/engine-is-webos-webkit"),g=e("../internals/engine-is-node"),b=l.MutationObserver||l.WebKitMutationObserver,v=l.document,y=l.process,w=l.Promise,x=u(l,"queueMicrotask"),k=x&&x.value;if(!k){var _=new h,S=function(){var e,t;for(g&&(e=y.domain)&&e.exit();t=_.get();)try{t()}catch(e){throw _.head&&r(),e}e&&e.enter()};f||g||m||!b||!v?!p&&w&&w.resolve?((a=w.resolve(void 0)).constructor=w,o=c(a.then,a),r=function(){o(S)}):g?r=function(){y.nextTick(S)}:(d=c(d,l),r=function(){d(S)}):(s=!0,i=v.createTextNode(""),new b(S).observe(i,{characterData:!0}),r=function(){i.data=s=!s}),k=function(e){_.head||r(),_.add(e)}}t.exports=k},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(e,t,n){"use strict";var r=e("../internals/a-callable"),s=TypeError,i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw new s("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)};t.exports.f=function(e){return new i(e)}},{"../internals/a-callable":222}],304:[function(e,t,n){"use strict";var r=e("../internals/is-regexp"),s=TypeError;t.exports=function(e){if(r(e))throw new s("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":291}],305:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/function-uncurry-this"),i=e("../internals/function-call"),a=e("../internals/fails"),o=e("../internals/object-keys"),l=e("../internals/object-get-own-property-symbols"),c=e("../internals/object-property-is-enumerable"),u=e("../internals/to-object"),d=e("../internals/indexed-object"),h=Object.assign,f=Object.defineProperty,p=s([].concat);t.exports=!h||a(function(){if(r&&1!==h({b:1},h(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection");return e[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!==h({},e)[n]||"abcdefghijklmnopqrst"!==o(h({},t)).join("")})?function(e,t){for(var n=u(e),s=arguments.length,a=1,h=l.f,f=c.f;s>a;)for(var m,g=d(arguments[a++]),b=h?p(o(g),h(g)):o(g),v=b.length,y=0;v>y;)m=b[y++],r&&!i(f,g,m)||(n[m]=g[m]);return n}:h},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(e,t,n){"use strict";var r,s=e("../internals/an-object"),i=e("../internals/object-define-properties"),a=e("../internals/enum-bug-keys"),o=e("../internals/hidden-keys"),l=e("../internals/html"),c=e("../internals/document-create-element"),u=e("../internals/shared-key")("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},f=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},p=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;p="undefined"!=typeof document?document.domain&&r?f(r):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):f(r);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};o[u]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=s(e),n=new d,d.prototype=null,n[u]=e):n=p(),void 0===t?n:i.f(n,t)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/v8-prototype-define-bug"),i=e("../internals/object-define-property"),a=e("../internals/an-object"),o=e("../internals/to-indexed-object"),l=e("../internals/object-keys");n.f=r&&!s?Object.defineProperties:function(e,t){a(e);for(var n,r=o(t),s=l(t),c=s.length,u=0;c>u;)i.f(e,n=s[u++],r[n]);return e}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/ie8-dom-define"),i=e("../internals/v8-prototype-define-bug"),a=e("../internals/an-object"),o=e("../internals/to-property-key"),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;n.f=r?i?function(e,t,n){if(a(e),t=o(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var r=u(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:r.configurable,enumerable:"enumerable"in n?n.enumerable:r.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(a(e),t=o(t),a(n),s)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/function-call"),i=e("../internals/object-property-is-enumerable"),a=e("../internals/create-property-descriptor"),o=e("../internals/to-indexed-object"),l=e("../internals/to-property-key"),c=e("../internals/has-own-property"),u=e("../internals/ie8-dom-define"),d=Object.getOwnPropertyDescriptor;n.f=r?d:function(e,t){if(e=o(e),t=l(t),u)try{return d(e,t)}catch(e){}if(c(e,t))return a(!s(i.f,e,t),e[t])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(e,t,n){"use strict";var r=e("../internals/classof-raw"),s=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-names").f,a=e("../internals/array-slice-simple"),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return o&&"Window"===r(e)?function(e){try{return i(e)}catch(e){return a(o)}}(e):i(s(e))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(e,t,n){"use strict";var r=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(e,t,n){"use strict";n.f=Object.getOwnPropertySymbols},{}],313:[function(e,t,n){"use strict";var r=e("../internals/has-own-property"),s=e("../internals/is-callable"),i=e("../internals/to-object"),a=e("../internals/shared-key"),o=e("../internals/correct-prototype-getter"),l=a("IE_PROTO"),c=Object,u=c.prototype;t.exports=o?c.getPrototypeOf:function(e){var t=i(e);if(r(t,l))return t[l];var n=t.constructor;return s(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this");t.exports=r({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=e("../internals/has-own-property"),i=e("../internals/to-indexed-object"),a=e("../internals/array-includes").indexOf,o=e("../internals/hidden-keys"),l=r([].push);t.exports=function(e,t){var n,r=i(e),c=0,u=[];for(n in r)!s(o,n)&&s(r,n)&&l(u,n);for(;t.length>c;)s(r,n=t[c++])&&(~a(u,n)||l(u,n));return u}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(e,t,n){"use strict";var r=e("../internals/object-keys-internal"),s=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,s)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,i=s&&!r.call({1:2},1);n.f=i?function(e){var t=s(this,e);return!!t&&t.enumerable}:r},{}],318:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this-accessor"),s=e("../internals/an-object"),i=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return s(n),i(r),t?e(n,r):n.__proto__=r,n}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/fails"),i=e("../internals/function-uncurry-this"),a=e("../internals/object-get-prototype-of"),o=e("../internals/object-keys"),l=e("../internals/to-indexed-object"),c=i(e("../internals/object-property-is-enumerable").f),u=i([].push),d=r&&s(function(){var e=Object.create(null);return e[2]=2,!c(e,2)}),h=function(e){return function(t){for(var n,s=l(t),i=o(s),h=d&&null===a(s),f=i.length,p=0,m=[];f>p;)n=i[p++],r&&!(h?n in s:c(s,n))||u(m,e?[n,s[n]]:s[n]);return m}};t.exports={entries:h(!0),values:h(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(e,t,n){"use strict";var r=e("../internals/function-call"),s=e("../internals/is-callable"),i=e("../internals/is-object"),a=TypeError;t.exports=function(e,t){var n,o;if("string"===t&&s(n=e.toString)&&!i(o=r(n,e)))return o;if(s(n=e.valueOf)&&!i(o=r(n,e)))return o;if("string"!==t&&s(n=e.toString)&&!i(o=r(n,e)))return o;throw new a("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),s=e("../internals/function-uncurry-this"),i=e("../internals/object-get-own-property-names"),a=e("../internals/object-get-own-property-symbols"),o=e("../internals/an-object"),l=s([].concat);t.exports=r("Reflect","ownKeys")||function(e){var t=i.f(o(e)),n=a.f;return n?l(t,n(e)):t}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(e,t,n){"use strict";var r=e("../internals/global");t.exports=r},{"../internals/global":274}],323:[function(e,t,n){"use strict";t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],324:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/promise-native-constructor"),i=e("../internals/is-callable"),a=e("../internals/is-forced"),o=e("../internals/inspect-source"),l=e("../internals/well-known-symbol"),c=e("../internals/engine-is-browser"),u=e("../internals/engine-is-deno"),d=e("../internals/is-pure"),h=e("../internals/engine-v8-version"),f=s&&s.prototype,p=l("species"),m=!1,g=i(r.PromiseRejectionEvent),b=a("Promise",function(){var e=o(s),t=e!==String(s);if(!t&&66===h)return!0;if(d&&(!f.catch||!f.finally))return!0;if(!h||h<51||!/native code/.test(e)){var n=new s(function(e){e(1)}),r=function(e){e(function(){},function(){})};if((n.constructor={})[p]=r,!(m=n.then(function(){})instanceof r))return!0}return!t&&(c||u)&&!g});t.exports={CONSTRUCTOR:b,REJECTION_EVENT:g,SUBCLASSING:m}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(e,t,n){"use strict";var r=e("../internals/global");t.exports=r.Promise},{"../internals/global":274}],326:[function(e,t,n){"use strict";var r=e("../internals/an-object"),s=e("../internals/is-object"),i=e("../internals/new-promise-capability");t.exports=function(e,t){if(r(e),s(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(e,t,n){"use strict";var r=e("../internals/promise-native-constructor"),s=e("../internals/check-correctness-of-iteration"),i=e("../internals/promise-constructor-detection").CONSTRUCTOR;t.exports=i||!s(function(e){r.all(e).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(e,t,n){"use strict";var r=function(){this.head=null,this.tail=null};r.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},t.exports=r},{}],329:[function(e,t,n){"use strict";var r=e("../internals/is-null-or-undefined"),s=TypeError;t.exports=function(e){if(r(e))throw new s("Can't call method on "+e);return e}},{"../internals/is-null-or-undefined":288}],330:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),s=e("../internals/define-built-in-accessor"),i=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),o=i("species");t.exports=function(e){var t=r(e);a&&t&&!t[o]&&s(t,o,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(e,t,n){"use strict";var r=e("../internals/object-define-property").f,s=e("../internals/has-own-property"),i=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!s(e,i)&&r(e,i,{configurable:!0,value:t})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(e,t,n){"use strict";var r=e("../internals/shared"),s=e("../internals/uid"),i=r("keys");t.exports=function(e){return i[e]||(i[e]=s(e))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/define-global-property"),i=r["__core-js_shared__"]||s("__core-js_shared__",{});t.exports=i},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(e,t,n){"use strict";var r=e("../internals/is-pure"),s=e("../internals/shared-store");(t.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.33.0",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(e,t,n){"use strict";var r=e("../internals/an-object"),s=e("../internals/a-constructor"),i=e("../internals/is-null-or-undefined"),a=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||i(n=r(o)[a])?t:s(n)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(e,t,n){"use strict";var r=e("../internals/engine-v8-version"),s=e("../internals/fails"),i=e("../internals/global").String;t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(e,t,n){"use strict";var r=e("../internals/function-call"),s=e("../internals/get-built-in"),i=e("../internals/well-known-symbol"),a=e("../internals/define-built-in");t.exports=function(){var e=s("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,o=i("toPrimitive");t&&!t[o]&&a(t,o,function(e){return r(n,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(e,t,n){"use strict";var r=e("../internals/symbol-constructor-detection");t.exports=r&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(e,t,n){"use strict";var r,s,i,a,o=e("../internals/global"),l=e("../internals/function-apply"),c=e("../internals/function-bind-context"),u=e("../internals/is-callable"),d=e("../internals/has-own-property"),h=e("../internals/fails"),f=e("../internals/html"),p=e("../internals/array-slice"),m=e("../internals/document-create-element"),g=e("../internals/validate-arguments-length"),b=e("../internals/engine-is-ios"),v=e("../internals/engine-is-node"),y=o.setImmediate,w=o.clearImmediate,x=o.process,k=o.Dispatch,_=o.Function,S=o.MessageChannel,j=o.String,N=0,T={};h(function(){r=o.location});var E=function(e){if(d(T,e)){var t=T[e];delete T[e],t()}},C=function(e){return function(){E(e)}},I=function(e){E(e.data)},A=function(e){o.postMessage(j(e),r.protocol+"//"+r.host)};y&&w||(y=function(e){g(arguments.length,1);var t=u(e)?e:_(e),n=p(arguments,1);return T[++N]=function(){l(t,void 0,n)},s(N),N},w=function(e){delete T[e]},v?s=function(e){x.nextTick(C(e))}:k&&k.now?s=function(e){k.now(C(e))}:S&&!b?(a=(i=new S).port2,i.port1.onmessage=I,s=c(a.postMessage,a)):o.addEventListener&&u(o.postMessage)&&!o.importScripts&&r&&"file:"!==r.protocol&&!h(A)?(s=A,o.addEventListener("message",I,!1)):s="onreadystatechange"in m("script")?function(e){f.appendChild(m("script")).onreadystatechange=function(){f.removeChild(this),E(e)}}:function(e){setTimeout(C(e),0)}),t.exports={set:y,clear:w}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(e,t,n){"use strict";var r=e("../internals/to-integer-or-infinity"),s=Math.max,i=Math.min;t.exports=function(e,t){var n=r(e);return n<0?s(n+t,0):i(n,t)}},{"../internals/to-integer-or-infinity":342}],341:[function(e,t,n){"use strict";var r=e("../internals/indexed-object"),s=e("../internals/require-object-coercible");t.exports=function(e){return r(s(e))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(e,t,n){"use strict";var r=e("../internals/math-trunc");t.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},{"../internals/math-trunc":301}],343:[function(e,t,n){"use strict";var r=e("../internals/to-integer-or-infinity"),s=Math.min;t.exports=function(e){return e>0?s(r(e),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(e,t,n){"use strict";var r=e("../internals/require-object-coercible"),s=Object;t.exports=function(e){return s(r(e))}},{"../internals/require-object-coercible":329}],345:[function(e,t,n){"use strict";var r=e("../internals/function-call"),s=e("../internals/is-object"),i=e("../internals/is-symbol"),a=e("../internals/get-method"),o=e("../internals/ordinary-to-primitive"),l=e("../internals/well-known-symbol"),c=TypeError,u=l("toPrimitive");t.exports=function(e,t){if(!s(e)||i(e))return e;var n,l=a(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!s(n)||i(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),o(e,t)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),s=e("../internals/is-symbol");t.exports=function(e){var t=r(e,"string");return s(t)?t:t+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(e,t,n){"use strict";var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":357}],348:[function(e,t,n){"use strict";var r=e("../internals/classof"),s=String;t.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return s(e)}},{"../internals/classof":236}],349:[function(e,t,n){"use strict";var r=String;t.exports=function(e){try{return r(e)}catch(e){return"Object"}}},{}],350:[function(e,t,n){"use strict";var r=e("../internals/function-uncurry-this"),s=0,i=Math.random(),a=r(1..toString);t.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++s+i,36)}},{"../internals/function-uncurry-this":268}],351:[function(e,t,n){"use strict";var r=e("../internals/symbol-constructor-detection");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/symbol-constructor-detection":336}],352:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),s=e("../internals/fails");t.exports=r&&s(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(e,t,n){"use strict";var r=TypeError;t.exports=function(e,t){if(e<t)throw new r("Not enough arguments");return e}},{}],354:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/is-callable"),i=r.WeakMap;t.exports=s(i)&&/native code/.test(String(i))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(e,t,n){"use strict";var r=e("../internals/path"),s=e("../internals/has-own-property"),i=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});s(t,e)||a(t,e,{value:i.f(e)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(e,t,n){"use strict";var r=e("../internals/well-known-symbol");n.f=r},{"../internals/well-known-symbol":357}],357:[function(e,t,n){"use strict";var r=e("../internals/global"),s=e("../internals/shared"),i=e("../internals/has-own-property"),a=e("../internals/uid"),o=e("../internals/symbol-constructor-detection"),l=e("../internals/use-symbol-as-uid"),c=r.Symbol,u=s("wks"),d=l?c.for||c:c&&c.withoutSetter||a;t.exports=function(e){return i(u,e)||(u[e]=o&&i(c,e)?c[e]:d("Symbol."+e)),u[e]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/array-iteration").findIndex,i=e("../internals/add-to-unscopables"),a=!0;"findIndex"in[]&&Array(1).findIndex(function(){a=!1}),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/array-iteration").find,i=e("../internals/add-to-unscopables"),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),r({target:"Array",proto:!0,forced:a},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/array-includes").includes,i=e("../internals/fails"),a=e("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:i(function(){return!Array(1).includes()})},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),s=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),a=e("../internals/internal-state"),o=e("../internals/object-define-property").f,l=e("../internals/iterator-define"),c=e("../internals/create-iter-result-object"),u=e("../internals/is-pure"),d=e("../internals/descriptors"),h=a.set,f=a.getterFor("Array Iterator");t.exports=l(Array,"Array",function(e,t){h(this,{type:"Array Iterator",target:r(e),index:0,kind:t})},function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;if(!t||r>=t.length)return e.target=void 0,c(void 0,!0);switch(n){case"keys":return c(r,!1);case"values":return c(t[r],!1)}return c([r,t[r]],!1)},"values");var p=i.Arguments=i.Array;if(s("keys"),s("values"),s("entries"),!u&&d&&"values"!==p.name)try{o(p,"name",{value:"values"})}catch(e){}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/get-built-in"),i=e("../internals/function-apply"),a=e("../internals/function-call"),o=e("../internals/function-uncurry-this"),l=e("../internals/fails"),c=e("../internals/is-callable"),u=e("../internals/is-symbol"),d=e("../internals/array-slice"),h=e("../internals/get-json-replacer-function"),f=e("../internals/symbol-constructor-detection"),p=String,m=s("JSON","stringify"),g=o(/./.exec),b=o("".charAt),v=o("".charCodeAt),y=o("".replace),w=o(1..toString),x=/[\uD800-\uDFFF]/g,k=/^[\uD800-\uDBFF]$/,_=/^[\uDC00-\uDFFF]$/,S=!f||l(function(){var e=s("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))}),j=l(function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")}),N=function(e,t){var n=d(arguments),r=h(t);if(c(r)||void 0!==e&&!u(e))return n[1]=function(e,t){if(c(r)&&(t=a(r,this,p(e),t)),!u(t))return t},i(m,null,n)},T=function(e,t,n){var r=b(n,t-1),s=b(n,t+1);return g(k,e)&&!g(_,s)||g(_,e)&&!g(k,r)?"\\u"+w(v(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:S||j},{stringify:function(e,t,n){var r=d(arguments),s=i(S?N:m,null,r);return j&&"string"==typeof s?y(s,x,T):s}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(e,t,n){"use strict";e("../internals/export")({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},{"../internals/export":259}],364:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/object-assign");r({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/symbol-constructor-detection"),i=e("../internals/fails"),a=e("../internals/object-get-own-property-symbols"),o=e("../internals/to-object");r({target:"Object",stat:!0,forced:!s||i(function(){a.f(1)})},{getOwnPropertySymbols:function(e){var t=a.f;return t?t(o(e)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/to-object"),i=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")(function(){i(1)})},{keys:function(e){return i(s(e))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/object-to-array").values;r({target:"Object",stat:!0},{values:function(e){return s(e)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/a-callable"),a=e("../internals/new-promise-capability"),o=e("../internals/perform"),l=e("../internals/iterate");r({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{all:function(e){var t=this,n=a.f(t),r=n.resolve,c=n.reject,u=o(function(){var n=i(t.resolve),a=[],o=0,u=1;l(e,function(e){var i=o++,l=!1;u++,s(n,t,e).then(function(e){l||(l=!0,a[i]=e,--u||r(a))},c)}),--u||r(a)});return u.error&&c(u.value),n.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/is-pure"),i=e("../internals/promise-constructor-detection").CONSTRUCTOR,a=e("../internals/promise-native-constructor"),o=e("../internals/get-built-in"),l=e("../internals/is-callable"),c=e("../internals/define-built-in"),u=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(e){return this.then(void 0,e)}}),!s&&l(a)){var d=o("Promise").prototype.catch;u.catch!==d&&c(u,"catch",d,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(e,t,n){"use strict";var r,s,i,a=e("../internals/export"),o=e("../internals/is-pure"),l=e("../internals/engine-is-node"),c=e("../internals/global"),u=e("../internals/function-call"),d=e("../internals/define-built-in"),h=e("../internals/object-set-prototype-of"),f=e("../internals/set-to-string-tag"),p=e("../internals/set-species"),m=e("../internals/a-callable"),g=e("../internals/is-callable"),b=e("../internals/is-object"),v=e("../internals/an-instance"),y=e("../internals/species-constructor"),w=e("../internals/task").set,x=e("../internals/microtask"),k=e("../internals/host-report-errors"),_=e("../internals/perform"),S=e("../internals/queue"),j=e("../internals/internal-state"),N=e("../internals/promise-native-constructor"),T=e("../internals/promise-constructor-detection"),E=e("../internals/new-promise-capability"),C=T.CONSTRUCTOR,I=T.REJECTION_EVENT,A=T.SUBCLASSING,M=j.getterFor("Promise"),O=j.set,R=N&&N.prototype,D=N,P=R,L=c.TypeError,F=c.document,B=c.process,U=E.f,z=U,V=!!(F&&F.createEvent&&c.dispatchEvent),H=function(e){var t;return!(!b(e)||!g(t=e.then))&&t},W=function(e,t){var n,r,s,i=t.value,a=1===t.state,o=a?e.ok:e.fail,l=e.resolve,c=e.reject,d=e.domain;try{o?(a||(2===t.rejection&&X(t),t.rejection=1),!0===o?n=i:(d&&d.enter(),n=o(i),d&&(d.exit(),s=!0)),n===e.promise?c(new L("Promise-chain cycle")):(r=H(n))?u(r,n,l,c):l(n)):c(i)}catch(e){d&&!s&&d.exit(),c(e)}},q=function(e,t){e.notified||(e.notified=!0,x(function(){for(var n,r=e.reactions;n=r.get();)W(n,e);e.notified=!1,t&&!e.rejection&&G(e)}))},K=function(e,t,n){var r,s;V?((r=F.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},!I&&(s=c["on"+e])?s(r):"unhandledrejection"===e&&k("Unhandled promise rejection",n)},G=function(e){u(w,c,function(){var t,n=e.facade,r=e.value;if($(e)&&(t=_(function(){l?B.emit("unhandledRejection",r,n):K("unhandledrejection",n,r)}),e.rejection=l||$(e)?2:1,t.error))throw t.value})},$=function(e){return 1!==e.rejection&&!e.parent},X=function(e){u(w,c,function(){var t=e.facade;l?B.emit("rejectionHandled",t):K("rejectionhandled",t,e.value)})},Y=function(e,t,n){return function(r){e(t,r,n)}},Q=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,q(e,!0))},J=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new L("Promise can't be resolved itself");var r=H(t);r?x(function(){var n={done:!1};try{u(r,t,Y(J,n,e),Y(Q,n,e))}catch(t){Q(n,t,e)}}):(e.value=t,e.state=1,q(e,!1))}catch(t){Q({done:!1},t,e)}}};if(C&&(P=(D=function(e){v(this,P),m(e),u(r,this);var t=M(this);try{e(Y(J,t),Y(Q,t))}catch(e){Q(t,e)}}).prototype,(r=function(e){O(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=d(P,"then",function(e,t){var n=M(this),r=U(y(this,D));return n.parent=!0,r.ok=!g(e)||e,r.fail=g(t)&&t,r.domain=l?B.domain:void 0,0===n.state?n.reactions.add(r):x(function(){W(r,n)}),r.promise}),s=function(){var e=new r,t=M(e);this.promise=e,this.resolve=Y(J,t),this.reject=Y(Q,t)},E.f=U=function(e){return e===D||void 0===e?new s(e):z(e)},!o&&g(N)&&R!==Object.prototype)){i=R.then,A||d(R,"then",function(e,t){var n=this;return new D(function(e,t){u(i,n,e,t)}).then(e,t)},{unsafe:!0});try{delete R.constructor}catch(e){}h&&h(R,P)}a({global:!0,constructor:!0,wrap:!0,forced:C},{Promise:D}),f(D,"Promise",!1,!0),p("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/is-pure"),i=e("../internals/promise-native-constructor"),a=e("../internals/fails"),o=e("../internals/get-built-in"),l=e("../internals/is-callable"),c=e("../internals/species-constructor"),u=e("../internals/promise-resolve"),d=e("../internals/define-built-in"),h=i&&i.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a(function(){h.finally.call({then:function(){}},function(){})})},{finally:function(e){var t=c(this,o("Promise")),n=l(e);return this.then(n?function(n){return u(t,e()).then(function(){return n})}:e,n?function(n){return u(t,e()).then(function(){throw n})}:e)}}),!s&&l(i)){var f=o("Promise").prototype.finally;h.finally!==f&&d(h,"finally",f,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(e,t,n){"use strict";e("../modules/es.promise.constructor"),e("../modules/es.promise.all"),e("../modules/es.promise.catch"),e("../modules/es.promise.race"),e("../modules/es.promise.reject"),e("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/a-callable"),a=e("../internals/new-promise-capability"),o=e("../internals/perform"),l=e("../internals/iterate");r({target:"Promise",stat:!0,forced:e("../internals/promise-statics-incorrect-iteration")},{race:function(e){var t=this,n=a.f(t),r=n.reject,c=o(function(){var a=i(t.resolve);l(e,function(e){s(a,t,e).then(n.resolve,r)})});return c.error&&r(c.value),n.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/function-call"),i=e("../internals/new-promise-capability");r({target:"Promise",stat:!0,forced:e("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(e){var t=i.f(this);return s(t.reject,void 0,e),t.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/get-built-in"),i=e("../internals/is-pure"),a=e("../internals/promise-native-constructor"),o=e("../internals/promise-constructor-detection").CONSTRUCTOR,l=e("../internals/promise-resolve"),c=s("Promise"),u=i&&!o;r({target:"Promise",stat:!0,forced:i||o},{resolve:function(e){return l(u&&this===c?a:this,e)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/function-uncurry-this"),i=e("../internals/to-absolute-index"),a=RangeError,o=String.fromCharCode,l=String.fromCodePoint,c=s([].join);r({target:"String",stat:!0,arity:1,forced:!!l&&1!==l.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,s=0;r>s;){if(t=+arguments[s++],i(t,1114111)!==t)throw new a(t+" is not a valid code point");n[s]=t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320)}return c(n,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/function-uncurry-this"),i=e("../internals/not-a-regexp"),a=e("../internals/require-object-coercible"),o=e("../internals/to-string"),l=e("../internals/correct-is-regexp-logic"),c=s("".indexOf);r({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~c(o(a(this)),o(i(e)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(e,t,n){"use strict";e("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/global"),i=e("../internals/function-call"),a=e("../internals/function-uncurry-this"),o=e("../internals/is-pure"),l=e("../internals/descriptors"),c=e("../internals/symbol-constructor-detection"),u=e("../internals/fails"),d=e("../internals/has-own-property"),h=e("../internals/object-is-prototype-of"),f=e("../internals/an-object"),p=e("../internals/to-indexed-object"),m=e("../internals/to-property-key"),g=e("../internals/to-string"),b=e("../internals/create-property-descriptor"),v=e("../internals/object-create"),y=e("../internals/object-keys"),w=e("../internals/object-get-own-property-names"),x=e("../internals/object-get-own-property-names-external"),k=e("../internals/object-get-own-property-symbols"),_=e("../internals/object-get-own-property-descriptor"),S=e("../internals/object-define-property"),j=e("../internals/object-define-properties"),N=e("../internals/object-property-is-enumerable"),T=e("../internals/define-built-in"),E=e("../internals/define-built-in-accessor"),C=e("../internals/shared"),I=e("../internals/shared-key"),A=e("../internals/hidden-keys"),M=e("../internals/uid"),O=e("../internals/well-known-symbol"),R=e("../internals/well-known-symbol-wrapped"),D=e("../internals/well-known-symbol-define"),P=e("../internals/symbol-define-to-primitive"),L=e("../internals/set-to-string-tag"),F=e("../internals/internal-state"),B=e("../internals/array-iteration").forEach,U=I("hidden"),z=F.set,V=F.getterFor("Symbol"),H=Object.prototype,W=s.Symbol,q=W&&W.prototype,K=s.RangeError,G=s.TypeError,$=s.QObject,X=_.f,Y=S.f,Q=x.f,J=N.f,Z=a([].push),ee=C("symbols"),te=C("op-symbols"),ne=C("wks"),re=!$||!$.prototype||!$.prototype.findChild,se=function(e,t,n){var r=X(H,t);r&&delete H[t],Y(e,t,n),r&&e!==H&&Y(H,t,r)},ie=l&&u(function(){return 7!==v(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a})?se:Y,ae=function(e,t){var n=ee[e]=v(q);return z(n,{type:"Symbol",tag:e,description:t}),l||(n.description=t),n},oe=function(e,t,n){e===H&&oe(te,t,n),f(e);var r=m(t);return f(n),d(ee,r)?(n.enumerable?(d(e,U)&&e[U][r]&&(e[U][r]=!1),n=v(n,{enumerable:b(0,!1)})):(d(e,U)||Y(e,U,b(1,{})),e[U][r]=!0),ie(e,r,n)):Y(e,r,n)},le=function(e,t){f(e);var n=p(t),r=y(n).concat(he(n));return B(r,function(t){l&&!i(ce,n,t)||oe(e,t,n[t])}),e},ce=function(e){var t=m(e),n=i(J,this,t);return!(this===H&&d(ee,t)&&!d(te,t))&&(!(n||!d(this,t)||!d(ee,t)||d(this,U)&&this[U][t])||n)},ue=function(e,t){var n=p(e),r=m(t);if(n!==H||!d(ee,r)||d(te,r)){var s=X(n,r);return!s||!d(ee,r)||d(n,U)&&n[U][r]||(s.enumerable=!0),s}},de=function(e){var t=Q(p(e)),n=[];return B(t,function(e){d(ee,e)||d(A,e)||Z(n,e)}),n},he=function(e){var t=e===H,n=Q(t?te:p(e)),r=[];return B(n,function(e){!d(ee,e)||t&&!d(H,e)||Z(r,ee[e])}),r};c||(T(q=(W=function(){if(h(q,this))throw new G("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=M(e),n=function(e){this===H&&i(n,te,e),d(this,U)&&d(this[U],t)&&(this[U][t]=!1);var r=b(1,e);try{ie(this,t,r)}catch(e){if(!(e instanceof K))throw e;se(this,t,r)}};return l&&re&&ie(H,t,{configurable:!0,set:n}),ae(t,e)}).prototype,"toString",function(){return V(this).tag}),T(W,"withoutSetter",function(e){return ae(M(e),e)}),N.f=ce,S.f=oe,j.f=le,_.f=ue,w.f=x.f=de,k.f=he,R.f=function(e){return ae(O(e),e)},l&&(E(q,"description",{configurable:!0,get:function(){return V(this).description}}),o||T(H,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:W}),B(y(ne),function(e){D(e)}),r({target:"Symbol",stat:!0,forced:!c},{useSetter:function(){re=!0},useSimple:function(){re=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(e,t){return void 0===t?v(e):le(v(e),t)},defineProperty:oe,defineProperties:le,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:de}),P(),L(W,"Symbol"),A[U]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/get-built-in"),i=e("../internals/has-own-property"),a=e("../internals/to-string"),o=e("../internals/shared"),l=e("../internals/symbol-registry-detection"),c=o("string-to-symbol-registry"),u=o("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=a(e);if(i(c,t))return c[t];var n=s("Symbol")(t);return c[t]=n,u[n]=t,n}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(e,t,n){"use strict";e("../modules/es.symbol.constructor"),e("../modules/es.symbol.for"),e("../modules/es.symbol.key-for"),e("../modules/es.json.stringify"),e("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(e,t,n){"use strict";var r=e("../internals/export"),s=e("../internals/has-own-property"),i=e("../internals/is-symbol"),a=e("../internals/try-to-string"),o=e("../internals/shared"),l=e("../internals/symbol-registry-detection"),c=o("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!i(e))throw new TypeError(a(e)+" is not a symbol");if(s(c,e))return c[e]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===r(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===r(e)},n.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("buffer").Buffer.isBuffer},{buffer:220}],384:[function(e,t,n){(function(n){(function(){"use strict";var r=e("elliptic"),s=e("bn.js");t.exports=function(e){return new a(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function o(e,t,r){Array.isArray(e)||(e=e.toArray());var s=new n(e);if(r&&s.length<r){var i=new n(r-s.length);i.fill(0),s=n.concat([i,s])}return t?s.toString(t):s}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,a.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},a.prototype.computeSecret=function(e,t,r){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),o(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},a.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),o(n,e)},a.prototype.getPrivateKey=function(e){return o(this.keys.getPrivate(),e)},a.prototype.setPublicKey=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.keys._importPublic(e),this},a.prototype.setPrivateKey=function(e,t){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));var r=new s(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],386:[function(e,t,n){"use strict";var r=e("inherits"),s=e("md5.js"),i=e("ripemd160"),a=e("sha.js"),o=e("cipher-base");function l(e){o.call(this,"digest"),this._hash=e}r(l,o),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return"md5"===(e=e.toLowerCase())?new s:"rmd160"===e||"ripemd160"===e?new i:new l(a(e))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(e,t,n){"use strict";var r=e("md5.js");t.exports=function(e){return(new r).update(e).digest()}},{"md5.js":450}],388:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./legacy"),i=e("cipher-base"),a=e("safe-buffer").Buffer,o=e("create-hash/md5"),l=e("ripemd160"),c=e("sha.js"),u=a.alloc(128);function d(e,t){i.call(this,"digest"),"string"==typeof t&&(t=a.from(t));var n="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>n?t=("rmd160"===e?new l:c(e)).update(t).digest():t.length<n&&(t=a.concat([t,u],n));for(var r=this._ipad=a.allocUnsafe(n),s=this._opad=a.allocUnsafe(n),o=0;o<n;o++)r[o]=54^t[o],s[o]=92^t[o];this._hash="rmd160"===e?new l:c(e),this._hash.update(r)}r(d,i),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new l:c(this._alg)).update(this._opad).update(e).digest()},t.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new s(o,t):new d(e,t)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(e,t,n){"use strict";var r=e("inherits"),s=e("safe-buffer").Buffer,i=e("cipher-base"),a=s.alloc(128);function o(e,t){i.call(this,"digest"),"string"==typeof t&&(t=s.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=s.concat([t,a],64));for(var n=this._ipad=s.allocUnsafe(64),r=this._opad=s.allocUnsafe(64),o=0;o<64;o++)n[o]=54^t[o],r[o]=92^t[o];this._hash=[n]}r(o,i),o.prototype._update=function(e){this._hash.push(e)},o.prototype._final=function(){var e=this._alg(s.concat(this._hash));return this._alg(s.concat([this._opad,e]))},t.exports=o},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(e,t,n){"use strict";n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=e("randombytes"),n.createHash=n.Hash=e("create-hash"),n.createHmac=n.Hmac=e("create-hmac");var r=e("browserify-sign/algos"),s=Object.keys(r),i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(s);n.getHashes=function(){return i};var a=e("pbkdf2");n.pbkdf2=a.pbkdf2,n.pbkdf2Sync=a.pbkdf2Sync;var o=e("browserify-cipher");n.Cipher=o.Cipher,n.createCipher=o.createCipher,n.Cipheriv=o.Cipheriv,n.createCipheriv=o.createCipheriv,n.Decipher=o.Decipher,n.createDecipher=o.createDecipher,n.Decipheriv=o.Decipheriv,n.createDecipheriv=o.createDecipheriv,n.getCiphers=o.getCiphers,n.listCiphers=o.listCiphers;var l=e("diffie-hellman");n.DiffieHellmanGroup=l.DiffieHellmanGroup,n.createDiffieHellmanGroup=l.createDiffieHellmanGroup,n.getDiffieHellman=l.getDiffieHellman,n.createDiffieHellman=l.createDiffieHellman,n.DiffieHellman=l.DiffieHellman;var c=e("browserify-sign");n.createSign=c.createSign,n.Sign=c.Sign,n.createVerify=c.createVerify,n.Verify=c.Verify,n.createECDH=e("create-ecdh");var u=e("public-encrypt");n.publicEncrypt=u.publicEncrypt,n.privateEncrypt=u.privateEncrypt,n.publicDecrypt=u.publicDecrypt,n.privateDecrypt=u.privateDecrypt;var d=e("randomfill");n.randomFill=d.randomFill,n.randomFillSync=d.randomFillSync,n.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(e,t,n){"use strict";!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():(e="undefined"!=typeof globalThis?globalThis:e||self).dayjs=r()}(void 0,function(){var e=6e4,t=36e5,n="millisecond",r="second",s="minute",i="hour",a="day",o="week",l="month",c="quarter",u="year",d="date",h="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,l),i=n-s<0,a=t.clone().add(r+(i?-1:1),l);return+(-(r+(n-s)/(i?s-a:a-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:o,d:a,D:d,h:i,m:s,s:r,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",y={};y[v]=m;var w="$isDayjsObject",x=function(e){return e instanceof j||!(!e||!e[w])},k=function e(t,n,r){var s;if(!t)return v;if("string"==typeof t){var i=t.toLowerCase();y[i]&&(s=i),n&&(y[i]=n,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var o=t.name;y[o]=t,s=o}return!r&&s&&(v=s),s||!r&&v},_=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new j(n)},S=b;S.l=k,S.i=x,S.w=function(e,t){return _(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var j=function(){function m(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(f);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return S},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,t){var n=_(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return _(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<_(e)},g.$g=function(e,t,n){return S.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,c=!!S.u(t)||t,h=S.p(e),f=function(e,t){var r=S.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return c?r:r.endOf(a)},p=function(e,t){return S.w(n.toDate()[e].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,b=this.$D,v="set"+(this.$u?"UTC":"");switch(h){case u:return c?f(1,0):f(31,11);case l:return c?f(1,g):f(0,g+1);case o:var y=this.$locale().weekStart||0,w=(m<y?m+7:m)-y;return f(c?b-w:b+(6-w),g);case a:case d:return p(v+"Hours",0);case i:return p(v+"Minutes",1);case s:return p(v+"Seconds",2);case r:return p(v+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var o,c=S.p(e),h="set"+(this.$u?"UTC":""),f=(o={},o[a]=h+"Date",o[d]=h+"Date",o[l]=h+"Month",o[u]=h+"FullYear",o[i]=h+"Hours",o[s]=h+"Minutes",o[r]=h+"Seconds",o[n]=h+"Milliseconds",o)[c],p=c===a?this.$D+(t-this.$W):t;if(c===l||c===u){var m=this.clone().set(d,1);m.$d[f](p),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[S.p(e)]()},g.add=function(n,c){var d,h=this;n=Number(n);var f=S.p(c),p=function(e){var t=_(h);return S.w(t.date(t.date()+Math.round(e*n)),h)};if(f===l)return this.set(l,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===a)return p(1);if(f===o)return p(7);var m=(d={},d[s]=e,d[i]=t,d[r]=1e3,d)[f]||1,g=this.$d.getTime()+n*m;return S.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=S.z(this),i=this.$H,a=this.$m,o=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},f=function(e){return S.s(i%12||12,e,"0")},m=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(p,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return d(n.monthsShort,o,c,3);case"MMMM":return d(c,o);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return S.s(i,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return m(i,a,!0);case"A":return m(i,a,!1);case"m":return String(a);case"mm":return S.s(a,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,d,h){var f,p=this,m=S.p(d),g=_(n),b=(g.utcOffset()-this.utcOffset())*e,v=this-g,y=function(){return S.m(p,g)};switch(m){case u:f=y()/12;break;case l:f=y();break;case c:f=y()/3;break;case o:f=(v-b)/6048e5;break;case a:f=(v-b)/864e5;break;case i:f=v/t;break;case s:f=v/e;break;case r:f=v/1e3;break;default:f=v}return h?f:S.a(f)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return y[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=k(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return S.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),N=j.prototype;return _.prototype=N,[["$ms",n],["$s",r],["$m",s],["$H",i],["$W",a],["$M",l],["$y",u],["$D",d]].forEach(function(e){N[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),_.extend=function(e,t){return e.$i||(e(t,j,_),e.$i=!0),_},_.locale=k,_.isDayjs=x,_.unix=function(e){return _(1e3*e)},_.en=y[v],_.Ls=y,_.p={},_})},{}],392:[function(e,t,n){"use strict";!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():(e="undefined"!=typeof globalThis?globalThis:e||self).dayjs_plugin_customParseFormat=r()}(void 0,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,i={},a=function(e){return(e=+e)+(e>68?1900:2e3)},o=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var n,r=i.meridiem;if(r){for(var s=1;s<=24;s+=1)if(e.indexOf(r(s,0,t))>-1){n=s>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[s,function(e){this.afternoon=u(e,!1)}],a:[s,function(e){this.afternoon=u(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,o("seconds")],ss:[r,o("seconds")],m:[r,o("minutes")],mm:[r,o("minutes")],H:[r,o("hours")],h:[r,o("hours")],HH:[r,o("hours")],hh:[r,o("hours")],D:[r,o("day")],DD:[n,o("day")],Do:[s,function(e){var t=i.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,o("month")],MM:[n,o("month")],MMM:[s,function(e){var t=c("months"),n=(c("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[s,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[n,function(e){this.year=a(e)}],YYYY:[/\d{4}/,o("year")],Z:l,ZZ:l};function h(n){var r,s;r=n,s=i&&i.formats;for(var a=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,n,r){var i=r&&r.toUpperCase();return n||s[r]||e[r]||s[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,n){return t||n.slice(1)})})).match(t),o=a.length,l=0;l<o;l+=1){var c=a[l],u=d[c],h=u&&u[0],f=u&&u[1];a[l]=f?{regex:h,parser:f}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<o;n+=1){var s=a[n];if("string"==typeof s)r+=s.length;else{var i=s.regex,l=s.parser,c=e.slice(r),u=i.exec(c)[0];l.call(t,u),e=e.replace(u,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var r=t.prototype,s=r.parse;r.parse=function(e){var t=e.date,r=e.utc,a=e.args;this.$u=r;var o=a[1];if("string"==typeof o){var l=!0===a[2],c=!0===a[3],u=l||c,d=a[2];c&&(d=a[2]),i=this.$locale(),!l&&d&&(i=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=h(t)(e),s=r.year,i=r.month,a=r.day,o=r.hours,l=r.minutes,c=r.seconds,u=r.milliseconds,d=r.zone,f=new Date,p=a||(s||i?1:f.getDate()),m=s||f.getFullYear(),g=0;s&&!i||(g=i>0?i-1:f.getMonth());var b=o||0,v=l||0,y=c||0,w=u||0;return d?new Date(Date.UTC(m,g,p,b,v,y,w+60*d.offset*1e3)):n?new Date(Date.UTC(m,g,p,b,v,y,w)):new Date(m,g,p,b,v,y,w)}catch(e){return new Date("")}}(t,o,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),u&&t!=this.format(o)&&(this.$d=new Date("")),i={}}else if(o instanceof Array)for(var f=o.length,p=1;p<=f;p+=1){a[1]=o[p-1];var m=n.apply(this,a);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}p===f&&(this.$d=new Date(""))}else s.call(this,e)}}})},{}],393:[function(e,t,n){"use strict";!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():(e="undefined"!=typeof globalThis?globalThis:e||self).dayjs_plugin_utc=r()}(void 0,function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,s,i){var a=s.prototype;i.utc=function(e){return new s({date:e,utc:!0,args:arguments})},a.utc=function(t){var n=i(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},a.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var o=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var l=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=a.utcOffset;a.utcOffset=function(r,s){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var s=(""+r[0]).match(n)||["-",0,0],i=s[0],a=60*+s[1]+ +s[2];return 0===a?0:"+"===i?a:-a}(r)))return this;var a=Math.abs(r)<=16?60*r:r,o=this;if(s)return o.$offset=a,o.$u=0===r,o;if(0!==r){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(a+l,e)).$offset=a,o.$x.$localOffset=l}else o=this.utc();return o};var u=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var h=a.diff;a.diff=function(e,t,n){if(e&&this.$u===e.$u)return h.call(this,e,t,n);var r=this.local(),s=i(e).local();return h.call(r,s,t,n)}}})},{}],394:[function(e,t,n){"use strict";n.utils=e("./des/utils"),n.Cipher=e("./des/cipher"),n.DES=e("./des/des"),n.CBC=e("./des/cbc"),n.EDE=e("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(e,t,n){"use strict";var r=e("minimalistic-assert"),s=e("inherits"),i={};function a(e){r.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}n.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}s(t,e);for(var n=Object.keys(i),r=0;r<n.length;r++){var a=n[r];t.prototype[a]=i[a]}return t.create=function(e){return new t(e)},t},i._cbcInit=function(){var e=new a(this.options.iv);this._cbcState=e},i._update=function(e,t,n,r){var s=this._cbcState,i=this.constructor.super_.prototype,a=s.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)a[o]^=e[t+o];for(i._update.call(this,a,0,n,r),o=0;o<this.blockSize;o++)a[o]=n[r+o]}else{for(i._update.call(this,e,t,n,r),o=0;o<this.blockSize;o++)n[r+o]^=a[o];for(o=0;o<this.blockSize;o++)a[o]=e[t+o]}}},{inherits:440,"minimalistic-assert":453}],396:[function(e,t,n){"use strict";var r=e("minimalistic-assert");function s(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==e.padding}t.exports=s,s.prototype._init=function(){},s.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},s.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},s.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},s.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,s=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(s,n)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,s,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return s},s.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,s=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(s,n);return t+=this._buffer(e,t),s},s.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},s.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},s.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},s.prototype._unpad=function(e){return e},s.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},{"minimalistic-assert":453}],397:[function(e,t,n){"use strict";var r=e("minimalistic-assert"),s=e("inherits"),i=e("./utils"),a=e("./cipher");function o(){this.tmp=new Array(2),this.keys=null}function l(e){a.call(this,e);var t=new o;this._desState=t,this.deriveKeys(t,e.key)}s(l,a),t.exports=l,l.create=function(e){return new l(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=i.readUInt32BE(t,0),s=i.readUInt32BE(t,4);i.pc1(n,s,e.tmp,0),n=e.tmp[0],s=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var o=c[a>>>1];n=i.r28shl(n,o),s=i.r28shl(s,o),i.pc2(n,s,e.keys,a)}},l.prototype._update=function(e,t,n,r){var s=this._desState,a=i.readUInt32BE(e,t),o=i.readUInt32BE(e,t+4);i.ip(a,o,s.tmp,0),a=s.tmp[0],o=s.tmp[1],"encrypt"===this.type?this._encrypt(s,a,o,s.tmp,0):this._decrypt(s,a,o,s.tmp,0),a=s.tmp[0],o=s.tmp[1],i.writeUInt32BE(n,a,r),i.writeUInt32BE(n,o,r+4)},l.prototype._pad=function(e,t){if(!1===this.padding)return!1;for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},l.prototype._unpad=function(e){if(!1===this.padding)return e;for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},l.prototype._encrypt=function(e,t,n,r,s){for(var a=t,o=n,l=0;l<e.keys.length;l+=2){var c=e.keys[l],u=e.keys[l+1];i.expand(o,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(c,u),h=o;o=(a^i.permute(d))>>>0,a=h}i.rip(o,a,r,s)},l.prototype._decrypt=function(e,t,n,r,s){for(var a=n,o=t,l=e.keys.length-2;l>=0;l-=2){var c=e.keys[l],u=e.keys[l+1];i.expand(a,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(c,u),h=a;a=(o^i.permute(d))>>>0,o=h}i.rip(a,o,r,s)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(e,t,n){"use strict";var r=e("minimalistic-assert"),s=e("inherits"),i=e("./cipher"),a=e("./des");function o(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),s=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:s}),a.create({type:"encrypt",key:i})]:[a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:s}),a.create({type:"decrypt",key:n})]}function l(e){i.call(this,e);var t=new o(this.type,this.options.key);this._edeState=t}s(l,i),t.exports=l,l.create=function(e){return new l(e)},l.prototype._update=function(e,t,n,r){var s=this._edeState;s.ciphers[0]._update(e,t,n,r),s.ciphers[1]._update(n,r,n,r),s.ciphers[2]._update(n,r,n,r)},l.prototype._pad=a.prototype._pad,l.prototype._unpad=a.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(e,t,n){"use strict";n.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},n.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},n.ip=function(e,t,n,r){for(var s=0,i=0,a=6;a>=0;a-=2){for(var o=0;o<=24;o+=8)s<<=1,s|=t>>>o+a&1;for(o=0;o<=24;o+=8)s<<=1,s|=e>>>o+a&1}for(a=6;a>=0;a-=2){for(o=1;o<=25;o+=8)i<<=1,i|=t>>>o+a&1;for(o=1;o<=25;o+=8)i<<=1,i|=e>>>o+a&1}n[r+0]=s>>>0,n[r+1]=i>>>0},n.rip=function(e,t,n,r){for(var s=0,i=0,a=0;a<4;a++)for(var o=24;o>=0;o-=8)s<<=1,s|=t>>>o+a&1,s<<=1,s|=e>>>o+a&1;for(a=4;a<8;a++)for(o=24;o>=0;o-=8)i<<=1,i|=t>>>o+a&1,i<<=1,i|=e>>>o+a&1;n[r+0]=s>>>0,n[r+1]=i>>>0},n.pc1=function(e,t,n,r){for(var s=0,i=0,a=7;a>=5;a--){for(var o=0;o<=24;o+=8)s<<=1,s|=t>>o+a&1;for(o=0;o<=24;o+=8)s<<=1,s|=e>>o+a&1}for(o=0;o<=24;o+=8)s<<=1,s|=t>>o+a&1;for(a=1;a<=3;a++){for(o=0;o<=24;o+=8)i<<=1,i|=t>>o+a&1;for(o=0;o<=24;o+=8)i<<=1,i|=e>>o+a&1}for(o=0;o<=24;o+=8)i<<=1,i|=e>>o+a&1;n[r+0]=s>>>0,n[r+1]=i>>>0},n.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function(e,t,n,s){for(var i=0,a=0,o=r.length>>>1,l=0;l<o;l++)i<<=1,i|=e>>>r[l]&1;for(l=o;l<r.length;l++)a<<=1,a|=t>>>r[l]&1;n[s+0]=i>>>0,n[s+1]=a>>>0},n.expand=function(e,t,n){var r=0,s=0;r=(1&e)<<5|e>>>27;for(var i=23;i>=15;i-=4)r<<=6,r|=e>>>i&63;for(i=11;i>=3;i-=4)s|=e>>>i&63,s<<=6;s|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=s>>>0};var s=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function(e,t){for(var n=0,r=0;r<4;r++)n<<=4,n|=s[64*r+(e>>>18-6*r&63)];for(r=0;r<4;r++)n<<=4,n|=s[256+64*r+(t>>>18-6*r&63)];return n>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function(e){for(var t=0,n=0;n<i.length;n++)t<<=1,t|=e>>>i[n]&1;return t>>>0},n.padSplit=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var s=[],i=0;i<t;i+=n)s.push(r.slice(i,i+n));return s.join(" ")}},{}],400:[function(e,t,n){(function(t){(function(){"use strict";var r=e("./lib/generatePrime"),s=e("./lib/primes.json"),i=e("./lib/dh"),a={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=function(e){var n=new t(s[e].prime,"hex"),r=new t(s[e].gen,"hex");return new i(n,r)},n.createDiffieHellman=n.DiffieHellman=function e(n,s,o,l){return t.isBuffer(s)||void 0===a[s]?e(n,"binary",s,o):(s=s||"binary",l=l||"binary",o=o||new t([2]),t.isBuffer(o)||(o=new t(o,l)),"number"==typeof n?new i(r(n,o),o,!0):(t.isBuffer(n)||(n=new t(n,s)),new i(n,o,!0)))}}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(e,t,n){(function(n){(function(){"use strict";var r=e("bn.js"),s=new(e("miller-rabin")),i=new r(24),a=new r(11),o=new r(10),l=new r(3),c=new r(7),u=e("./generatePrime"),d=e("randombytes");function h(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._pub=new r(e),this}function f(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._priv=new r(e),this}t.exports=m;var p={};function m(e,t,n){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=h,this.setPrivateKey=f):this._primeCode=8}function g(e,t){var r=new n(e.toArray());return t?r.toString(t):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in p)return p[r];var d,h=0;if(e.isEven()||!u.simpleSieve||!u.fermatTest(e)||!s.test(e))return h+=1,h+="02"===n||"05"===n?8:4,p[r]=h,h;switch(s.test(e.shrn(1))||(h+=2),n){case"02":e.mod(i).cmp(a)&&(h+=8);break;case"05":(d=e.mod(o)).cmp(l)&&d.cmp(c)&&(h+=8);break;default:h+=4}return p[r]=h,h}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var t=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),s=new n(t.toArray()),i=this.getPrime();if(s.length<i.length){var a=new n(i.length-s.length);a.fill(0),s=n.concat([a,s])}return s},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.__gen=e,this._gen=new r(e),this}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(e,t,n){"use strict";var r=e("randombytes");t.exports=v,v.simpleSieve=g,v.fermatTest=b;var s=e("bn.js"),i=new s(24),a=new(e("miller-rabin")),o=new s(1),l=new s(2),c=new s(5),u=(new s(16),new s(8),new s(10)),d=new s(3),h=(new s(7),new s(11)),f=new s(4),p=(new s(12),null);function m(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),s=0;s<t&&e[s]<=r&&n%e[s]!=0;s++);t!==s&&e[s]<=r||(e[t++]=n)}return p=e,e}function g(e){for(var t=m(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function b(e){var t=s.mont(e);return 0===l.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function v(e,t){if(e<16)return new s(2===t||5===t?[140,123]:[140,39]);var n,p;for(t=new s(t);;){for(n=new s(r(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(o),n.testn(1)||n.iadd(l),t.cmp(l)){if(!t.cmp(c))for(;n.mod(u).cmp(d);)n.iadd(f)}else for(;n.mod(i).cmp(h);)n.iadd(f);if(g(p=n.shrn(1))&&g(n)&&b(p)&&b(n)&&a.test(p)&&a.test(n))return n}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(e,t,n){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],405:[function(e,t,n){"use strict";var r=n;r.version=e("../package.json").version,r.utils=e("./elliptic/utils"),r.rand=e("brorand"),r.curve=e("./elliptic/curve"),r.curves=e("./elliptic/curves"),r.ec=e("./elliptic/ec"),r.eddsa=e("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("../utils"),i=s.getNAF,a=s.getJSF,o=s.assert;function l(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}t.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(e,t){o(e.precomputed);var n=e._getDoubles(),r=i(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2==0?2:1);s/=3;var a,l,c=[];for(a=0;a<r.length;a+=n.step){l=0;for(var u=a+n.step-1;u>=a;u--)l=(l<<1)+r[u];c.push(l)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<c.length;a++)(l=c[a])===f?h=h.mixedAdd(n.points[a]):l===-f&&(h=h.mixedAdd(n.points[a].neg()));d=d.add(h)}return d.toP()},l.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var s=r.points,a=i(t,n,this._bitLength),l=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var u=0;c>=0&&0===a[c];c--)u++;if(c>=0&&u++,l=l.dblp(u),c<0)break;var d=a[c];o(0!==d),l="affine"===e.type?d>0?l.mixedAdd(s[d-1>>1]):l.mixedAdd(s[-d-1>>1].neg()):d>0?l.add(s[d-1>>1]):l.add(s[-d-1>>1].neg())}return"affine"===e.type?l.toP():l},l.prototype._wnafMulAdd=function(e,t,n,r,s){var o,l,c,u=this._wnafT1,d=this._wnafT2,h=this._wnafT3,f=0;for(o=0;o<r;o++){var p=(c=t[o])._getNAFPoints(e);u[o]=p.wnd,d[o]=p.points}for(o=r-1;o>=1;o-=2){var m=o-1,g=o;if(1===u[m]&&1===u[g]){var b=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(b[1]=t[m].add(t[g]),b[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(b[1]=t[m].toJ().mixedAdd(t[g]),b[2]=t[m].add(t[g].neg())):(b[1]=t[m].toJ().mixedAdd(t[g]),b[2]=t[m].toJ().mixedAdd(t[g].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],y=a(n[m],n[g]);for(f=Math.max(y[0].length,f),h[m]=new Array(f),h[g]=new Array(f),l=0;l<f;l++){var w=0|y[0][l],x=0|y[1][l];h[m][l]=v[3*(w+1)+(x+1)],h[g][l]=0,d[m]=b}}else h[m]=i(n[m],u[m],this._bitLength),h[g]=i(n[g],u[g],this._bitLength),f=Math.max(h[m].length,f),f=Math.max(h[g].length,f)}var k=this.jpoint(null,null,null),_=this._wnafT4;for(o=f;o>=0;o--){for(var S=0;o>=0;){var j=!0;for(l=0;l<r;l++)_[l]=0|h[l][o],0!==_[l]&&(j=!1);if(!j)break;S++,o--}if(o>=0&&S++,k=k.dblp(S),o<0)break;for(l=0;l<r;l++){var N=_[l];0!==N&&(N>0?c=d[l][N-1>>1]:N<0&&(c=d[l][-N-1>>1].neg()),k="affine"===c.type?k.mixedAdd(c):k.add(c))}}for(o=0;o<r;o++)d[o]=null;return s?k:k.toP()},l.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(e,t){e=s.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return s.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,s=0;s<t;s+=e){for(var i=0;i<e;i++)r=r.dbl();n.push(r)}return{step:e,points:n}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(r);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},{"../utils":419,"bn.js":420}],407:[function(e,t,n){"use strict";var r=e("../utils"),s=e("bn.js"),i=e("inherits"),a=e("./base"),o=r.assert;function l(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,a.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,n,r,i){a.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(n,16),this.z=r?new s(r,16):this.curve.one,this.t=i&&new s(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(l,a),t.exports=l,l.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},l.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},l.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},l.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=r.redMul(i.redInvm()),o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var l=o.fromRed().isOdd();return(t&&!l||!t&&l)&&(o=o.redNeg()),this.point(e,o)},l.prototype.pointFromY=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),i=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=r.redMul(i.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},l.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(s)},i(c,a.BasePoint),l.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},l.prototype.point=function(e,t,n,r){return new c(this,e,t,n,r)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=r.redAdd(t),a=i.redSub(n),o=r.redSub(t),l=s.redMul(a),c=i.redMul(o),u=s.redMul(o),d=a.redMul(i);return this.curve.point(l,c,d,u)},c.prototype._projDbl=function(){var e,t,n,r,s,i,a=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var c=(r=this.curve._mulA(o)).redAdd(l);this.zOne?(e=a.redSub(o).redSub(l).redMul(c.redSub(this.curve.two)),t=c.redMul(r.redSub(l)),n=c.redSqr().redSub(c).redSub(c)):(s=this.z.redSqr(),i=c.redSub(s).redISub(s),e=a.redSub(o).redISub(l).redMul(i),t=c.redMul(r.redSub(l)),n=c.redMul(i))}else r=o.redAdd(l),s=this.curve._mulC(this.z).redSqr(),i=r.redSub(s).redSub(s),e=this.curve._mulC(a.redISub(r)).redMul(i),t=this.curve._mulC(r).redMul(o.redISub(l)),n=r.redMul(i);return this.curve.point(e,t,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),i=n.redSub(t),a=s.redSub(r),o=s.redAdd(r),l=n.redAdd(t),c=i.redMul(a),u=o.redMul(l),d=i.redMul(l),h=a.redMul(o);return this.curve.point(c,u,h,d)},c.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),s=r.redSqr(),i=this.x.redMul(e.x),a=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(a),l=s.redSub(o),c=s.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(a),d=r.redMul(l).redMul(u);return this.curve.twisted?(t=r.redMul(c).redMul(a.redSub(this.curve._mulA(i))),n=l.redMul(c)):(t=r.redMul(c).redMul(a.redSub(i)),n=this.curve._mulC(l).redMul(c)),this.curve.point(d,t,n)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},c.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(e,t,n){"use strict";var r=n;r.base=e("./base"),r.short=e("./short"),r.mont=e("./mont"),r.edwards=e("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("inherits"),i=e("./base"),a=e("../utils");function o(e){i.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(e,t,n){i.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}s(o,i),t.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},s(l,i.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(a.toArray(e,t),1)},o.prototype.point=function(e,t){return new l(this,e,t)},o.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(e,t){return new l(e,t[0],t[1]||e.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),s=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,s)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),s=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(n),a=s.redMul(r),o=t.z.redMul(i.redAdd(a).redSqr()),l=t.x.redMul(i.redISub(a).redSqr());return this.curve.point(o,l)},l.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var i=s.length-1;i>=0;i--)0===s[i]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(e,t,n){"use strict";var r=e("../utils"),s=e("bn.js"),i=e("inherits"),a=e("./base"),o=r.assert;function l(e){a.call(this,"short",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,n,r){a.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new s(t,16),this.y=new s(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,n,r){a.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new s(0)):(this.x=new s(t,16),this.y=new s(n,16),this.z=new s(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(l,a),t.exports=l,l.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new s(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new s(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?n=i[0]:(n=i[1],o(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map(function(e){return{a:new s(e.a,16),b:new s(e.b,16)}}):this._getEndoBasis(n)}}},l.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:s.mont(e),n=new s(2).toRed(t).redInvm(),r=n.redNeg(),i=new s(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},l.prototype._getEndoBasis=function(e){for(var t,n,r,i,a,o,l,c,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),p=new s(1),m=new s(0),g=new s(0),b=new s(1),v=0;0!==h.cmpn(0);){var y=f.div(h);c=f.sub(y.mul(h)),u=g.sub(y.mul(p));var w=b.sub(y.mul(m));if(!r&&c.cmp(d)<0)t=l.neg(),n=p,r=c.neg(),i=u;else if(r&&2==++v)break;l=c,f=h,h=c,g=p,p=u,b=m,m=w}a=c.neg(),o=u;var x=r.sqr().add(i.sqr());return a.sqr().add(o.sqr()).cmp(x)>=0&&(a=t,o=n),r.negative&&(r=r.neg(),i=i.neg()),a.negative&&(a=a.neg(),o=o.neg()),[{a:r,b:i},{a:a,b:o}]},l.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],s=r.b.mul(e).divRound(this.n),i=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),o=i.mul(r.a),l=s.mul(n.b),c=i.mul(r.b);return{k1:e.sub(a).sub(o),k2:l.add(c).neg()}},l.prototype.pointFromX=function(e,t){(e=new s(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},l.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(s).cmpn(0)},l.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,s=this._endoWnafT2,i=0;i<e.length;i++){var a=this._endoSplit(t[i]),o=e[i],l=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),r[2*i]=o,r[2*i+1]=l,s[2*i]=a.k1,s[2*i+1]=a.k2}for(var c=this._wnafMulAdd(1,r,s,2*i,n),u=0;u<2*i;u++)r[u]=null,s[u]=null;return c},i(c,a.BasePoint),l.prototype.point=function(e,t,n){return new c(this,e,t,n)},l.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function s(t){return e.point(t[0],t[1],n)}var i=t[2];return r.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[r].concat(i.doubles.points.map(s))},naf:i.naf&&{wnd:i.naf.wnd,points:[r].concat(i.naf.points.map(s))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),i=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new s(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){var r=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,s):this.curve._wnafMulAdd(1,r,s,2)},c.prototype.jmulAdd=function(e,t,n){var r=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,s,!0):this.curve._wnafMulAdd(1,r,s,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(u,a.BasePoint),l.prototype.jpoint=function(e,t,n){return new u(this,e,t,n)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),s=e.x.redMul(n),i=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),o=r.redSub(s),l=i.redSub(a);if(0===o.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),d=r.redMul(c),h=l.redSqr().redIAdd(u).redISub(d).redISub(d),f=l.redMul(d.redISub(h)).redISub(i.redMul(u)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(h,f,p)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),s=this.y,i=e.y.redMul(t).redMul(this.z),a=n.redSub(r),o=s.redSub(i);if(0===a.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),c=l.redMul(a),u=n.redMul(l),d=o.redSqr().redIAdd(c).redISub(u).redISub(u),h=o.redMul(u.redISub(d)).redISub(s.redMul(c)),f=this.z.redMul(a);return this.curve.jpoint(d,h,f)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,s=this.curve.tinv,i=this.x,a=this.y,o=this.z,l=o.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=i.redSqr(),d=c.redSqr(),h=d.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(l)),p=i.redMul(d),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),b=f.redMul(g);b=b.redIAdd(b).redISub(h);var v=c.redMul(o);t+1<e&&(l=l.redMul(h)),i=m,o=v,c=b}return this.curve.jpoint(i,c.redMul(s),o)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(r).redISub(i);a=a.redIAdd(a);var o=r.redAdd(r).redIAdd(r),l=o.redSqr().redISub(a).redISub(a),c=i.redIAdd(i);c=(c=c.redIAdd(c)).redIAdd(c),e=l,t=o.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(u).redISub(h);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},u.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(r).redISub(i);a=a.redIAdd(a);var o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),l=o.redSqr().redISub(a).redISub(a);e=l;var c=i.redIAdd(i);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,s=r.redSqr().redSqr(),i=t.redSqr(),a=n.redSqr(),o=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(s)),l=t.redAdd(t),c=(l=l.redIAdd(l)).redMul(a),u=o.redSqr().redISub(c.redAdd(c)),d=c.redISub(u),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=o.redMul(d).redISub(h),p=n.redAdd(n).redMul(r);return this.curve.jpoint(u,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),s=e.redAdd(e).redIAdd(e),i=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(r),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(i)).redSqr(),l=r.redIAdd(r);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=s.redIAdd(a).redSqr().redISub(i).redISub(o).redISub(l),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(o).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(c.redMul(l.redISub(c)).redISub(a.redMul(o)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=this.z.redAdd(a).redSqr().redISub(n).redISub(o);return this.curve.jpoint(d,h,f)},u.prototype.mul=function(e,t){return e=new s(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),s=n.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),s=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),0===this.x.cmp(n))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(e,t,n){"use strict";var r,s=n,i=e("hash.js"),a=e("./curve"),o=e("./utils").assert;function l(e){"short"===e.type?this.curve=new a.short(e):"edwards"===e.type?this.curve=new a.edwards(e):this.curve=new a.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(s,e,{configurable:!0,enumerable:!0,get:function(){var n=new l(t);return Object.defineProperty(s,e,{configurable:!0,enumerable:!0,value:n}),n}})}s.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=e("./precomputed/secp256k1")}catch(e){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("hmac-drbg"),i=e("../utils"),a=e("../curves"),o=e("brorand"),l=i.assert,c=e("./key"),u=e("./signature");function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(l(Object.prototype.hasOwnProperty.call(a,e),"Unknown curve "+e),e=a[e]),e instanceof a.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}t.exports=d,d.prototype.keyPair=function(e){return new c(this,e)},d.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new s({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new r(2));;){var a=new r(t.generate(n));if(!(a.cmp(i)>0))return a.iaddn(1),this.keyFromPrivate(a)}},d.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,n,i){"object"==typeof n&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new r(e,16));for(var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),l=e.toArray("be",a),c=new s({hash:this.hash,entropy:o,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new r(1)),h=0;;h++){var f=i.k?i.k(h):new r(c.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(d)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var b=f.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),v^=1),new u({r:g,s:b,recoveryParam:v})}}}}}},d.prototype.verify=function(e,t,n,s){e=this._truncateToN(new r(e,16)),n=this.keyFromPublic(n,s);var i=(t=new u(t,"hex")).r,a=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o,l=a.invm(this.n),c=l.mul(e).umod(this.n),d=l.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(c,n.getPublic(),d)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(c,n.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},d.prototype.recoverPubKey=function(e,t,n,s){l((3&n)===n,"The recovery param is more than two bits"),t=new u(t,s);var i=this.n,a=new r(e),o=t.r,c=t.s,d=1&n,h=n>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");o=h?this.curve.pointFromX(o.add(this.curve.n),d):this.curve.pointFromX(o,d);var f=t.r.invm(i),p=i.sub(a).mul(f).umod(i),m=c.mul(f).umod(i);return this.g.mulAdd(p,o,m)},d.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(e,t,s)}catch(e){continue}if(i.eq(n))return s}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("../utils").assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}t.exports=i,i.fromPublic=function(e,t,n){return t instanceof i?t:new i(e,{pub:t,pubEnc:n})},i.fromPrivate=function(e,t,n){return t instanceof i?t:new i(e,{priv:t,privEnc:n})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?s(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||s(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.validate()||s(e.validate(),"public point not validated"),e.mul(this.priv).getX()},i.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("../utils"),i=s.assert;function a(e,t){if(e instanceof a)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function l(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var s=0,i=0,a=t.place;i<r;i++,a++)s<<=8,s|=e[a],s>>>=0;return!(s<=127)&&(t.place=a,s)}function c(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}t.exports=a,a.prototype._importDER=function(e,t){e=s.toArray(e,t);var n=new o;if(48!==e[n.place++])return!1;var i=l(e,n);if(!1===i)return!1;if(i+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var a=l(e,n);if(!1===a)return!1;var c=e.slice(n.place,a+n.place);if(n.place+=a,2!==e[n.place++])return!1;var u=l(e,n);if(!1===u)return!1;if(e.length!==u+n.place)return!1;var d=e.slice(n.place,u+n.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new r(c),this.s=new r(d),this.recoveryParam=null,!0},a.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=c(t),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];u(r,t.length),(r=r.concat(t)).push(2),u(r,n.length);var i=r.concat(n),a=[48];return u(a,i.length),a=a.concat(i),s.encode(a,e)}},{"../utils":419,"bn.js":420}],415:[function(e,t,n){"use strict";var r=e("hash.js"),s=e("../curves"),i=e("../utils"),a=i.assert,o=i.parseBytes,l=e("./key"),c=e("./signature");function u(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=s[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}t.exports=u,u.prototype.sign=function(e,t){e=o(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),s=this.g.mul(r),i=this.encodePoint(s),a=this.hashInt(i,n.pubBytes(),e).mul(n.priv()),l=r.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:l,Rencoded:i})},u.prototype.verify=function(e,t,n){e=o(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),s=this.hashInt(t.Rencoded(),r.pubBytes(),e),i=this.g.mul(t.S());return t.R().add(r.pub().mul(s)).eq(i)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return l.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return l.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),s=i.intFromLE(n);return this.curve.pointFromY(s,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return i.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(e,t,n){"use strict";var r=e("../utils"),s=r.assert,i=r.parseBytes,a=r.cachedProperty;function o(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},a(o,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(o,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(o,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r}),a(o,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(o,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(o,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),o.prototype.sign=function(e){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return s(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},o.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},t.exports=o},{"../utils":419}],417:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("../utils"),i=s.assert,a=s.cachedProperty,o=s.parseBytes;function l(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(l,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(l,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(l,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(l,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},t.exports=l},{"../utils":419,"bn.js":420}],418:[function(e,t,n){"use strict";t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(e,t,n){"use strict";var r=n,s=e("bn.js"),i=e("minimalistic-assert"),a=e("minimalistic-crypto-utils");r.assert=i,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var s=1<<t+1,i=e.clone(),a=0;a<r.length;a++){var o,l=i.andln(s-1);i.isOdd()?(o=l>(s>>1)-1?(s>>1)-l:l,i.isubn(o)):o=0,r[a]=o,i.iushrn(1)}return r},r.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,s=0,i=0;e.cmpn(-s)>0||t.cmpn(-i)>0;){var a,o,l=e.andln(3)+s&3,c=t.andln(3)+i&3;3===l&&(l=-1),3===c&&(c=-1),a=0==(1&l)?0:3!==(r=e.andln(7)+s&7)&&5!==r||2!==c?l:-l,n[0].push(a),o=0==(1&c)?0:3!==(r=t.andln(7)+i&7)&&5!==r||2!==l?c:-c,n[1].push(o),2*s===a+1&&(s=1-s),2*i===o+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return n},r.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new s(e,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],421:[function(e,t,n){t.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(e,t,n){"use strict";var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var o,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),o=0===c.x}catch(e){o=!1}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function d(e,t,n){if(t)e.call(n);else for(var r=e.length,s=x(e,r),i=0;i<r;++i)s[i].call(n)}function h(e,t,n,r){if(t)e.call(n,r);else for(var s=e.length,i=x(e,s),a=0;a<s;++a)i[a].call(n,r)}function f(e,t,n,r,s){if(t)e.call(n,r,s);else for(var i=e.length,a=x(e,i),o=0;o<i;++o)a[o].call(n,r,s)}function p(e,t,n,r,s,i){if(t)e.call(n,r,s,i);else for(var a=e.length,o=x(e,a),l=0;l<a;++l)o[l].call(n,r,s,i)}function m(e,t,n,r){if(t)e.apply(n,r);else for(var s=e.length,i=x(e,s),a=0;a<s;++a)i[a].apply(n,r)}function g(e,t,n,s){var i,a,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=r(null),e._eventsCount=0),o){if("function"==typeof o?o=a[t]=s?[n,o]:[o,n]:s?o.unshift(n):o.push(n),!o.warned&&(i=u(e))&&i>0&&o.length>i){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else o=a[t]=n,++e._eventsCount;return e}function b(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function v(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=i.call(b,r);return s.listener=n,r.wrapFn=s,s}function y(e,t,n){var r=e._events;if(!r)return[];var s=r[t];return s?"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):x(s,s.length):[]}function w(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function x(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}o?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){var t,n,r,s,i,a,o="error"===e;if(a=this._events)o=o&&null==a.error;else if(!o)return!1;if(o){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:d(n,c,this);break;case 2:h(n,c,this,arguments[1]);break;case 3:f(n,c,this,arguments[1],arguments[2]);break;case 4:p(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(r-1),i=1;i<r;i++)s[i-1]=arguments[i];m(n,c,this,s)}return!0},a.prototype.addListener=function(e,t){return g(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return g(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,s,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(s=this._events))return this;if(!(n=s[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,s=e.length;r<s;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(s[e]=n[0]),s.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var a,o=s(n);for(i=0;i<o.length;++i)"removeListener"!==(a=o[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return y(this,e,!0)},a.prototype.rawListeners=function(e){return y(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):w.call(e,t)},a.prototype.listenerCount=w,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("md5.js");t.exports=function(e,t,n,i){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,o=r.alloc(a),l=r.alloc(i||0),c=r.alloc(0);a>0||i>0;){var u=new s;u.update(c),u.update(e),t&&u.update(t),c=u.digest();var d=0;if(a>0){var h=o.length-a;d=Math.min(a,c.length),c.copy(o,h,0,d),a-=d}if(d<c.length&&i>0){var f=l.length-i,p=Math.min(i,c.length-d);c.copy(l,f,d,d+p),i-=p}}return c.fill(0),{key:o,iv:l}}},{"md5.js":450,"safe-buffer":494}],424:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CsvParserStream=n.ParserOptions=n.parseFile=n.parseStream=n.parseString=n.parse=n.FormatterOptions=n.CsvFormatterStream=n.writeToPath=n.writeToString=n.writeToBuffer=n.writeToStream=n.write=n.format=void 0;var r=e("@fast-csv/format");Object.defineProperty(n,"format",{enumerable:!0,get:function(){return r.format}}),Object.defineProperty(n,"write",{enumerable:!0,get:function(){return r.write}}),Object.defineProperty(n,"writeToStream",{enumerable:!0,get:function(){return r.writeToStream}}),Object.defineProperty(n,"writeToBuffer",{enumerable:!0,get:function(){return r.writeToBuffer}}),Object.defineProperty(n,"writeToString",{enumerable:!0,get:function(){return r.writeToString}}),Object.defineProperty(n,"writeToPath",{enumerable:!0,get:function(){return r.writeToPath}}),Object.defineProperty(n,"CsvFormatterStream",{enumerable:!0,get:function(){return r.CsvFormatterStream}}),Object.defineProperty(n,"FormatterOptions",{enumerable:!0,get:function(){return r.FormatterOptions}});var s=e("@fast-csv/parse");Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return s.parse}}),Object.defineProperty(n,"parseString",{enumerable:!0,get:function(){return s.parseString}}),Object.defineProperty(n,"parseStream",{enumerable:!0,get:function(){return s.parseStream}}),Object.defineProperty(n,"parseFile",{enumerable:!0,get:function(){return s.parseFile}}),Object.defineProperty(n,"ParserOptions",{enumerable:!0,get:function(){return s.ParserOptions}}),Object.defineProperty(n,"CsvParserStream",{enumerable:!0,get:function(){return s.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("readable-stream").Transform;function i(e){s.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(i,s),i.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var n=this._block,s=0;this._blockOffset+e.length-s>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)n[i++]=e[s++];this._update(),this._blockOffset=0}for(;s<e.length;)n[this._blockOffset++]=e[s++];for(var a=0,o=8*e.length;o>0;++a)this._length[a]+=o,(o=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*o);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=i},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(e,t,n){"use strict";var r=n;r.utils=e("./hash/utils"),r.common=e("./hash/common"),r.sha=e("./hash/sha"),r.ripemd=e("./hash/ripemd"),r.hmac=e("./hash/hmac"),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(e,t,n){"use strict";var r=e("./utils"),s=e("minimalistic-assert");function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}n.BlockHash=i,i.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),s(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var s=1;s<n;s++)r[s]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)r[s++]=0;r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=e>>>24&255,r[s++]=e>>>16&255,r[s++]=e>>>8&255,r[s++]=255&e}else for(r[s++]=255&e,r[s++]=e>>>8&255,r[s++]=e>>>16&255,r[s++]=e>>>24&255,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,i=8;i<this.padLength;i++)r[s++]=0;return r}},{"./utils":437,"minimalistic-assert":453}],428:[function(e,t,n){"use strict";var r=e("./utils"),s=e("minimalistic-assert");function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}t.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),s(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},{"./utils":437,"minimalistic-assert":453}],429:[function(e,t,n){"use strict";var r=e("./utils"),s=e("./common"),i=r.rotl32,a=r.sum32,o=r.sum32_3,l=r.sum32_4,c=s.BlockHash;function u(){if(!(this instanceof u))return new u;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(u,c),n.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],s=this.h[2],c=this.h[3],u=this.h[4],v=n,y=r,w=s,x=c,k=u,_=0;_<80;_++){var S=a(i(l(n,d(_,r,s,c),e[p[_]+t],h(_)),g[_]),u);n=u,u=c,c=i(s,10),s=r,r=S,S=a(i(l(v,d(79-_,y,w,x),e[m[_]+t],f(_)),b[_]),k),v=k,k=x,x=i(w,10),w=y,y=S}S=o(this.h[1],s,x),this.h[1]=o(this.h[2],c,k),this.h[2]=o(this.h[3],u,v),this.h[3]=o(this.h[4],n,y),this.h[4]=o(this.h[0],r,w),this.h[0]=S},u.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(e,t,n){"use strict";n.sha1=e("./sha/1"),n.sha224=e("./sha/224"),n.sha256=e("./sha/256"),n.sha384=e("./sha/384"),n.sha512=e("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(e,t,n){"use strict";var r=e("../utils"),s=e("../common"),i=e("./common"),a=r.rotl32,o=r.sum32,l=r.sum32_5,c=i.ft_1,u=s.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(h,u),t.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var s=this.h[0],i=this.h[1],u=this.h[2],h=this.h[3],f=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),m=l(a(s,5),c(p,i,u,h),f,n[r],d[p]);f=h,h=u,u=a(i,30),i=s,s=m}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],i),this.h[2]=o(this.h[2],u),this.h[3]=o(this.h[3],h),this.h[4]=o(this.h[4],f)},h.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(e,t,n){"use strict";var r=e("../utils"),s=e("./256");function i(){if(!(this instanceof i))return new i;s.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(i,s),t.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(e,t,n){"use strict";var r=e("../utils"),s=e("../common"),i=e("./common"),a=e("minimalistic-assert"),o=r.sum32,l=r.sum32_4,c=r.sum32_5,u=i.ch32,d=i.maj32,h=i.s0_256,f=i.s1_256,p=i.g0_256,m=i.g1_256,g=s.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}r.inherits(v,g),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=l(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var s=this.h[0],i=this.h[1],g=this.h[2],b=this.h[3],v=this.h[4],y=this.h[5],w=this.h[6],x=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var k=c(x,f(v),u(v,y,w),this.k[r],n[r]),_=o(h(s),d(s,i,g));x=w,w=y,y=v,v=o(b,k),b=g,g=i,i=s,s=o(k,_)}this.h[0]=o(this.h[0],s),this.h[1]=o(this.h[1],i),this.h[2]=o(this.h[2],g),this.h[3]=o(this.h[3],b),this.h[4]=o(this.h[4],v),this.h[5]=o(this.h[5],y),this.h[6]=o(this.h[6],w),this.h[7]=o(this.h[7],x)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(e,t,n){"use strict";var r=e("../utils"),s=e("./512");function i(){if(!(this instanceof i))return new i;s.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(i,s),t.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(e,t,n){"use strict";var r=e("../utils"),s=e("../common"),i=e("minimalistic-assert"),a=r.rotr64_hi,o=r.rotr64_lo,l=r.shr64_hi,c=r.shr64_lo,u=r.sum64,d=r.sum64_hi,h=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,b=s.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function w(e,t,n,r,s){var i=e&n^~e&s;return i<0&&(i+=4294967296),i}function x(e,t,n,r,s,i){var a=t&r^~t&i;return a<0&&(a+=4294967296),a}function k(e,t,n,r,s){var i=e&n^e&s^n&s;return i<0&&(i+=4294967296),i}function _(e,t,n,r,s,i){var a=t&r^t&i^r&i;return a<0&&(a+=4294967296),a}function S(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function j(e,t){var n=o(e,t,28)^o(t,e,2)^o(t,e,7);return n<0&&(n+=4294967296),n}function N(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function T(e,t){var n=o(e,t,14)^o(e,t,18)^o(t,e,9);return n<0&&(n+=4294967296),n}function E(e,t){var n=a(e,t,1)^a(e,t,8)^l(e,t,7);return n<0&&(n+=4294967296),n}function C(e,t){var n=o(e,t,1)^o(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function I(e,t){var n=a(e,t,19)^a(t,e,29)^l(e,t,6);return n<0&&(n+=4294967296),n}function A(e,t){var n=o(e,t,19)^o(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(y,b),t.exports=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var s=I(n[r-4],n[r-3]),i=A(n[r-4],n[r-3]),a=n[r-14],o=n[r-13],l=E(n[r-30],n[r-29]),c=C(n[r-30],n[r-29]),u=n[r-32],d=n[r-31];n[r]=f(s,i,a,o,l,c,u,d),n[r+1]=p(s,i,a,o,l,c,u,d)}},y.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],l=this.h[4],c=this.h[5],f=this.h[6],p=this.h[7],b=this.h[8],v=this.h[9],y=this.h[10],E=this.h[11],C=this.h[12],I=this.h[13],A=this.h[14],M=this.h[15];i(this.k.length===n.length);for(var O=0;O<n.length;O+=2){var R=A,D=M,P=N(b,v),L=T(b,v),F=w(b,v,y,E,C),B=x(b,v,y,E,C,I),U=this.k[O],z=this.k[O+1],V=n[O],H=n[O+1],W=m(R,D,P,L,F,B,U,z,V,H),q=g(R,D,P,L,F,B,U,z,V,H);R=S(r,s),D=j(r,s),P=k(r,s,a,o,l),L=_(r,s,a,o,l,c);var K=d(R,D,P,L),G=h(R,D,P,L);A=C,M=I,C=y,I=E,y=b,E=v,b=d(f,p,W,q),v=h(p,p,W,q),f=l,p=c,l=a,c=o,a=r,o=s,r=d(W,q,K,G),s=h(W,q,K,G)}u(this.h,0,r,s),u(this.h,2,a,o),u(this.h,4,l,c),u(this.h,6,f,p),u(this.h,8,b,v),u(this.h,10,y,E),u(this.h,12,C,I),u(this.h,14,A,M)},y.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(e,t,n){"use strict";var r=e("../utils").rotr32;function s(e,t,n){return e&t^~e&n}function i(e,t,n){return e&t^e&n^t&n}function a(e,t,n){return e^t^n}n.ft_1=function(e,t,n,r){return 0===e?s(t,n,r):1===e||3===e?a(t,n,r):2===e?i(t,n,r):void 0},n.ch32=s,n.maj32=i,n.p32=a,n.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},n.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},n.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},n.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},{"../utils":437}],437:[function(e,t,n){"use strict";var r=e("minimalistic-assert"),s=e("inherits");function i(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function l(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}n.inherits=s,n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)n.push(parseInt(e[s]+e[s+1],16))}else for(var r=0,s=0;s<e.length;s++){var a=e.charCodeAt(s);a<128?n[r++]=a:a<2048?(n[r++]=a>>6|192,n[r++]=63&a|128):i(e,s)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++s)),n[r++]=a>>18|240,n[r++]=a>>12&63|128,n[r++]=a>>6&63|128,n[r++]=63&a|128):(n[r++]=a>>12|224,n[r++]=a>>6&63|128,n[r++]=63&a|128)}else for(s=0;s<e.length;s++)n[s]=0|e[s];return n},n.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=o(e[n].toString(16));return t},n.htonl=a,n.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var s=e[r];"little"===t&&(s=a(s)),n+=l(s.toString(16))}return n},n.zero2=o,n.zero8=l,n.join32=function(e,t,n,s){var i=n-t;r(i%4==0);for(var a=new Array(i/4),o=0,l=t;o<a.length;o++,l+=4){var c;c="big"===s?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],a[o]=c>>>0}return a},n.split32=function(e,t){for(var n=new Array(4*e.length),r=0,s=0;r<e.length;r++,s+=4){var i=e[r];"big"===t?(n[s]=i>>>24,n[s+1]=i>>>16&255,n[s+2]=i>>>8&255,n[s+3]=255&i):(n[s+3]=i>>>24,n[s+2]=i>>>16&255,n[s+1]=i>>>8&255,n[s]=255&i)}return n},n.rotr32=function(e,t){return e>>>t|e<<32-t},n.rotl32=function(e,t){return e<<t|e>>>32-t},n.sum32=function(e,t){return e+t>>>0},n.sum32_3=function(e,t,n){return e+t+n>>>0},n.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},n.sum32_5=function(e,t,n,r,s){return e+t+n+r+s>>>0},n.sum64=function(e,t,n,r){var s=e[t],i=r+e[t+1]>>>0,a=(i<r?1:0)+n+s;e[t]=a>>>0,e[t+1]=i},n.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},n.sum64_lo=function(e,t,n,r){return t+r>>>0},n.sum64_4_hi=function(e,t,n,r,s,i,a,o){var l=0,c=t;return l+=(c=c+r>>>0)<t?1:0,l+=(c=c+i>>>0)<i?1:0,e+n+s+a+(l+=(c=c+o>>>0)<o?1:0)>>>0},n.sum64_4_lo=function(e,t,n,r,s,i,a,o){return t+r+i+o>>>0},n.sum64_5_hi=function(e,t,n,r,s,i,a,o,l,c){var u=0,d=t;return u+=(d=d+r>>>0)<t?1:0,u+=(d=d+i>>>0)<i?1:0,u+=(d=d+o>>>0)<o?1:0,e+n+s+a+l+(u+=(d=d+c>>>0)<c?1:0)>>>0},n.sum64_5_lo=function(e,t,n,r,s,i,a,o,l,c){return t+r+i+o+c>>>0},n.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},n.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},n.shr64_hi=function(e,t,n){return e>>>n},n.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(e,t,n){"use strict";var r=e("hash.js"),s=e("minimalistic-crypto-utils"),i=e("minimalistic-assert");function a(e){if(!(this instanceof a))return new a(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=s.toArray(e.entropy,e.entropyEnc||"hex"),n=s.toArray(e.nonce,e.nonceEnc||"hex"),r=s.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}t.exports=a,a.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=s.toArray(e,t),n=s.toArray(n,r),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},a.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=s.toArray(n,r||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(n),this._reseed++,s.encode(a,t)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(e,t,n){"use strict";n.read=function(e,t,n,r,s){var i,a,o=8*s-r-1,l=(1<<o)-1,c=l>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=o;u>0;i=256*i+e[t+d],d+=h,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===i)i=1-c;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=c}return(f?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,s,i){var a,o,l,c=8*i-s-1,u=(1<<c)-1,d=u>>1,h=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(t*l-1)*Math.pow(2,s),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,s),a=0));s>=8;e[n+f]=255&o,f+=p,o/=256,s-=8);for(a=a<<s|o,c+=s;c>0;e[n+f]=255&a,f+=p,a/=256,c-=8);e[n+f-p]|=128*m}},{}],440:[function(e,t,n){"use strict";"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],441:[function(e,t,r){(function(n,s,i,a,o,l,c,u){(function(){"use strict";!function(e){"object"==typeof r&&void 0!==t?t.exports=e():("undefined"!=typeof window?window:void 0!==s?s:"undefined"!=typeof self?self:this).JSZip=e()}(function(){return function t(n,r,s){function i(o,l){if(!r[o]){if(!n[o]){var c="function"==typeof e&&e;if(!l&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[o]={exports:{}};n[o][0].call(d.exports,function(e){return i(n[o][1][e]||e)},d,d.exports,t,n,r,s)}return r[o].exports}for(var a="function"==typeof e&&e,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(e,t,n){var r=e("./utils"),s=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,s,a,o,l,c,u=[],d=0,h=e.length,f=h,p="string"!==r.getTypeOf(e);d<e.length;)f=h-d,s=p?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),a=t>>2,o=(3&t)<<4|n>>4,l=1<f?(15&n)<<2|s>>6:64,c=2<f?63&s:64,u.push(i.charAt(a)+i.charAt(o)+i.charAt(l)+i.charAt(c));return u.join("")},n.decode=function(e){var t,n,r,a,o,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&f--,e.charAt(e.length-2)===i.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=s.uint8array?new Uint8Array(0|f):new Array(0|f);c<e.length;)t=i.indexOf(e.charAt(c++))<<2|(a=i.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(o=i.indexOf(e.charAt(c++)))>>2,r=(3&o)<<6|(l=i.indexOf(e.charAt(c++))),h[u++]=t,64!==o&&(h[u++]=n),64!==l&&(h[u++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){var r=e("./external"),s=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function o(e,t,n,r,s){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=s}o.prototype={getContentWorker:function(){var e=new s(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new s(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,n){return e.pipe(new i).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var r=e("./utils"),s=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n){var r=s,i=0+n;e^=-1;for(var a=0;a<i;a++)e=e>>>8^r[255&(e^t[a])];return-1^e}(0|t,e,e.length):function(e,t,n){var r=s,i=0+n;e^=-1;for(var a=0;a<i;a++)e=e>>>8^r[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var r;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,s=e("pako"),i=e("./utils"),a=e("./stream/GenericWorker"),o=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",i.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(o,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function s(e,t,n,s,a,u){var d,h,f=e.file,p=e.compression,m=u!==o.utf8encode,g=i.transformTo("string",u(f.name)),b=i.transformTo("string",o.utf8encode(f.name)),v=f.comment,y=i.transformTo("string",u(v)),w=i.transformTo("string",o.utf8encode(v)),x=b.length!==f.name.length,k=w.length!==v.length,_="",S="",j="",N=f.dir,T=f.date,E={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),m||!x&&!k||(C|=2048);var I=0,A=0;N&&(I|=16),"UNIX"===a?(A=798,I|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,N)):(A=20,I|=function(e){return 63&(e||0)}(f.dosPermissions)),d=T.getUTCHours(),d<<=6,d|=T.getUTCMinutes(),d<<=5,d|=T.getUTCSeconds()/2,h=T.getUTCFullYear()-1980,h<<=4,h|=T.getUTCMonth()+1,h<<=5,h|=T.getUTCDate(),x&&(S=r(1,1)+r(l(g),4)+b,_+="up"+r(S.length,2)+S),k&&(j=r(1,1)+r(l(y),4)+w,_+="uc"+r(j.length,2)+j);var M="";return M+="\n\0",M+=r(C,2),M+=p.magic,M+=r(d,2),M+=r(h,2),M+=r(E.crc32,4),M+=r(E.compressedSize,4),M+=r(E.uncompressedSize,4),M+=r(g.length,2),M+=r(_.length,2),{fileRecord:c.LOCAL_FILE_HEADER+M+g+_,dirRecord:c.CENTRAL_FILE_HEADER+r(A,2)+M+r(y.length,2)+"\0\0\0\0"+r(I,4)+r(s,4)+g+_+y}}var i=e("../utils"),a=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,a),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=s(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=s(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,s=function(e,t,n,s,a){var o=i.transformTo("string",a(s));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(o.length,2)+o}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:s,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var r=e("../compressions"),s=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var i=new s(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach(function(e,n){a++;var s=function(e,t){var n=e||t,s=r[n];if(!s)throw new Error(n+" is not a valid compression method !");return s}(n.options.compression,t.compression),o=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(s,o).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)}),i.entriesCount=a}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var r=e("./utils"),s=e("./external"),i=e("./utf8"),a=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new s.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new o);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(e)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new a(t);return n.load(e),n}).then(function(e){var n=[s.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var i=0;i<r.length;i++)n.push(c(r[i]));return s.Promise.all(n)}).then(function(e){for(var s=e.shift(),i=s.files,a=0;a<i.length;a++){var o=i[a],l=o.fileNameStr,c=r.resolve(o.fileNameStr);n.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(n.file(c).unsafeOriginalName=l)}return s.zipComment.length&&(n.comment=s.zipComment),n})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var r=e("../utils"),s=e("../stream/GenericWorker");function i(e,t){s.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(i,s),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},i.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var r=e("readable-stream").Readable;function s(e,t,n){r.call(this,t),this._helper=e;var s=this;e.on("data",function(e,t){s.push(e)||s._helper.pause(),n&&n(t)}).on("error",function(e){s.emit("error",e)}).on("end",function(){s.push(null)})}e("../utils").inherits(s,r),s.prototype._read=function(){this._helper.resume()},t.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:void 0!==i,newBufferFrom:function(e,t){if(i.from&&i.from!==Uint8Array.from)return i.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new i(e,t)},allocBuffer:function(e){if(i.alloc)return i.alloc(e);var t=new i(e);return t.fill(0),t},isBuffer:function(e){return i.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function r(e,t,n){var r,s=i.getTypeOf(t),o=i.extend(n||{},l);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=m(e)),o.createFolders&&(r=p(e))&&g.call(this,r,!0);var d,b="string"===s&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!b),(t instanceof c&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",s="string"),d=t instanceof c||t instanceof a?t:h.isNode&&h.isStream(t)?new f(e,t):i.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var v=new u(e,d,o);this.files[e]=v}var s=e("./utf8"),i=e("./utils"),a=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(b(e)){var s=e;return this.filter(function(e,t){return!t.dir&&s.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(b(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var r=e("./DataReader");function s(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(s,r),s.prototype.byteAt=function(e){return this.data[this.zero+e]},s.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),s=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===n&&this.data[i+2]===r&&this.data[i+3]===s)return i-this.zero;return-1},s.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),s=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&n===i[1]&&r===i[2]&&s===i[3]},s.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var r=e("../utils");function s(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=s},{"../utils":32}],19:[function(e,t,n){var r=e("./Uint8ArrayReader");function s(e){r.call(this,e)}e("../utils").inherits(s,r),s.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var r=e("./DataReader");function s(e){r.call(this,e)}e("../utils").inherits(s,r),s.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},s.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},s.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},s.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var r=e("./ArrayReader");function s(e){r.call(this,e)}e("../utils").inherits(s,r),s.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var r=e("../utils"),s=e("../support"),i=e("./ArrayReader"),a=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||s.uint8array?"nodebuffer"===t?new o(e):s.uint8array?new l(r.transformTo("uint8array",e)):new i(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){var r=e("./GenericWorker"),s=e("../utils");function i(e){r.call(this,"ConvertWorker to "+e),this.destType=e}s.inherits(i,r),i.prototype.processChunk=function(e){this.push({data:s.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var r=e("./GenericWorker"),s=e("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,r),i.prototype.processChunk=function(e){this.streamInfo.crc32=s(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var r=e("../utils"),s=e("./GenericWorker");function i(e){s.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(i,s),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}s.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var r=e("../utils"),s=e("./GenericWorker");function i(e){s.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(i,s),i.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){var r=e("../utils"),s=e("./ConvertWorker"),a=e("./GenericWorker"),o=e("../base64"),l=e("../support"),c=e("../external"),u=null;if(l.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function d(e,t,n){var i=t;switch(t){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=t,this._mimeType=n,r.checkSupport(i),this._worker=e.pipe(new s(i)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return function(e,t){return new c.Promise(function(n,s){var a=[],l=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",function(e,n){a.push(e),t&&t(n)}).on("error",function(e){a=[],s(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(c,function(e,t){var n,r=0,s=null,a=0;for(n=0;n<t.length;n++)a+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(s=new Uint8Array(a),n=0;n<t.length;n++)s.set(t[n],r),r+=t[n].length;return s;case"nodebuffer":return i.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,a),u);n(e)}catch(e){s(e)}a=[]}).resume()})}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==i,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(r),n.blob=0===s.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var r=e("./utils"),s=e("./support"),i=e("./nodejsUtils"),a=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}o[254]=o[254]=1,n.utf8encode=function(e){return s.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,a,o=e.length,l=0;for(i=0;i<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=s.uint8array?new Uint8Array(l):new Array(l),i=a=0;a<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return s.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,s,i,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((s=e[t++])<128)l[n++]=s;else if(4<(i=o[s]))l[n++]=65533,t+=i-1;else{for(s&=2===i?31:3===i?15:7;1<i&&t<a;)s=s<<6|63&e[t++],i--;1<i?l[n++]=65533:s<65536?l[n++]=s:(s-=65536,l[n++]=55296|s>>10&1023,l[n++]=56320|1023&s)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(s.uint8array?"uint8array":"array",e))},r.inherits(c,a),c.prototype.processChunk=function(e){var t=r.transformTo(s.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}(t),l=t;a!==t.length&&(s.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,a),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var r=e("./support"),s=e("./base64"),i=e("./nodejsUtils"),a=e("./external");function o(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],s=0,i=e.length;if(i<=n)return String.fromCharCode.apply(null,e);for(;s<i;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+n,i)))):r.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+n,i)))),s+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function d(e){var t=65536,r=n.getTypeOf(e),s=!0;if("uint8array"===r?s=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(s=c.applyCanBeUsed.nodebuffer),s)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=d;var f={};f.string={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},f.array={string:d,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},f.arraybuffer={string:function(e){return d(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return i.newBufferFrom(e)}},f.nodebuffer={string:d,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:o},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return f[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var s=t[r];"."===s||""===s&&0!==r&&r!==t.length-1||(".."===s?n.pop():n.push(s))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&i.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){u(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,o,c){return a.Promise.resolve(t).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(c?t=s.decode(t):i&&!0!==o&&(t=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var r=e("./reader/readerFor"),s=e("./utils"),i=e("./signature"),a=e("./zipEntry"),o=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",n=s.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var r=e("./reader/readerFor"),s=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,s=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<s;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(s)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var s=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new s(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){var n,r,s=e.MutationObserver||e.WebKitMutationObserver;if(s){var i=0,a=new s(u),o=e.document.createTextNode("");a.observe(o,{characterData:!0}),n=function(){o.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==s?s:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var r=e("immediate");function s(){}var i={},a=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==s&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(r){return i.reject(e,r)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)})}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function s(t){n||(n=!0,i.resolve(e,t))}var a=p(function(){t(s,r)});"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(s);return this.state!==l?d(n,this.state===o?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=o,e.outcome=t;for(var s=-1,a=e.queue.length;++s<a;)e.queue[s].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(s),e)},c.reject=function(e){var t=new this(s);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),o=0,l=-1,c=new this(s);++l<n;)u(e[l],l);return c;function u(e,s){t.resolve(e).then(function(e){a[s]=e,++o!==n||r||(r=!0,i.resolve(c,a))},function(e){r||(r=!0,i.reject(c,e))})}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,a=-1,o=new this(s);++a<t;)r=e[a],this.resolve(r).then(function(e){n||(n=!0,i.resolve(o,e))},function(e){n||(n=!0,i.reject(o,e))});return o}},{immediate:36}],38:[function(e,t,n){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var r=e("./zlib/deflate"),s=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var u;if(u="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(a[n]);this._dict_set=!0}}function u(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(e,t){var n,a,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new s.Buf8(c),o.next_out=0,o.avail_out=c),1!==(n=r.deflate(o,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(s.shrinkBuf(o.output,o.next_out))):this.onData(s.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(o.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=u,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,u(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,u(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var r=e("./zlib/inflate"),s=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(o[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}d.prototype.push=function(e,t){var n,o,l,c,d,h,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?i.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(f.output,f.next_out),c=f.next_out-l,d=i.buf2string(f.output,l),f.next_out=c,f.avail_out=p-c,c&&s.arraySet(f.output,f.output,l,c,0),this.onData(d)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,r,s){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),s);else for(var i=0;i<r;i++)e[s+i]=t[n+i]},flattenChunks:function(e){var t,n,r,s,i,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=s=0,n=e.length;t<n;t++)i=e[t],a.set(i,s),s+=i.length;return a}},i={arraySet:function(e,t,n,r,s){for(var i=0;i<r;i++)e[s+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],42:[function(e,t,n){var r=e("./common"),s=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var a=new r.Buf8(256),o=0;o<256;o++)a[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,s,i,a,o=e.length,l=0;for(i=0;i<o;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(s=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(s-56320),i++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),i=a=0;a<l;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(s=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(s-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,s=t.length;n<s;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,s,i,o=t||e.length,c=new Array(2*o);for(n=r=0;n<o;)if((s=e[n++])<128)c[r++]=s;else if(4<(i=a[s]))c[r++]=65533,n+=i-1;else{for(s&=2===i?31:3===i?15:7;1<i&&n<o;)s=s<<6|63&e[n++],i--;1<i?c[r++]=65533:s<65536?c[r++]=s:(s-=65536,c[r++]=55296|s>>10&1023,c[r++]=56320|1023&s)}return l(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,r){for(var s=65535&e,i=e>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;i=i+(s=s+t[r++]|0)|0,--a;);s%=65521,i%=65521}return s|i<<16}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,s){var i=r,a=s+n;e^=-1;for(var o=s;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}},{}],46:[function(e,t,n){var r,s=e("../utils/common"),i=e("./trees"),a=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=-2,u=258,d=262,h=113;function f(e,t){return e.msg=l[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(s.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function y(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t){var n,r,s=e.max_chain_length,i=e.strstart,a=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-d?e.strstart-(e.w_size-d):0,c=e.window,h=e.w_mask,f=e.prev,p=e.strstart+u,m=c[i+a-1],g=c[i+a];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+a]===g&&c[n+a-1]===m&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<p);if(r=u-(p-i),i=p-u,a<r){if(e.match_start=t,o<=(a=r))break;m=c[i+a-1],g=c[i+a]}}}while((t=f[t&h])>l&&0!=--s);return a<=e.lookahead?a:e.lookahead}function x(e){var t,n,r,i,l,c,u,h,f,p,m=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-d)){for(s.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;r=e.head[--t],e.head[t]=m<=r?r-m:0,--n;);for(t=n=m;r=e.prev[--t],e.prev[t]=m<=r?r-m:0,--n;);i+=m}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,h=e.strstart+e.lookahead,p=void 0,(f=i)<(p=c.avail_in)&&(p=f),n=0===p?0:(c.avail_in-=p,s.arraySet(u,c.input,c.next_in,p,h),1===c.state.wrap?c.adler=a(c.adler,u,p,h):2===c.state.wrap&&(c.adler=o(c.adler,u,p,h)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<d&&0!==e.strm.avail_in)}function k(e,t){for(var n,r;;){if(e.lookahead<d){if(x(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-d&&(e.match_length=w(e,n)),e.match_length>=3)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function _(e,t){for(var n,r,s;;){if(e.lookahead<d){if(x(e),e.lookahead<d&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-d&&(e.match_length=w(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(s=e.strstart+e.lookahead-3,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function S(e,t,n,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=s}function j(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function N(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):f(e,c)}function T(e){var t=N(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function E(e,t,n,r,i,a){if(!e)return c;var o=1;if(-1===t&&(t=6),r<0?(o=0,r=-r):15<r&&(o=2,r-=16),i<1||9<i||8!==n||r<8||15<r||t<0||9<t||a<0||4<a)return f(e,c);8===r&&(r=9);var l=new j;return(e.state=l).strm=e,l.wrap=o,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new s.Buf8(2*l.w_size),l.head=new s.Buf16(l.hash_size),l.prev=new s.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new s.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,T(e)}r=[new S(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(x(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-d&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)}),new S(4,4,8,4,k),new S(4,5,16,8,k),new S(4,6,32,32,k),new S(4,4,16,16,_),new S(8,16,32,32,_),new S(8,16,128,128,_),new S(8,32,128,256,_),new S(32,128,258,1024,_),new S(32,258,258,4096,_)],n.deflateInit=function(e,t){return E(e,t,8,15,8,0)},n.deflateInit2=E,n.deflateReset=T,n.deflateResetKeep=N,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},n.deflate=function(e,t){var n,s,a,l;if(!e||!e.state||5<t||t<0)return e?f(e,c):c;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||666===s.status&&4!==t)return f(e,0===e.avail_out?-5:c);if(s.strm=e,n=s.last_flush,s.last_flush=t,42===s.status)if(2===s.wrap)e.adler=0,v(s,31),v(s,139),v(s,8),s.gzhead?(v(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),v(s,255&s.gzhead.time),v(s,s.gzhead.time>>8&255),v(s,s.gzhead.time>>16&255),v(s,s.gzhead.time>>24&255),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(v(s,255&s.gzhead.extra.length),v(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=o(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(v(s,0),v(s,0),v(s,0),v(s,0),v(s,0),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,3),s.status=h);else{var d=8+(s.w_bits-8<<4)<<8;d|=(2<=s.strategy||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(d|=32),d+=31-d%31,s.status=h,y(s,d),0!==s.strstart&&(y(s,e.adler>>>16),y(s,65535&e.adler)),e.adler=1}if(69===s.status)if(s.gzhead.extra){for(a=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),g(e),a=s.pending,s.pending!==s.pending_buf_size));)v(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){a=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),g(e),a=s.pending,s.pending===s.pending_buf_size)){l=1;break}l=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,v(s,l)}while(0!==l);s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),0===l&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){a=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),g(e),a=s.pending,s.pending===s.pending_buf_size)){l=1;break}l=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,v(s,l)}while(0!==l);s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),0===l&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&g(e),s.pending+2<=s.pending_buf_size&&(v(s,255&e.adler),v(s,e.adler>>8&255),e.adler=0,s.status=h)):s.status=h),0!==s.pending){if(g(e),0===e.avail_out)return s.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return f(e,-5);if(666===s.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==s.lookahead||0!==t&&666!==s.status){var w=2===s.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(x(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(s,t):3===s.strategy?function(e,t){for(var n,r,s,a,o=e.window;;){if(e.lookahead<=u){if(x(e),e.lookahead<=u&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(r=o[s=e.strstart-1])===o[++s]&&r===o[++s]&&r===o[++s]){a=e.strstart+u;do{}while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<a);e.match_length=u-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(s,t):r[s.level].func(s,t);if(3!==w&&4!==w||(s.status=666),1===w||3===w)return 0===e.avail_out&&(s.last_flush=-1),0;if(2===w&&(1===t?i._tr_align(s):5!==t&&(i._tr_stored_block(s,0,0,!1),3===t&&(m(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),g(e),0===e.avail_out))return s.last_flush=-1,0}return 4!==t?0:s.wrap<=0?1:(2===s.wrap?(v(s,255&e.adler),v(s,e.adler>>8&255),v(s,e.adler>>16&255),v(s,e.adler>>24&255),v(s,255&e.total_in),v(s,e.total_in>>8&255),v(s,e.total_in>>16&255),v(s,e.total_in>>24&255)):(y(s,e.adler>>>16),y(s,65535&e.adler)),g(e),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?f(e,c):(e.state=null,t===h?f(e,-3):0):c},n.deflateSetDictionary=function(e,t){var n,r,i,o,l,u,d,h,f=t.length;if(!e||!e.state)return c;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return c;for(1===o&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new s.Buf8(n.w_size),s.arraySet(h,t,f-n.w_size,n.w_size,0),t=h,f=n.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=f,e.next_in=0,e.input=t,x(n);n.lookahead>=3;){for(r=n.strstart,i=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=2,x(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,n.wrap=o,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,r,s,i,a,o,l,c,u,d,h,f,p,m,g,b,v,y,w,x,k,_,S,j,N;n=e.state,r=e.next_in,j=e.input,s=r+(e.avail_in-5),i=e.next_out,N=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(f+=j[r++]<<p,p+=8,f+=j[r++]<<p,p+=8),y=m[f&b];t:for(;;){if(f>>>=w=y>>>24,p-=w,0==(w=y>>>16&255))N[i++]=65535&y;else{if(!(16&w)){if(0==(64&w)){y=m[(65535&y)+(f&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&y,(w&=15)&&(p<w&&(f+=j[r++]<<p,p+=8),x+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=j[r++]<<p,p+=8,f+=j[r++]<<p,p+=8),y=g[f&v];n:for(;;){if(f>>>=w=y>>>24,p-=w,!(16&(w=y>>>16&255))){if(0==(64&w)){y=g[(65535&y)+(f&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&y,p<(w&=15)&&(f+=j[r++]<<p,(p+=8)<w&&(f+=j[r++]<<p,p+=8)),l<(k+=f&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=w,p-=w,(w=i-a)<k){if(u<(w=k-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=h,(_=0)===d){if(_+=c-w,w<x){for(x-=w;N[i++]=h[_++],--w;);_=i-k,S=N}}else if(d<w){if(_+=c+d-w,(w-=d)<x){for(x-=w;N[i++]=h[_++],--w;);if(_=0,d<x){for(x-=w=d;N[i++]=h[_++],--w;);_=i-k,S=N}}}else if(_+=d-w,w<x){for(x-=w;N[i++]=h[_++],--w;);_=i-k,S=N}for(;2<x;)N[i++]=S[_++],N[i++]=S[_++],N[i++]=S[_++],x-=3;x&&(N[i++]=S[_++],1<x&&(N[i++]=S[_++]))}else{for(_=i-k;N[i++]=N[_++],N[i++]=N[_++],N[i++]=N[_++],2<(x-=3););x&&(N[i++]=N[_++],1<x&&(N[i++]=N[_++]))}break}}break}}while(r<s&&i<o);r-=x=p>>3,f&=(1<<(p-=x<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<s?s-r+5:5-(r-s),e.avail_out=i<o?o-i+257:257-(i-o),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){var r=e("../utils/common"),s=e("./adler32"),i=e("./crc32"),a=e("./inffast"),o=e("./inftrees"),l=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):l}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,d(e)):l}function f(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,h(e))):l}function p(e,t){var n,r;return e?(r=new u,(e.state=r).window=null,0!==(n=f(e,t))&&(e.state=null),n):l}var m,g,b=!0;function v(e){if(b){var t;for(m=new r.Buf32(512),g=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,g,0,e.work,{bits:5}),b=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function y(e,t,n,s){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),s>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(s<(i=a.wsize-a.wnext)&&(i=s),r.arraySet(a.window,t,n-s,i,a.wnext),(s-=i)?(r.arraySet(a.window,t,n-s,s,0),a.wnext=s,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}n.inflateReset=h,n.inflateReset2=f,n.inflateResetKeep=d,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,u,d,h,f,p,m,g,b,w,x,k,_,S,j,N,T,E,C,I,A,M,O,R,D=0,P=new r.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,d=e.output,m=e.avail_out,h=e.next_in,u=e.input,p=e.avail_in,g=n.hold,b=n.bits,w=p,x=m,M=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(2&n.wrap&&35615===g){P[n.check=0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0),b=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,A=8+(15&(g>>>=4)),0===n.wbits)n.wbits=A;else if(A>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<A,e.adler=n.check=1,n.mode=512&g?10:12,b=g=0;break;case 2:for(;b<16;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(n.flags=g,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0)),b=g=0,n.mode=3;case 3:for(;b<32;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}n.head&&(n.head.time=g),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,P[2]=g>>>16&255,P[3]=g>>>24&255,n.check=i(n.check,P,4,0)),b=g=0,n.mode=4;case 4:for(;b<16;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0)),b=g=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(P[0]=255&g,P[1]=g>>>8&255,n.check=i(n.check,P,2,0)),b=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(k=n.length)&&(k=p),k&&(n.head&&(A=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,u,h,k,A)),512&n.flags&&(n.check=i(n.check,u,k,h)),p-=k,h+=k,n.length-=k),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(k=0;A=u[h+k++],n.head&&A&&n.length<65536&&(n.head.name+=String.fromCharCode(A)),A&&k<p;);if(512&n.flags&&(n.check=i(n.check,u,k,h)),p-=k,h+=k,A)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(k=0;A=u[h+k++],n.head&&A&&n.length<65536&&(n.head.comment+=String.fromCharCode(A)),A&&k<p;);if(512&n.flags&&(n.check=i(n.check,u,k,h)),p-=k,h+=k,A)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}e.adler=n.check=c(g),b=g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}switch(n.last=1&g,b-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6!==t)break;g>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,b=g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(k=n.length){if(p<k&&(k=p),m<k&&(k=m),0===k)break e;r.arraySet(d,u,h,k,f),p-=k,h+=k,m-=k,f+=k,n.length-=k;break}n.mode=12;break;case 17:for(;b<14;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(n.nlen=257+(31&g),g>>>=5,b-=5,n.ndist=1+(31&g),g>>>=5,b-=5,n.ncode=4+(15&g),g>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}n.lens[L[n.have++]]=7&g,g>>>=3,b-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},M=o(0,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,M){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=(D=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,T=65535&D,!((j=D>>>24)<=b);){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(T<16)g>>>=j,b-=j,n.lens[n.have++]=T;else{if(16===T){for(R=j+2;b<R;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(g>>>=j,b-=j,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}A=n.lens[n.have-1],k=3+(3&g),g>>>=2,b-=2}else if(17===T){for(R=j+3;b<R;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}b-=j,A=0,k=3+(7&(g>>>=j)),g>>>=3,b-=3}else{for(R=j+7;b<R;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}b-=j,A=0,k=11+(127&(g>>>=j)),g>>>=7,b-=7}if(n.have+k>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;k--;)n.lens[n.have++]=A}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,O={bits:n.lenbits},M=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,M){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},M=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,M){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=m){e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=b,a(e,x),f=e.next_out,d=e.output,m=e.avail_out,h=e.next_in,u=e.input,p=e.avail_in,g=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;N=(D=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,T=65535&D,!((j=D>>>24)<=b);){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(N&&0==(240&N)){for(E=j,C=N,I=T;N=(D=n.lencode[I+((g&(1<<E+C)-1)>>E)])>>>16&255,T=65535&D,!(E+(j=D>>>24)<=b);){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}g>>>=E,b-=E,n.back+=E}if(g>>>=j,b-=j,n.back+=j,n.length=T,0===N){n.mode=26;break}if(32&N){n.back=-1,n.mode=12;break}if(64&N){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&N,n.mode=22;case 22:if(n.extra){for(R=n.extra;b<R;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=(D=n.distcode[g&(1<<n.distbits)-1])>>>16&255,T=65535&D,!((j=D>>>24)<=b);){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(0==(240&N)){for(E=j,C=N,I=T;N=(D=n.distcode[I+((g&(1<<E+C)-1)>>E)])>>>16&255,T=65535&D,!(E+(j=D>>>24)<=b);){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}g>>>=E,b-=E,n.back+=E}if(g>>>=j,b-=j,n.back+=j,64&N){e.msg="invalid distance code",n.mode=30;break}n.offset=T,n.extra=15&N,n.mode=24;case 24:if(n.extra){for(R=n.extra;b<R;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(k=x-m,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}_=k>n.wnext?(k-=n.wnext,n.wsize-k):n.wnext-k,k>n.length&&(k=n.length),S=n.window}else S=d,_=f-n.offset,k=n.length;for(m<k&&(k=m),m-=k,n.length-=k;d[f++]=S[_++],--k;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;d[f++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===p)break e;p--,g|=u[h++]<<b,b+=8}if(x-=m,e.total_out+=x,n.total+=x,x&&(e.adler=n.check=n.flags?i(n.check,d,x,f-x):s(n.check,d,x,f-x)),x=m,(n.flags?g:c(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===p)break e;p--,g+=u[h++]<<b,b+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=g=0}n.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;default:return l}return e.next_out=f,e.avail_out=m,e.next_in=h,e.avail_in=p,n.hold=g,n.bits=b,(n.wsize||x!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,x-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,x-=e.avail_out,e.total_in+=w,e.total_out+=x,n.total+=x,n.wrap&&x&&(e.adler=n.check=n.flags?i(n.check,d,x,e.next_out-x):s(n.check,d,x,e.next_out-x)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===x||4===t)&&0===M&&(M=-5),M)},n.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?l:((n.head=t).done=!1,0):l},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&s(1,t,r,0)!==n.check?-3:y(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var r=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,u,d,h){var f,p,m,g,b,v,y,w,x,k=h.bits,_=0,S=0,j=0,N=0,T=0,E=0,C=0,I=0,A=0,M=0,O=null,R=0,D=new r.Buf16(16),P=new r.Buf16(16),L=null,F=0;for(_=0;_<=15;_++)D[_]=0;for(S=0;S<l;S++)D[t[n+S]]++;for(T=k,N=15;1<=N&&0===D[N];N--);if(N<T&&(T=N),0===N)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(j=1;j<N&&0===D[j];j++);for(T<j&&(T=j),_=I=1;_<=15;_++)if(I<<=1,(I-=D[_])<0)return-1;if(0<I&&(0===e||1!==N))return-1;for(P[1]=0,_=1;_<15;_++)P[_+1]=P[_]+D[_];for(S=0;S<l;S++)0!==t[n+S]&&(d[P[t[n+S]]++]=S);if(v=0===e?(O=L=d,19):1===e?(O=s,R-=257,L=i,F-=257,256):(O=a,L=o,-1),_=j,b=u,C=S=M=0,m=-1,g=(A=1<<(E=T))-1,1===e&&852<A||2===e&&592<A)return 1;for(;;){for(y=_-C,x=d[S]<v?(w=0,d[S]):d[S]>v?(w=L[F+d[S]],O[R+d[S]]):(w=96,0),f=1<<_-C,j=p=1<<E;c[b+(M>>C)+(p-=f)]=y<<24|w<<16|x,0!==p;);for(f=1<<_-1;M&f;)f>>=1;if(0!==f?(M&=f-1,M+=f):M=0,S++,0==--D[_]){if(_===N)break;_=t[n+d[S]]}if(T<_&&(M&g)!==m){for(0===C&&(C=T),b+=j,I=1<<(E=_-C);E+C<N&&!((I-=D[E+C])<=0);)E++,I<<=1;if(A+=1<<E,1===e&&852<A||2===e&&592<A)return 1;c[m=M&g]=T<<24|E<<16|b-u}}return 0!==M&&(c[b+M]=_-C<<24|64<<16),h.bits=T,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var r=e("../utils/common");function s(e){for(var t=e.length;0<=--t;)e[t]=0}var i=256,a=286,o=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);s(f);var p=new Array(60);s(p);var m=new Array(512);s(m);var g=new Array(256);s(g);var b=new Array(29);s(b);var v,y,w,x=new Array(o);function k(e,t,n,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function S(e){return e<256?m[e]:m[256+(e>>>7)]}function j(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function N(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,j(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function T(e,t,n){N(e,n[2*t],n[2*t+1])}function E(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function C(e,t,n){var r,s,i=new Array(16),a=0;for(r=1;r<=l;r++)i[r]=a=a+n[r-1]<<1;for(s=0;s<=t;s++){var o=e[2*s+1];0!==o&&(e[2*s]=E(i[o]++,o))}}function I(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){8<e.bi_valid?j(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function M(e,t,n,r){var s=2*t,i=2*n;return e[s]<e[i]||e[s]===e[i]&&r[t]<=r[n]}function O(e,t,n){for(var r=e.heap[n],s=n<<1;s<=e.heap_len&&(s<e.heap_len&&M(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!M(t,r,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=r}function R(e,t,n){var r,s,a,o,l=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],s=e.pending_buf[e.l_buf+l],l++,0===r?T(e,s,t):(T(e,(a=g[s])+i+1,t),0!==(o=c[a])&&N(e,s-=b[a],o),T(e,a=S(--r),n),0!==(o=u[a])&&N(e,r-=x[a],o)),l<e.last_lit;);T(e,256,t)}function D(e,t){var n,r,s,i=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(s=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[s]=0,e.opt_len--,o&&(e.static_len-=a[2*s+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)O(e,i,n);for(s=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],O(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*s]=i[2*n]+i[2*r],e.depth[s]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=s,e.heap[1]=s++,O(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,s,i,a,o,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(i=0;i<=l;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)m<(i=c[2*c[2*(r=e.heap[n])+1]+1]+1)&&(i=m,g++),c[2*r+1]=i,u<r||(e.bl_count[i]++,a=0,p<=r&&(a=f[r-p]),o=c[2*r],e.opt_len+=o*(i+a),h&&(e.static_len+=o*(d[2*r+1]+a)));if(0!==g){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,g-=2}while(0<g);for(i=m;0!==i;i--)for(r=e.bl_count[i];0!==r;)u<(s=e.heap[--n])||(c[2*s+1]!==i&&(e.opt_len+=(i-c[2*s+1])*c[2*s],c[2*s+1]=i),r--)}}(e,t),C(i,u,e.bl_count)}function P(e,t,n){var r,s,i=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)s=a,a=t[2*(r+1)+1],++o<l&&s===a||(o<c?e.bl_tree[2*s]+=o:0!==s?(s!==i&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=s,c=(o=0)===a?(l=138,3):s===a?(l=6,3):(l=7,4))}function L(e,t,n){var r,s,i=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(s=a,a=t[2*(r+1)+1],!(++o<l&&s===a)){if(o<c)for(;T(e,s,e.bl_tree),0!=--o;);else 0!==s?(s!==i&&(T(e,s,e.bl_tree),o--),T(e,16,e.bl_tree),N(e,o-3,2)):o<=10?(T(e,17,e.bl_tree),N(e,o-3,3)):(T(e,18,e.bl_tree),N(e,o-11,7));i=s,c=(o=0)===a?(l=138,3):s===a?(l=6,3):(l=7,4)}}s(x);var F=!1;function B(e,t,n,s){N(e,0+(s?1:0),3),function(e,t,n){A(e),j(e,n),j(e,~n),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){F||(function(){var e,t,n,r,s,i=new Array(16);for(r=n=0;r<28;r++)for(b[r]=n,e=0;e<1<<c[r];e++)g[n++]=r;for(g[n-1]=r,r=s=0;r<16;r++)for(x[r]=s,e=0;e<1<<u[r];e++)m[s++]=r;for(s>>=7;r<o;r++)for(x[r]=s<<7,e=0;e<1<<u[r]-7;e++)m[256+s++]=r;for(t=0;t<=l;t++)i[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,i[8]++;for(;e<=255;)f[2*e+1]=9,e++,i[9]++;for(;e<=279;)f[2*e+1]=7,e++,i[7]++;for(;e<=287;)f[2*e+1]=8,e++,i[8]++;for(C(f,287,i),e=0;e<o;e++)p[2*e+1]=5,p[2*e]=E(e,5);v=new k(f,c,257,a,l),y=new k(p,u,0,o,l),w=new k(new Array(0),d,0,19,7)}(),F=!0),e.l_desc=new _(e.dyn_ltree,v),e.d_desc=new _(e.dyn_dtree,y),e.bl_desc=new _(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,I(e)},n._tr_stored_block=B,n._tr_flush_block=function(e,t,n,r){var s,a,o=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),D(e,e.l_desc),D(e,e.d_desc),o=function(e){var t;for(P(e,e.dyn_ltree,e.l_desc.max_code),P(e,e.dyn_dtree,e.d_desc.max_code),D(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==t?B(e,t,n,r):4===e.strategy||a===s?(N(e,2+(r?1:0),3),R(e,f,p)):(N(e,4+(r?1:0),3),function(e,t,n,r){var s;for(N(e,t-257,5),N(e,n-1,5),N(e,r-4,4),s=0;s<r;s++)N(e,e.bl_tree[2*h[s]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),R(e,e.dyn_ltree,e.dyn_dtree)),I(e),r&&A(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(g[n]+i+1)]++,e.dyn_dtree[2*S(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){N(e,2,3),T(e,256,f),function(e){16===e.bi_valid?(j(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e){if(!e.setImmediate){var t,r,s,i,a=1,o={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,t="[object process]"==={}.toString.call(e.process)?function(e){n.nextTick(function(){h(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){s.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var s={callback:e,args:n};return o[a]=s,t(a),a++},u.clearImmediate=d}function d(e){delete o[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=o[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),l=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==s?s:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],e("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(e,t,r){(function(e){(function(){"use strict";var n=/[\\^$.*+?()[\]{}|]/g,r=RegExp(n.source),s="object"==typeof e&&e&&e.Object===Object&&e,i="object"==typeof self&&self&&self.Object===Object&&self,a=s||i||Function("return this")(),o=Object.prototype.toString,l=a.Symbol,c=l?l.prototype:void 0,u=c?c.toString:void 0;function d(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==o.call(e)}(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}t.exports=function(e){var t;return(e=null==(t=e)?"":d(t))&&r.test(e)?e.replace(n,"\\$&"):e}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],443:[function(e,t,r){(function(e){(function(){"use strict";var n="[object Arguments]",s="[object Map]",i="[object Object]",a="[object Set]",o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,c=/^\./,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[n]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p[s]=p["[object Number]"]=p[i]=p["[object RegExp]"]=p[a]=p["[object String]"]=p["[object WeakMap]"]=!1;var m="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,b=m||g||Function("return this")(),v="object"==typeof r&&r&&!r.nodeType&&r,y=v&&"object"==typeof t&&t&&!t.nodeType&&t,w=y&&y.exports===v&&m.process,x=function(){try{return w&&w.binding("util")}catch(e){}}(),k=x&&x.isTypedArray;function _(e,t,n,r){for(var s=-1,i=e?e.length:0;++s<i;){var a=e[s];t(r,a,n(a),e)}return r}function S(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function j(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function N(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function T(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var E,C,I,A=Array.prototype,M=Function.prototype,O=Object.prototype,R=b["__core-js_shared__"],D=(E=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",P=M.toString,L=O.hasOwnProperty,F=O.toString,B=RegExp("^"+P.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=b.Symbol,z=b.Uint8Array,V=O.propertyIsEnumerable,H=A.splice,W=(C=Object.keys,I=Object,function(e){return C(I(e))}),q=Ne(b,"DataView"),K=Ne(b,"Map"),G=Ne(b,"Promise"),$=Ne(b,"Set"),X=Ne(b,"WeakMap"),Y=Ne(Object,"create"),Q=Re(q),J=Re(K),Z=Re(G),ee=Re($),te=Re(X),ne=U?U.prototype:void 0,re=ne?ne.valueOf:void 0,se=ne?ne.toString:void 0;function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function le(e){var t=-1,n=e?e.length:0;for(this.__data__=new oe;++t<n;)this.add(e[t])}function ce(e){this.__data__=new ae(e)}function ue(e,t){var n=ze(e)||Ue(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,s=!!r;for(var i in e)!t&&!L.call(e,i)||s&&("length"==i||Ee(i,r))||n.push(i);return n}function de(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}function he(e,t,n,r){return me(e,function(e,s,i){t(r,e,n(e),i)}),r}ie.prototype.clear=function(){this.__data__=Y?Y(null):{}},ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ie.prototype.get=function(e){var t=this.__data__;if(Y){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return L.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:L.call(t,e)},ie.prototype.set=function(e,t){return this.__data__[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this},ae.prototype.clear=function(){this.__data__=[]},ae.prototype.delete=function(e){var t=this.__data__,n=de(t,e);return!(n<0)&&(n==t.length-1?t.pop():H.call(t,n,1),!0)},ae.prototype.get=function(e){var t=this.__data__,n=de(t,e);return n<0?void 0:t[n][1]},ae.prototype.has=function(e){return de(this.__data__,e)>-1},ae.prototype.set=function(e,t){var n=this.__data__,r=de(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},oe.prototype.clear=function(){this.__data__={hash:new ie,map:new(K||ae),string:new ie}},oe.prototype.delete=function(e){return je(this,e).delete(e)},oe.prototype.get=function(e){return je(this,e).get(e)},oe.prototype.has=function(e){return je(this,e).has(e)},oe.prototype.set=function(e,t){return je(this,e).set(e,t),this},le.prototype.add=le.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},le.prototype.has=function(e){return this.__data__.has(e)},ce.prototype.clear=function(){this.__data__=new ae},ce.prototype.delete=function(e){return this.__data__.delete(e)},ce.prototype.get=function(e){return this.__data__.get(e)},ce.prototype.has=function(e){return this.__data__.has(e)},ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ae){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this;n=this.__data__=new oe(r)}return n.set(e,t),this};var fe,pe,me=(fe=function(e,t){return e&&ge(e,t,Xe)},function(e,t){if(null==e)return e;if(!Ve(e))return fe(e,t);for(var n=e.length,r=pe?n:-1,s=Object(e);(pe?r--:++r<n)&&!1!==t(s[r],r,s););return e}),ge=function(e){return function(t,n,r){for(var s=-1,i=Object(t),a=r(t),o=a.length;o--;){var l=a[e?o:++s];if(!1===n(i[l],l,i))break}return t}}();function be(e,t){for(var n=0,r=(t=Ce(t,e)?[t]:_e(t)).length;null!=e&&n<r;)e=e[Oe(t[n++])];return n&&n==r?e:void 0}function ve(e,t){return null!=e&&t in Object(e)}function ye(e,t,r,o,l){return e===t||(null==e||null==t||!qe(e)&&!Ke(t)?e!=e&&t!=t:function(e,t,r,o,l,c){var u=ze(e),d=ze(t),h="[object Array]",f="[object Array]";u||(h=(h=Te(e))==n?i:h),d||(f=(f=Te(t))==n?i:f);var p=h==i&&!j(e),m=f==i&&!j(t),g=h==f;if(g&&!p)return c||(c=new ce),u||$e(e)?Se(e,t,r,o,l,c):function(e,t,n,r,i,o,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new z(e),new z(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case s:var c=N;case a:var u=2&o;if(c||(c=T),e.size!=t.size&&!u)return!1;var d=l.get(e);if(d)return d==t;o|=1,l.set(e,t);var h=Se(c(e),c(t),r,i,o,l);return l.delete(e),h;case"[object Symbol]":if(re)return re.call(e)==re.call(t)}return!1}(e,t,h,r,o,l,c);if(!(2&l)){var b=p&&L.call(e,"__wrapped__"),v=m&&L.call(t,"__wrapped__");if(b||v){var y=b?e.value():e,w=v?t.value():t;return c||(c=new ce),r(y,w,o,l,c)}}return!!g&&(c||(c=new ce),function(e,t,n,r,s,i){var a=2&s,o=Xe(e),l=o.length;if(l!=Xe(t).length&&!a)return!1;for(var c=l;c--;){var u=o[c];if(!(a?u in t:L.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var h=!0;i.set(e,t),i.set(t,e);for(var f=a;++c<l;){var p=e[u=o[c]],m=t[u];if(r)var g=a?r(m,p,u,t,e,i):r(p,m,u,e,t,i);if(!(void 0===g?p===m||n(p,m,r,s,i):g)){h=!1;break}f||(f="constructor"==u)}if(h&&!f){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,o,l,c))}(e,t,ye,r,o,l))}function we(e){return!(!qe(e)||function(e){return!!D&&D in e}(e))&&(He(e)||j(e)?B:h).test(Re(e))}function xe(e){return"function"==typeof e?e:null==e?Ye:"object"==typeof e?ze(e)?function(e,t){return Ce(e)&&Ie(t)?Ae(Oe(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:be(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?function(e,t){return null!=e&&function(e,t,n){for(var r,s=-1,i=(t=Ce(t,e)?[t]:_e(t)).length;++s<i;){var a=Oe(t[s]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(i=e?e.length:0)&&We(i)&&Ee(a,i)&&(ze(e)||Ue(e))}(e,t,ve)}(n,e):ye(t,r,void 0,3)}}(e[0],e[1]):function(e){var t=function(e){for(var t=Xe(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,Ie(s)]}return t}(e);return 1==t.length&&t[0][2]?Ae(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var s=n.length,i=s,a=!r;if(null==e)return!i;for(e=Object(e);s--;){var o=n[s];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++s<i;){var l=(o=n[s])[0],c=e[l],u=o[1];if(a&&o[2]){if(void 0===c&&!(l in e))return!1}else{var d=new ce;if(r)var h=r(c,u,l,e,t,d);if(!(void 0===h?ye(u,c,r,3,d):h))return!1}}return!0}(n,e,t)}}(e):Ce(t=e)?(n=Oe(t),function(e){return null==e?void 0:e[n]}):function(e){return function(t){return be(t,e)}}(t);var t,n}function ke(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||O))return W(e);var t,n,r=[];for(var s in Object(e))L.call(e,s)&&"constructor"!=s&&r.push(s);return r}function _e(e){return ze(e)?e:Me(e)}function Se(e,t,n,r,s,i){var a=2&s,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var u=-1,d=!0,h=1&s?new le:void 0;for(i.set(e,t),i.set(t,e);++u<o;){var f=e[u],p=t[u];if(r)var m=a?r(p,f,u,t,e,i):r(f,p,u,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!S(t,function(e,t){if(!h.has(t)&&(f===e||n(f,e,r,s,i)))return h.add(t)})){d=!1;break}}else if(f!==p&&!n(f,p,r,s,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function je(e,t){var n,r,s=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof t?"string":"hash"]:s.map}function Ne(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return we(n)?n:void 0}var Te=function(e){return F.call(e)};function Ee(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function Ce(e,t){if(ze(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ge(e))||l.test(e)||!o.test(e)||null!=t&&e in Object(t)}function Ie(e){return e==e&&!qe(e)}function Ae(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}(q&&"[object DataView]"!=Te(new q(new ArrayBuffer(1)))||K&&Te(new K)!=s||G&&"[object Promise]"!=Te(G.resolve())||$&&Te(new $)!=a||X&&"[object WeakMap]"!=Te(new X))&&(Te=function(e){var t=F.call(e),n=t==i?e.constructor:void 0,r=n?Re(n):void 0;if(r)switch(r){case Q:return"[object DataView]";case J:return s;case Z:return"[object Promise]";case ee:return a;case te:return"[object WeakMap]"}return t});var Me=Fe(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(Ge(e))return se?se.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return c.test(e)&&n.push(""),e.replace(u,function(e,t,r,s){n.push(r?s.replace(d,"$1"):t||e)}),n});function Oe(e){if("string"==typeof e||Ge(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Re(e){if(null!=e){try{return P.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var De,Pe,Le=(De=function(e,t,n){L.call(e,n)?e[n].push(t):e[n]=[t]},function(e,t){var n=ze(e)?_:he,r=Pe?Pe():{};return n(e,De,xe(t),r)});function Fe(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var a=e.apply(this,r);return n.cache=i.set(s,a),a};return n.cache=new(Fe.Cache||oe),n}function Be(e,t){return e===t||e!=e&&t!=t}function Ue(e){return function(e){return Ke(e)&&Ve(e)}(e)&&L.call(e,"callee")&&(!V.call(e,"callee")||F.call(e)==n)}Fe.Cache=oe;var ze=Array.isArray;function Ve(e){return null!=e&&We(e.length)&&!He(e)}function He(e){var t=qe(e)?F.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function We(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function qe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ke(e){return!!e&&"object"==typeof e}function Ge(e){return"symbol"==typeof e||Ke(e)&&"[object Symbol]"==F.call(e)}var $e=k?function(e){return function(t){return e(t)}}(k):function(e){return Ke(e)&&We(e.length)&&!!p[F.call(e)]};function Xe(e){return Ve(e)?ue(e):ke(e)}function Ye(e){return e}t.exports=Le}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],444:[function(e,t,n){"use strict";var r=Object.prototype.toString;t.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==r.call(e)}},{}],445:[function(e,t,r){(function(e){(function(){"use strict";var n="[object Arguments]",s="[object Map]",i="[object Object]",a="[object Set]",o=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[n]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[s]=c["[object Number]"]=c[i]=c["[object RegExp]"]=c[a]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),f="object"==typeof r&&r&&!r.nodeType&&r,p=f&&"object"==typeof t&&t&&!t.nodeType&&t,m=p&&p.exports===f,g=m&&u.process,b=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),v=b&&b.isTypedArray;function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function w(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function x(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var k,_,S,j=Array.prototype,N=Function.prototype,T=Object.prototype,E=h["__core-js_shared__"],C=N.toString,I=T.hasOwnProperty,A=(k=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"",M=T.toString,O=RegExp("^"+C.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=m?h.Buffer:void 0,D=h.Symbol,P=h.Uint8Array,L=T.propertyIsEnumerable,F=j.splice,B=D?D.toStringTag:void 0,U=Object.getOwnPropertySymbols,z=R?R.isBuffer:void 0,V=(_=Object.keys,S=Object,function(e){return _(S(e))}),H=be(h,"DataView"),W=be(h,"Map"),q=be(h,"Promise"),K=be(h,"Set"),G=be(h,"WeakMap"),$=be(Object,"create"),X=xe(H),Y=xe(W),Q=xe(q),J=xe(K),Z=xe(G),ee=D?D.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new se;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function oe(e,t){var n=Se(e),r=!n&&_e(e),s=!n&&!r&&je(e),i=!n&&!r&&!s&&Ie(e),a=n||r||s||i,o=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=o.length;for(var c in e)!t&&!I.call(e,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||we(c,l))||o.push(c);return o}function le(e,t){for(var n=e.length;n--;)if(ke(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":B&&B in Object(e)?function(e){var t=I.call(e,B),n=e[B];try{e[B]=void 0;var r=!0}catch(e){}var s=M.call(e);return r&&(t?e[B]=n:delete e[B]),s}(e):function(e){return M.call(e)}(e)}function ue(e){return Ce(e)&&ce(e)==n}function de(e,t,r,o,l){return e===t||(null==e||null==t||!Ce(e)&&!Ce(t)?e!=e&&t!=t:function(e,t,r,o,l,c){var u=Se(e),d=Se(t),h=u?"[object Array]":ye(e),f=d?"[object Array]":ye(t),p=(h=h==n?i:h)==i,m=(f=f==n?i:f)==i,g=h==f;if(g&&je(e)){if(!je(t))return!1;u=!0,p=!1}if(g&&!p)return c||(c=new ae),u||Ie(e)?pe(e,t,r,o,l,c):function(e,t,n,r,i,o,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new P(e),new P(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ke(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case s:var c=w;case a:var u=1&r;if(c||(c=x),e.size!=t.size&&!u)return!1;var d=l.get(e);if(d)return d==t;r|=2,l.set(e,t);var h=pe(c(e),c(t),r,i,o,l);return l.delete(e),h;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,h,r,o,l,c);if(!(1&r)){var b=p&&I.call(e,"__wrapped__"),v=m&&I.call(t,"__wrapped__");if(b||v){var y=b?e.value():e,k=v?t.value():t;return c||(c=new ae),l(y,k,r,o,c)}}return!!g&&(c||(c=new ae),function(e,t,n,r,s,i){var a=1&n,o=me(e),l=o.length;if(l!=me(t).length&&!a)return!1;for(var c=l;c--;){var u=o[c];if(!(a?u in t:I.call(t,u)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var h=!0;i.set(e,t),i.set(t,e);for(var f=a;++c<l;){var p=e[u=o[c]],m=t[u];if(r)var g=a?r(m,p,u,t,e,i):r(p,m,u,e,t,i);if(!(void 0===g?p===m||s(p,m,n,r,i):g)){h=!1;break}f||(f="constructor"==u)}if(h&&!f){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(h=!1)}return i.delete(e),i.delete(t),h}(e,t,r,o,l,c))}(e,t,r,o,de,l))}function he(e){return!(!Ee(e)||function(e){return!!A&&A in e}(e))&&(Ne(e)?O:o).test(xe(e))}function fe(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||T))return V(e);var t,n,r=[];for(var s in Object(e))I.call(e,s)&&"constructor"!=s&&r.push(s);return r}function pe(e,t,n,r,s,i){var a=1&n,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var u=-1,d=!0,h=2&n?new ie:void 0;for(i.set(e,t),i.set(t,e);++u<o;){var f=e[u],p=t[u];if(r)var m=a?r(p,f,u,t,e,i):r(f,p,u,e,t,i);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!y(t,function(e,t){if(a=t,!h.has(a)&&(f===e||s(f,e,n,r,i)))return h.push(t);var a})){d=!1;break}}else if(f!==p&&!s(f,p,n,r,i)){d=!1;break}}return i.delete(e),i.delete(t),d}function me(e){return function(e,t,n){var r=t(e);return Se(e)?r:function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e}(r,n(e))}(e,Ae,ve)}function ge(e,t){var n,r,s=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof t?"string":"hash"]:s.map}function be(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}ne.prototype.clear=function(){this.__data__=$?$(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if($){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return I.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return $?void 0!==t[e]:I.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():F.call(t,n,1),--this.size,!0)},re.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return le(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=le(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},se.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(W||re),string:new ne}},se.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},se.prototype.get=function(e){return ge(this,e).get(e)},se.prototype.has=function(e){return ge(this,e).has(e)},se.prototype.set=function(e,t){var n=ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ie.prototype.add=ie.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ie.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!W||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new se(r)}return n.set(e,t),this.size=n.size,this};var ve=U?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,s=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[s++]=a)}return i}(U(e),function(t){return L.call(e,t)}))}:function(){return[]},ye=ce;function we(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function xe(e){if(null!=e){try{return C.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ke(e,t){return e===t||e!=e&&t!=t}(H&&"[object DataView]"!=ye(new H(new ArrayBuffer(1)))||W&&ye(new W)!=s||q&&"[object Promise]"!=ye(q.resolve())||K&&ye(new K)!=a||G&&"[object WeakMap]"!=ye(new G))&&(ye=function(e){var t=ce(e),n=t==i?e.constructor:void 0,r=n?xe(n):"";if(r)switch(r){case X:return"[object DataView]";case Y:return s;case Q:return"[object Promise]";case J:return a;case Z:return"[object WeakMap]"}return t});var _e=ue(function(){return arguments}())?ue:function(e){return Ce(e)&&I.call(e,"callee")&&!L.call(e,"callee")},Se=Array.isArray,je=z||function(){return!1};function Ne(e){if(!Ee(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ce(e){return null!=e&&"object"==typeof e}var Ie=v?function(e){return function(t){return e(t)}}(v):function(e){return Ce(e)&&Te(e.length)&&!!c[ce(e)]};function Ae(e){return null!=(t=e)&&Te(t.length)&&!Ne(t)?oe(e):fe(e);var t}t.exports=function(e,t){return de(e,t)}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],446:[function(e,t,r){(function(e){(function(){"use strict";var n="object"==typeof e&&e&&e.Object===Object&&e,r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")(),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,l=s.Symbol,c=l?l.toStringTag:void 0;function u(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=a.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var s=o.call(e);return r&&(t?e[c]=n:delete e[c]),s}(e):function(e){return o.call(e)}(e)}t.exports=function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=u(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],447:[function(e,t,n){"use strict";t.exports=function(e){return null==e}},{}],448:[function(e,t,n){"use strict";t.exports=function(e){return void 0===e}},{}],449:[function(e,t,r){(function(e){(function(){"use strict";var n=/^\[object .+?Constructor\]$/,r="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,i=r||s||Function("return this")();function a(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var s=e.length,i=n+(r?1:-1);r?i--:++i<s;)if(t(e[i],i,e))return i;return-1}(e,l,n);for(var r=n-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function o(e,t,n){for(var r=-1,s=e?e.length:0;++r<s;)if(n(t,e[r]))return!0;return!1}function l(e){return e!=e}function c(e,t){return e.has(t)}function u(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var d,h=Array.prototype,f=Function.prototype,p=Object.prototype,m=i["__core-js_shared__"],g=(d=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",b=f.toString,v=p.hasOwnProperty,y=p.toString,w=RegExp("^"+b.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=h.splice,k=O(i,"Map"),_=O(i,"Set"),S=O(Object,"create");function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e){var t=-1,n=e?e.length:0;for(this.__data__=new T;++t<n;)this.add(e[t])}function C(e,t){for(var n,r,s=e.length;s--;)if((n=e[s][0])===(r=t)||n!=n&&r!=r)return s;return-1}function I(e){return!(!R(e)||(t=e,g&&g in t))&&(function(e){var t=R(e)?y.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?w:n).test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}j.prototype.clear=function(){this.__data__=S?S(null):{}},j.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},j.prototype.get=function(e){var t=this.__data__;if(S){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return v.call(t,e)?t[e]:void 0},j.prototype.has=function(e){var t=this.__data__;return S?void 0!==t[e]:v.call(t,e)},j.prototype.set=function(e,t){return this.__data__[e]=S&&void 0===t?"__lodash_hash_undefined__":t,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(e){var t=this.__data__,n=C(t,e);return!(n<0)&&(n==t.length-1?t.pop():x.call(t,n,1),!0)},N.prototype.get=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]},N.prototype.has=function(e){return C(this.__data__,e)>-1},N.prototype.set=function(e,t){var n=this.__data__,r=C(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},T.prototype.clear=function(){this.__data__={hash:new j,map:new(k||N),string:new j}},T.prototype.delete=function(e){return M(this,e).delete(e)},T.prototype.get=function(e){return M(this,e).get(e)},T.prototype.has=function(e){return M(this,e).has(e)},T.prototype.set=function(e,t){return M(this,e).set(e,t),this},E.prototype.add=E.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},E.prototype.has=function(e){return this.__data__.has(e)};var A=_&&1/u(new _([,-0]))[1]==1/0?function(e){return new _(e)}:function(){};function M(e,t){var n,r,s=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof t?"string":"hash"]:s.map}function O(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return I(n)?n:void 0}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=function(e){return e&&e.length?function(e,t,n){var r=-1,s=a,i=e.length,l=!0,d=[],h=d;if(n)l=!1,s=o;else if(i>=200){var f=t?null:A(e);if(f)return u(f);l=!1,s=c,h=new E}else h=t?[]:d;e:for(;++r<i;){var p=e[r],m=t?t(p):p;if(p=n||0!==p?p:0,l&&m==m){for(var g=h.length;g--;)if(h[g]===m)continue e;t&&h.push(m),d.push(p)}else s(h,m,n)||(h!==d&&h.push(m),d.push(p))}return d}(e):[]}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],450:[function(e,t,n){"use strict";var r=e("inherits"),s=e("hash-base"),i=e("safe-buffer").Buffer,a=new Array(16);function o(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function l(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,s,i,a){return l(e+(t&n|~t&r)+s+i|0,a)+t|0}function u(e,t,n,r,s,i,a){return l(e+(t&r|n&~r)+s+i|0,a)+t|0}function d(e,t,n,r,s,i,a){return l(e+(t^n^r)+s+i|0,a)+t|0}function h(e,t,n,r,s,i,a){return l(e+(n^(t|~r))+s+i|0,a)+t|0}r(o,s),o.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,s=this._c,i=this._d;n=c(n,r,s,i,e[0],3614090360,7),i=c(i,n,r,s,e[1],3905402710,12),s=c(s,i,n,r,e[2],606105819,17),r=c(r,s,i,n,e[3],3250441966,22),n=c(n,r,s,i,e[4],4118548399,7),i=c(i,n,r,s,e[5],1200080426,12),s=c(s,i,n,r,e[6],2821735955,17),r=c(r,s,i,n,e[7],4249261313,22),n=c(n,r,s,i,e[8],1770035416,7),i=c(i,n,r,s,e[9],2336552879,12),s=c(s,i,n,r,e[10],4294925233,17),r=c(r,s,i,n,e[11],2304563134,22),n=c(n,r,s,i,e[12],1804603682,7),i=c(i,n,r,s,e[13],4254626195,12),s=c(s,i,n,r,e[14],2792965006,17),n=u(n,r=c(r,s,i,n,e[15],1236535329,22),s,i,e[1],4129170786,5),i=u(i,n,r,s,e[6],3225465664,9),s=u(s,i,n,r,e[11],643717713,14),r=u(r,s,i,n,e[0],3921069994,20),n=u(n,r,s,i,e[5],3593408605,5),i=u(i,n,r,s,e[10],38016083,9),s=u(s,i,n,r,e[15],3634488961,14),r=u(r,s,i,n,e[4],3889429448,20),n=u(n,r,s,i,e[9],568446438,5),i=u(i,n,r,s,e[14],3275163606,9),s=u(s,i,n,r,e[3],4107603335,14),r=u(r,s,i,n,e[8],1163531501,20),n=u(n,r,s,i,e[13],2850285829,5),i=u(i,n,r,s,e[2],4243563512,9),s=u(s,i,n,r,e[7],1735328473,14),n=d(n,r=u(r,s,i,n,e[12],2368359562,20),s,i,e[5],4294588738,4),i=d(i,n,r,s,e[8],2272392833,11),s=d(s,i,n,r,e[11],1839030562,16),r=d(r,s,i,n,e[14],4259657740,23),n=d(n,r,s,i,e[1],2763975236,4),i=d(i,n,r,s,e[4],1272893353,11),s=d(s,i,n,r,e[7],4139469664,16),r=d(r,s,i,n,e[10],3200236656,23),n=d(n,r,s,i,e[13],681279174,4),i=d(i,n,r,s,e[0],3936430074,11),s=d(s,i,n,r,e[3],3572445317,16),r=d(r,s,i,n,e[6],76029189,23),n=d(n,r,s,i,e[9],3654602809,4),i=d(i,n,r,s,e[12],3873151461,11),s=d(s,i,n,r,e[15],530742520,16),n=h(n,r=d(r,s,i,n,e[2],3299628645,23),s,i,e[0],4096336452,6),i=h(i,n,r,s,e[7],1126891415,10),s=h(s,i,n,r,e[14],2878612391,15),r=h(r,s,i,n,e[5],4237533241,21),n=h(n,r,s,i,e[12],1700485571,6),i=h(i,n,r,s,e[3],2399980690,10),s=h(s,i,n,r,e[10],4293915773,15),r=h(r,s,i,n,e[1],2240044497,21),n=h(n,r,s,i,e[8],1873313359,6),i=h(i,n,r,s,e[15],4264355552,10),s=h(s,i,n,r,e[6],2734768916,15),r=h(r,s,i,n,e[13],1309151649,21),n=h(n,r,s,i,e[4],4149444226,6),i=h(i,n,r,s,e[11],3174756917,10),s=h(s,i,n,r,e[2],718787259,15),r=h(r,s,i,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+s|0,this._d=this._d+i|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=o},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("brorand");function i(e){this.rand=e||new s.Rand}t.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var s=new r(this.rand.generate(n))}while(s.cmp(e)>=0);return s},i.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},i.prototype.test=function(e,t,n){var s=e.bitLength(),i=r.mont(e),a=new r(1).toRed(i);t||(t=Math.max(1,s/48|0));for(var o=e.subn(1),l=0;!o.testn(l);l++);for(var c=e.shrn(l),u=o.toRed(i);t>0;t--){var d=this._randrange(new r(2),o);n&&n(d);var h=d.toRed(i).redPow(c);if(0!==h.cmp(a)&&0!==h.cmp(u)){for(var f=1;f<l;f++){if(0===(h=h.redSqr()).cmp(a))return!1;if(0===h.cmp(u))break}if(f===l)return!1}}return!0},i.prototype.getDivisor=function(e,t){var n=e.bitLength(),s=r.mont(e),i=new r(1).toRed(s);t||(t=Math.max(1,n/48|0));for(var a=e.subn(1),o=0;!a.testn(o);o++);for(var l=e.shrn(o),c=a.toRed(s);t>0;t--){var u=this._randrange(new r(2),a),d=e.gcd(u);if(0!==d.cmpn(1))return d;var h=u.toRed(s).redPow(l);if(0!==h.cmp(i)&&0!==h.cmp(c)){for(var f=1;f<o;f++){if(0===(h=h.redSqr()).cmp(i))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(c))break}if(f===o)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},{"bn.js":452,brorand:187}],452:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],453:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=r,r.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},{}],454:[function(e,t,n){"use strict";var r=n;function s(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16));else for(r=0;r<e.length;r++){var s=e.charCodeAt(r),i=s>>8,a=255&s;i?n.push(i,a):n.push(a)}return n},r.zero2=s,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},{}],455:[function(e,t,n){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(e,t,n){"use strict";var r=e("asn1.js");n.certificate=e("./certificate");var s=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});n.RSAPrivateKey=s;var i=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});n.RSAPublicKey=i;var a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});n.PublicKey=a;var o=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())});n.PrivateKey=l;var c=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});n.EncryptedPrivateKey=c;var u=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});n.DSAPrivateKey=u,n.DSAparam=r.define("DSAparam",function(){this.int()});var d=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=d;var h=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});n.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(e,t,n){"use strict";var r=e("asn1.js"),s=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),i=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),o=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),l=r.define("RelativeDistinguishedName",function(){this.setof(i)}),c=r.define("RDNSequence",function(){this.seqof(l)}),u=r.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),d=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(s),this.key("notAfter").use(s))}),h=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(u),this.key("validity").use(d),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())}),p=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=p},{"asn1.js":170}],458:[function(e,t,n){"use strict";var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=e("evp_bytestokey"),o=e("browserify-aes"),l=e("safe-buffer").Buffer;t.exports=function(e,t){var n,c=e.toString(),u=c.match(r);if(u){var d="aes"+u[1],h=l.from(u[2],"hex"),f=l.from(u[3].replace(/[\r\n]/g,""),"base64"),p=a(t,h.slice(0,8),parseInt(u[1],10)).key,m=[],g=o.createDecipheriv(d,p,h);m.push(g.update(f)),m.push(g.final()),n=l.concat(m)}else{var b=c.match(i);n=l.from(b[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(s)[1],data:n}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(e,t,n){"use strict";var r=e("./asn1"),s=e("./aesid.json"),i=e("./fixProc"),a=e("browserify-aes"),o=e("pbkdf2"),l=e("safe-buffer").Buffer;function c(e){var t;"object"!=typeof e||l.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=l.from(e));var n,c,u=i(e,t),d=u.tag,h=u.data;switch(d){case"CERTIFICATE":c=r.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(h,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=s[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(i.split("-")[1],10)/8,h=o.pbkdf2Sync(t,n,r,d,"sha1"),f=a.createDecipheriv(i,h,c),p=[];return p.push(f.update(u)),p.push(f.final()),l.concat(p)}(h=r.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(n=(c=r.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=r.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+d)}}t.exports=c,c.signature=r.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(e,t,n){"use strict";n.pbkdf2=e("./lib/async"),n.pbkdf2Sync=e("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(e,t,r){(function(n){(function(){"use strict";var r,s,i=e("safe-buffer").Buffer,a=e("./precondition"),o=e("./default-encoding"),l=e("./sync"),c=e("./to-buffer"),u=n.crypto&&n.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function f(){return s||(s=n.process&&n.process.nextTick?n.process.nextTick:n.queueMicrotask?n.queueMicrotask:n.setImmediate?n.setImmediate:n.setTimeout)}function p(e,t,n,r,s){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:s}},e,r<<3)}).then(function(e){return i.from(e)})}t.exports=function(e,t,s,m,g,b){"function"==typeof g&&(b=g,g=void 0);var v=d[(g=g||"sha1").toLowerCase()];if(v&&"function"==typeof n.Promise){if(a(s,m),e=c(e,o,"Password"),t=c(t,o,"Salt"),"function"!=typeof b)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then(function(e){f()(function(){t(null,e)})},function(e){f()(function(){t(e)})})}(function(e){if(n.process&&!n.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==h[e])return h[e];var t=p(r=r||i.alloc(8),r,10,128,e).then(function(){return!0}).catch(function(){return!1});return h[e]=t,t}(v).then(function(n){return n?p(e,t,s,m,v):l(e,t,s,m,g)}),b)}else f()(function(){var n;try{n=l(e,t,s,m,g)}catch(e){return b(e)}b(null,n)})}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(e,t,r){(function(e,n){(function(){"use strict";var r;r=n.process&&n.process.browser?"utf-8":n.process&&n.process.version?parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=r}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:467}],463:[function(e,t,n){"use strict";var r=Math.pow(2,30)-1;t.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>r||t!=t)throw new TypeError("Bad key length")}},{}],464:[function(e,t,n){"use strict";var r=e("create-hash/md5"),s=e("ripemd160"),i=e("sha.js"),a=e("safe-buffer").Buffer,o=e("./precondition"),l=e("./default-encoding"),c=e("./to-buffer"),u=a.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,n){var o=function(e){function t(t){return i(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new s).update(e).digest()}:"md5"===e?r:t}(e),l="sha512"===e||"sha384"===e?128:64;t.length>l?t=o(t):t.length<l&&(t=a.concat([t,u],l));for(var c=a.allocUnsafe(l+d[e]),h=a.allocUnsafe(l+d[e]),f=0;f<l;f++)c[f]=54^t[f],h[f]=92^t[f];var p=a.allocUnsafe(l+n+4);c.copy(p,0,0,l),this.ipad1=p,this.ipad2=c,this.opad=h,this.alg=e,this.blocksize=l,this.hash=o,this.size=d[e]}h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(e,t,n,r,s){o(n,r);var i=new h(s=s||"sha1",e=c(e,l,"Password"),(t=c(t,l,"Salt")).length),u=a.allocUnsafe(r),f=a.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var p=0,m=d[s],g=Math.ceil(r/m),b=1;b<=g;b++){f.writeUInt32BE(b,t.length);for(var v=i.run(f,i.ipad1),y=v,w=1;w<n;w++){y=i.run(y,i.ipad2);for(var x=0;x<m;x++)v[x]^=y[x]}v.copy(u,p),p+=m}return u}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer;t.exports=function(e,t,n){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,t);if(ArrayBuffer.isView(e))return r.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(e,t,n){(function(e){(function(){"use strict";void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,s){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,s)});default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return e.nextTick(function(){t.apply(null,i)})}}}:t.exports=e}).call(this)}).call(this,e("_process"))},{_process:467}],467:[function(e,t,n){"use strict";var r,s,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var c,u=[],d=!1,h=-1;function f(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!d){var e=l(f);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||d||l(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],468:[function(e,t,n){"use strict";n.publicEncrypt=e("./publicEncrypt"),n.privateDecrypt=e("./privateDecrypt"),n.privateEncrypt=function(e,t){return n.publicEncrypt(e,t,!0)},n.publicDecrypt=function(e,t){return n.privateDecrypt(e,t,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(e,t,n){"use strict";var r=e("create-hash"),s=e("safe-buffer").Buffer;function i(e){var t=s.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.exports=function(e,t){for(var n,a=s.alloc(0),o=0;a.length<t;)n=i(o++),a=s.concat([a,r("sha1").update(e).update(n).digest()]);return a.slice(0,t)}},{"create-hash":386,"safe-buffer":494}],470:[function(e,t,n){arguments[4][184][0].apply(n,arguments)},{buffer:188,dup:184}],471:[function(e,t,n){"use strict";var r=e("parse-asn1"),s=e("./mgf"),i=e("./xor"),a=e("bn.js"),o=e("browserify-rsa"),l=e("create-hash"),c=e("./withPublic"),u=e("safe-buffer").Buffer;t.exports=function(e,t,n){var d;d=e.padding?e.padding:n?1:4;var h,f=r(e),p=f.modulus.byteLength();if(t.length>p||new a(t).cmp(f.modulus)>=0)throw new Error("decryption error");h=n?c(new a(t),f):o(t,f);var m=u.alloc(p-h.length);if(h=u.concat([m,h],p),4===d)return function(e,t){var n=e.modulus.byteLength(),r=l("sha1").update(u.alloc(0)).digest(),a=r.length;if(0!==t[0])throw new Error("decryption error");var o=t.slice(1,a+1),c=t.slice(a+1),d=i(o,s(c,a)),h=i(c,s(d,n-a-1));if(function(e,t){e=u.from(e),t=u.from(t);var n=0,r=e.length;e.length!==t.length&&(n++,r=Math.min(e.length,t.length));for(var s=-1;++s<r;)n+=e[s]^t[s];return n}(r,h.slice(0,a)))throw new Error("decryption error");for(var f=a;0===h[f];)f++;if(1!==h[f++])throw new Error("decryption error");return h.slice(f)}(f,h);if(1===d)return function(e,t,n){for(var r=t.slice(0,2),s=2,i=0;0!==t[s++];)if(s>=t.length){i++;break}var a=t.slice(2,s-1);if(("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&i++,a.length<8&&i++,i)throw new Error("decryption error");return t.slice(s)}(0,h,n);if(3===d)return h;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(e,t,n){"use strict";var r=e("parse-asn1"),s=e("randombytes"),i=e("create-hash"),a=e("./mgf"),o=e("./xor"),l=e("bn.js"),c=e("./withPublic"),u=e("browserify-rsa"),d=e("safe-buffer").Buffer;t.exports=function(e,t,n){var h;h=e.padding?e.padding:n?1:4;var f,p=r(e);if(4===h)f=function(e,t){var n=e.modulus.byteLength(),r=t.length,c=i("sha1").update(d.alloc(0)).digest(),u=c.length,h=2*u;if(r>n-h-2)throw new Error("message too long");var f=d.alloc(n-r-h-2),p=n-u-1,m=s(u),g=o(d.concat([c,f,d.alloc(1,1),t],p),a(m,p)),b=o(m,a(g,u));return new l(d.concat([d.alloc(1),b,g],n))}(p,t);else if(1===h)f=function(e,t,n){var r,i=t.length,a=e.modulus.byteLength();if(i>a-11)throw new Error("message too long");return r=n?d.alloc(a-i-3,255):function(e){for(var t,n=d.allocUnsafe(e),r=0,i=s(2*e),a=0;r<e;)a===i.length&&(i=s(2*e),a=0),(t=i[a++])&&(n[r++]=t);return n}(a-i-3),new l(d.concat([d.from([0,n?1:2]),r,d.alloc(1),t],a))}(p,t,n);else{if(3!==h)throw new Error("unknown padding");if((f=new l(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?u(f,p):c(f,p)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(e,t,n){"use strict";var r=e("bn.js"),s=e("safe-buffer").Buffer;t.exports=function(e,t){return s.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(e,t,n){"use strict";t.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}},{}],475:[function(e,t,r){(function(n,r){(function(){"use strict";var s=e("safe-buffer").Buffer,i=r.crypto||r.msCrypto;i&&i.getRandomValues?t.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=s.allocUnsafe(e);if(e>0)if(e>65536)for(var a=0;a<e;a+=65536)i.getRandomValues(r.slice(a,a+65536));else i.getRandomValues(r);return"function"==typeof t?n.nextTick(function(){t(null,r)}):r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:467,"safe-buffer":494}],476:[function(e,t,r){(function(t,n){(function(){"use strict";function s(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var i=e("safe-buffer"),a=e("randombytes"),o=i.Buffer,l=i.kMaxLength,c=n.crypto||n.msCrypto,u=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>u||e<0)throw new TypeError("offset must be a uint32");if(e>l||e>t)throw new RangeError("offset out of range")}function h(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>u||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>l)throw new RangeError("buffer too small")}function f(e,n,r,s){if(t.browser){var i=e.buffer,o=new Uint8Array(i,n,r);return c.getRandomValues(o),s?void t.nextTick(function(){s(null,e)}):e}if(!s)return a(r).copy(e,n),e;a(r,function(t,r){if(t)return s(t);r.copy(e,n),s(null,e)})}c&&c.getRandomValues||!t.browser?(r.randomFill=function(e,t,r,s){if(!(o.isBuffer(e)||e instanceof n.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)s=t,t=0,r=e.length;else if("function"==typeof r)s=r,r=e.length-t;else if("function"!=typeof s)throw new TypeError('"cb" argument must be a function');return d(t,e.length),h(r,t,e.length),f(e,t,r,s)},r.randomFillSync=function(e,t,r){if(void 0===t&&(t=0),!(o.isBuffer(e)||e instanceof n.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return d(t,e.length),void 0===r&&(r=e.length-t),h(r,t,e.length),f(e,t,r)}):(r.randomFill=s,r.randomFillSync=s)}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(e,t,n){"use strict";var r={};function s(e,t,n){n||(n=Error);var s=function(e){var n,r;function s(n,r,s){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,s))||this}return r=e,(n=s).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,s}(n);s.prototype.name=n.name,s.prototype.code=e,r[e]=s}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}s("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,s,a,o;if("string"==typeof t&&(s="not ",t.substr(!a||a<0?0:+a,s.length)===s)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var l=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(i(t,"type"))}return o+". Received type ".concat(typeof n)},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],478:[function(e,t,n){(function(n){(function(){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var s=e("./_stream_readable"),i=e("./_stream_writable");e("inherits")(c,s);for(var a=r(i.prototype),o=0;o<a.length;o++){var l=a[o];c.prototype[l]||(c.prototype[l]=i.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(e,t,n){"use strict";t.exports=s;var r=e("./_stream_transform");function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}e("inherits")(s,r),s.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":481,inherits:440}],480:[function(e,t,r){(function(n,r){(function(){"use strict";var s;t.exports=j,j.ReadableState=S,e("events").EventEmitter;var i,a=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),l=e("buffer").Buffer,c=(void 0!==r?r:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=e("util");i=u&&u.debuglog?u.debuglog("stream"):function(){};var d,h,f,p=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),g=e("./internal/streams/state").getHighWaterMark,b=e("../errors").codes,v=b.ERR_INVALID_ARG_TYPE,y=b.ERR_STREAM_PUSH_AFTER_EOF,w=b.ERR_METHOD_NOT_IMPLEMENTED,x=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(j,o);var k=m.errorOrDestroy,_=["error","close","destroy","pause","resume"];function S(t,n,r){s=s||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof s),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=e("string_decoder/").StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function j(t){if(s=s||e("./_stream_duplex"),!(this instanceof j))return new j(t);var n=this instanceof s;this._readableState=new S(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function N(e,t,n,r,s){i("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}}(e,o);else if(s||(a=function(e,t){var n,r;return r=t,l.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t)),n}(o,t)),a)k(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r)o.endEmitted?k(e,new x):T(e,o,t,!0);else if(o.ended)k(e,new y);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?T(e,o,t,!1):A(e,o)):T(e,o,t,!1)}else r||(o.reading=!1,A(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),A(e,t)}function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function C(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(I,e))}function I(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,P(e)}function A(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(i("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){i("readable nexttick read 0"),e.read(0)}function D(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function F(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(B,t,e))}function B(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=m.destroy,j.prototype._undestroy=m.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),N(this,e,t,!1,n)},j.prototype.unshift=function(e){return N(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(t){d||(d=e("string_decoder/").StringDecoder);var n=new d(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,s="";null!==r;)s+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this},j.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):C(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&F(this),null;var r,s=t.needReadable;return i("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",s=!0),t.ended||t.reading?i("reading or ended",s=!1):s&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?L(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&F(this)),null!==r&&this.emit("data",r),r},j.prototype._read=function(e){k(this,new w("_read()"))},j.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}s.pipesCount+=1,i("pipe count=%d opts=%j",s.pipesCount,t);var o=t&&!1===t.end||e===n.stdout||e===n.stderr?g:c;function l(t,n){i("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,i("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",l),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",h),d=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){i("onend"),e.end()}s.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",l);var u=function(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,P(e))}}(r);e.on("drain",u);var d=!1;function h(t){i("ondata");var n=e.write(t);i("dest.write",n),!1===n&&((1===s.pipesCount&&s.pipes===e||s.pipesCount>1&&-1!==U(s.pipes,e))&&!d&&(i("false write response, pause",s.awaitDrain),s.awaitDrain++),r.pause())}function f(t){i("onerror",t),g(),e.removeListener("error",f),0===a(e,"error")&&k(e,t)}function p(){e.removeListener("finish",m),g()}function m(){i("onfinish"),e.removeListener("close",p),g()}function g(){i("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",r),s.flowing||(i("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<s;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},j.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),s=this._readableState;return"data"===e?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===e&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,i("on readable",s.length,s.reading),s.length?C(this):s.reading||n.nextTick(R,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(O,this),r},j.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(O,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(D,e,t))}(this,e)),e.paused=!1,this},j.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var s in e.on("end",function(){if(i("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(s){i("wrapped data"),n.decoder&&(s=n.decoder.write(s)),n.objectMode&&null==s||(n.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause()))}),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var a=0;a<_.length;a++)e.on(_[a],this.emit.bind(this,_[a]));return this._read=function(t){i("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=e("./internal/streams/async_iterator")),h(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=L,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(j.from=function(t,n){return void 0===f&&(f=e("./internal/streams/from")),f(j,t,n)})}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(e,t,n){"use strict";t.exports=u;var r=e("../errors").codes,s=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,n){h(e,t,n)})}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new s("_transform()"))},u.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(e,t,r){(function(n,r){(function(){"use strict";function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=j,j.WritableState=S;var a,o={deprecate:e("util-deprecate")},l=e("./internal/streams/stream"),c=e("buffer").Buffer,u=(void 0!==r?r:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=e("./internal/streams/destroy"),h=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,b=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,y=f.ERR_STREAM_NULL_VALUES,w=f.ERR_STREAM_WRITE_AFTER_END,x=f.ERR_UNKNOWN_ENCODING,k=d.errorOrDestroy;function _(){}function S(t,r,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=r instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,s=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,s,i){--t.pendingcb,r?(n.nextTick(i,s),n.nextTick(A,e,t),e._writableState.errorEmitted=!0,k(e,s)):(i(s),e._writableState.errorEmitted=!0,k(e,s),A(e,t))}(e,r,s,t,i);else{var a=C(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||E(e,r),s?n.nextTick(T,e,r,a,i):T(e,r,a,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function j(t){var n=this instanceof(i=i||e("./_stream_duplex"));if(!n&&!a.call(j,this))return new j(t);this._writableState=new S(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function N(e,t,n,r,s,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(s,t.onwrite):e._write(s,i,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0,l=!0;n;)i[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;i.allBuffers=l,N(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(N(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final(function(n){t.pendingcb--,n&&k(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)})}function A(e,t){var r=C(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(I,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return r}e("inherits")(j,l),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===j&&e&&e._writableState instanceof S}})):a=function(e){return e instanceof this},j.prototype.pipe=function(){k(this,new b)},j.prototype.write=function(e,t,r){var s,i=this._writableState,a=!1,o=!i.objectMode&&(s=e,c.isBuffer(s)||s instanceof u);return o&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=_),i.ending?function(e,t){var r=new w;k(e,r),n.nextTick(t,r)}(this,r):(o||function(e,t,r,s){var i;return null===r?i=new y:"string"==typeof r||t.objectMode||(i=new p("chunk",["string","Buffer"],r)),!i||(k(e,i),n.nextTick(s,i),!1)}(this,i,e,r))&&(i.pendingcb++,a=function(e,t,n,r,s,i){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n)),t}(t,r,s);r!==a&&(n=!0,s="buffer",r=a)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else N(e,t,!1,o,r,s,i);return l}(this,i,o,e,t,r)),a},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},j.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new x(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(j.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),j.prototype._write=function(e,t,n){n(new m("_write()"))},j.prototype._writev=null,j.prototype.end=function(e,t,r){var s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,r){t.ending=!0,A(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,s,r),this},Object.defineProperty(j.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),j.prototype.destroy=d.destroy,j.prototype._undestroy=d.undestroy,j.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(e,t,n){(function(n){(function(){"use strict";var r;function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=e("./end-of-stream"),a=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[u]=null,e[a]=null,e[o]=null,t(f(n,!1)))}}function m(e){n.nextTick(p,e)}var g=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((s(r={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(t,r){n.nextTick(function(){e[l]?r(e[l]):t(f(void 0,!0))})});var r,s=this[u];if(s)r=new Promise(function(e,t){return function(n,r){e.then(function(){t[c]?n(f(void 0,!0)):t[d](n,r)},r)}}(s,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(f(i,!1));r=new Promise(this[d])}return this[u]=r,r}},Symbol.asyncIterator,function(){return this}),s(r,"return",function(){var e=this;return new Promise(function(t,n){e[h].destroy(null,function(e){e?n(e):t(f(void 0,!0))})})}),r),g);t.exports=function(e){var t,n=Object.create(b,(s(t={},h,{value:e,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,o,{value:null,writable:!0}),s(t,l,{value:null,writable:!0}),s(t,c,{value:e._readableState.endEmitted,writable:!0}),s(t,d,{value:function(e,t){var r=n[h].read();r?(n[u]=null,n[a]=null,n[o]=null,e(f(r,!1))):(n[a]=e,n[o]=t)},writable:!0}),t));return n[u]=null,i(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[u]=null,n[a]=null,n[o]=null,t(e)),void(n[l]=e)}var r=n[a];null!==r&&(n[u]=null,n[a]=null,n[o]=null,r(f(void 0,!0))),n[c]=!0}),e.on("readable",m.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":486,_process:467}],484:[function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=e("buffer").Buffer,c=e("util").inspect,u=c&&c.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,n,r,s=l.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,n=s,r=a,l.prototype.copy.call(t,n,r),a+=i.data.length,i=i.next;return s}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,i=e>s.length?s.length:e;if(i===s.length?r+=s:r+=s.slice(0,e),0==(e-=i)){i===s.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(i));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,i=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,i),0==(e-=i)){i===s.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(i));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return c(this,s(s({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},{buffer:220,util:188}],485:[function(e,t,n){(function(e){(function(){"use strict";function n(e,t){s(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(t,i){var a=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!i&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):i?(e.nextTick(r,a),i(t)):e.nextTick(r,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:467}],486:[function(e,t,n){"use strict";var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);n||(n={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r)}}}(i||s);var a=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){o=!1,c=!0,a||i.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,o||i.call(t)},f=function(e){i.call(t,e)},p=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new r),i.call(t,e)):o&&!c?(t._writableState&&t._writableState.ended||(e=new r),i.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",p),t.req?m():t.on("request",m)):o&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",u),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}},{"../../../errors":477}],487:[function(e,t,n){"use strict";t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(e,t,n){"use strict";var r,s=e("../../../errors").codes,i=s.ERR_MISSING_ARGS,a=s.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function l(t,n,s,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var o=!1;t.on("close",function(){o=!0}),void 0===r&&(r=e("./end-of-stream")),r(t,{readable:n,writable:s},function(e){if(e)return i(e);o=!0,i()});var l=!1;return function(e){if(!o&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new a("pipe"))}}function c(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var a=t.map(function(e,n){var i=n<t.length-1;return l(e,i,n>0,function(e){r||(r=e),e&&a.forEach(c),i||(a.forEach(c),s(r))})});return t.reduce(u)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(e,t,n){"use strict";var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,s){var i=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new r(s?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},{"../../../errors":477}],490:[function(e,t,n){"use strict";t.exports=e("events").EventEmitter},{events:422}],491:[function(e,t,n){"use strict";(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(e,t,n){"use strict";var r=function(e){var t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,s){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new j(s||[]);return r(a,"_invoke",{value:x(e,n,o)}),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var m={};l(m,i,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(N([])));b&&b!==t&&n.call(b,i)&&(m=b);var v=p.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var s;r(this,"_invoke",{value:function(r,i){function a(){return new t(function(s,a){!function r(s,i,a,o){var l=u(e[s],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):t.resolve(d).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,o)})}o(l.arg)}(r,i,s,a)})}return s=s?s.then(a,a):a()}})}function x(e,t,n){var r="suspendedStart";return function(s,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===s)throw i;return T()}for(n.method=s,n.arg=i;;){var a=n.delegate;if(a){var o=k(a,n);if(o){if(o===d)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var s=u(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,d;var i=s.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function N(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,r(v,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(w.prototype),l(w.prototype,a,function(){return this}),e.AsyncIterator=w,e.async=function(t,n,r,s,i){void 0===i&&(i=Promise);var a=new w(c(t,n,r,s),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},y(v),l(v,o,"Generator"),l(v,i,function(){return this}),l(v,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var o=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(o&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;S(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},{}],493:[function(e,t,n){"use strict";var r=e("buffer").Buffer,s=e("inherits"),i=e("hash-base"),a=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function f(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function m(e,t,n,r,s,i,a,o){return p(e+(t^n^r)+i+a|0,o)+s|0}function g(e,t,n,r,s,i,a,o){return p(e+(t&n|~t&r)+i+a|0,o)+s|0}function b(e,t,n,r,s,i,a,o){return p(e+((t|~n)^r)+i+a|0,o)+s|0}function v(e,t,n,r,s,i,a,o){return p(e+(t&r|n&~r)+i+a|0,o)+s|0}function y(e,t,n,r,s,i,a,o){return p(e+(t^(n|~r))+i+a|0,o)+s|0}s(f,i),f.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,s=0|this._c,i=0|this._d,f=0|this._e,w=0|this._a,x=0|this._b,k=0|this._c,_=0|this._d,S=0|this._e,j=0;j<80;j+=1){var N,T;j<16?(N=m(n,r,s,i,f,e[o[j]],d[0],c[j]),T=y(w,x,k,_,S,e[l[j]],h[0],u[j])):j<32?(N=g(n,r,s,i,f,e[o[j]],d[1],c[j]),T=v(w,x,k,_,S,e[l[j]],h[1],u[j])):j<48?(N=b(n,r,s,i,f,e[o[j]],d[2],c[j]),T=b(w,x,k,_,S,e[l[j]],h[2],u[j])):j<64?(N=v(n,r,s,i,f,e[o[j]],d[3],c[j]),T=g(w,x,k,_,S,e[l[j]],h[3],u[j])):(N=y(n,r,s,i,f,e[o[j]],d[4],c[j]),T=m(w,x,k,_,S,e[l[j]],h[4],u[j])),n=f,f=i,i=p(s,10),s=r,r=N,w=S,S=_,_=p(k,10),k=x,x=T}var E=this._b+s+_|0;this._b=this._c+i+S|0,this._c=this._d+f+w|0,this._d=this._e+n+x|0,this._e=this._a+r+k|0,this._a=E},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.alloc?r.alloc(20):new r(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=f},{buffer:220,"hash-base":425,inherits:440}],494:[function(e,t,n){"use strict";var r=e("buffer"),s=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return s(e,t,n)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=a),a.prototype=Object.create(s.prototype),i(s,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:220}],495:[function(e,t,n){(function(n){(function(){"use strict";var r,s=e("buffer"),i=s.Buffer,a={};for(r in s)s.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(a[r]=s[r]);var o=a.Buffer={};for(r in i)i.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(o[r]=i[r]);if(a.Buffer.prototype=i.prototype,o.from&&o.from!==Uint8Array.from||(o.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return i(e,t,n)}),o.alloc||(o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=i(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch(e){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this)}).call(this,e("_process"))},{_process:467,buffer:220}],496:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=e("xmlchars/xml/1.0/ed5"),s=e("xmlchars/xml/1.1/ed2"),i=e("xmlchars/xmlns/1.0/ed3");var a=r.isS,o=r.isChar,l=r.isNameStartChar,c=r.isNameChar,u=r.S_LIST,d=r.NAME_RE,h=s.isChar,f=i.isNCNameStartChar,p=i.isNCNameChar,m=i.NC_NAME_RE;const g="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",v={__proto__:null,xml:g,xmlns:b},y={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},w=e=>34===e||39===e,x=[34,39],k=[...x,91,62],_=[...x,60,93],S=[61,63,...u],j=[...u,62,38,60];function N(e,t,n){switch(t){case"xml":n!==g&&e.fail("xml prefix must be bound to ".concat(g,"."));break;case"xmlns":n!==b&&e.fail("xmlns prefix must be bound to ".concat(b,"."))}switch(n){case b:e.fail(""===t?"the default namespace may not be set to ".concat(n,"."):'may not assign a prefix (even "xmlns") to the URI '.concat(b,"."));break;case g:switch(t){case"xml":break;case"":e.fail("the default namespace may not be set to ".concat(n,"."));break;default:e.fail("may not assign the xml namespace to another prefix.")}}}const T=e=>m.test(e),E=e=>d.test(e);n.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const C={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};n.SaxesParser=class{constructor(e){this.opt=null!=e?e:{},this.fragmentOpt=!!this.opt.fragment;const t=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,t){this.nameStartCheck=f,this.nameCheck=p,this.isName=T,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},v);const e=this.opt.additionalNamespaces;null!=e&&(function(e,t){for(const n of Object.keys(t))N(e,n,t[n])}(this,e),Object.assign(this.ns,e))}else this.nameStartCheck=l,this.nameCheck=c,this.isName=E,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var e;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:t}=this;this.state=t?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=t,this.xmlDeclPossible=!t,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:n}=this.opt;if(void 0===n){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");n="1.0"}this.setXMLVersion(n),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(y),null===(e=this.readyHandler)||void 0===e||e.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(e,t){this[C[e]]=t}off(e){this[C[e]]=void 0}makeError(e){var t;let n=null!==(t=this.fileName)&&void 0!==t?t:"";return this.trackPosition&&(n.length>0&&(n+=":"),n+="".concat(this.line,":").concat(this.column)),n.length>0&&(n+=": "),new Error(n+e)}fail(e){const t=this.makeError(e),n=this.errorHandler;if(void 0===n)throw t;return n(t),this}write(e){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let t=!1;null===e?(t=!0,e=""):"object"==typeof e&&(e=e.toString()),void 0!==this.carriedFromPrevious&&(e="".concat(this.carriedFromPrevious).concat(e),this.carriedFromPrevious=void 0);let n=e.length;const r=e.charCodeAt(n-1);!t&&(13===r||r>=55296&&r<=56319)&&(this.carriedFromPrevious=e[n-1],n--,e=e.slice(0,n));const{stateTable:s}=this;for(this.chunk=e,this.i=0;this.i<n;)s[this.state].call(this);return this.chunkPosition+=n,t?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:e,i:t}=this;if(this.prevI=t,this.i=t+1,t>=e.length)return-1;const n=e.charCodeAt(t);if(this.column++,n<55296){if(n>=32||9===n)return n;switch(n){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return 10===e.charCodeAt(t+1)&&(this.i=t+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const r=65536+1024*(n-55296)+(e.charCodeAt(t+1)-56320);return this.i=t+2,r>1114111&&this.fail("disallowed character."),r}getCode11(){const{chunk:e,i:t}=this;if(this.prevI=t,this.i=t+1,t>=e.length)return-1;const n=e.charCodeAt(t);if(this.column++,n<55296){if(n>31&&n<127||n>159&&8232!==n||9===n)return n;switch(n){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const n=e.charCodeAt(t+1);10!==n&&133!==n||(this.i=t+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const r=65536+1024*(n-55296)+(e.charCodeAt(t+1)-56320);return this.i=t+2,r>1114111&&this.fail("disallowed character."),r}getCodeNorm(){const e=this.getCode();return-2===e?10:e}unget(){this.i=this.prevI,this.column--}captureTo(e){let{i:t}=this;const{chunk:n}=this;for(;;){const r=this.getCode(),s=-2===r,i=s?10:r;if(-1===i||e.includes(i))return this.text+=n.slice(t,this.prevI),i;s&&(this.text+=n.slice(t,this.prevI)+"\n",t=this.i)}}captureToChar(e){let{i:t}=this;const{chunk:n}=this;for(;;){let r=this.getCode();switch(r){case-2:this.text+=n.slice(t,this.prevI)+"\n",t=this.i,r=10;break;case-1:return this.text+=n.slice(t),!1}if(r===e)return this.text+=n.slice(t,this.prevI),!0}}captureNameChars(){const{chunk:e,i:t}=this;for(;;){const n=this.getCode();if(-1===n)return this.name+=e.slice(t),-1;if(!c(n))return this.name+=e.slice(t,this.prevI),-2===n?10:n}}skipSpaces(){for(;;){const e=this.getCodeNorm();if(-1===e||!a(e))return e}}setXMLVersion(e){this.currentXMLVersion=e,"1.0"===e?(this.isChar=o,this.getCode=this.getCode10):(this.isChar=h,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const e=this.i,t=this.skipSpaces();switch(this.prevI!==e&&(this.xmlDeclPossible=!1),t){case 60:if(this.state=15,0!==this.text.length)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var e;const t=this.captureTo(k);switch(t){case 62:null===(e=this.doctypeHandler)||void 0===e||e.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(t),91===t?this.state=4:w(t)&&(this.state=3,this.q=t)}}sDoctypeQuote(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.q=null,this.state=2)}sDTD(){const e=this.captureTo(_);-1!==e&&(this.text+=String.fromCodePoint(e),93===e?this.state=2:60===e?this.state=6:w(e)&&(this.state=5,this.q=e))}sDTDQuoted(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.state=4,this.q=null)}sDTDOpenWaka(){const e=this.getCodeNorm();switch(this.text+=String.fromCodePoint(e),e){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const e=String.fromCodePoint(this.getCodeNorm()),t=this.openWakaBang+=e;this.text+=e,"-"!==t&&(this.state="--"===t?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),this.state=45===e?10:8}sDTDCommentEnded(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),62===e?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),62===e&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:e}=this;const{chunk:t}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=t.slice(e,this.prevI)+"\n",e=this.i;break;case 59:{const{entityReturnState:n}=this,r=this.entity+t.slice(e,this.prevI);let s;this.state=n,""===r?(this.fail("empty entity name."),s="&;"):(s=this.parseEntity(r),this.entity=""),13===n&&void 0===this.textHandler||(this.text+=s);break e}case-1:this.entity+=t.slice(e);break e}}sOpenWaka(){const e=this.getCode();if(l(e))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(e){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var e;const t=this.getCodeNorm();45===t?(this.state=19,null===(e=this.commentHandler)||void 0===e||e.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(t),this.state=17)}sCommentEnded(){const e=this.getCodeNorm();62!==e?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(e),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const e=this.getCodeNorm();93===e?this.state=22:(this.text+="]"+String.fromCodePoint(e),this.state=20)}sCDataEnding2(){var e;const t=this.getCodeNorm();switch(t){case 62:null===(e=this.cdataHandler)||void 0===e||e.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(t),this.state=20}}sPIFirstChar(){const e=this.getCodeNorm();this.nameStartCheck(e)?(this.piTarget+=String.fromCodePoint(e),this.state=24):63===e||a(e)?(this.fail("processing instruction without a target."),this.state=63===e?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(e),this.state=24)}sPIRest(){const{chunk:e,i:t}=this;for(;;){const n=this.getCodeNorm();if(-1===n)return void(this.piTarget+=e.slice(t));if(!this.nameCheck(n)){this.piTarget+=e.slice(t,this.prevI);const r=63===n;r||a(n)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=r?33:27):this.state=r?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(n));break}}}sPIBody(){if(0===this.text.length){const e=this.getCodeNorm();63===e?this.state=26:a(e)||(this.text=String.fromCodePoint(e))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var e;const t=this.getCodeNorm();if(62===t){const{piTarget:t}=this;"xml"===t.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(e=this.piHandler)||void 0===e||e.call(this,{target:t,body:this.text}),this.piTarget=this.text="",this.state=13}else 63===t?this.text+="?":(this.text+="?"+String.fromCodePoint(t),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const e=this.skipSpaces();63!==e?-1!==e&&(this.state=28,this.name=String.fromCodePoint(e)):this.state=33}sXMLDeclName(){const e=this.captureTo(S);if(63===e)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(a(e)||61===e){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail("expected the name ".concat(this.xmlDeclExpects[0],"."));break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=61===e?30:29}}sXMLDeclEq(){const e=this.getCodeNorm();if(63===e)return this.state=33,void this.fail("XML declaration is incomplete.");a(e)||(61!==e&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const e=this.getCodeNorm();if(63===e)return this.state=33,void this.fail("XML declaration is incomplete.");a(e)||(w(e)?this.q=e:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const e=this.captureTo([this.q,63]);if(63===e)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(-1===e)return;const t=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const e=t;this.xmlDecl.version=e,/^1\.[0-9]+$/.test(e)?this.opt.forceXMLVersion||this.setXMLVersion(e):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(t)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=t;break;case"standalone":"yes"!==t&&"no"!==t&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=t}this.name="",this.state=32}sXMLDeclSeparator(){const e=this.getCodeNorm();63!==e?(a(e)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var e;62===this.getCodeNorm()?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(e=this.xmldeclHandler)||void 0===e||e.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var e;const t=this.captureNameChars();if(-1===t)return;const n=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=n.ns=Object.create(null)),null===(e=this.openTagStartHandler)||void 0===e||e.call(this,n),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),t){case 62:this.openTag();break;case 47:this.state=35;break;default:a(t)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){62===this.getCode()?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const e=this.skipSpaces();-1!==e&&(l(e)?(this.unget(),this.state=37):62===e?this.openTag():47===e?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const e=this.captureNameChars();61===e?this.state=39:a(e)?this.state=38:62===e?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):-1!==e&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const e=this.skipSpaces();switch(e){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",62===e?this.openTag():l(e)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const e=this.getCodeNorm();w(e)?(this.q=e,this.state=40):a(e)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:e,chunk:t}=this;let{i:n}=this;for(;;)switch(this.getCode()){case e:return this.pushAttrib(this.name,this.text+t.slice(n,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=t.slice(n,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=t.slice(n,this.prevI)+" ",n=this.i;break;case 60:return this.text+=t.slice(n,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=t.slice(n))}}sAttribValueClosed(){const e=this.getCodeNorm();a(e)?this.state=36:62===e?this.openTag():47===e?this.state=35:l(e)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const e=this.captureTo(j);switch(e){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",62===e?this.openTag():this.state=36}}sCloseTag(){const e=this.captureNameChars();62===e?this.closeTag():a(e)?this.state=44:-1!==e&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:e,forbiddenState:t}=this;const{chunk:n,textHandler:r}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,void 0!==r){const{text:t}=this,s=n.slice(e,this.prevI);0!==t.length?(r(t+s),this.text=""):0!==s.length&&r(s)}t=0;break e;case 38:this.state=14,this.entityReturnState=13,void 0!==r&&(this.text+=n.slice(e,this.prevI)),t=0;break e;case 93:switch(t){case 0:t=1;break;case 1:t=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:2===t&&this.fail('the string "]]>" is disallowed in char data.'),t=0;break;case-2:void 0!==r&&(this.text+=n.slice(e,this.prevI)+"\n"),e=this.i,t=0;break;case-1:void 0!==r&&(this.text+=n.slice(e));break e;default:t=0}this.forbiddenState=t}handleTextOutsideRoot(){let{i:e}=this;const{chunk:t,textHandler:n}=this;let r=!1;e:for(;;){const s=this.getCode();switch(s){case 60:if(this.state=15,void 0!==n){const{text:r}=this,s=t.slice(e,this.prevI);0!==r.length?(n(r+s),this.text=""):0!==s.length&&n(s)}break e;case 38:this.state=14,this.entityReturnState=13,void 0!==n&&(this.text+=t.slice(e,this.prevI)),r=!0;break e;case-2:void 0!==n&&(this.text+=t.slice(e,this.prevI)+"\n"),e=this.i;break;case-1:void 0!==n&&(this.text+=t.slice(e));break e;default:a(s)||(r=!0)}}r&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(e,t){var n;const{prefix:r,local:s}=this.qname(e),i={name:e,prefix:r,local:s,value:t};if(this.attribList.push(i),null===(n=this.attributeHandler)||void 0===n||n.call(this,i),"xmlns"===r){const e=t.trim();"1.0"===this.currentXMLVersion&&""===e&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[s]=e,N(this,s,e)}else if("xmlns"===e){const e=t.trim();this.topNS[""]=e,N(this,"",e)}}pushAttribPlain(e,t){var n;const r={name:e,value:t};this.attribList.push(r),null===(n=this.attributeHandler)||void 0===n||n.call(this,r)}end(){var e,t;this.sawRoot||this.fail("document must contain a root element.");const{tags:n}=this;for(;n.length>0;){const e=n.pop();this.fail("unclosed tag: "+e.name)}0!==this.state&&13!==this.state&&this.fail("unexpected end.");const{text:r}=this;return 0!==r.length&&(null===(e=this.textHandler)||void 0===e||e.call(this,r),this.text=""),this._closed=!0,null===(t=this.endHandler)||void 0===t||t.call(this),this._init(),this}resolve(e){var t,n;let r=this.topNS[e];if(void 0!==r)return r;const{tags:s}=this;for(let i=s.length-1;i>=0;i--)if(r=s[i].ns[e],void 0!==r)return r;return r=this.ns[e],void 0!==r?r:null===(n=(t=this.opt).resolvePrefix)||void 0===n?void 0:n.call(t,e)}qname(e){const t=e.indexOf(":");if(-1===t)return{prefix:"",local:e};const n=e.slice(t+1),r=e.slice(0,t);return(""===r||""===n||n.includes(":"))&&this.fail("malformed name: ".concat(e,".")),{prefix:r,local:n}}processAttribsNS(){var e;const{attribList:t}=this,n=this.tag;{const{prefix:t,local:r}=this.qname(n.name);n.prefix=t,n.local=r;const s=n.uri=null!==(e=this.resolve(t))&&void 0!==e?e:"";""!==t&&("xmlns"===t&&this.fail('tags may not have "xmlns" as prefix.'),""===s&&(this.fail("unbound namespace prefix: ".concat(JSON.stringify(t),".")),n.uri=t))}if(0===t.length)return;const{attributes:r}=n,s=new Set;for(const i of t){const{name:e,prefix:t,local:n}=i;let a,o;""===t?(a="xmlns"===e?b:"",o=e):(a=this.resolve(t),void 0===a&&(this.fail("unbound namespace prefix: ".concat(JSON.stringify(t),".")),a=t),o="{".concat(a,"}").concat(n)),s.has(o)&&this.fail("duplicate attribute: ".concat(o,".")),s.add(o),i.uri=a,r[e]=i}this.attribList=[]}processAttribsPlain(){const{attribList:e}=this,t=this.tag.attributes;for(const{name:n,value:r}of e)void 0!==t[n]&&this.fail("duplicate attribute: ".concat(n,".")),t[n]=r;this.attribList=[]}openTag(){var e;this.processAttribs();const{tags:t}=this,n=this.tag;n.isSelfClosing=!1,null===(e=this.openTagHandler)||void 0===e||e.call(this,n),t.push(n),this.state=13,this.name=""}openSelfClosingTag(){var e,t,n;this.processAttribs();const{tags:r}=this,s=this.tag;s.isSelfClosing=!0,null===(e=this.openTagHandler)||void 0===e||e.call(this,s),null===(t=this.closeTagHandler)||void 0===t||t.call(this,s),null===(this.tag=null!==(n=r[r.length-1])&&void 0!==n?n:null)&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:e,name:t}=this;if(this.state=13,this.name="",""===t)return this.fail("weird empty close tag."),void(this.text+="</>");const n=this.closeTagHandler;let r=e.length;for(;r-- >0;){const r=this.tag=e.pop();if(this.topNS=r.ns,null==n||n(r),r.name===t)break;this.fail("unexpected close tag.")}0===r?this.closedRoot=!0:r<0&&(this.fail("unmatched closing tag: ".concat(t,".")),this.text+="</".concat(t,">"))}parseEntity(e){if("#"!==e[0]){const t=this.ENTITIES[e];return void 0!==t?t:(this.fail(this.isName(e)?"undefined entity.":"disallowed character in entity name."),"&".concat(e,";"))}let t=NaN;return"x"===e[1]&&/^#x[0-9a-f]+$/i.test(e)?t=parseInt(e.slice(2),16):/^#[0-9]+$/.test(e)&&(t=parseInt(e.slice(1),10)),this.isChar(t)?String.fromCodePoint(t):(this.fail("malformed character entity."),"&".concat(e,";"))}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer;function s(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}s.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,s=this._blockSize,i=e.length,a=this._len,o=0;o<i;){for(var l=a%s,c=Math.min(i-o,s-l),u=0;u<c;u++)n[l+u]=e[o+u];o+=c,(a+=c)%s==0&&this._update(n)}return this._len+=i,this},s.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,s=(n-r)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=s},{"safe-buffer":494}],498:[function(e,t,n){"use strict";var r=t.exports=function(e){e=e.toLowerCase();var t=r[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};r.sha=e("./sha"),r.sha1=e("./sha1"),r.sha224=e("./sha224"),r.sha256=e("./sha256"),r.sha384=e("./sha384"),r.sha512=e("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function l(){this.init(),this._w=o,s.call(this,64,56)}function c(e){return e<<30|e>>>2}function u(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(l,s),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,s=0|this._b,i=0|this._c,o=0|this._d,l=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=n[d-3]^n[d-8]^n[d-14]^n[d-16];for(var h=0;h<80;++h){var f=~~(h/20),p=0|((t=r)<<5|t>>>27)+u(f,s,i,o)+l+n[h]+a[f];l=o,o=i,i=c(s),s=r,r=p}this._a=r+this._a|0,this._b=s+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function l(){this.init(),this._w=o,s.call(this,64,56)}function c(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(l,s),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,s=0|this._b,i=0|this._c,o=0|this._d,l=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=(t=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|t>>>31;for(var f=0;f<80;++f){var p=~~(f/20),m=c(r)+d(p,s,i,o)+l+n[f]+a[p]|0;l=o,o=i,i=u(s),s=r,r=m}this._a=r+this._a|0,this._b=s+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./sha256"),i=e("./hash"),a=e("safe-buffer").Buffer,o=new Array(64);function l(){this.init(),this._w=o,i.call(this,64,56)}r(l,s),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var e=a.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=l},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function l(){this.init(),this._w=o,s.call(this,64,56)}function c(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(l,s),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,s=0|this._b,i=0|this._c,o=0|this._d,l=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,b=0;b<16;++b)n[b]=e.readInt32BE(4*b);for(;b<64;++b)n[b]=0|(((t=n[b-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[b-7]+f(n[b-15])+n[b-16];for(var v=0;v<64;++v){var y=g+h(l)+c(l,p,m)+a[v]+n[v]|0,w=d(r)+u(r,s,i)|0;g=m,m=p,p=l,l=o+y|0,o=i,i=s,s=r,r=y+w|0}this._a=r+this._a|0,this._b=s+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./sha512"),i=e("./hash"),a=e("safe-buffer").Buffer,o=new Array(160);function l(){this.init(),this._w=o,i.call(this,128,112)}r(l,s),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var e=a.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},t.exports=l},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(e,t,n){"use strict";var r=e("inherits"),s=e("./hash"),i=e("safe-buffer").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function l(){this.init(),this._w=o,s.call(this,128,112)}function c(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function b(e,t){return e>>>0<t>>>0?1:0}r(l,s),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,s=0|this._ch,i=0|this._dh,o=0|this._eh,l=0|this._fh,v=0|this._gh,y=0|this._hh,w=0|this._al,x=0|this._bl,k=0|this._cl,_=0|this._dl,S=0|this._el,j=0|this._fl,N=0|this._gl,T=0|this._hl,E=0;E<32;E+=2)t[E]=e.readInt32BE(4*E),t[E+1]=e.readInt32BE(4*E+4);for(;E<160;E+=2){var C=t[E-30],I=t[E-30+1],A=f(C,I),M=p(I,C),O=m(C=t[E-4],I=t[E-4+1]),R=g(I,C),D=t[E-14],P=t[E-14+1],L=t[E-32],F=t[E-32+1],B=M+P|0,U=A+D+b(B,M)|0;U=(U=U+O+b(B=B+R|0,R)|0)+L+b(B=B+F|0,F)|0,t[E]=U,t[E+1]=B}for(var z=0;z<160;z+=2){U=t[z],B=t[z+1];var V=u(n,r,s),H=u(w,x,k),W=d(n,w),q=d(w,n),K=h(o,S),G=h(S,o),$=a[z],X=a[z+1],Y=c(o,l,v),Q=c(S,j,N),J=T+G|0,Z=y+K+b(J,T)|0;Z=(Z=(Z=Z+Y+b(J=J+Q|0,Q)|0)+$+b(J=J+X|0,X)|0)+U+b(J=J+B|0,B)|0;var ee=q+H|0,te=W+V+b(ee,q)|0;y=v,T=N,v=l,N=j,l=o,j=S,o=i+Z+b(S=_+J|0,_)|0,i=s,_=k,s=r,k=x,r=n,x=w,n=Z+te+b(w=J+ee|0,J)|0}this._al=this._al+w|0,this._bl=this._bl+x|0,this._cl=this._cl+k|0,this._dl=this._dl+_|0,this._el=this._el+S|0,this._fl=this._fl+j|0,this._gl=this._gl+N|0,this._hl=this._hl+T|0,this._ah=this._ah+n+b(this._al,w)|0,this._bh=this._bh+r+b(this._bl,x)|0,this._ch=this._ch+s+b(this._cl,k)|0,this._dh=this._dh+i+b(this._dl,_)|0,this._eh=this._eh+o+b(this._el,S)|0,this._fh=this._fh+l+b(this._fl,j)|0,this._gh=this._gh+v+b(this._gl,N)|0,this._hh=this._hh+y+b(this._hl,T)|0},l.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},t.exports=l},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(e,t,n){"use strict";t.exports=s;var r=e("events").EventEmitter;function s(){r.call(this)}e("inherits")(s,r),s.Readable=e("readable-stream/readable.js"),s.Writable=e("readable-stream/writable.js"),s.Duplex=e("readable-stream/duplex.js"),s.Transform=e("readable-stream/transform.js"),s.PassThrough=e("readable-stream/passthrough.js"),s.Stream=s,s.prototype.pipe=function(e,t){var n=this;function s(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",s),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",l));var a=!1;function o(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",s),e.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",l),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",c),e.on("error",c),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(e,t,n){"use strict";var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],507:[function(e,t,n){"use strict";t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(e,t,n){"use strict";var r=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=d;var i=Object.create(e("core-util-is"));i.inherits=e("inherits");var a=e("./_stream_readable"),o=e("./_stream_writable");i.inherits(d,a);for(var l=s(o.prototype),c=0;c<l.length;c++){var u=l[c];d.prototype[u]||(d.prototype[u]=o.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);a.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform"),s=Object.create(e("core-util-is"));function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}s.inherits=e("inherits"),s.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(e,t,r){(function(n,r){(function(){"use strict";var s=e("process-nextick-args");t.exports=y;var i,a=e("isarray");y.ReadableState=v,e("events").EventEmitter;var o=function(e,t){return e.listeners(t).length},l=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,u=(void 0!==r?r:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=Object.create(e("core-util-is"));d.inherits=e("inherits");var h=e("util"),f=void 0;f=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m=e("./internal/streams/BufferList"),g=e("./internal/streams/destroy");d.inherits(y,l);var b=["error","close","destroy","pause","resume"];function v(t,n){t=t||{};var r=n instanceof(i=i||e("./_stream_duplex"));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=e("string_decoder/").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function y(t){if(i=i||e("./_stream_duplex"),!(this instanceof y))return new y(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function w(e,t,n,r,s){var i,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,_(e)}}(e,a)):(s||(i=function(e,t){var n,r;return r=t,c.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,t)),i?e.emit("error",i):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?x(e,a,t,!1):j(e,a)):x(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&_(e)),j(e,t)}function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function _(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?s.nextTick(S,e):S(e))}function S(e){f("emit readable"),e.emit("readable"),C(e)}function j(e,t){t.readingMore||(t.readingMore=!0,s.nextTick(N,e,t))}function N(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function T(e){f("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function I(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,s=n.data;for(e-=s.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(a===i.length?s+=i:s+=i.slice(0,e),0===(e-=a)){a===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++r}return t.length-=r,s}(e,t):function(e,t){var n=c.allocUnsafe(e),r=t.head,s=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,a),0===(e-=a)){a===i.length?(++s,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(a));break}++s}return t.length-=s,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function A(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,s.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},y.prototype.unshift=function(e){return w(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(t){return p||(p=e("string_decoder/").StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this},y.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?A(this):_(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&A(this),null;var r,s=t.needReadable;return f("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",s=!0),t.ended||t.reading?f("reading or ended",s=!1):s&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?I(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&A(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,f("pipe count=%d opts=%j",i.pipesCount,t);var l=t&&!1===t.end||e===n.stdout||e===n.stderr?y:u;function c(t,n){f("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",b),e.removeListener("finish",v),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",c),r.removeListener("end",u),r.removeListener("end",y),r.removeListener("data",m),h=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){f("onend"),e.end()}i.endEmitted?s.nextTick(l):r.once("end",l),e.on("unpipe",c);var d=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,C(e))}}(r);e.on("drain",d);var h=!1,p=!1;function m(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==O(i.pipes,e))&&!h&&(f("false write response, pause",i.awaitDrain),i.awaitDrain++,p=!0),r.pause())}function g(t){f("onerror",t),y(),e.removeListener("error",g),0===o(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",v),y()}function v(){f("onfinish"),e.removeListener("close",b),y()}function y(){f("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",b),e.once("finish",v),e.emit("pipe",r),i.flowing||(f("pipe resume"),r.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<s;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var a=O(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},y.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&_(this):s.nextTick(T,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,s.nextTick(E,e,t))}(this,e)),this},y.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var s in e.on("end",function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(s){f("wrapped data"),n.decoder&&(s=n.decoder.write(s)),n.objectMode&&null==s||(n.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause()))}),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var i=0;i<b.length;i++)e.on(b[i],this.emit.bind(this,b[i]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=I}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(e,t,n){"use strict";t.exports=a;var r=e("./_stream_duplex"),s=Object.create(e("core-util-is"));function i(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){l(e,t,n)}):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}s.inherits=e("inherits"),s.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(e,t,r){(function(n,r,s){(function(){"use strict";var i=e("process-nextick-args");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}t.exports=v;var o,l=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?s:i.nextTick;v.WritableState=b;var c=Object.create(e("core-util-is"));c.inherits=e("inherits");var u,d={deprecate:e("util-deprecate")},h=e("./internal/streams/stream"),f=e("safe-buffer").Buffer,p=(void 0!==r?r:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},m=e("./internal/streams/destroy");function g(){}function b(t,n){o=o||e("./_stream_duplex"),t=t||{};var r=n instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var s=t.highWaterMark,c=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===t.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,s=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,s){--t.pendingcb,n?(i.nextTick(s,r),i.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(s(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}(e,n,r,t,s);else{var a=k(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?l(w,e,n,a,s):w(e,n,a,s)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(o=o||e("./_stream_duplex"),!(u.call(v,this)||this instanceof o))return new v(t);this._writableState=new b(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function y(e,t,n,r,s,i,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(s,t.onwrite):e._write(s,i,t.onwrite),t.sync=!1}function w(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var o=0,l=!0;n;)s[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;s.allBuffers=l,y(e,t,!0,t.length,s,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function S(e,t){var n=k(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}c.inherits(v,h),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:d.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===v&&e&&e._writableState instanceof b}})):u=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,s=this._writableState,a=!1,o=!s.objectMode&&(r=e,f.isBuffer(r)||r instanceof p);return o&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=g),s.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var s=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i.nextTick(r,a),s=!1),s}(this,s,e,n))&&(s.pendingcb++,a=function(e,t,n,r,s,i){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}(t,r,s);r!==a&&(n=!0,s="buffer",r=a)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:i,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,o,r,s,i);return l}(this,s,o,e,t,n)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||x(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,s=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);for(var t,n,s=r.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=s,n=a,i.data.copy(t,n),a+=i.data.length,i=i.next;return s},e}(),s&&s.inspect&&s.inspect.custom&&(t.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":520,util:188}],514:[function(e,t,n){"use strict";var r=e("process-nextick-args");function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(s,this,e)):r.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,r.nextTick(s,n,e)):r.nextTick(s,n,e):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(e,t,n){arguments[4][490][0].apply(n,arguments)},{dup:490,events:422}],516:[function(e,t,n){"use strict";t.exports=e("./readable").PassThrough},{"./readable":517}],517:[function(e,t,n){"use strict";(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(e,t,n){"use strict";t.exports=e("./readable").Transform},{"./readable":517}],519:[function(e,t,n){"use strict";t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(e,t,n){arguments[4][217][0].apply(n,arguments)},{buffer:220,dup:217}],521:[function(e,t,n){arguments[4][218][0].apply(n,arguments)},{dup:218,"safe-buffer":520}],522:[function(e,t,n){arguments[4][218][0].apply(n,arguments)},{dup:218,"safe-buffer":494}],523:[function(e,t,n){(function(t,r){(function(){"use strict";var s=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,o={},l=0;function c(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new c(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n.setImmediate="function"==typeof t?t:function(e){var t=l++,r=!(arguments.length<2)&&a.call(arguments,1);return o[t]=!0,s(function(){o[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))}),t},n.clearImmediate="function"==typeof r?r:function(e){delete o[e]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(e,t,r){(function(e){(function(){"use strict";function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],525:[function(e,t,n){"use strict";"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],526:[function(e,t,n){"use strict";t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],527:[function(e,t,r){(function(t,n){(function(){"use strict";var s=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(s,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),l=r[n];n<i;l=r[++n])m(l)||!w(l)?a+=" "+l:a+=" "+o(l);return a},r.deprecate=function(e,s){if(v(n.process))return function(){return r.deprecate(e,s).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),i=!0}return e.apply(this,arguments)}};var i,a={};function o(e,t){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(t)?n.showHidden=t:t&&r._extend(n,t),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),u(n,e,n.depth)}function l(e,t){var n=o.styles[t];return n?"\x1b["+o.colors[n][0]+"m"+e+"\x1b["+o.colors[n][1]+"m":e}function c(e,t){return e}function u(e,t,n){if(e.customInspect&&t&&_(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(n,e);return b(s)||(s=u(e,s,n)),s}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),k(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(t);if(0===a.length){if(_(t)){var l=t.name?": "+t.name:"";return e.stylize("[Function"+l+"]","special")}if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return d(t)}var c,w="",S=!1,j=["{","}"];return f(t)&&(S=!0,j=["[","]"]),_(t)&&(w=" [Function"+(t.name?": "+t.name:"")+"]"),y(t)&&(w=" "+RegExp.prototype.toString.call(t)),x(t)&&(w=" "+Date.prototype.toUTCString.call(t)),k(t)&&(w=" "+d(t)),0!==a.length||S&&0!=t.length?n<0?y(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=S?function(e,t,n,r,s){for(var i=[],a=0,o=t.length;a<o;++a)E(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return s.forEach(function(s){s.match(/^\d+$/)||i.push(h(e,t,n,r,s,!0))}),i}(e,t,n,o,a):a.map(function(r){return h(e,t,n,o,r,S)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,w,j)):j[0]+w+j[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,s,i){var a,o,l;if((l=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]}).get?o=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(o=e.stylize("[Setter]","special")),E(r,s)||(a="["+s+"]"),o||(e.seen.indexOf(l.value)<0?(o=m(n)?u(e,l.value,null):u(e,l.value,n-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")):o=e.stylize("[Circular]","special")),v(a)){if(i&&s.match(/^\d+$/))return o;(a=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function f(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===S(e)}function k(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function _(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function j(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(v(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=t.pid;a[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else a[e]=function(){};return a[e]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=f,r.isBoolean=p,r.isNull=m,r.isNullOrUndefined=function(e){return null==e},r.isNumber=g,r.isString=b,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=v,r.isRegExp=y,r.isObject=w,r.isDate=x,r.isError=k,r.isFunction=_,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[j(e.getHours()),j(e.getMinutes()),j(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){console.log("%s - %s",T(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this)}).call(this,e("_process"),"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"v3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"version",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(n,"parse",{enumerable:!0,get:function(){return d.default}});var r=h(e("./v1.js")),s=h(e("./v3.js")),i=h(e("./v4.js")),a=h(e("./v5.js")),o=h(e("./nil.js")),l=h(e("./version.js")),c=h(e("./validate.js")),u=h(e("./stringify.js")),d=h(e("./parse.js"));function h(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(e,t,n){"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function s(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,n,r,i,a){return s((o=s(s(t,e),s(r,a)))<<(l=i)|o>>>32-l,n);var o,l}function a(e,t,n,r,s,a,o){return i(t&n|~t&r,e,t,s,a,o)}function o(e,t,n,r,s,a,o){return i(t&r|n&~r,e,t,s,a,o)}function l(e,t,n,r,s,a,o){return i(t^n^r,e,t,s,a,o)}function c(e,t,n,r,s,a,o){return i(n^(t|~r),e,t,s,a,o)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length;for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,s=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let n=1732584193,i=-271733879,u=-1732584194,d=271733878;for(let r=0;r<e.length;r+=16){const t=n,h=i,f=u,p=d;n=a(n,i,u,d,e[r],7,-680876936),d=a(d,n,i,u,e[r+1],12,-389564586),u=a(u,d,n,i,e[r+2],17,606105819),i=a(i,u,d,n,e[r+3],22,-1044525330),n=a(n,i,u,d,e[r+4],7,-176418897),d=a(d,n,i,u,e[r+5],12,1200080426),u=a(u,d,n,i,e[r+6],17,-1473231341),i=a(i,u,d,n,e[r+7],22,-45705983),n=a(n,i,u,d,e[r+8],7,1770035416),d=a(d,n,i,u,e[r+9],12,-1958414417),u=a(u,d,n,i,e[r+10],17,-42063),i=a(i,u,d,n,e[r+11],22,-1990404162),n=a(n,i,u,d,e[r+12],7,1804603682),d=a(d,n,i,u,e[r+13],12,-40341101),u=a(u,d,n,i,e[r+14],17,-1502002290),i=a(i,u,d,n,e[r+15],22,1236535329),n=o(n,i,u,d,e[r+1],5,-165796510),d=o(d,n,i,u,e[r+6],9,-1069501632),u=o(u,d,n,i,e[r+11],14,643717713),i=o(i,u,d,n,e[r],20,-373897302),n=o(n,i,u,d,e[r+5],5,-701558691),d=o(d,n,i,u,e[r+10],9,38016083),u=o(u,d,n,i,e[r+15],14,-660478335),i=o(i,u,d,n,e[r+4],20,-405537848),n=o(n,i,u,d,e[r+9],5,568446438),d=o(d,n,i,u,e[r+14],9,-1019803690),u=o(u,d,n,i,e[r+3],14,-187363961),i=o(i,u,d,n,e[r+8],20,1163531501),n=o(n,i,u,d,e[r+13],5,-1444681467),d=o(d,n,i,u,e[r+2],9,-51403784),u=o(u,d,n,i,e[r+7],14,1735328473),i=o(i,u,d,n,e[r+12],20,-1926607734),n=l(n,i,u,d,e[r+5],4,-378558),d=l(d,n,i,u,e[r+8],11,-2022574463),u=l(u,d,n,i,e[r+11],16,1839030562),i=l(i,u,d,n,e[r+14],23,-35309556),n=l(n,i,u,d,e[r+1],4,-1530992060),d=l(d,n,i,u,e[r+4],11,1272893353),u=l(u,d,n,i,e[r+7],16,-155497632),i=l(i,u,d,n,e[r+10],23,-1094730640),n=l(n,i,u,d,e[r+13],4,681279174),d=l(d,n,i,u,e[r],11,-358537222),u=l(u,d,n,i,e[r+3],16,-722521979),i=l(i,u,d,n,e[r+6],23,76029189),n=l(n,i,u,d,e[r+9],4,-640364487),d=l(d,n,i,u,e[r+12],11,-421815835),u=l(u,d,n,i,e[r+15],16,530742520),i=l(i,u,d,n,e[r+2],23,-995338651),n=c(n,i,u,d,e[r],6,-198630844),d=c(d,n,i,u,e[r+7],10,1126891415),u=c(u,d,n,i,e[r+14],15,-1416354905),i=c(i,u,d,n,e[r+5],21,-57434055),n=c(n,i,u,d,e[r+12],6,1700485571),d=c(d,n,i,u,e[r+3],10,-1894986606),u=c(u,d,n,i,e[r+10],15,-1051523),i=c(i,u,d,n,e[r+1],21,-2054922799),n=c(n,i,u,d,e[r+8],6,1873313359),d=c(d,n,i,u,e[r+15],10,-30611744),u=c(u,d,n,i,e[r+6],15,-1560198380),i=c(i,u,d,n,e[r+13],21,1309151649),n=c(n,i,u,d,e[r+4],6,-145523070),d=c(d,n,i,u,e[r+11],10,-1120210379),u=c(u,d,n,i,e[r+2],15,718787259),i=c(i,u,d,n,e[r+9],21,-343485551),n=s(n,t),i=s(i,h),u=s(u,f),d=s(d,p)}return[n,i,u,d]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(r(t));for(let r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))};n.default=u},{}],530:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("./validate.js"))&&r.__esModule?r:{default:r},i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};n.default=i},{"./validate.js":541}],532:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(e,t,n){"use strict";let r;Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)};const s=new Uint8Array(16)},{}],534:[function(e,t,n){"use strict";function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function s(e,t){return e<<t|e>>>32-t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),o=new Array(a);for(let r=0;r<a;++r){const t=new Uint32Array(16);for(let n=0;n<16;++n)t[n]=e[64*r+4*n]<<24|e[64*r+4*n+1]<<16|e[64*r+4*n+2]<<8|e[64*r+4*n+3];o[r]=t}o[a-1][14]=8*(e.length-1)/Math.pow(2,32),o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(e.length-1)&4294967295;for(let l=0;l<a;++l){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=o[l][t];for(let t=16;t<80;++t)e[t]=s(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let i=n[0],a=n[1],c=n[2],u=n[3],d=n[4];for(let n=0;n<80;++n){const o=Math.floor(n/20),l=s(i,5)+r(o,a,c,u)+d+t[o]+e[n]>>>0;d=u,u=c,c=s(a,30)>>>0,a=i,i=l}n[0]=n[0]+i>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+c>>>0,n[3]=n[3]+u>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]};n.default=i},{}],535:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("./validate.js"))&&r.__esModule?r:{default:r};const i=[];for(let o=0;o<256;++o)i.push((o+256).toString(16).substr(1));var a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,s.default)(n))throw TypeError("Stringified UUID is invalid");return n};n.default=a},{"./validate.js":541}],536:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./rng.js")),s=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}let a,o,l=0,c=0;var u=function(e,t,n){let i=t&&n||0;const u=t||new Array(16);let d=(e=e||{}).node||a,h=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==h){const t=e.random||(e.rng||r.default)();null==d&&(d=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==h&&(h=o=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:c+1;const m=f-l+(p-c)/1e4;if(m<0&&void 0===e.clockseq&&(h=h+1&16383),(m<0||f>l)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=f,c=p,o=h,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;u[i++]=g>>>24&255,u[i++]=g>>>16&255,u[i++]=g>>>8&255,u[i++]=255&g;const b=f/4294967296*1e4&268435455;u[i++]=b>>>8&255,u[i++]=255&b,u[i++]=b>>>24&15|16,u[i++]=b>>>16&255,u[i++]=h>>>8|128,u[i++]=255&h;for(let r=0;r<6;++r)u[i+r]=d[r];return t||(0,s.default)(u)};n.default=u},{"./rng.js":533,"./stringify.js":535}],537:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./v35.js")),s=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v3",48,s.default);n.default=a},{"./md5.js":529,"./v35.js":538}],538:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){function i(e,i,a,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof i&&(i=(0,s.default)(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(i),l.set(e,i.length),l=n(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){o=o||0;for(let e=0;e<16;++e)a[o+e]=l[e];return a}return(0,r.default)(l)}try{i.name=e}catch(e){}return i.DNS=a,i.URL=o,i},n.URL=n.DNS=void 0;var r=i(e("./stringify.js")),s=i(e("./parse.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";n.DNS=a;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";n.URL=o},{"./parse.js":531,"./stringify.js":535}],539:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./rng.js")),s=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){const i=(e=e||{}).random||(e.rng||r.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=i[e];return t}return(0,s.default)(i)};n.default=a},{"./rng.js":533,"./stringify.js":535}],540:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("./v35.js")),s=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v5",80,s.default);n.default=a},{"./sha1.js":534,"./v35.js":538}],541:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("./regex.js"))&&r.__esModule?r:{default:r},i=function(e){return"string"==typeof e&&s.default.test(e)};n.default=i},{"./regex.js":532}],542:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,s=(r=e("./validate.js"))&&r.__esModule?r:{default:r},i=function(e){if(!(0,s.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};n.default=i},{"./validate.js":541}],543:[function(e,t,n){"use strict";function r(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR="\t\n\r -\ud7ff\ue000-\ufffd\ud800\udc00-\udbff\udfff",n.S=" \t\r\n",n.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\ud800\udc00-\udb7f\udfff",n.NAME_CHAR="-"+n.NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",n.CHAR_RE=new RegExp("^["+n.CHAR+"]$","u"),n.S_RE=new RegExp("^["+n.S+"]+$","u"),n.NAME_START_CHAR_RE=new RegExp("^["+n.NAME_START_CHAR+"]$","u"),n.NAME_CHAR_RE=new RegExp("^["+n.NAME_CHAR+"]$","u"),n.NAME_RE=new RegExp("^["+n.NAME_START_CHAR+"]["+n.NAME_CHAR+"]*$","u"),n.NMTOKEN_RE=new RegExp("^["+n.NAME_CHAR+"]+$","u"),n.S_LIST=[32,10,13,9],n.isChar=function(e){return e>=32&&e<=55295||10===e||13===e||9===e||e>=57344&&e<=65533||e>=65536&&e<=1114111},n.isS=function(e){return 32===e||10===e||13===e||9===e},n.isNameStartChar=r,n.isNameChar=function(e){return r(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},{}],544:[function(e,t,n){"use strict";function r(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR="\x01-\ud7ff\ue000-\ufffd\ud800\udc00-\udbff\udfff",n.RESTRICTED_CHAR="\x01-\b\v\f\x0e-\x1f\x7f-\x84\x86-\x9f",n.S=" \t\r\n",n.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\ud800\udc00-\udb7f\udfff",n.NAME_CHAR="-"+n.NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",n.CHAR_RE=new RegExp("^["+n.CHAR+"]$","u"),n.RESTRICTED_CHAR_RE=new RegExp("^["+n.RESTRICTED_CHAR+"]$","u"),n.S_RE=new RegExp("^["+n.S+"]+$","u"),n.NAME_START_CHAR_RE=new RegExp("^["+n.NAME_START_CHAR+"]$","u"),n.NAME_CHAR_RE=new RegExp("^["+n.NAME_CHAR+"]$","u"),n.NAME_RE=new RegExp("^["+n.NAME_START_CHAR+"]["+n.NAME_CHAR+"]*$","u"),n.NMTOKEN_RE=new RegExp("^["+n.NAME_CHAR+"]+$","u"),n.S_LIST=[32,10,13,9],n.isChar=function(e){return e>=1&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111},n.isRestrictedChar=function(e){return e>=1&&e<=8||11===e||12===e||e>=14&&e<=31||e>=127&&e<=132||e>=134&&e<=159},n.isCharAndNotRestricted=function(e){return 9===e||10===e||13===e||e>31&&e<127||133===e||e>159&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111},n.isS=function(e){return 32===e||10===e||13===e||9===e},n.isNameStartChar=r,n.isNameChar=function(e){return r(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},{}],545:[function(e,t,n){"use strict";function r(e){return e>=65&&e<=90||95===e||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(n,"__esModule",{value:!0}),n.NC_NAME_START_CHAR="A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\ud800\udc00-\udb7f\udfff",n.NC_NAME_CHAR="-"+n.NC_NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",n.NC_NAME_START_CHAR_RE=new RegExp("^["+n.NC_NAME_START_CHAR+"]$","u"),n.NC_NAME_CHAR_RE=new RegExp("^["+n.NC_NAME_CHAR+"]$","u"),n.NC_NAME_RE=new RegExp("^["+n.NC_NAME_START_CHAR+"]["+n.NC_NAME_CHAR+"]*$","u"),n.isNCNameStartChar=r,n.isNCNameChar=function(e){return r(e)||45===e||46===e||e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},{}]},{},[15])(15)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var w=y.prototype=new v;w.constructor=y,m(w,b.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function S(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function j(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function C(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return C((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+T(e,0):i,x(a)?(s="",null!=u&&(s=u.replace(N,"$&/")+"/"),C(a,t,s,"",function(e){return e})):null!=a&&(j(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+u,a=S(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,p=""===i?".":i+":";if(x(e))for(var m=0;m<e.length;m++)u+=C(i=e[m],t,s,o=p+T(i,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=C(i=i.value,t,s,o=p+T(i,m++),a);else if("object"===o){if("function"===typeof e.then)return C(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function I(e,t,n){if(null==e)return e;var r=[],s=0;return C(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!j(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=s,t.Profiler=a,t.PureComponent=y,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!_.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return S(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)_.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return S(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=j,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),s=k.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,M)}catch(i){M(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.0"},344:(e,t,n)=>{var r=n(172);e.exports=function(e){return new r(e,0)},e.exports.__esModule=!0,e.exports.default=e.exports},358:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},450:function(e,t,n){var r,s,i;s=[],void 0===(i="function"===typeof(r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,n){var o=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):s(l.href)?r(e,t,n):i(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(s(e))r(e,n,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){i(o)})}}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var i="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},u.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,h=d.createObjectURL(e);s?s.location=h:location.href=h,s=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});a.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,s):r)||(e.exports=i)},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},693:(e,t,n)=>{var r=n(736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,s=n(45);e.exports=function(e){var t=s(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{"use strict";e.exports=n(896)},881:e=>{function t(e){function n(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return t=function(e){this.s=e,this.n=e.next},t.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(e){var t=this.s.return;return void 0===t?Promise.resolve({value:e,done:!0}):n(t.apply(this.s,arguments))},throw:function(e){var t=this.s.return;return void 0===t?Promise.reject(e):n(t.apply(this.s,arguments))}},new t(e)}e.exports=function(e){var n,r,s,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,s=Symbol.iterator);i--;){if(r&&null!=(n=e[r]))return n.call(e);if(s&&null!=(n=e[s]))return new t(n.call(e));r="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,b=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,S||(S=!0,_());else{var t=r(u);null!==t&&M(k,t.startTime-e)}}var _,S=!1,j=-1,N=5,T=-1;function E(){return!!b||!(t.unstable_now()-T<N)}function C(){if(b=!1,S){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(j),j=-1),p=!0;var i=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&E());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&M(k,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?_():S=!1}}}if("function"===typeof w)_=function(){w(C)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=C,_=function(){A.postMessage(null)}}else _=function(){v(C,0)};function M(e,n){j=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(j),j=-1):g=!0,M(k,i-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,S||(S=!0,_()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},897:(e,t,n)=>{var r=n(693);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},958:(e,t,n)=>{var r=n(172);function s(e){var t,n;function s(t,n){try{var a=e[t](n),o=a.value,l=o instanceof r;Promise.resolve(l?o.v:o).then(function(n){if(l){var r="return"===t?"return":"next";if(!o.k||n.done)return s(r,n);n=e[r](n).value}i(a.done?"return":"normal",n)},function(e){s("throw",e)})}catch(e){i("throw",e)}}function i(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?s(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(i,a){var o={key:e,arg:r,resolve:i,reject:a,next:null};n?n=n.next=o:(t=n=o,s(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}s.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},s.prototype.next=function(e){return this._invoke("next",e)},s.prototype.throw=function(e){return this._invoke("throw",e)},s.prototype.return=function(e){return this._invoke("return",e)},e.exports=function(e){return function(){return new s(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".c030b554.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="work-instruction:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/workinstruction/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkwork_instruction=self.webpackChunkwork_instruction||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391);function r(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(358);const c=["sri"],u=["page"],d=["page","matches"],h=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],f=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],p=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function g(){return _(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return w("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:x(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function v(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function y(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return l(l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?k(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function x(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function k(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function _(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o="POP",c=null,u=d();function d(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,c&&c({action:o,location:p.location,delta:t})}function f(e){return S(e)}null==u&&(u=0,a.replaceState(l(l({},a.state),{},{idx:u}),""));let p={get action(){return o},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(m,h),c=e,()=>{s.removeEventListener(m,h),c=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=w(p.location,e,t);n&&n(r,e),u=d()+1;let l=y(r,u),h=p.createHref(r);try{a.pushState(l,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(h)}i&&c&&c({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let r=w(p.location,e,t);n&&n(r,e),u=d();let s=y(r,u),l=p.createHref(r);a.replaceState(s,"",l),i&&c&&c({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}function S(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:x(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function j(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let s=z(("string"===typeof t?k(t):t).pathname||"/",n);if(null==s)return null;let i=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let a=null;for(let o=0;null==a&&o<i.length;++o){let e=U(s);a=L(i[o],e,r)}return a}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(e,s,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};a.relativePath.startsWith("/")&&(b(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let o=K([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),T(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of E(e.path))s(e,t,r);else s(e,t)}),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let a=E(r.join("/")),o=[];return o.push(...a.map(e=>""===e?i:[i,e].join("/"))),s&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var C=/^:[\w-]+$/,I=3,A=2,M=1,O=10,R=-2,D=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(D)&&(r+=R),t&&(r+=A),n.filter(e=>!D(e)).reduce((e,t)=>e+(C.test(t)?I:""===t?M:O),r)}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},i="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),a.push({params:s,pathname:K([i,u.pathname]),pathnameBase:G(K([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=K([i,u.pathnameBase]))}return a}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:a,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function U(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return v(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function V(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function W(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function q(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=k(e):(r=l({},e),b(!r.pathname||!r.pathname.includes("?"),V("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),V("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),V("#","search","hash",r)));let i,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)i=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:s=""}="string"===typeof e?k(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:$(r),hash:X(s)}}(r,i),u=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}var K=e=>e.join("/").replace(/\/\/+/g,"/"),G=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Q=["POST","PUT","PATCH","DELETE"],J=(new Set(Q),["GET",...Q]);new Set(J),Symbol("ResetLoaderData");var Z=e.createContext(null);Z.displayName="DataRouter";var ee=e.createContext(null);ee.displayName="DataRouterState";var te=e.createContext({isTransitioning:!1});te.displayName="ViewTransition";var ne=e.createContext(new Map);ne.displayName="Fetchers";var re=e.createContext(null);re.displayName="Await";var se=e.createContext(null);se.displayName="Navigation";var ie=e.createContext(null);ie.displayName="Location";var ae=e.createContext({outlet:null,matches:[],isDataRoute:!1});ae.displayName="Route";var oe=e.createContext(null);oe.displayName="RouteError";function le(){return null!=e.useContext(ie)}function ce(){return b(le(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(ie).location}var ue="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function de(t){e.useContext(se).static||e.useLayoutEffect(t)}function he(){let{isDataRoute:t}=e.useContext(ae);return t?function(){let{router:t}=ke("useNavigate"),n=Se("useNavigate"),r=e.useRef(!1);de(()=>{r.current=!0});let s=e.useCallback(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(r.current,ue),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,l({fromRouteId:n},s)))},[t,n]);return s}():function(){b(le(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(Z),{basename:n,navigator:r}=e.useContext(se),{matches:s}=e.useContext(ae),{pathname:i}=ce(),a=JSON.stringify(W(s)),o=e.useRef(!1);de(()=>{o.current=!0});let l=e.useCallback(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v(o.current,ue),!o.current)return;if("number"===typeof e)return void r.go(e);let l=q(e,JSON.parse(a),i,"path"===s.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:K([n,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)},[n,r,a,i,t]);return l}()}e.createContext(null);function fe(){let{matches:t}=e.useContext(ae),n=t[t.length-1];return n?n.params:{}}function pe(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(ae),{pathname:s}=ce(),i=JSON.stringify(W(r));return e.useMemo(()=>q(t,JSON.parse(i),s,"path"===n),[t,i,s,n])}function me(t,n,r,s){b(le(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=e.useContext(se),{matches:a}=e.useContext(ae),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",d=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";Te(u,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,p=ce();if(n){var m;let e="string"===typeof n?k(n):n;b("/"===d||(null===(m=e.pathname)||void 0===m?void 0:m.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=p;let g=f.pathname||"/",y=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=j(t,{pathname:y});v(h||null!=w,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),v(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=we(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:K([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:K([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,r,s);return n&&x?e.createElement(ie.Provider,{value:{location:l({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},x):x}function ge(){let t=je(),n=Y(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:a},"ErrorBoundary")," or"," ",e.createElement("code",{style:a},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:i},r):null,o)}var be=e.createElement(ge,null),ve=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(ae.Provider,{value:this.props.routeContext},e.createElement(oe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ye(t){let{routeContext:n,match:r,children:s}=t,i=e.useContext(Z);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(ae.Provider,{value:n},s)}function we(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let s=t,i=null===r||void 0===r?void 0:r.errors;if(null!=i){let e=s.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let a=!1,o=-1;if(r)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(o=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){a=!0,s=o>=0?s.slice(0,o+1):[s[0]];break}}}return s.reduceRight((t,l,c)=>{let u,d=!1,h=null,f=null;r&&(u=i&&l.route.id?i[l.route.id]:void 0,h=l.route.errorElement||be,a&&(o<0&&0===c?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):o===c&&(d=!0,f=l.route.hydrateFallbackElement||null)));let p=n.concat(s.slice(0,c+1)),m=()=>{let n;return n=u?h:d?f:l.route.Component?e.createElement(l.route.Component,null):l.route.element?l.route.element:t,e.createElement(ye,{match:l,routeContext:{outlet:t,matches:p,isDataRoute:null!=r},children:n})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?e.createElement(ve,{location:r.location,revalidation:r.revalidation,component:h,error:u,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}function xe(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ke(t){let n=e.useContext(Z);return b(n,xe(t)),n}function _e(t){let n=e.useContext(ee);return b(n,xe(t)),n}function Se(t){let n=function(t){let n=e.useContext(ae);return b(n,xe(t)),n}(t),r=n.matches[n.matches.length-1];return b(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function je(){var t;let n=e.useContext(oe),r=_e("useRouteError"),s=Se("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[s]}var Ne={};function Te(e,t,n){t||Ne[e]||(Ne[e]=!0,v(!1,n))}e.memo(function(e){let{routes:t,future:n,state:r}=e;return me(t,void 0,r,n)});function Ee(t){let{to:n,replace:r,state:s,relative:i}=t;b(le(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=e.useContext(se);v(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=e.useContext(ae),{pathname:l}=ce(),c=he(),u=q(n,W(o),l,"path"===i),d=JSON.stringify(u);return e.useEffect(()=>{c(JSON.parse(d),{replace:r,state:s,relative:i})},[c,d,i,r,s]),null}function Ce(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ie(t){let{basename:n="/",children:r=null,location:s,navigationType:i="POP",navigator:a,static:o=!1}=t;b(!le(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof s&&(s=k(s));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=s,m=e.useMemo(()=>{let e=z(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return v(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:e.createElement(se.Provider,{value:c},e.createElement(ie.Provider,{children:r,value:m}))}function Ae(e){let{children:t,location:n}=e;return me(Me(t),n)}e.Component;function Me(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,s)=>{if(!e.isValidElement(t))return;let i=[...n,s];if(t.type===e.Fragment)return void r.push.apply(r,Me(t.props.children,i));b(t.type===Ce,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||i.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Me(t.props.children,i)),r.push(a)}),r}var Oe="get",Re="application/x-www-form-urlencoded";function De(e){return null!=e&&"string"===typeof e.tagName}var Pe=null;var Le=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return null==e||Le.has(e)?e:(v(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Re,'"')),null)}function Be(e,t){let n,r,s,i,a;if(De(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?z(a,t):null,n=e.getAttribute("method")||Oe,s=Fe(e.getAttribute("enctype"))||Re,i=new FormData(e)}else if(function(e){return De(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return De(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?z(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Oe,s=Fe(e.getAttribute("formenctype"))||Fe(a.getAttribute("enctype"))||Re,i=new FormData(a,e),!function(){if(null===Pe)try{new FormData(document.createElement("form"),0),Pe=!1}catch(e){Pe=!0}return Pe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";i.append("".concat(e,"x"),"0"),i.append("".concat(e,"y"),"0")}else t&&i.append(t,r)}}else{if(De(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Oe,r=null,s=Re,a=e}var o;return i&&"text/plain"===s&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}function Ue(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function ze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ve(e){return null!=e&&"string"===typeof e.page}function He(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function We(e,t,n,r,s,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===i?t.filter((t,i)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,i)||o(t,i))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function qe(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function Ke(e,t){let n=new Set,r=new Set(t);return e.reduce((e,s)=>{if(t&&!Ve(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(i)||(n.add(i),e.push({key:i,link:s})),e},[])}function Ge(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var $e=new Set([100,101,204,205]);function Xe(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===z(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}e.Component;function Ye(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let s,i=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Y(n))return e.createElement(Qe,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),i);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(Qe,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),i)}function Qe(t){var n;let{title:r,renderScripts:s,isOutsideRemixApp:i,children:a}=t,{routeModules:o}=nt();return null!==o.root&&void 0!==n&&n.Layout&&!i?a:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,s?e.createElement(ct,null):null)))}function Je(e,t){return"lazy"===e.mode&&!0===t}function Ze(){let t=e.useContext(Z);return Ue(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function et(){let t=e.useContext(ee);return Ue(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tt=e.createContext(void 0);function nt(){let t=e.useContext(tt);return Ue(t,"You must render this element inside a <HydratedRouter> element"),t}function rt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function st(e,t,n){if(n&&!lt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function it(t){let{page:n}=t,s=r(t,u),{router:i}=Ze(),a=e.useMemo(()=>j(i.routes,n,i.basename),[i.routes,n,i.basename]);return a?e.createElement(ot,l({page:n,matches:a},s)):null}function at(t){let{manifest:n,routeModules:r}=nt(),[s,i]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return Ke((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await ze(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(He).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?l(l({},e),{},{rel:"prefetch",as:"style"}):l(l({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||i(t)}),()=>{e=!0}},[t,n,r]),s}function ot(t){let{page:n,matches:s}=t,i=r(t,d),a=ce(),{manifest:o,routeModules:c}=nt(),{basename:u}=Ze(),{loaderData:h,matches:f}=et(),p=e.useMemo(()=>We(n,s,f,o,a,"data"),[n,s,f,o,a]),m=e.useMemo(()=>We(n,s,f,o,a,"assets"),[n,s,f,o,a]),g=e.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(s.forEach(n=>{var r;let s=o.routes[n.route.id];s&&s.hasLoader&&(!p.some(e=>e.route.id===n.route.id)&&n.route.id in h&&null!==(r=c[n.route.id])&&void 0!==r&&r.shouldRevalidate||s.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let r=Xe(n,u);return t&&e.size>0&&r.searchParams.set("_routes",s.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[u,h,a,o,p,s,n,c]),b=e.useMemo(()=>qe(m,o),[m,o]),v=at(m);return e.createElement(e.Fragment,null,g.map(t=>e.createElement("link",l({key:t,rel:"prefetch",as:"fetch",href:t},i))),b.map(t=>e.createElement("link",l({key:t,rel:"modulepreload",href:t},i))),v.map(t=>{let{key:n,link:r}=t;return e.createElement("link",l({key:n},r))}))}tt.displayName="FrameworkContext";var lt=!1;function ct(t){let{manifest:n,serverHandoffString:s,isSpaMode:i,renderMeta:a,routeDiscovery:o,ssr:u}=nt(),{router:d,static:h,staticContext:f}=Ze(),{matches:p}=et(),m=Je(o,u);a&&(a.didRenderScripts=!0);let g=st(p,null,i);e.useEffect(()=>{0},[]);let b=e.useMemo(()=>{var i;let a=f?"window.__reactRouterContext = ".concat(s,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(m?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(g.map((e,t)=>{let r="route".concat(t),s=n.routes[e.route.id];Ue(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:i,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...i?[{module:i,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(m?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,s=r(e,c),i=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach(e=>{let n=j(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let u=[...i].reduce((e,t)=>Object.assign(e,{[t]:s.routes[t]}),{});return l(l({},s),{},{routes:u,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",l(l({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ge(a),type:void 0})),e.createElement("script",l(l({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Ge(o),type:"module",async:!0})))},[]),v=lt?[]:(n.entry.imports.concat(qe(g,n,{includeHydrateFallback:!0})),[...new Set(y)]);var y;let w="object"===typeof n.sri?n.sri:{};return lt?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,m?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),v.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),b)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var dt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{dt&&(window.__reactRouterVersion="7.6.2")}catch(fN){}function ht(t){let{basename:n,children:r,window:s}=t,i=e.useRef();null==i.current&&(i.current=g({window:s,v5Compat:!0}));let a=i.current,[o,l]=e.useState({action:a.action,location:a.location}),c=e.useCallback(t=>{e.startTransition(()=>l(t))},[l]);return e.useLayoutEffect(()=>a.listen(c),[a,c]),e.createElement(Ie,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:a})}var ft=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pt=e.forwardRef(function(t,n){let s,{onClick:i,discover:a="render",prefetch:o="none",relative:c,reloadDocument:u,replace:d,state:f,target:p,to:m,preventScrollReset:g,viewTransition:y}=t,w=r(t,h),{basename:k}=e.useContext(se),_="string"===typeof m&&ft.test(m),S=!1;if("string"===typeof m&&_&&(s=m,dt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=z(t.pathname,k);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:S=!0}catch(fN){v(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let j=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(le(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=e.useContext(se),{hash:i,pathname:a,search:o}=pe(t,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:K([r,a])),s.createHref({pathname:l,search:o,hash:i})}(m,{relative:c}),[N,T,E]=function(t,n){let r=e.useContext(tt),[s,i]=e.useState(!1),[a,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return r?"intent"!==t?[a,f,{}]:[a,f,{onFocus:rt(l,p),onBlur:rt(c,m),onMouseEnter:rt(u,p),onMouseLeave:rt(d,m),onTouchStart:rt(h,p)}]:[!1,f,{}]}(o,w),C=function(t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=he(),c=ce(),u=pe(t,{relative:a});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==r?r:x(c)===x(u);l(t,{replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,r,s,n,t,i,a,o])}(m,{replace:d,state:f,target:p,preventScrollReset:g,relative:c,viewTransition:y});let I=e.createElement("a",l(l(l({},w),E),{},{href:s||j,onClick:S||u?i:function(e){i&&i(e),e.defaultPrevented||C(e)},ref:ut(n,T),target:p,"data-discover":_||"render"!==a?void 0:"true"}));return N&&!_?e.createElement(e.Fragment,null,I,e.createElement(it,{page:j})):I});pt.displayName="Link";var mt=e.forwardRef(function(t,n){let{"aria-current":s="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:u,viewTransition:d,children:h}=t,p=r(t,f),m=pe(u,{relative:p.relative}),g=ce(),v=e.useContext(ee),{navigator:y,basename:w}=e.useContext(se),x=null!=v&&function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(te);b(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=vt("useViewTransitionState"),i=pe(t,{relative:n.relative});if(!r.isTransitioning)return!1;let a=z(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=z(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=F(i.pathname,o)||null!=F(i.pathname,a)}(m)&&!0===d,k=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,_=g.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(_=_.toLowerCase(),S=S?S.toLowerCase():null,k=k.toLowerCase()),S&&w&&(S=z(S,w)||S);const j="/"!==k&&k.endsWith("/")?k.length-1:k.length;let N,T=_===k||!o&&_.startsWith(k)&&"/"===_.charAt(j),E=null!=S&&(S===k||!o&&S.startsWith(k)&&"/"===S.charAt(k.length)),C={isActive:T,isPending:E,isTransitioning:x},I=T?s:void 0;N="function"===typeof a?a(C):[a,T?"active":null,E?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof c?c(C):c;return e.createElement(pt,l(l({},p),{},{"aria-current":I,className:N,ref:n,style:A,to:u,viewTransition:d}),"function"===typeof h?h(C):h)});mt.displayName="NavLink";var gt=e.forwardRef((t,n)=>{let{discover:s="render",fetcherKey:i,navigate:a,reloadDocument:o,replace:c,state:u,method:d=Oe,action:h,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:v}=t,y=r(t,p),w=xt(),k=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(se),s=e.useContext(ae);b(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a=l({},pe(t||".",{relative:n})),o=ce();if(null==t){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}t&&"."!==t||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:K([r,a.pathname]));return x(a)}(h,{relative:m}),_="get"===d.toLowerCase()?"get":"post",S="string"===typeof h&&ft.test(h);return e.createElement("form",l(l({ref:n,method:_,action:k,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;w(t||e.currentTarget,{fetcherKey:i,method:n,navigate:a,replace:c,state:u,relative:m,preventScrollReset:g,viewTransition:v})}},y),{},{"data-discover":S||"render"!==s?void 0:"true"}))});function bt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function vt(t){let n=e.useContext(Z);return b(n,bt(t)),n}gt.displayName="Form";var yt=0,wt=()=>"__".concat(String(++yt),"__");function xt(){let{router:t}=vt("useSubmit"),{basename:n}=e.useContext(se),r=Se("useRouteId");return e.useCallback(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:o,formData:l,body:c}=Be(e,n);if(!1===s.navigate){let e=s.fetcherKey||wt();await t.fetch(e,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,n,r])}const kt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},_t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var St={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jt=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Nt=(0,e.forwardRef)((t,n)=>{let{color:s="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:d}=t,h=r(t,jt);return(0,e.createElement)("svg",l(l(l({ref:n},St),{},{width:i,height:i,stroke:s,strokeWidth:o?24*Number(a)/Number(i):a,className:_t("lucide",c)},!u&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...Array.isArray(u)?u:[u]])}),Tt=["className"],Et=(t,n)=>{const s=(0,e.forwardRef)((s,i)=>{let{className:a}=s,o=r(s,Tt);return(0,e.createElement)(Nt,l({ref:i,iconNode:n,className:_t("lucide-".concat((c=kt(t),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(t),a)},o));var c});return s.displayName=kt(t),s},Ct=Et("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),It=Et("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),At=Et("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Mt=Et("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ot=Et("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Rt=Et("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Dt=Et("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Pt=Et("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Lt=Et("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ft=n.p+"static/media/logo-defend-len.1d81d3db89173c59cb97.png",Bt=n.p+"static/media/logoLRS.2d66781d2f736a3ce88c.png",Ut=n.p+"static/media/product1.99f7ec7d4375ba8a5909.jpg",zt=n.p+"static/media/product2.f1679a73e987a41ab867.png",Vt=n.p+"static/media/product3.f1679a73e987a41ab867.png",Ht=n.p+"static/media/hero-background.c3271cb0ce1d843f6d5b.jpg",Wt=n.p+"static/media/work-illustration.efc9ae768173729db430.mp4";var qt=n(579);const Kt=()=>{const[t,n]=(0,e.useState)(!1),[r,s]=(0,e.useState)(!1),[i,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(0),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),f=he();(0,e.useEffect)(()=>{const e=()=>{s(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,e.useEffect)(()=>{const e=setInterval(()=>{l(e=>(e+1)%3)},4e3);return()=>clearInterval(e)},[]);const p=()=>{h(!0),setTimeout(()=>{f("/login"),h(!1)},300)},m=()=>{h(!0),setTimeout(()=>{f("/register"),h(!1)},300)},g=e=>{const t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"}),n(!1)},b=[Ut,zt,Vt];return(0,qt.jsxs)("div",{className:"landing-page",children:[d&&(0,qt.jsx)("div",{className:"landing-loading-overlay",children:(0,qt.jsx)("div",{className:"landing-loading-spinner",children:(0,qt.jsx)("div",{className:"landing-spinner"})})}),(0,qt.jsxs)("nav",{className:"landing-navbar ".concat(r?"landing-navbar-scrolled":""),children:[(0,qt.jsxs)("div",{className:"landing-navbar-inner",children:[(0,qt.jsxs)("div",{className:"landing-nav-logo",children:[(0,qt.jsx)("img",{src:Bt,alt:"Logo LRS",className:"landing-nav-logo-img",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="inline-block"}}),(0,qt.jsx)("span",{className:"landing-nav-logo-fallback",style:{display:"none"},children:"LRS"})]}),(0,qt.jsxs)("div",{className:"landing-nav-links",children:[(0,qt.jsx)("a",{href:"#home",onClick:e=>{e.preventDefault(),g("home")},children:"Home"}),(0,qt.jsx)("a",{href:"#about",onClick:e=>{e.preventDefault(),g("about")},children:"Tentang Sistem"}),(0,qt.jsx)("a",{href:"#how-to-use",onClick:e=>{e.preventDefault(),g("how-to-use")},children:"Cara Menggunakan"}),(0,qt.jsx)("a",{href:"#faq",onClick:e=>{e.preventDefault(),g("faq")},children:"FAQ"})]}),(0,qt.jsxs)("div",{className:"landing-nav-buttons",children:[(0,qt.jsx)("button",{onClick:p,className:"landing-btn-primary",disabled:d,children:"Sign In"}),(0,qt.jsx)("button",{onClick:m,className:"landing-btn-secondary",disabled:d,children:"Register"})]}),(0,qt.jsx)("button",{className:"landing-mobile-menu-btn",onClick:()=>{n(!t)},"aria-label":"Toggle menu",children:t?(0,qt.jsx)(Ct,{size:24}):(0,qt.jsx)(It,{size:24})})]}),(0,qt.jsxs)("div",{className:"landing-mobile-menu ".concat(t?"landing-open":""),children:[(0,qt.jsx)("a",{href:"#home",onClick:e=>{e.preventDefault(),g("home")},children:"Home"}),(0,qt.jsx)("a",{href:"#about",onClick:e=>{e.preventDefault(),g("about")},children:"Tentang Sistem"}),(0,qt.jsx)("a",{href:"#how-to-use",onClick:e=>{e.preventDefault(),g("how-to-use")},children:"Cara Menggunakan"}),(0,qt.jsx)("a",{href:"#faq",onClick:e=>{e.preventDefault(),g("faq")},children:"FAQ"}),(0,qt.jsxs)("div",{className:"landing-nav-buttons",children:[(0,qt.jsx)("button",{onClick:p,className:"landing-btn-primary",disabled:d,children:"Sign In"}),(0,qt.jsx)("button",{onClick:m,className:"landing-btn-secondary",disabled:d,children:"Register"})]})]})]}),(0,qt.jsx)("section",{id:"home",className:"landing-hero-section landing-modern-hero",style:{backgroundImage:"url(".concat(Ht,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"100vh",color:"white"},children:(0,qt.jsxs)("div",{className:"landing-hero-container",children:[(0,qt.jsx)("h1",{className:"landing-modern-title",children:"Stay on Track"}),(0,qt.jsx)("h2",{className:"landing-modern-subtitle",children:"With Len Railways System"}),(0,qt.jsx)("p",{className:"landing-hero-description landing-centered-text",children:"Kelola instruksi kerja, pantau tim secara real-time, dan capai efisiensi maksimal di setiap langkah kerja."}),(0,qt.jsxs)("div",{className:"landing-hero-cta-buttons landing-centered-buttons",children:[(0,qt.jsx)("button",{onClick:()=>{h(!0),setTimeout(()=>{f("/register"),h(!1)},300)},className:"landing-cta-primary landing-modern-button",disabled:d,children:d?"Loading...":"Mulai Sekarang"}),(0,qt.jsx)("button",{onClick:()=>{h(!0),setTimeout(()=>{f("/login"),h(!1)},300)},className:"landing-cta-secondary landing-modern-button",disabled:d,children:d?"Loading...":"Lihat Demo"})]}),(0,qt.jsx)("div",{className:"landing-carousel-wrapper",children:(0,qt.jsxs)("div",{className:"landing-custom-carousel",children:[(0,qt.jsx)("div",{className:"landing-carousel-track",style:{transform:"translateX(-".concat(33.333*o,"%)"),transition:"transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)"},children:b.map((e,t)=>(0,qt.jsx)("div",{className:"landing-carousel-slide",children:(0,qt.jsxs)("div",{className:"landing-carousel-image-container",children:[(0,qt.jsx)("img",{src:e,className:"landing-carousel-img",alt:"Product ".concat(t+1),loading:"lazy",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,qt.jsx)("div",{className:"landing-image-fallback",style:{display:"none"},children:(0,qt.jsxs)("div",{className:"landing-fallback-placeholder",children:[(0,qt.jsx)(At,{size:48}),(0,qt.jsxs)("span",{children:["Product ",t+1]})]})})]})},t))}),(0,qt.jsx)("div",{className:"landing-carousel-dots",children:[0,1,2].map(e=>(0,qt.jsx)("button",{className:"landing-carousel-dot ".concat(o===e?"landing-active":""),onClick:()=>l(e),"aria-label":"Go to slide ".concat(e+1)},e))})]})})]})}),(0,qt.jsx)("section",{id:"about",className:"landing-about-section",children:(0,qt.jsxs)("div",{className:"landing-section-container",children:[(0,qt.jsxs)("div",{className:"landing-section-header",children:[(0,qt.jsx)("h2",{className:"landing-section-title",children:"Sistem yang Mengubah Cara Kerja Tim"}),(0,qt.jsx)("p",{className:"landing-section-subtitle",children:"Solusi digital yang memastikan setiap instruksi kerja tersampaikan dengan jelas dan efisien"})]}),(0,qt.jsxs)("div",{className:"landing-about-grid",children:[(0,qt.jsxs)("div",{className:"landing-about-cards-container",children:[(0,qt.jsx)("div",{className:"landing-about-card",children:(0,qt.jsxs)("div",{className:"landing-about-card-content",children:[(0,qt.jsx)("div",{className:"landing-about-icon",children:(0,qt.jsx)(Mt,{size:32})}),(0,qt.jsxs)("div",{className:"landing-about-card-text",children:[(0,qt.jsx)("h3",{className:"landing-about-card-title",children:"Menghindari Miskomunikasi Pekerjaan"}),(0,qt.jsx)("p",{className:"landing-about-card-description",children:"Sistem ini memastikan setiap instruksi kerja jelas dan terstandarisasi, mengurangi kesalahan akibat miskomunikasi antar tim hingga 85%."})]})]})}),(0,qt.jsx)("div",{className:"landing-about-card",children:(0,qt.jsxs)("div",{className:"landing-about-card-content",children:[(0,qt.jsx)("div",{className:"landing-about-icon",children:(0,qt.jsx)(At,{size:32})}),(0,qt.jsxs)("div",{className:"landing-about-card-text",children:[(0,qt.jsx)("h3",{className:"landing-about-card-title",children:"Instruksi Terdokumentasi Digital"}),(0,qt.jsx)("p",{className:"landing-about-card-description",children:"Semua prosedur kerja tersimpan dalam format digital yang mudah diakses, diperbarui secara real-time, dan dibagikan kepada seluruh tim."})]})]})}),(0,qt.jsx)("div",{className:"landing-about-card",children:(0,qt.jsxs)("div",{className:"landing-about-card-content",children:[(0,qt.jsx)("div",{className:"landing-about-icon",children:(0,qt.jsx)(Ot,{size:32})}),(0,qt.jsxs)("div",{className:"landing-about-card-text",children:[(0,qt.jsx)("h3",{className:"landing-about-card-title",children:"Akses Instruksi Kapan Saja"}),(0,qt.jsx)("p",{className:"landing-about-card-description",children:"Pekerja dapat mengakses instruksi kerja 24/7 melalui perangkat mobile atau desktop, memastikan produktivitas maksimal bahkan saat offline."})]})]})}),(0,qt.jsx)("div",{className:"landing-about-card",children:(0,qt.jsxs)("div",{className:"landing-about-card-content",children:[(0,qt.jsx)("div",{className:"landing-about-icon",children:(0,qt.jsx)(Rt,{size:32})}),(0,qt.jsxs)("div",{className:"landing-about-card-text",children:[(0,qt.jsx)("h3",{className:"landing-about-card-title",children:"Dukung Kolaborasi Tim"}),(0,qt.jsx)("p",{className:"landing-about-card-description",children:"Dirancang untuk teknisi, supervisor, dan staff operasional dengan interface intuitif yang mendukung kerja tim yang efektif."})]})]})})]}),(0,qt.jsxs)("div",{className:"landing-about-animation",children:[c?(0,qt.jsx)("div",{className:"landing-video-placeholder",children:(0,qt.jsxs)("div",{className:"landing-placeholder-content",children:[(0,qt.jsx)("div",{className:"landing-placeholder-icon",children:(0,qt.jsx)(Dt,{size:64})}),(0,qt.jsxs)("div",{className:"landing-placeholder-text",children:[(0,qt.jsx)("h3",{children:"Work Illustration Video"}),(0,qt.jsx)("p",{children:"Video menunjukkan cara kerja sistem dalam aksi"}),(0,qt.jsx)("button",{className:"landing-placeholder-button",onClick:()=>u(!1),children:"Coba Lagi"})]})]})}):(0,qt.jsxs)("video",{className:"landing-about-video",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:()=>{console.log("Video failed to load"),u(!0)},poster:"/assets/images/video-poster.jpg",children:[(0,qt.jsx)("source",{src:Wt,type:"video/mp4"}),(0,qt.jsx)("source",{src:"./assets/videos/work-illustration.mp4",type:"video/mp4"}),(0,qt.jsx)("source",{src:"/assets/videos/work-illustration.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,qt.jsxs)("div",{className:"landing-floating-elements",children:[(0,qt.jsx)("div",{className:"landing-floating-dot landing-dot-1"}),(0,qt.jsx)("div",{className:"landing-floating-dot landing-dot-2"}),(0,qt.jsx)("div",{className:"landing-floating-dot landing-dot-3"}),(0,qt.jsx)("div",{className:"landing-floating-dot landing-dot-4"}),(0,qt.jsx)("div",{className:"landing-floating-dot landing-dot-5"}),(0,qt.jsx)("div",{className:"landing-floating-dot landing-dot-6"}),(0,qt.jsx)("div",{className:"landing-floating-shape landing-shape-1"}),(0,qt.jsx)("div",{className:"landing-floating-shape landing-shape-2"})]})]})]})]})}),(0,qt.jsx)("section",{id:"how-to-use",className:"landing-how-to-use-section",children:(0,qt.jsxs)("div",{className:"landing-section-container",children:[(0,qt.jsxs)("div",{className:"landing-section-header",children:[(0,qt.jsx)("h2",{className:"landing-section-title",children:"Cara Menggunakan Sistem Ini"}),(0,qt.jsx)("p",{className:"landing-section-subtitle",children:"Langkah singkat untuk memulai - mudah digunakan bahkan untuk pengguna awam"})]}),(0,qt.jsxs)("div",{className:"landing-steps-container",children:[(0,qt.jsxs)("div",{className:"landing-step-item",children:[(0,qt.jsx)("div",{className:"landing-step-number",children:"1"}),(0,qt.jsxs)("div",{className:"landing-step-content",children:[(0,qt.jsx)("h3",{className:"landing-step-title",children:"Login dengan Akun Karyawan"}),(0,qt.jsx)("p",{className:"landing-step-description",children:"Masuk menggunakan akun yang telah didaftarkan oleh admin HRD. Gunakan email dan password yang diberikan."})]})]}),(0,qt.jsx)("div",{className:"landing-step-arrow",children:(0,qt.jsx)(Pt,{size:24})}),(0,qt.jsxs)("div",{className:"landing-step-item",children:[(0,qt.jsx)("div",{className:"landing-step-number",children:"2"}),(0,qt.jsxs)("div",{className:"landing-step-content",children:[(0,qt.jsx)("h3",{className:"landing-step-title",children:"Lihat Instruksi Kerja Hari Ini"}),(0,qt.jsx)("p",{className:"landing-step-description",children:"Dashboard akan menampilkan semua tugas dan instruksi yang harus diselesaikan dengan prioritas dan deadline yang jelas."})]})]}),(0,qt.jsx)("div",{className:"landing-step-arrow",children:(0,qt.jsx)(Pt,{size:24})}),(0,qt.jsxs)("div",{className:"landing-step-item",children:[(0,qt.jsx)("div",{className:"landing-step-number",children:"3"}),(0,qt.jsxs)("div",{className:"landing-step-content",children:[(0,qt.jsx)("h3",{className:"landing-step-title",children:"Ikuti Langkah yang Tertera"}),(0,qt.jsx)("p",{className:"landing-step-description",children:"Instruksi detail dengan gambar dan video akan memandu setiap langkah pekerjaan yang harus dilakukan dengan aman."})]})]}),(0,qt.jsx)("div",{className:"landing-step-arrow",children:(0,qt.jsx)(Pt,{size:24})}),(0,qt.jsxs)("div",{className:"landing-step-item",children:[(0,qt.jsx)("div",{className:"landing-step-number",children:"4"}),(0,qt.jsxs)("div",{className:"landing-step-content",children:[(0,qt.jsx)("h3",{className:"landing-step-title",children:"Tandai Selesai dan Unggah Bukti"}),(0,qt.jsx)("p",{className:"landing-step-description",children:"Setelah selesai, tandai sebagai complete dan upload foto/dokumen sebagai bukti penyelesaian untuk audit trail."})]})]})]})]})}),(0,qt.jsx)("section",{id:"faq",className:"landing-faq-section",children:(0,qt.jsxs)("div",{className:"landing-section-container",children:[(0,qt.jsxs)("div",{className:"landing-section-header",children:[(0,qt.jsx)("h2",{className:"landing-section-title",children:"Pertanyaan yang Sering Diajukan"}),(0,qt.jsx)("p",{className:"landing-section-subtitle",children:"Jawaban untuk pertanyaan umum tentang sistem Work Instruction"})]}),(0,qt.jsx)("div",{className:"landing-faq-grid",children:[{question:"Saya belum punya akun, bagaimana cara daftar?",answer:"Silakan hubungi admin HRD untuk pendaftaran awal. Admin akan membuatkan akun dan memberikan kredensial login kepada Anda. Proses pendaftaran biasanya memakan waktu 1-2 hari kerja."},{question:"Saya lupa password, bagaimana cara reset?",answer:'Gunakan tombol "Lupa Password" pada halaman login. Masukkan email yang terdaftar dan ikuti instruksi reset password yang dikirim ke email Anda. Link reset berlaku selama 24 jam.'},{question:"Apakah sistem ini bisa diakses dari mobile?",answer:"Ya, sistem ini responsive dan dapat diakses dari berbagai perangkat termasuk smartphone, tablet, dan desktop untuk kemudahan akses di lapangan. Aplikasi mobile native juga tersedia di App Store dan Play Store."},{question:"Bagaimana cara melaporkan masalah teknis?",answer:'Anda dapat melaporkan masalah teknis melalui menu "Help" di dalam sistem, atau hubungi tim IT support melalui email support@lenrailway.com atau telepon ekstensi 1234.'},{question:"Apakah data saya aman di sistem ini?",answer:"Ya, sistem ini menggunakan enkripsi tingkat enterprise dan backup otomatis. Semua data disimpan di server yang aman dengan sertifikasi ISO 27001 dan audit keamanan berkala."}].map((e,t)=>(0,qt.jsxs)("div",{className:"landing-faq-card ".concat(i===t?"landing-active":""),onClick:()=>(e=>{a(i===e?null:e)})(t),children:[(0,qt.jsxs)("div",{className:"landing-faq-question",children:[(0,qt.jsx)(Lt,{size:20,className:"landing-faq-icon"}),(0,qt.jsx)("span",{children:e.question}),(0,qt.jsx)("span",{className:"landing-faq-toggle-icon",children:i===t?"\u2212":"+"})]}),(0,qt.jsx)("div",{className:"landing-faq-answer",children:(0,qt.jsx)("p",{children:e.answer})})]},t))})]})}),(0,qt.jsx)("footer",{className:"landing-footer",children:(0,qt.jsxs)("div",{className:"landing-footer-content",children:[(0,qt.jsx)("div",{className:"landing-footer-main",children:(0,qt.jsxs)("div",{className:"landing-footer-logo-section",children:[(0,qt.jsx)("img",{src:Ft,alt:"Logo Len Railway Systems",className:"landing-footer-logo-img",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,qt.jsx)("div",{className:"landing-logo-fallback",style:{display:"none"},children:(0,qt.jsx)("span",{children:"LEN"})}),(0,qt.jsx)("div",{className:"landing-footer-description",children:(0,qt.jsx)("p",{children:"Solusi teknologi kereta api terdepan untuk masa depan transportasi Indonesia yang lebih baik."})})]})}),(0,qt.jsx)("div",{className:"landing-footer-bottom",children:(0,qt.jsxs)("div",{className:"landing-footer-info",children:[(0,qt.jsx)("p",{className:"landing-footer-text",children:"\xa9 2025 Len Railways System. Seluruh Hak Cipta Dilindungi."}),(0,qt.jsx)("p",{className:"landing-footer-subtext",children:"PT Len Railway Systems - Solusi Teknologi Kereta Api Terdepan"})]})})]})})]})},Gt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},$t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new Xt;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yt=function(e){return function(e){const t=Gt(e);return $t.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Qt=function(e){try{return $t.decodeString(e,!0)}catch(fN){console.error("base64Decode failed: ",fN)}return null};function Jt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Zt=()=>{try{return Jt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/workinstruction",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(fN){return}const t=e&&Qt(e[1]);return t&&JSON.parse(t)})()}catch(fN){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(fN))}},en=e=>{var t,n;return null===(n=null===(t=Zt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},tn=e=>{const t=en(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},nn=()=>{var e;return null===(e=Zt())||void 0===e?void 0:e.config},rn=e=>{var t;return null===(t=Zt())||void 0===t?void 0:t["_".concat(e)]};class sn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function an(e){return e.endsWith(".cloudworkstations.dev")}async function on(e){return(await fetch(e,{credentials:"include"})).ok}function ln(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Yt(JSON.stringify({alg:"none",type:"JWT"})),Yt(JSON.stringify(i)),""].join(".")}const cn={};let un=!1;function dn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!an(window.location.host)||cn[e]===t||cn[e]||un)return;function n(e){return"__firebase__banner__".concat(e)}cn[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(cn))cn[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{un=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function hn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function fn(){var e;const t=null===(e=Zt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(fN){return!1}}function pn(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function mn(){return!fn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gn(){return!fn()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bn(){try{return"object"===typeof indexedDB}catch(fN){return!1}}function vn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class yn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}}class wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(xn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new yn(n,i,t)}}const xn=/\{\$([^}]+)}/g;function kn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(_n(n)&&_n(i)){if(!kn(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _n(e){return null!==e&&"object"===typeof e}function Sn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function jn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Nn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Tn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=En),void 0===r.error&&(r.error=En),void 0===r.complete&&(r.complete=En);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(fN){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(fN){"undefined"!==typeof console&&console.error&&console.error(fN)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}function Cn(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function In(e){return e&&e._delegate?e._delegate:e}class An{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Mn="[DEFAULT]";class On{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new sn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(fN){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(fN){if(r)return null;throw fN}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Mn})}catch(fN){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(fN){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===Mn?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mn;return this.component?this.component.multipleInstances?e:Mn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new On(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Dn=[];var Pn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pn||(Pn={}));const Ln={debug:Pn.DEBUG,verbose:Pn.VERBOSE,info:Pn.INFO,warn:Pn.WARN,error:Pn.ERROR,silent:Pn.SILENT},Fn=Pn.INFO,Bn={[Pn.DEBUG]:"log",[Pn.VERBOSE]:"log",[Pn.INFO]:"info",[Pn.WARN]:"warn",[Pn.ERROR]:"error"},Un=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Bn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class zn{constructor(e){this.name=e,this._logLevel=Fn,this._logHandler=Un,this._userLogHandler=null,Dn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ln[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pn.DEBUG,...t),this._logHandler(this,Pn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pn.VERBOSE,...t),this._logHandler(this,Pn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pn.INFO,...t),this._logHandler(this,Pn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pn.WARN,...t),this._logHandler(this,Pn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Pn.ERROR,...t),this._logHandler(this,Pn.ERROR,...t)}}let Vn,Hn;const Wn=new WeakMap,qn=new WeakMap,Kn=new WeakMap,Gn=new WeakMap,$n=new WeakMap;let Xn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Kn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Yn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Hn||(Hn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Zn(this),n),Jn(Wn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jn(e.apply(Zn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Zn(this),t,...r);return Kn.set(i,t.sort?t.sort():[t]),Jn(i)}}function Qn(e){return"function"===typeof e?Yn(e):(e instanceof IDBTransaction&&function(e){if(qn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});qn.set(e,t)}(e),t=e,(Vn||(Vn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Xn):e);var t}function Jn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Jn(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Wn.set(t,e)}).catch(()=>{}),$n.set(t,e),t}(e);if(Gn.has(e))return Gn.get(e);const t=Qn(e);return t!==e&&(Gn.set(e,t),$n.set(t,e)),t}const Zn=e=>$n.get(e);function er(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Jn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Jn(a.result),e.oldVersion,e.newVersion,Jn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const tr=["get","getKey","getAll","getAllKeys","count"],nr=["put","add","delete","clear"],rr=new Map;function sr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(rr.get(t))return rr.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=nr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!tr.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return rr.set(t,i),i}Xn=(e=>l(l({},e),{},{get:(t,n,r)=>sr(t,n)||e.get(t,n,r),has:(t,n)=>!!sr(t,n)||e.has(t,n)}))(Xn);class ir{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ar="@firebase/app",or="0.13.1",lr=new zn("@firebase/app"),cr="@firebase/app-compat",ur="@firebase/analytics-compat",dr="@firebase/analytics",hr="@firebase/app-check-compat",fr="@firebase/app-check",pr="@firebase/auth",mr="@firebase/auth-compat",gr="@firebase/database",br="@firebase/data-connect",vr="@firebase/database-compat",yr="@firebase/functions",wr="@firebase/functions-compat",xr="@firebase/installations",kr="@firebase/installations-compat",_r="@firebase/messaging",Sr="@firebase/messaging-compat",jr="@firebase/performance",Nr="@firebase/performance-compat",Tr="@firebase/remote-config",Er="@firebase/remote-config-compat",Cr="@firebase/storage",Ir="@firebase/storage-compat",Ar="@firebase/firestore",Mr="@firebase/ai",Or="@firebase/firestore-compat",Rr="firebase",Dr="[DEFAULT]",Pr={[ar]:"fire-core",[cr]:"fire-core-compat",[dr]:"fire-analytics",[ur]:"fire-analytics-compat",[fr]:"fire-app-check",[hr]:"fire-app-check-compat",[pr]:"fire-auth",[mr]:"fire-auth-compat",[gr]:"fire-rtdb",[br]:"fire-data-connect",[vr]:"fire-rtdb-compat",[yr]:"fire-fn",[wr]:"fire-fn-compat",[xr]:"fire-iid",[kr]:"fire-iid-compat",[_r]:"fire-fcm",[Sr]:"fire-fcm-compat",[jr]:"fire-perf",[Nr]:"fire-perf-compat",[Tr]:"fire-rc",[Er]:"fire-rc-compat",[Cr]:"fire-gcs",[Ir]:"fire-gcs-compat",[Ar]:"fire-fst",[Or]:"fire-fst-compat",[Mr]:"fire-vertex","fire-js":"fire-js",[Rr]:"fire-js-all"},Lr=new Map,Fr=new Map,Br=new Map;function Ur(e,t){try{e.container.addComponent(t)}catch(fN){lr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),fN)}}function zr(e){const t=e.name;if(Br.has(t))return lr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Br.set(t,e);for(const n of Lr.values())Ur(n,e);for(const n of Fr.values())Ur(n,e);return!0}function Vr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Hr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Wr=new wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}const Kr="11.9.0";function Gr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Dr,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw Wr.create("bad-app-name",{appName:String(s)});if(n||(n=nn()),!n)throw Wr.create("no-options");const i=Lr.get(s);if(i){if(kn(n,i.options)&&kn(r,i.config))return i;throw Wr.create("duplicate-app",{appName:s})}const a=new Rn(s);for(const l of Br.values())a.addComponent(l);const o=new qr(n,r,a);return Lr.set(s,o),o}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr;const t=Lr.get(e);if(!t&&e===Dr&&nn())return Gr();if(!t)throw Wr.create("no-app",{appName:e});return t}function Xr(e,t,n){var r;let s=null!==(r=Pr[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void lr.warn(e.join(" "))}zr(new An("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const Yr="firebase-heartbeat-store";let Qr=null;function Jr(){return Qr||(Qr=er("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Yr)}catch(fN){console.warn(fN)}}}).catch(e=>{throw Wr.create("idb-open",{originalErrorMessage:e.message})})),Qr}async function Zr(e,t){try{const n=(await Jr()).transaction(Yr,"readwrite"),r=n.objectStore(Yr);await r.put(t,es(e)),await n.done}catch(fN){if(fN instanceof yn)lr.warn(fN.message);else{const t=Wr.create("idb-set",{originalErrorMessage:null===fN||void 0===fN?void 0:fN.message});lr.warn(t.message)}}}function es(e){return"".concat(e.name,"!").concat(e.options.appId)}class ts{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rs(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ns();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(fN){lr.warn(fN)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ns(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ss(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ss(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=Yt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(fN){return lr.warn(fN),""}}}function ns(){return(new Date).toISOString().substring(0,10)}class rs{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!bn()&&vn().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Jr()).transaction(Yr),n=await t.objectStore(Yr).get(es(e));return await t.done,n}catch(fN){if(fN instanceof yn)lr.warn(fN.message);else{const t=Wr.create("idb-get",{originalErrorMessage:null===fN||void 0===fN?void 0:fN.message});lr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ss(e){return Yt(JSON.stringify({version:2,heartbeats:e})).length}var is;is="",zr(new An("platform-logger",e=>new ir(e),"PRIVATE")),zr(new An("heartbeat",e=>new ts(e),"PRIVATE")),Xr(ar,or,is),Xr(ar,or,"esm2017"),Xr("fire-js","");function as(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function os(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ls=os,cs=new wn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),us=new zn("@firebase/auth");function ds(e){if(us.logLevel<=Pn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];us.error("Auth (".concat(Kr,"): ").concat(e),...n)}}function hs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw bs(e,...n)}function fs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bs(e,...n)}function ps(e,t,n){const r=Object.assign(Object.assign({},ls()),{[t]:n});return new wn("auth","Firebase",r).create(t,{appName:e.name})}function ms(e){return ps(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gs(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&hs(e,"argument-error"),ps(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function bs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return cs.create(e,...n)}function vs(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw bs(t,...r)}}function ys(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ds(t),new Error(t)}function ws(e,t){e||ys(t)}function xs(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ks(){return"http:"===_s()||"https:"===_s()}function _s(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ss{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ks()||pn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function js(e,t){ws(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ns{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ts={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Es=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cs=new Ss(3e4,6e4);function Is(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function As(e,t,n,r){return Ms(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=Sn(Object.assign({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&an(e.emulatorConfig.host)&&(l.credentials="include"),Ns.fetch()(await Rs(e,e.config.apiHost,n,a),l)})}async function Ms(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ts),t);try{const t=new Ps(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Ls(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ls(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Ls(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Ls(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ps(e,o,a);hs(e,o)}}catch(fN){if(fN instanceof yn)throw fN;hs(e,"network-request-failed",{message:String(fN)})}}async function Os(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await As(e,t,n,r,s);return"mfaPendingCredential"in i&&hs(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Rs(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?js(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Es.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Ds(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ps{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(fs(this.auth,"network-request-failed")),Cs.get())})}}function Ls(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fs(e,t,r);return s.customData._tokenResponse=n,s}function Fs(e){return void 0!==e&&void 0!==e.enterprise}class Bs{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ds(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Us(e,t){return As(e,"GET","/v2/recaptchaConfig",Is(e,t))}async function zs(e,t){return As(e,"POST","/v1/accounts:lookup",t)}function Vs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(fN){}}function Hs(e){return 1e3*Number(e)}function Ws(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ds("JWT malformed, contained fewer than 3 sections"),null;try{const e=Qt(n);return e?JSON.parse(e):(ds("Failed to decode base64 JWT payload"),null)}catch(fN){return ds("Caught error parsing JWT payload as JSON",null===fN||void 0===fN?void 0:fN.toString()),null}}function qs(e){const t=Ws(e);return vs(t,"internal-error"),vs("undefined"!==typeof t.exp,"internal-error"),vs("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ks(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(fN){throw fN instanceof yn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(fN)&&e.auth.currentUser===e&&await e.auth.signOut(),fN}}class Gs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(fN){return void((null===fN||void 0===fN?void 0:fN.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $s{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vs(this.lastLoginAt),this.creationTime=Vs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xs(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Ks(e,zs(n,{idToken:r}));vs(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Ys(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new $s(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Ys(e){return e.map(e=>{var{providerId:t}=e,n=as(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vs(e.idToken,"internal-error"),vs("undefined"!==typeof e.idToken,"internal-error"),vs("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):qs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){vs(0!==e.length,"internal-error");const t=qs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(vs(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Ms(e,{},async()=>{const n=Sn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Rs(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&an(e.emulatorConfig.host)&&(o.credentials="include"),Ns.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Qs;return n&&(vs("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(vs("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(vs("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qs,this.toJSON())}_performRefresh(){return ys("not implemented")}}function Js(e,t){vs("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Zs{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=as(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $s(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ks(this,this.stsTokenManager.getToken(this.auth,e));return vs(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=In(e),r=await n.getIdToken(t),s=Ws(r);vs(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Vs(Hs(s.auth_time)),issuedAtTime:Vs(Hs(s.iat)),expirationTime:Vs(Hs(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=In(e);await Xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vs(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){vs(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await Ks(this,async function(e,t){return As(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,b=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:y,isAnonymous:w,providerData:x,stsTokenManager:k}=t;vs(v&&k,e,"internal-error");const _=Qs.fromJSON(this.name,k);vs("string"===typeof v,e,"internal-error"),Js(u,e.name),Js(d,e.name),vs("boolean"===typeof y,e,"internal-error"),vs("boolean"===typeof w,e,"internal-error"),Js(h,e.name),Js(f,e.name),Js(p,e.name),Js(m,e.name),Js(g,e.name),Js(b,e.name);const S=new Zs({uid:v,auth:e,email:d,emailVerified:y,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:_,createdAt:g,lastLoginAt:b});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qs;r.updateFromServerResponse(t);const s=new Zs({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xs(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];vs(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Ys(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length),a=new Qs;a.updateFromIdToken(n);const o=new Zs({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new $s(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===s||void 0===s?void 0:s.length)};return Object.assign(o,l),o}}const ei=new Map;function ti(e){ws(e instanceof Function,"Expected a class definition");let t=ei.get(e);return t?(ws(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ei.set(e,t),t)}class ni{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ni.type="NONE";const ri=ni;function si(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ii{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=si(this.userKey,r.apiKey,s),this.fullPersistenceKey=si("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await zs(this.auth,{idToken:e}).catch(()=>{});return t?Zs._fromGetAccountInfoResponse(this.auth,t,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ii(ti(ri),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ti(ri);const i=si(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await zs(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Zs._fromGetAccountInfoResponse(e,r,t)}else n=Zs._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new ii(s,e,n)):new ii(s,e,n)}}function ai(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hi(t))return"Blackberry";if(fi(t))return"Webos";if(li(t))return"Safari";if((t.includes("chrome/")||ci(t))&&!t.includes("edge/"))return"Chrome";if(di(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/firefox\//i.test(e)}function li(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ci(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/crios\//i.test(e)}function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/iemobile/i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/android/i.test(e)}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/blackberry/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/webos/i.test(e)}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mi(){return function(){const e=hn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn();return pi(e)||di(e)||fi(e)||hi(e)||/windows phone/i.test(e)||ui(e)}function bi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ai(hn());break;case"Worker":t="".concat(ai(hn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Kr,"/").concat(r)}class vi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(fN){r(fN)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(fN){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===fN||void 0===fN?void 0:fN.message})}}}class yi{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class wi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ki(this),this.idTokenSubscription=new ki(this),this.beforeStateQueue=new vi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cs,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await ii.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(fN){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await zs(this,{idToken:e}),n=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Hr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null===a||void 0===a?void 0:a.user)||(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(fN){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(fN))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vs(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(fN){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xs(e)}catch(fN){if((null===fN||void 0===fN?void 0:fN.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(ms(this));const t=e?In(e):null;return t&&vs(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vs(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return As(e,"GET","/v2/passwordPolicy",Is(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new yi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return As(e,"POST","/v2/accounts:revokeToken",Is(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;vs(t,this,"argument-error"),this.redirectPersistenceManager=await ii.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vs(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vs(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(us.logLevel<=Pn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];us.warn("Auth (".concat(Kr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function xi(e){return In(e)}class ki{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Tn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return vs(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _i={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Si(e){return _i.loadJS(e)}function ji(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ni{constructor(){this.enterprise=new Ti}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ti{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ei="NO_RECAPTCHA";class Ci{constructor(e){this.type="recaptcha-enterprise",this.auth=xi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Fs(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ei)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ni).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Us(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Bs(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Fs(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=_i.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Si(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ii(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Ci(e);let a;if(s)a=Ei;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ai(e,t,n,r,s){var i,a;if("EMAIL_PASSWORD_PROVIDER"===s){if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ii(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Ii(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const s=await Ii(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Ii(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Ii(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Mi(e){const t=xi(e),n=await Us(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Bs(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ci(t).verify()}}function Oi(e,t,n){const r=xi(e);vs(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Ri(t),{host:a,port:o}=function(e){const t=Ri(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Di(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Di(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return vs(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void vs(kn(c,r.config.emulator)&&kn(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,an(a)?(on("".concat(i,"//").concat(a).concat(l)),dn("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ri(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Di(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,t){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}async function Li(e,t){return As(e,"POST","/v1/accounts:signUp",t)}async function Fi(e,t){return Os(e,"POST","/v1/accounts:signInWithPassword",Is(e,t))}async function Bi(e,t){return As(e,"POST","/v1/accounts:sendOobCode",Is(e,t))}async function Ui(e,t){return Bi(e,t)}class zi extends Pi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new zi(e,t,"password")}static _fromEmailAndCode(e,t){return new zi(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ai(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Fi,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithEmailLink",Is(e,t))}(e,{email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ai(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Li,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithEmailLink",Is(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vi(e,t){return Os(e,"POST","/v1/accounts:signInWithIdp",Is(e,t))}class Hi extends Pi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=as(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Hi(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Vi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sn(t)}return e}}async function Wi(e,t){return As(e,"POST","/v1/accounts:sendVerificationCode",Is(e,t))}const qi={USER_NOT_FOUND:"user-not-found"};class Ki extends Pi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ki({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ki({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Os(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,t));if(n.temporaryProof)throw Ls(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Os(e,"POST","/v1/accounts:signInWithPhoneNumber",Is(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),qi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Ki({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Gi{constructor(e){var t,n,r,s,i,a;const o=jn(Nn(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);vs(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=jn(Nn(e)).link,n=t?jn(Nn(t)).deep_link_id:null,r=jn(Nn(e)).deep_link_id;return(r?jn(Nn(r)).link:null)||r||n||t||e}(e);try{return new Gi(t)}catch(n){return null}}}class $i{constructor(){this.providerId=$i.PROVIDER_ID}static credential(e,t){return zi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Gi.parseLink(t);return vs(n,"argument-error"),zi._fromEmailAndCode(e,n.code,n.tenantId)}}$i.PROVIDER_ID="password",$i.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Xi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yi extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qi extends Yi{constructor(){super("facebook.com")}static credential(e){return Hi._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qi.credential(t.oauthAccessToken)}catch(n){return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qi.PROVIDER_ID="facebook.com";class Ji extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hi._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ji.credential(n,r)}catch(s){return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com",Ji.PROVIDER_ID="google.com";class Zi extends Yi{constructor(){super("github.com")}static credential(e){return Hi._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Zi.credential(t.oauthAccessToken)}catch(n){return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com",Zi.PROVIDER_ID="github.com";class ea extends Yi{constructor(){super("twitter.com")}static credential(e,t){return Hi._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ea.credential(n,r)}catch(s){return null}}}async function ta(e,t){return Os(e,"POST","/v1/accounts:signUp",Is(e,t))}ea.TWITTER_SIGN_IN_METHOD="twitter.com",ea.PROVIDER_ID="twitter.com";class na{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await Zs._fromIdTokenResponse(e,n,r),i=ra(n);return new na({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ra(n);return new na({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ra(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class sa extends yn{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,sa.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new sa(e,t,n,r)}}function ia(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw sa._fromErrorAndOperation(e,n,t,r);throw n})}async function aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ks(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return na._forOperation(e,"link",r)}async function oa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Hr(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const i=await Ks(e,ia(r,s,t,e),n);vs(i.idToken,r,"internal-error");const a=Ws(i.idToken);vs(a,r,"internal-error");const{sub:o}=a;return vs(e.uid===o,r,"user-mismatch"),na._forOperation(e,s,i)}catch(fN){throw(null===fN||void 0===fN?void 0:fN.code)==="auth/".concat("user-not-found")&&hs(r,"user-mismatch"),fN}}async function la(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Hr(e.app))return Promise.reject(ms(e));const r="signIn",s=await ia(e,r,t),i=await na._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function ca(e,t){return la(xi(e),t)}function ua(e,t,n){var r;vs((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vs("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),vs("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vs(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vs(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function da(e){const t=xi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ha(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=In(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Ks(s,async function(e,t){return As(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function fa(e,t,n,r){return In(e).onAuthStateChanged(t,n,r)}function pa(e){return In(e).signOut()}function ma(e,t){return As(e,"POST","/v2/accounts/mfaEnrollment:start",Is(e,t))}new WeakMap;const ga="__sak";class ba{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ga,"1"),this.storage.removeItem(ga),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class va extends ba{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);mi()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}va.type="LOCAL";const ya=va;function wa(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(s))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function xa(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class ka{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=xa(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return wa(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=xa(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=xa(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=wa(n);const s=setInterval(()=>{const e=wa(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ka.type="COOKIE";class _a extends ba{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_a.type="SESSION";const Sa=_a;class ja{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ja(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Na(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ja.receivers=[];class Ta{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Na("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Ea(){return window}function Ca(){return"undefined"!==typeof Ea().WorkerGlobalScope&&"function"===typeof Ea().importScripts}const Ia="firebaseLocalStorageDb",Aa="firebaseLocalStorage",Ma="fbase_key";class Oa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ra(e,t){return e.transaction([Aa],t?"readwrite":"readonly").objectStore(Aa)}function Da(){const e=indexedDB.open(Ia,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Aa,{keyPath:Ma})}catch(fN){n(fN)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Aa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ia);return new Oa(e).toPromise()}(),t(await Da()))})})}async function Pa(e,t,n){const r=Ra(e,!0).put({[Ma]:t,value:n});return new Oa(r).toPromise()}function La(e,t){const n=Ra(e,!0).delete(t);return new Oa(n).toPromise()}class Fa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Da()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(fN){if(t++>3)throw fN;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ca()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ja._getInstance(Ca()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ta(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Da();return await Pa(e,ga,"1"),await La(e,ga),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pa(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ra(e,!1).get(t),r=await new Oa(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>La(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ra(e,!1).getAll();return new Oa(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fa.type="LOCAL";const Ba=Fa;function Ua(e,t){return As(e,"POST","/v2/accounts/mfaSignIn:start",Is(e,t))}ji("rcb"),new Ss(3e4,6e4);const za="recaptcha";async function Va(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Mi(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){vs("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Ai(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ei){vs((null===n||void 0===n?void 0:n.type)===za,e,"argument-error");return ma(e,await Ha(e,t,n))}return ma(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{vs("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;vs(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ai(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ei){vs((null===n||void 0===n?void 0:n.type)===za,e,"argument-error");return Ua(e,await Ha(e,t,n))}return Ua(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Ai(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ei){vs((null===n||void 0===n?void 0:n.type)===za,e,"argument-error");return Wi(e,await Ha(e,t,n))}return Wi(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ha(e,t,n){vs(n.type===za,e,"argument-error");const r=await n.verify();vs("string"===typeof r,e,"argument-error");const s=Object.assign({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Wa{constructor(e){this.providerId=Wa.PROVIDER_ID,this.auth=xi(e)}verifyPhoneNumber(e,t){return Va(this.auth,e,In(t))}static credential(e,t){return Ki._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Wa.credentialFromTaggedObject(t)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ki._fromTokenResponse(n,r):null}}function qa(e,t){return t?ti(t):(vs(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Wa.PROVIDER_ID="phone",Wa.PHONE_SIGN_IN_METHOD="phone";class Ka extends Pi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ga(e){return la(e.auth,new Ka(e),e.bypassAuthState)}function $a(e){const{auth:t,user:n}=e;return vs(n,t,"internal-error"),oa(n,new Ka(e),e.bypassAuthState)}async function Xa(e){const{auth:t,user:n}=e;return vs(n,t,"internal-error"),aa(n,new Ka(e),e.bypassAuthState)}class Ya{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(fN){this.reject(fN)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(fN){this.reject(fN)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ga;case"linkViaPopup":case"linkViaRedirect":return Xa;case"reauthViaPopup":case"reauthViaRedirect":return $a;default:hs(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qa=new Ss(2e3,1e4);class Ja extends Ya{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Ja.currentPopupAction&&Ja.currentPopupAction.cancel(),Ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vs(e,this.auth,"internal-error"),e}async onExecution(){ws(1===this.filter.length,"Popup operations only handle one event");const e=Na();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fs(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Qa.get())};e()}}Ja.currentPopupAction=null;const Za=new Map;class eo extends Ya{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Za.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ro(t),r=no(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(fN){e=()=>Promise.reject(fN)}Za.set(this.auth._key(),e)}return this.bypassAuthState||Za.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function to(e,t){Za.set(e._key(),t)}function no(e){return ti(e._redirectPersistence)}function ro(e){return si("pendingRedirect",e.config.apiKey,e.name)}async function so(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Hr(e.app))return Promise.reject(ms(e));const r=xi(e),s=qa(r,t),i=new eo(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class io{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!oo(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ao(e))}saveEventToCache(e){this.cachedEventUids.add(ao(e)),this.lastProcessedEventTime=Date.now()}}function ao(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function oo(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const lo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,co=/^https?/;async function uo(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return As(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ho(r))return}catch(n){}hs(e,"unauthorized-domain")}function ho(e){const t=xs(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!co.test(n))return!1;if(lo.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const fo=new Ss(3e4,6e4);function po(){const e=Ea().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function mo(e){return new Promise((t,n)=>{var r,s,i;function a(){po(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{po(),n(fs(e,"network-request-failed"))},timeout:fo.get()})}if(null===(s=null===(r=Ea().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Ea().gapi)||void 0===i?void 0:i.load)){const t=ji("iframefcb");return Ea()[t]=()=>{gapi.load?a():n(fs(e,"network-request-failed"))},Si("".concat(_i.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw go=null,e})}let go=null;const bo=new Ss(5e3,15e3),vo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wo(e){const t=e.config;vs(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?js(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Kr},s=yo.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Sn(r).slice(1))}async function xo(e){const t=await function(e){return go=go||mo(e),go}(e),n=Ea().gapi;return vs(n,e,"internal-error"),t.open({where:document.body,url:wo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=fs(e,"network-request-failed"),i=Ea().setTimeout(()=>{r(s)},bo.get());function a(){Ea().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const ko={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _o{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(fN){}}}function So(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},ko),{width:r.toString(),height:s.toString(),top:i,left:a}),c=hn().toLowerCase();n&&(o=ci(c)?"_blank":n),oi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return pi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new _o(null);const d=window.open(t||"",o,u);vs(d,e,"popup-blocked");try{d.focus()}catch(fN){}return new _o(d)}const jo="__/auth/handler",No="emulator/auth/handler",To=encodeURIComponent("fac");async function Eo(e,t,n,r,s,i){vs(e.config.authDomain,e,"auth-domain-config-required"),vs(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Kr,eventId:s};if(t instanceof Xi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof Yi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(To,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(jo);return js(t,No)}(e),"?").concat(Sn(o).slice(1)).concat(c)}const Co="webStorageSupport";const Io=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sa,this._completeRedirectFn=so,this._overrideRedirectResult=to}async _openPopup(e,t,n,r){var s;ws(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return So(e,await Eo(e,t,n,xs(),r),Na())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ea().location.href=e}(await Eo(e,t,n,xs(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ws(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await xo(e),n=new io(e);return t.register("authEvent",t=>{vs(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Co,{type:Co},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Co];void 0!==s&&t(!!s),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uo(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gi()||li()||pi()}};var Ao="@firebase/auth",Mo="1.10.7";class Oo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vs(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ro=rn("authIdTokenMaxAge")||300;let Do=null;function Po(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r();const t=Vr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Vr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(kn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;hs(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Io,persistence:[Ba,ya,Sa]}),r=rn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ro)return;const r=null===t||void 0===t?void 0:t.token;Do!==r&&(Do=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){In(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){In(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=en("auth");return i&&Oi(n,"http://".concat(i)),n}var Lo;_i={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=fs("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Lo="Browser",zr(new An("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;vs(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Lo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bi(Lo)},c=new wi(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ti);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),zr(new An("auth-internal",e=>(e=>new Oo(e))(xi(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(Ao,Mo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Lo)),Xr(Ao,Mo,"esm2017");var Fo,Bo,Uo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=b(n),r=b(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new m(s,e)}function b(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=l*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Bo=zo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},Fo=zo.Integer=r}).apply("undefined"!==typeof Uo?Uo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Vo,Ho,Wo,qo,Ko,Go,$o,Xo,Yo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Qo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Yo&&Yo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var b=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function y(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){s.setTimeout(()=>{throw e},0)}function S(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var j=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N,e=>e.reset());class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,E=!1,C=new class{constructor(){this.h=this.g=null}add(e,t){const n=j.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const e=s.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){_(n)}var t=j;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}E=!1};function M(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(b){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:P[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,O);var P={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=H(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new B(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,r,s){if(r&&r.once)return $(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!1,r,s)}function G(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[W]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)$(e,t[i],n,r,s);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,s):G(e,t,n,!0,r,s)}function X(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)X(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(i=e.g[t],n,r,s))&&(U(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(V(n,e),0==n.h&&(n.src=null,t[W]=null)):U(e)}}}function Q(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){M.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var s=t;x(t=new O(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,M),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){M.call(this),this.h=e,this.g={}}d(le,M);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var be={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function ye(){O.call(this,"c")}d(ve,O),d(ye,O);var we={},xe=null;function ke(){return xe=xe||new ne}function _e(e){O.call(this,we.La,e)}function Se(e){const t=ke();re(t,new _e(t))}function je(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Ne(e){const t=ke();re(t,new je(t,e))}function Te(e,t){O.call(this,we.Ma,e),this.size=t}function Ee(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ce(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(_e,O),we.STAT_EVENT="statevent",d(je,O),we.Ma="timingevent",d(Te,O),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Ae,Me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}d(Re,pe),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Le={},Fe={};function Be(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),He(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),jt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=K(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?y(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function He(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ee(c(e.ba,e),t)}function qe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function $e(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}rn(n),Ne(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ee(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(qe(o),He(o)),r.g=a}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Xt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||Se(),qe(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var i=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),Ge(this),Ke(this);break e}Ie(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$e(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ve(this,o),e==Fe){4==h&&(this.s=4,Ne(14),n=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ne(15),Ie(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ie(this.i,this.l,e,null),$e(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,Ne(11))}}else Ie(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ie(this.i,this.l,o,null),$e(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ge(this),Ke(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ge(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ne(17)),Ge(this),this.s=2,Ke(this)):We(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),jt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,yt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:bt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,bt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _t(e,t){kt(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function St(e,t){return kt(e),t=Nt(e,t),e.g.has(t)}function jt(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),h(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Et(){this.g=new fe}function Ct(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(fN){throw t.push(r+"type="+encodeURIComponent("_badmap")),fN}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){kt(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)St(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,St(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(It,pe),It.prototype.g=function(){return new At(this.l,this.j)},It.prototype.i=(mt={},function(){return mt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Rt(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Lt,ne);var Ft=/^https?$/i,Bt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Ht(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(fN){}}}function Wt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Et,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xt(e){if(Qt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Qt(e){Yt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||I(),E||(T(),E=!0),C.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{Ct(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||I(),E||(T(),E=!0),C.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ee(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=ke(),new Te(r,n)),Jt(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ee(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ce;if(s.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),dn(e),Qt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new It({eb:n})):new Lt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function bn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ut(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Bt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ut(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new De(this,this.j,e);let i=this.o;if(this.S&&(i?(i=y(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Dt(i)))+"&"+t:this.m&&Pt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Be(s,n,null)):Be(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Qe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ee(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Xt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,gn.aa.N.call(this)},d(bn,ve),d(vn,ye),d(yn,pn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new bn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Xo=Qo.createWebChannelTransport=function(){return new mn},$o=Qo.getStatEventTarget=function(){return ke()},Go=Qo.Event=we,Ko=Qo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,qo=Qo.ErrorCode=Me,Oe.COMPLETE="complete",Wo=Qo.EventType=Oe,ge.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ho=Qo.WebChannel=ge,Qo.FetchXmlHttpFactory=It,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Vo=Qo.XhrIo=Lt}).apply("undefined"!==typeof Yo?Yo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Jo="@firebase/firestore",Zo="4.7.17";class el{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}el.UNAUTHENTICATED=new el(null),el.GOOGLE_CREDENTIALS=new el("google-credentials-uid"),el.FIRST_PARTY=new el("first-party-uid"),el.MOCK_USER=new el("mock-user");let tl="11.9.0";const nl=new zn("@firebase/firestore");function rl(){return nl.logLevel}function sl(e){if(nl.logLevel<=Pn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ol);nl.debug("Firestore (".concat(tl,"): ").concat(e),...s)}}function il(e){if(nl.logLevel<=Pn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ol);nl.error("Firestore (".concat(tl,"): ").concat(e),...s)}}function al(e){if(nl.logLevel<=Pn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ol);nl.warn("Firestore (".concat(tl,"): ").concat(e),...s)}}function ol(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ll(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,cl(e,r,n)}function cl(e,t,n){let r="FIRESTORE (".concat(tl,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw il(r),new Error(r)}function ul(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||cl(t,s,r)}function dl(e,t){return e}const hl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fl extends yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class pl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ml{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class gl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(el.UNAUTHENTICATED))}shutdown(){}}class bl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vl{constructor(e){this.t=e,this.currentUser=el.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ul(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new pl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pl,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{sl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(sl("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pl)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(sl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ul("string"==typeof t.accessToken,31837,{l:t}),new ml(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ul(null===e||"string"==typeof e,2055,{h:e}),new el(e)}}class yl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=el.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wl{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new yl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(el.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ul(void 0===this.o,3512);const n=e=>{null!=e.error&&sl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,sl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{sl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):sl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new xl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ul("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new xl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function _l(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Sl(){return new TextEncoder}class jl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=_l(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Nl(e,t){return e<t?-1:e>t?1:0}function Tl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Nl(r,s);{const i=Sl(),a=Cl(i.encode(El(e,n)),i.encode(El(t,n)));return 0!==a?a:Nl(r,s)}}n+=r>65535?2:1}return Nl(e.length,t.length)}function El(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Cl(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Nl(e[n],t[n]);return Nl(e.length,t.length)}function Il(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Al(e){return e+"\0"}const Ml=-62135596800,Ol=1e6;class Rl{static now(){return Rl.fromMillis(Date.now())}static fromDate(e){return Rl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ol);return new Rl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fl(hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fl(hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ml)throw new fl(hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fl(hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ol}_compareTo(e){return this.seconds===e.seconds?Nl(this.nanoseconds,e.nanoseconds):Nl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ml;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dl{static fromTimestamp(e){return new Dl(e)}static min(){return new Dl(new Rl(0,0))}static max(){return new Dl(new Rl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pl="__name__";class Ll{constructor(e,t,n){void 0===t?t=0:t>e.length&&ll(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ll(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ll.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ll?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Ll.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Nl(e.length,t.length)}static compareSegments(e,t){const n=Ll.isNumericId(e),r=Ll.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Ll.extractNumericId(e).compare(Ll.extractNumericId(t)):Tl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}}class Fl extends Ll{construct(e,t,n){return new Fl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new fl(hl.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new Fl(e)}static emptyPath(){return new Fl([])}}const Bl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ul extends Ll{construct(e,t,n){return new Ul(e,t,n)}static isValidIdentifier(e){return Bl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ul.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Pl}static keyField(){return new Ul([Pl])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new fl(hl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new fl(hl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new fl(hl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new fl(hl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ul(t)}static emptyPath(){return new Ul([])}}class zl{constructor(e){this.path=e}static fromPath(e){return new zl(Fl.fromString(e))}static fromName(e){return new zl(Fl.fromString(e).popFirst(5))}static empty(){return new zl(Fl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Fl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Fl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zl(new Fl(e.slice()))}}const Vl=-1;class Hl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Wl(e){return e.fields.find(e=>2===e.kind)}function ql(e){return e.fields.filter(e=>2!==e.kind)}Hl.UNKNOWN_ID=-1;class Kl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gl(0,Yl.min())}}function $l(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Dl.fromTimestamp(1e9===r?new Rl(n+1,0):new Rl(n,r));return new Yl(s,zl.empty(),t)}function Xl(e){return new Yl(e.readTime,e.key,Vl)}class Yl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Yl(Dl.min(),zl.empty(),Vl)}static max(){return new Yl(Dl.max(),zl.empty(),Vl)}}function Ql(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=zl.comparator(e.documentKey,t.documentKey),0!==n?n:Nl(e.largestBatchId,t.largestBatchId))}const Jl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ec(e){if(e.code!==hl.FAILED_PRECONDITION||e.message!==Jl)throw e;sl("LocalStore","Unexpectedly lost primary lease")}class tc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ll(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof tc?t:tc.resolve(t)}catch(e){return tc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tc.reject(t)}static resolve(e){return new tc((t,n)=>{t(e)})}static reject(e){return new tc((t,n)=>{n(e)})}static waitFor(e){return new tc((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=tc.resolve(!1);for(const n of e)t=t.next(e=>e?tc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new tc((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new tc((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}const nc="SimpleDb";class rc{static open(e,t,n,r){try{return new rc(t,e.transaction(r,n))}catch(e){throw new oc(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new pl,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new oc(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=hc(t.target.error);this.S.reject(new oc(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(sl(nc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cc(t)}}class sc{static delete(e){return sl(nc,"Removing database:",e),uc(Jt().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!bn())return!1;if(sc.F())return!0;const e=hn(),t=sc.M(e),n=0<t&&t<10,r=ic(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.O)}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.B=n,this.L=null,12.2===sc.M(hn())&&il("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(sl(nc,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new oc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new fl(hl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new fl(hl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new oc(e,r))},r.onupgradeneeded=e=>{sl(nc,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;if(null!==this.L&&this.L!==e.oldVersion)throw new Error('refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion='.concat(this.L,", event.oldVersion=").concat(e.oldVersion,", event.newVersion=").concat(e.newVersion,", db.version=").concat(t.version));this.B.q(t,r.transaction,e.oldVersion,this.version).next(()=>{sl(nc,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{const t=e.target;this.L=t.version},{passive:!0})),this.$&&(this.db.onversionchange=e=>this.$(e)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.k(e);const t=rc.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.v(),e)).catch(e=>(t.abort(e),tc.reject(e))).toPromise();return i.catch(()=>{}),await t.D,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(sl(nc,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ic(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ac{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return uc(this.K.delete())}}class oc extends fl{constructor(e,t){super(hl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function lc(e){return"IndexedDbTransactionError"===e.name}class cc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(sl(nc,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(sl(nc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),uc(n)}add(e){return sl(nc,"ADD",this.store.name,e,e),uc(this.store.add(e))}get(e){return uc(this.store.get(e)).next(t=>(void 0===t&&(t=null),sl(nc,"GET",this.store.name,e,t),t))}delete(e){return sl(nc,"DELETE",this.store.name,e),uc(this.store.delete(e))}count(){return sl(nc,"COUNT",this.store.name),uc(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new tc((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.Y(e,(e,n)=>{t.push(n)}).next(()=>t)}}Z(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new tc((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}X(e,t){sl(nc,"DELETE ALL",this.store.name);const n=this.options(e,t);n.ee=!1;const r=this.cursor(n);return this.Y(r,(e,t,n)=>n.delete())}te(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Y(r,t)}ne(e){const t=this.cursor({});return new tc((n,r)=>{t.onerror=e=>{const t=hc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Y(e,t){const n=[];return new tc((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new ac(s),a=t(s.primaryKey,s.value,i);if(a instanceof tc){const e=a.catch(e=>(i.done(),tc.reject(e)));n.push(e)}i.isDone?r():null===i.j?s.continue():s.continue(i.j)}}).next(()=>tc.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.ee?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uc(e){return new tc((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=hc(e.target.error);n(t)}})}let dc=!1;function hc(e){const t=sc.M(hn());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new fl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return dc||(dc=!0,setTimeout(()=>{throw e},0)),e}}return e}const fc="IndexBackfiller";class pc{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ie(e){sl(fc,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.re.se();sl(fc,"Documents written: ".concat(e))}catch(e){lc(e)?sl(fc,"Ignoring IndexedDB error during index backfill: ",e):await ec(e)}await this.ie(6e4)})}}class mc{constructor(e,t){this.localStore=e,this.persistence=t}async se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const n=new Set;let r=t,s=!0;return tc.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return sl(fc,"Processing collection: ".concat(t)),this._e(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}_e(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ae(r,n)).next(n=>(sl(fc,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}ae(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=Xl(t);Ql(r,n)>0&&(n=r)}),new Yl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class gc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}gc.le=-1;const bc=-1;function vc(e){return null==e}function yc(e){return 0===e&&1/e==-1/0}function wc(e){return"number"==typeof e&&Number.isInteger(e)&&!yc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const xc="\x01";function kc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Sc(t)),t=_c(e.get(n),t);return Sc(t)}function _c(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case xc:n+="\x01\x11";break;default:n+=t}}return n}function Sc(e){return e+xc+"\x01"}function jc(e){const t=e.length;if(ul(t>=2,64408,{path:e}),2===t)return ul(e.charAt(0)===xc&&"\x01"===e.charAt(1),56145,{path:e}),Fl.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf(xc,i);switch((t<0||t>n)&&ll(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let a;0===s.length?a=n:(s+=n,a=s,s=""),r.push(a);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:ll(61167,{path:e})}i=t+2}return new Fl(r)}const Nc="remoteDocuments",Tc="owner",Ec="owner",Cc="mutationQueues",Ic="mutations",Ac="batchId",Mc="userMutationsIndex",Oc=["userId","batchId"];function Rc(e,t){return[e,kc(t)]}function Dc(e,t,n){return[e,kc(t),n]}const Pc={},Lc="documentMutations",Fc="remoteDocumentsV14",Bc=["prefixPath","collectionGroup","readTime","documentId"],Uc="documentKeyIndex",zc=["prefixPath","collectionGroup","documentId"],Vc="collectionGroupIndex",Hc=["collectionGroup","readTime","prefixPath","documentId"],Wc="remoteDocumentGlobal",qc="remoteDocumentGlobalKey",Kc="targets",Gc="queryTargetsIndex",$c=["canonicalId","targetId"],Xc="targetDocuments",Yc=["targetId","path"],Qc="documentTargetsIndex",Jc=["path","targetId"],Zc="targetGlobalKey",eu="targetGlobal",tu="collectionParents",nu=["collectionId","parent"],ru="clientMetadata",su="bundles",iu="namedQueries",au="indexConfiguration",ou="collectionGroupIndex",lu="indexState",cu=["indexId","uid"],uu="sequenceNumberIndex",du=["uid","sequenceNumber"],hu="indexEntries",fu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pu="documentKeyIndex",mu=["indexId","uid","orderedDocumentKey"],gu="documentOverlays",bu=["userId","collectionPath","documentId"],vu="collectionPathOverlayIndex",yu=["userId","collectionPath","largestBatchId"],wu="collectionGroupOverlayIndex",xu=["userId","collectionGroup","largestBatchId"],ku="globals",_u=[Cc,Ic,Lc,Nc,Kc,Tc,eu,Xc,ru,Wc,tu,su,iu],Su=[..._u,gu],ju=[Cc,Ic,Lc,Fc,Kc,Tc,eu,Xc,ru,Wc,tu,su,iu,gu],Nu=ju,Tu=[...Nu,au,lu,hu],Eu=Tu,Cu=[...Tu,ku],Iu=Cu;class Au extends Zl{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function Mu(e,t){const n=dl(e);return sc.N(n.he,t)}function Ou(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ru(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Du(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Pu{constructor(e,t){this.comparator=e,this.root=t||Fu.EMPTY}insert(e,t){return new Pu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fu.BLACK,null,null))}remove(e){return new Pu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lu(this.root,e,this.comparator,!0)}}class Lu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fu{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Fu.RED,this.left=null!=r?r:Fu.EMPTY,this.right=null!=s?s:Fu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Fu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Fu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Fu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ll(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ll(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ll(27949);return e+(this.isRed()?0:1)}}Fu.EMPTY=null,Fu.RED=!0,Fu.BLACK=!1,Fu.EMPTY=new class{constructor(){this.size=0}get key(){throw ll(57766)}get value(){throw ll(16141)}get color(){throw ll(16727)}get left(){throw ll(29726)}get right(){throw ll(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Fu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bu{constructor(e){this.comparator=e,this.data=new Pu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Uu(this.data.getIterator())}getIteratorFrom(e){return new Uu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Bu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bu(this.comparator);return t.data=e,t}}class Uu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zu(e){return e.hasNext()?e.getNext():void 0}class Vu{constructor(e){this.fields=e,e.sort(Ul.comparator)}static empty(){return new Vu([])}unionWith(e){let t=new Bu(Ul.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Vu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Hu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Hu("Invalid base64 string: "+e):e}}(e);return new Wu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wu.EMPTY_BYTE_STRING=new Wu("");const qu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ku(e){if(ul(!!e,39018),"string"==typeof e){let t=0;const n=qu.exec(e);if(ul(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Gu(e.seconds),nanos:Gu(e.nanos)}}function Gu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $u(e){return"string"==typeof e?Wu.fromBase64String(e):Wu.fromUint8Array(e)}const Xu="server_timestamp",Yu="__type__",Qu="__previous_value__",Ju="__local_write_time__";function Zu(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Yu])||void 0===n?void 0:n.stringValue)===Xu}function ed(e){const t=e.mapValue.fields[Qu];return Zu(t)?ed(t):t}function td(e){const t=Ku(e.mapValue.fields[Ju].timestampValue);return new Rl(t.seconds,t.nanos)}class nd{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const rd="(default)";class sd{constructor(e,t){this.projectId=e,this.database=t||rd}static empty(){return new sd("","")}get isDefaultDatabase(){return this.database===rd}isEqual(e){return e instanceof sd&&e.projectId===this.projectId&&e.database===this.database}}const id="__type__",ad="__max__",od={mapValue:{fields:{__type__:{stringValue:ad}}}},ld="__vector__",cd="value",ud={nullValue:"NULL_VALUE"};function dd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zu(e)?4:Ed(e)?9007199254740991:Nd(e)?10:11:ll(28295,{value:e})}function hd(e,t){if(e===t)return!0;const n=dd(e);if(n!==dd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return td(e).isEqual(td(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ku(e.timestampValue),r=Ku(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $u(e.bytesValue).isEqual($u(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Gu(e.geoPointValue.latitude)===Gu(t.geoPointValue.latitude)&&Gu(e.geoPointValue.longitude)===Gu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Gu(e.integerValue)===Gu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Gu(e.doubleValue),r=Gu(t.doubleValue);return n===r?yc(n)===yc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Il(e.arrayValue.values||[],t.arrayValue.values||[],hd);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ou(n)!==Ou(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!hd(n[s],r[s])))return!1;return!0}(e,t);default:return ll(52216,{left:e})}}function fd(e,t){return void 0!==(e.values||[]).find(e=>hd(e,t))}function pd(e,t){if(e===t)return 0;const n=dd(e),r=dd(t);if(n!==r)return Nl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Gu(e.integerValue||e.doubleValue),r=Gu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return md(e.timestampValue,t.timestampValue);case 4:return md(td(e),td(t));case 5:return Tl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$u(e),r=$u(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Nl(n[s],r[s]);if(0!==e)return e}return Nl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Nl(Gu(e.latitude),Gu(t.latitude));return 0!==n?n:Nl(Gu(e.longitude),Gu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return gd(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[cd])||void 0===n?void 0:n.arrayValue,c=null===(r=o[cd])||void 0===r?void 0:r.arrayValue,u=Nl((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:gd(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===od.mapValue&&t===od.mapValue)return 0;if(e===od.mapValue)return 1;if(t===od.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Tl(r[a],i[a]);if(0!==e)return e;const t=pd(n[r[a]],s[i[a]]);if(0!==t)return t}return Nl(r.length,i.length)}(e.mapValue,t.mapValue);default:throw ll(23264,{Pe:n})}}function md(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Nl(e,t);const n=Ku(e),r=Ku(t),s=Nl(n.seconds,r.seconds);return 0!==s?s:Nl(n.nanos,r.nanos)}function gd(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=pd(n[s],r[s]);if(e)return e}return Nl(n.length,r.length)}function bd(e){return vd(e)}function vd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ku(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $u(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return zl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=vd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(vd(e.fields[s]));return n+"}"}(e.mapValue):ll(61005,{value:e})}function yd(e){switch(dd(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ed(e);return t?16+yd(t):16;case 5:return 2*e.stringValue.length;case 6:return $u(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+yd(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ru(e.fields,(e,n)=>{t+=e.length+yd(n)}),t}(e.mapValue);default:throw ll(13486,{value:e})}}function wd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function xd(e){return!!e&&"integerValue"in e}function kd(e){return!!e&&"arrayValue"in e}function _d(e){return!!e&&"nullValue"in e}function Sd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jd(e){return!!e&&"mapValue"in e}function Nd(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[id])||void 0===n?void 0:n.stringValue)===ld}function Td(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ru(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Td(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Td(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ed(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ad}const Cd={mapValue:{fields:{[id]:{stringValue:ld},[cd]:{arrayValue:{}}}}};function Id(e){return"nullValue"in e?ud:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?wd(sd.empty(),zl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Nd(e)?Cd:{mapValue:{}}:ll(35942,{value:e})}function Ad(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?wd(sd.empty(),zl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Cd:"mapValue"in e?Nd(e)?{mapValue:{}}:od:ll(61959,{value:e})}function Md(e,t){const n=pd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Od(e,t){const n=pd(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Rd{constructor(e){this.value=e}static empty(){return new Rd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!jd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Td(t)}setAll(e){let t=Ul.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Td(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());jd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];jd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ru(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Rd(Td(this.value))}}function Dd(e){const t=[];return Ru(e.fields,(e,n)=>{const r=new Ul([e]);if(jd(n)){const e=Dd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Vu(t)}class Pd{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Pd(e,0,Dl.min(),Dl.min(),Dl.min(),Rd.empty(),0)}static newFoundDocument(e,t,n,r){return new Pd(e,1,t,Dl.min(),n,r,0)}static newNoDocument(e,t){return new Pd(e,2,t,Dl.min(),Dl.min(),Rd.empty(),0)}static newUnknownDocument(e,t){return new Pd(e,3,t,Dl.min(),Dl.min(),Rd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pd(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function Fd(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?zl.comparator(zl.fromName(a.referenceValue),n.key):pd(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Bd(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hd(e.position[n],t.position[n]))return!1;return!0}class Ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function zd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Vd{}class Hd extends Vd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Zd(e,t,n):"array-contains"===t?new rh(e,n):"in"===t?new sh(e,n):"not-in"===t?new ih(e,n):"array-contains-any"===t?new ah(e,n):new Hd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new eh(e,n):new th(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(pd(t,this.value)):null!==t&&dd(this.value)===dd(t)&&this.matchesComparison(pd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ll(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wd extends Vd{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Wd(e,t)}matches(e){return qd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function qd(e){return"and"===e.op}function Kd(e){return"or"===e.op}function Gd(e){return $d(e)&&qd(e)}function $d(e){for(const t of e.filters)if(t instanceof Wd)return!1;return!0}function Xd(e){if(e instanceof Hd)return e.field.canonicalString()+e.op.toString()+bd(e.value);if(Gd(e))return e.filters.map(e=>Xd(e)).join(",");{const t=e.filters.map(e=>Xd(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Yd(e,t){return e instanceof Hd?function(e,t){return t instanceof Hd&&e.op===t.op&&e.field.isEqual(t.field)&&hd(e.value,t.value)}(e,t):e instanceof Wd?function(e,t){return t instanceof Wd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Yd(n,t.filters[r]),!0)}(e,t):void ll(19439)}function Qd(e,t){const n=e.filters.concat(t);return Wd.create(n,e.op)}function Jd(e){return e instanceof Hd?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(bd(e.value))}(e):e instanceof Wd?function(e){return e.op.toString()+" {"+e.getFilters().map(Jd).join(" ,")+"}"}(e):"Filter"}class Zd extends Hd{constructor(e,t,n){super(e,t,n),this.key=zl.fromName(n.referenceValue)}matches(e){const t=zl.comparator(e.key,this.key);return this.matchesComparison(t)}}class eh extends Hd{constructor(e,t){super(e,"in",t),this.keys=nh("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class th extends Hd{constructor(e,t){super(e,"not-in",t),this.keys=nh("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>zl.fromName(e.referenceValue))}class rh extends Hd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kd(t)&&fd(t.arrayValue,this.value)}}class sh extends Hd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fd(this.value.arrayValue,t)}}class ih extends Hd{constructor(e,t){super(e,"not-in",t)}matches(e){if(fd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!fd(this.value.arrayValue,t)}}class ah extends Hd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>fd(this.value.arrayValue,e))}}class oh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Ie=null}}function lh(e){return new oh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ch(e){const t=dl(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Xd(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),vc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>bd(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>bd(e)).join(",")),t.Ie=e}return t.Ie}function uh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Yd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Bd(e.startAt,t.startAt)&&Bd(e.endAt,t.endAt)}function dh(e){return zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function hh(e,t){return e.filters.filter(e=>e instanceof Hd&&e.field.isEqual(t))}function fh(e,t,n){let r=ud,s=!0;for(const i of hh(e,t)){let e=ud,t=!0;switch(i.op){case"<":case"<=":e=Id(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=ud}Md({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Md({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function ph(e,t,n){let r=od,s=!0;for(const i of hh(e,t)){let e=od,t=!0;switch(i.op){case">=":case">":e=Ad(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=od}Od({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Od({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class mh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function gh(e,t,n,r,s,i,a,o){return new mh(e,t,n,r,s,i,a,o)}function bh(e){return new mh(e)}function vh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function yh(e){return null!==e.collectionGroup}function wh(e){const t=dl(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Bu(Ul.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Ud(r,n))}),e.has(Ul.keyField().canonicalString())||t.Ee.push(new Ud(Ul.keyField(),n))}return t.Ee}function xh(e){const t=dl(e);return t.de||(t.de=kh(t,wh(e))),t.de}function kh(e,t){if("F"===e.limitType)return lh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ud(e.field,t)});const n=e.endAt?new Ld(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ld(e.startAt.position,e.startAt.inclusive):null;return lh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function _h(e,t){const n=e.filters.concat([t]);return new mh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Sh(e,t,n){return new mh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function jh(e,t){return uh(xh(e),xh(t))&&e.limitType===t.limitType}function Nh(e){return"".concat(ch(xh(e)),"|lt:").concat(e.limitType)}function Th(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Jd(e)).join(", "),"]")),vc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>bd(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>bd(e)).join(",")),"Target(".concat(t,")")}(xh(e)),"; limitType=").concat(e.limitType,")")}function Eh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of wh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Fd(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wh(e),t))&&!(e.endAt&&!function(e,t,n){const r=Fd(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wh(e),t))}(e,t)}function Ch(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ih(e){return(t,n)=>{let r=!1;for(const s of wh(e)){const e=Ah(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Ah(e,t,n){const r=e.field.isKeyField()?zl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?pd(r,s):ll(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ll(19790,{direction:e.dir})}}class Mh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Du(this.inner)}size(){return this.innerSize}}const Oh=new Pu(zl.comparator);function Rh(){return Oh}const Dh=new Pu(zl.comparator);function Ph(){let e=Dh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Lh(e){let t=Dh;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Fh(){return Uh()}function Bh(){return Uh()}function Uh(){return new Mh(e=>e.toString(),(e,t)=>e.isEqual(t))}const zh=new Pu(zl.comparator),Vh=new Bu(zl.comparator);function Hh(){let e=Vh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Wh=new Bu(Nl);function qh(){return Wh}function Kh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yc(t)?"-0":t}}function Gh(e){return{integerValue:""+e}}function $h(e,t){return wc(t)?Gh(t):Kh(e,t)}class Xh{constructor(){this._=void 0}}function Yh(e,t,n){return e instanceof Zh?function(e,t){const n={fields:{[Yu]:{stringValue:Xu},[Ju]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zu(t)&&(t=ed(t)),t&&(n.fields[Qu]=t),{mapValue:n}}(n,t):e instanceof ef?tf(e,t):e instanceof nf?rf(e,t):function(e,t){const n=Jh(e,t),r=af(n)+af(e.Re);return xd(n)&&xd(e.Re)?Gh(r):Kh(e.serializer,r)}(e,t)}function Qh(e,t,n){return e instanceof ef?tf(e,t):e instanceof nf?rf(e,t):n}function Jh(e,t){return e instanceof sf?function(e){return xd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Zh extends Xh{}class ef extends Xh{constructor(e){super(),this.elements=e}}function tf(e,t){const n=of(t);for(const r of e.elements)n.some(e=>hd(e,r))||n.push(r);return{arrayValue:{values:n}}}class nf extends Xh{constructor(e){super(),this.elements=e}}function rf(e,t){let n=of(t);for(const r of e.elements)n=n.filter(e=>!hd(e,r));return{arrayValue:{values:n}}}class sf extends Xh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function af(e){return Gu(e.integerValue||e.doubleValue)}function of(e){return kd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class lf{constructor(e,t){this.field=e,this.transform=t}}class cf{constructor(e,t){this.version=e,this.transformResults=t}}class uf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new uf}static exists(e){return new uf(void 0,e)}static updateTime(e){return new uf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class hf{}function ff(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new _f(e.key,uf.none()):new vf(e.key,e.data,uf.none());{const n=e.data,r=Rd.empty();let s=new Bu(Ul.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new yf(e.key,r,new Vu(s.toArray()),uf.none())}}function pf(e,t,n){e instanceof vf?function(e,t,n){const r=e.value.clone(),s=xf(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yf?function(e,t,n){if(!df(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xf(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(wf(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function mf(e,t,n,r){return e instanceof vf?function(e,t,n,r){if(!df(e.precondition,t))return n;const s=e.value.clone(),i=kf(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof yf?function(e,t,n,r){if(!df(e.precondition,t))return n;const s=kf(e.fieldTransforms,r,t),i=t.data;return i.setAll(wf(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return df(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function gf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Jh(r.transform,e||null);null!=s&&(null===n&&(n=Rd.empty()),n.set(r.field,s))}return n||null}function bf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Il(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ef&&t instanceof ef||e instanceof nf&&t instanceof nf?Il(e.elements,t.elements,hd):e instanceof sf&&t instanceof sf?hd(e.Re,t.Re):e instanceof Zh&&t instanceof Zh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vf extends hf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class yf extends hf{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xf(e,t,n){const r=new Map;ul(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Qh(a,o,n[s]))}return r}function kf(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Yh(e,i,t))}return r}class _f extends hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sf extends hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&pf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=mf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=mf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Bh();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=ff(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Dl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Hh())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,(e,t)=>bf(e,t))&&Il(this.baseMutations,e.baseMutations,(e,t)=>bf(e,t))}}class Nf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ul(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=zh;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Nf(e,t,n,r)}}class Tf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ef{constructor(e,t){this.count=e,this.unchangedNames=t}}var Cf,If;function Af(e){switch(e){case hl.OK:return ll(64938);case hl.CANCELLED:case hl.UNKNOWN:case hl.DEADLINE_EXCEEDED:case hl.RESOURCE_EXHAUSTED:case hl.INTERNAL:case hl.UNAVAILABLE:case hl.UNAUTHENTICATED:return!1;case hl.INVALID_ARGUMENT:case hl.NOT_FOUND:case hl.ALREADY_EXISTS:case hl.PERMISSION_DENIED:case hl.FAILED_PRECONDITION:case hl.ABORTED:case hl.OUT_OF_RANGE:case hl.UNIMPLEMENTED:case hl.DATA_LOSS:return!0;default:return ll(15467,{code:e})}}function Mf(e){if(void 0===e)return il("GRPC error has no .code"),hl.UNKNOWN;switch(e){case Cf.OK:return hl.OK;case Cf.CANCELLED:return hl.CANCELLED;case Cf.UNKNOWN:return hl.UNKNOWN;case Cf.DEADLINE_EXCEEDED:return hl.DEADLINE_EXCEEDED;case Cf.RESOURCE_EXHAUSTED:return hl.RESOURCE_EXHAUSTED;case Cf.INTERNAL:return hl.INTERNAL;case Cf.UNAVAILABLE:return hl.UNAVAILABLE;case Cf.UNAUTHENTICATED:return hl.UNAUTHENTICATED;case Cf.INVALID_ARGUMENT:return hl.INVALID_ARGUMENT;case Cf.NOT_FOUND:return hl.NOT_FOUND;case Cf.ALREADY_EXISTS:return hl.ALREADY_EXISTS;case Cf.PERMISSION_DENIED:return hl.PERMISSION_DENIED;case Cf.FAILED_PRECONDITION:return hl.FAILED_PRECONDITION;case Cf.ABORTED:return hl.ABORTED;case Cf.OUT_OF_RANGE:return hl.OUT_OF_RANGE;case Cf.UNIMPLEMENTED:return hl.UNIMPLEMENTED;case Cf.DATA_LOSS:return hl.DATA_LOSS;default:return ll(39323,{code:e})}}(If=Cf||(Cf={}))[If.OK=0]="OK",If[If.CANCELLED=1]="CANCELLED",If[If.UNKNOWN=2]="UNKNOWN",If[If.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",If[If.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",If[If.NOT_FOUND=5]="NOT_FOUND",If[If.ALREADY_EXISTS=6]="ALREADY_EXISTS",If[If.PERMISSION_DENIED=7]="PERMISSION_DENIED",If[If.UNAUTHENTICATED=16]="UNAUTHENTICATED",If[If.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",If[If.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",If[If.ABORTED=10]="ABORTED",If[If.OUT_OF_RANGE=11]="OUT_OF_RANGE",If[If.UNIMPLEMENTED=12]="UNIMPLEMENTED",If[If.INTERNAL=13]="INTERNAL",If[If.UNAVAILABLE=14]="UNAVAILABLE",If[If.DATA_LOSS=15]="DATA_LOSS";let Of=null;const Rf=new Fo([4294967295,4294967295],0);function Df(e){const t=Sl().encode(e),n=new Bo;return n.update(t),new Uint8Array(n.digest())}function Pf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Fo([n,r],0),new Fo([s,i],0)]}class Lf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ff("Invalid padding: ".concat(t));if(n<0)throw new Ff("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Ff("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Ff("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=Fo.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Fo.fromNumber(n)));return 1===r.compare(Rf)&&(r=new Fo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Df(e),[n,r]=Pf(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Lf(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.pe)return;const t=Df(e),[n,r]=Pf(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ff extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bf{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Uf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Bf(Dl.min(),r,new Pu(Nl),Rh(),Hh())}}class Uf{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Uf(n,t,Hh(),Hh(),Hh())}}class zf{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Vf{constructor(e,t){this.targetId=e,this.Ce=t}}class Hf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Wf{constructor(){this.Fe=0,this.Me=Gf(),this.xe=Wu.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Hh(),t=Hh(),n=Hh();return this.Me.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ll(38017,{changeType:s})}}),new Uf(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Gf()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ul(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class qf{constructor(e){this.ze=e,this.je=new Map,this.He=Rh(),this.Je=Kf(),this.Ye=Kf(),this.Ze=new Pu(Nl)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:ll(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((e,n)=>{this.it(n)&&t(n)})}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(dh(s))if(0===n){const e=new zl(s.path);this.tt(t,e,Pd.newNoDocument(e,Dl.min()))}else ul(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Of||Of.ht(function(e,t,n,r,s){var i,a,o,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===s,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,s))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=$u(n).toUint8Array()}catch(e){if(e instanceof Hu)return al("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Lf(i,r,s)}catch(e){return al(e instanceof Ff?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.pe?null:a}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.ze.Pt(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.tt(t,n,null),r++)}),r}It(e){const t=new Map;this.je.forEach((n,r)=>{const s=this._t(r);if(s){if(n.current&&dh(s.target)){const t=new zl(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Pd.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}});let n=Hh();this.Ye.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.He.forEach((t,n)=>n.setReadTime(e));const r=new Bf(e,t,this.Ze,this.He,n);return this.He=Rh(),this.Je=Kf(),this.Ye=Kf(),this.Ze=new Pu(Nl),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Wf,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Bu(Nl),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Bu(Nl),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||sl("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Wf),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Kf(){return new Pu(zl.comparator)}function Gf(){return new Pu(zl.comparator)}const $f={asc:"ASCENDING",desc:"DESCENDING"},Xf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yf={and:"AND",or:"OR"};class Qf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jf(e,t){return e.useProto3Json||vc(t)?t:{value:t}}function Zf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ep(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tp(e,t){return Zf(e,t.toTimestamp())}function np(e){return ul(!!e,49232),Dl.fromTimestamp(function(e){const t=Ku(e);return new Rl(t.seconds,t.nanos)}(e))}function rp(e,t){return sp(e,t).canonicalString()}function sp(e,t){const n=function(e){return new Fl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ip(e){const t=Fl.fromString(e);return ul(Tp(t),10190,{key:t.toString()}),t}function ap(e,t){return rp(e.databaseId,t.path)}function op(e,t){const n=ip(t);if(n.get(1)!==e.databaseId.projectId)throw new fl(hl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new fl(hl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zl(dp(n))}function lp(e,t){return rp(e.databaseId,t)}function cp(e){const t=ip(e);return 4===t.length?Fl.emptyPath():dp(t)}function up(e){return new Fl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dp(e){return ul(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function hp(e,t,n){return{name:ap(e,t),fields:n.value.mapValue.fields}}function fp(e,t,n){const r=op(e,t.name),s=np(t.updateTime),i=t.createTime?np(t.createTime):Dl.min(),a=new Rd({mapValue:{fields:t.fields}}),o=Pd.newFoundDocument(r,s,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function pp(e,t){let n;if(t instanceof vf)n={update:hp(e,t.key,t.value)};else if(t instanceof _f)n={delete:ap(e,t.key)};else if(t instanceof yf)n={update:hp(e,t.key,t.data),updateMask:Np(t.fieldMask)};else{if(!(t instanceof Sf))return ll(16599,{ft:t.type});n={verify:ap(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Zh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ef)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sf)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw ll(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:tp(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ll(27497)}(e,t.precondition)),n}function mp(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?uf.updateTime(np(e.updateTime)):void 0!==e.exists?uf.exists(e.exists):uf.none()}(t.currentDocument):uf.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)ul("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Zh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ef(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new nf(e)}else"increment"in t?n=new sf(e,t.increment):ll(16584,{proto:t});const r=Ul.fromServerFormat(t.fieldPath);return new lf(r,n)}(e,t)):[];if(t.update){t.update.name;const s=op(e,t.update.name),i=new Rd({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Vu(t.map(e=>Ul.fromServerFormat(e)))}(t.updateMask);return new yf(s,i,e,n,r)}return new vf(s,i,n,r)}if(t.delete){const r=op(e,t.delete);return new _f(r,n)}if(t.verify){const r=op(e,t.verify);return new Sf(r,n)}return ll(1463,{proto:t})}function gp(e,t){return{documents:[lp(e,t.path)]}}function bp(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lp(e,s);const i=function(e){if(0!==e.length)return jp(Wd.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:_p(e.field),direction:wp(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Jf(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function vp(e){let t=cp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ul(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=yp(e);return t instanceof Wd&&Gd(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Ud(Sp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,vc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ld(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ld(n,t)}(n.endAt)),gh(t,s,a,i,o,"F",l,c)}function yp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Sp(e.unaryFilter.field);return Hd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Sp(e.unaryFilter.field);return Hd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sp(e.unaryFilter.field);return Hd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Sp(e.unaryFilter.field);return Hd.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ll(61313);default:return ll(60726)}}(e):void 0!==e.fieldFilter?function(e){return Hd.create(Sp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ll(58110);default:return ll(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Wd.create(e.compositeFilter.filters.map(e=>yp(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ll(1026)}}(e.compositeFilter.op))}(e):ll(30097,{filter:e})}function wp(e){return $f[e]}function xp(e){return Xf[e]}function kp(e){return Yf[e]}function _p(e){return{fieldPath:e.canonicalString()}}function Sp(e){return Ul.fromServerFormat(e.fieldPath)}function jp(e){return e instanceof Hd?function(e){if("=="===e.op){if(Sd(e.value))return{unaryFilter:{field:_p(e.field),op:"IS_NAN"}};if(_d(e.value))return{unaryFilter:{field:_p(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Sd(e.value))return{unaryFilter:{field:_p(e.field),op:"IS_NOT_NAN"}};if(_d(e.value))return{unaryFilter:{field:_p(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_p(e.field),op:xp(e.op),value:e.value}}}(e):e instanceof Wd?function(e){const t=e.getFilters().map(e=>jp(e));return 1===t.length?t[0]:{compositeFilter:{op:kp(e.op),filters:t}}}(e):ll(54877,{filter:e})}function Np(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Tp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ep{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dl.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Dl.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wu.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ep(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ep(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Cp{constructor(e){this.wt=e}}function Ip(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ap(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ap(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Zf(e,t.version.toTimestamp()),createTime:Zf(e,t.createTime.toTimestamp())}}(e.wt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Mp(t.version)};else{if(!t.isUnknownDocument())return ll(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:Mp(t.version)}}return r}function Ap(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Mp(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Op(e){const t=new Rl(e.seconds,e.nanoseconds);return Dl.fromTimestamp(t)}function Rp(e,t){const n=(t.baseMutations||[]).map(t=>mp(e.wt,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>mp(e.wt,t)),s=Rl.fromMillis(t.localWriteTimeMs);return new jf(t.batchId,s,n,r)}function Dp(e){const t=Op(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Op(e.lastLimboFreeSnapshotVersion):Dl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return ul(1===t,1966,{count:t}),xh(bh(cp(e.documents[0])))}(e.query):function(e){return xh(vp(e))}(e.query),new Ep(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Wu.fromBase64String(e.resumeToken))}function Pp(e,t){const n=Mp(t.snapshotVersion),r=Mp(t.lastLimboFreeSnapshotVersion);let s;s=dh(t.target)?gp(e.wt,t.target):bp(e.wt,t.target).gt;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ch(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Lp(e){const t=vp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Sh(t,t.limit,"L"):t}function Fp(e,t){return new Tf(t.largestBatchId,mp(e.wt,t.overlayMutation))}function Bp(e,t){const n=t.path.lastSegment();return[e,kc(t.path.popLast()),n]}function Up(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Mp(r.readTime),documentKey:kc(r.documentKey.path),largestBatchId:r.largestBatchId}}class zp{getBundleMetadata(e,t){return Vp(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:Op(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return Vp(e).put(function(e){return{bundleId:e.id,createTime:Mp(np(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Hp(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:Lp(e.bundledQuery),readTime:Op(e.readTime)}}(e)})}saveNamedQuery(e,t){return Hp(e).put(function(e){return{name:e.name,readTime:Mp(np(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Vp(e){return Mu(e,su)}function Hp(e){return Mu(e,iu)}class Wp{constructor(e,t){this.serializer=e,this.userId=t}static bt(e,t){const n=t.uid||"";return new Wp(e,n)}getOverlay(e,t){return qp(e).get(Bp(this.userId,t)).next(e=>e?Fp(this.serializer,e):null)}getOverlays(e,t){const n=Fh();return tc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new Tf(t,s);r.push(this.St(e,i))}),tc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(kc(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(qp(e).X(vu,r))}),tc.waitFor(s)}getOverlaysForCollection(e,t,n){const r=Fh(),s=kc(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qp(e).J(vu,i).next(e=>{for(const t of e){const e=Fp(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=Fh();let i;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qp(e).te({index:wu,range:a},(e,t,n)=>{const a=Fp(this.serializer,t);s.size()<r||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):n.done()}).next(()=>s)}St(e,t){return qp(e).put(function(e,t,n){const[r,s,i]=Bp(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:pp(e.wt,n.mutation)}}(this.serializer,this.userId,t))}}function qp(e){return Mu(e,gu)}class Kp{Dt(e){return Mu(e,ku)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Wu.fromUint8Array(t):Wu.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Gp{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Gu(e.integerValue));else if("doubleValue"in e){const n=Gu(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),yc(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=Ku(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt($u(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Ed(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Nd(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ll(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const s=e.fields||{};this.Mt(t,53);const i=cd,a=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(Gu(a)),this.Nt(i,t),this.Ct(s[i],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),zl.fromName(e).path.forEach(e=>{this.Mt(t,60),this.Kt(e,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Gp.Wt=new Gp;const $p=255;function Xp(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function Yp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Xp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class Qp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.zt(n.value),n=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Yt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.zt(e);else if(e<2048)this.zt(960|e>>>6),this.zt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.zt(480|e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e);else{const e=t.codePointAt(0);this.zt(240|e>>>18),this.zt(128|63&e>>>12),this.zt(128|63&e>>>6),this.zt(128|63&e)}}this.jt()}Xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Yt()}en(e){const t=this.tn(e),n=Yp(t);this.nn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}rn(e){const t=this.tn(e),n=Yp(t);this.nn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}sn(){this._n($p),this._n(255)}an(){this.un($p),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}zt(e){const t=255&e;0===t?(this._n(0),this._n(255)):t===$p?(this._n($p),this._n(0)):this._n(t)}Jt(e){const t=255&e;0===t?(this.un(0),this.un(255)):t===$p?(this.un($p),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Jp{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class Zp{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class em{constructor(){this.ln=new Qp,this.hn=new Jp(this.ln),this.Pn=new Zp(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return 0===e?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}class tm{constructor(e,t,n,r){this.In=e,this.En=t,this.dn=n,this.An=r}Rn(){const e=this.An.length,t=0===e||255===this.An[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.An,0),t!==e?n.set([0],this.An.length):++n[n.length-1],new tm(this.In,this.En,this.dn,n)}Vn(e,t,n){return{indexId:this.In,uid:e,arrayValue:sm(this.dn),directionalValue:sm(this.An),orderedDocumentKey:sm(t),documentKey:n.path.toArray()}}mn(e,t,n){const r=this.Vn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function nm(e,t){let n=e.In-t.In;return 0!==n?n:(n=rm(e.dn,t.dn),0!==n?n:(n=rm(e.An,t.An),0!==n?n:zl.comparator(e.En,t.En)))}function rm(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function sm(e){return gn()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function im(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class am{constructor(e){this.fn=new Bu((e,t)=>Ul.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const e=t;e.isInequality()?this.fn=this.fn.add(e):this.pn.push(e)}}get yn(){return this.fn.size>1}wn(e){if(ul(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=Wl(e);if(void 0!==t&&!this.bn(t))return!1;const n=ql(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.bn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.fn.size>0){const e=this.fn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.Sn(e,t)||!this.Dn(this.gn[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.gn.length||!this.Dn(this.gn[i++],e))return!1}return!0}vn(){if(this.yn)return null;let e=new Bu(Ul.comparator);const t=[];for(const n of this.pn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Kl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Kl(n.field,0))}for(const n of this.gn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Kl(n.field,"asc"===n.dir?0:1)));return new Hl(Hl.UNKNOWN_ID,this.collectionId,t,Gl.empty())}bn(e){for(const t of this.pn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function om(e){var t,n;if(ul(e instanceof Hd||e instanceof Wd,20012),e instanceof Hd){if(e instanceof sh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>Hd.create(e.field,"==",t)))||[];return Wd.create(r,"or")}return e}const r=e.filters.map(e=>om(e));return Wd.create(r,e.op)}function lm(e){if(0===e.getFilters().length)return[];const t=hm(om(e));return ul(dm(t),7391),cm(t)||um(t)?[t]:t.getFilters()}function cm(e){return e instanceof Hd}function um(e){return e instanceof Wd&&Gd(e)}function dm(e){return cm(e)||um(e)||function(e){if(e instanceof Wd&&Kd(e)){for(const t of e.getFilters())if(!cm(t)&&!um(t))return!1;return!0}return!1}(e)}function hm(e){if(ul(e instanceof Hd||e instanceof Wd,34018),e instanceof Hd)return e;if(1===e.filters.length)return hm(e.filters[0]);const t=e.filters.map(e=>hm(e));let n=Wd.create(t,e.op);return n=mm(n),dm(n)?n:(ul(n instanceof Wd,64498),ul(qd(n),40251),ul(n.filters.length>1,57927),n.filters.reduce((e,t)=>fm(e,t)))}function fm(e,t){let n;return ul(e instanceof Hd||e instanceof Wd,38388),ul(t instanceof Hd||t instanceof Wd,25473),n=e instanceof Hd?t instanceof Hd?function(e,t){return Wd.create([e,t],"and")}(e,t):pm(e,t):t instanceof Hd?pm(t,e):function(e,t){if(ul(e.filters.length>0&&t.filters.length>0,48005),qd(e)&&qd(t))return Qd(e,t.getFilters());const n=Kd(e)?e:t,r=Kd(e)?t:e,s=n.filters.map(e=>fm(e,r));return Wd.create(s,"or")}(e,t),mm(n)}function pm(e,t){if(qd(t))return Qd(t,e.getFilters());{const n=t.filters.map(t=>fm(e,t));return Wd.create(n,"or")}}function mm(e){if(ul(e instanceof Hd||e instanceof Wd,11850),e instanceof Hd)return e;const t=e.getFilters();if(1===t.length)return mm(t[0]);if($d(e))return e;const n=t.map(e=>mm(e)),r=[];return n.forEach(t=>{t instanceof Hd?r.push(t):t instanceof Wd&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Wd.create(r,e.op)}class gm{constructor(){this.Cn=new bm}addToCollectionParentIndex(e,t){return this.Cn.add(t),tc.resolve()}getCollectionParents(e,t){return tc.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return tc.resolve()}deleteFieldIndex(e,t){return tc.resolve()}deleteAllFieldIndexes(e){return tc.resolve()}createTargetIndexes(e,t){return tc.resolve()}getDocumentsMatchingTarget(e,t){return tc.resolve(null)}getIndexType(e,t){return tc.resolve(0)}getFieldIndexes(e,t){return tc.resolve([])}getNextCollectionGroupToUpdate(e){return tc.resolve(null)}getMinOffset(e,t){return tc.resolve(Yl.min())}getMinOffsetFromCollectionGroup(e,t){return tc.resolve(Yl.min())}updateCollectionGroup(e,t,n){return tc.resolve()}updateIndexEntries(e,t){return tc.resolve()}}class bm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bu(Fl.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Bu(Fl.comparator)).toArray()}}const vm="IndexedDbIndexManager",ym=new Uint8Array(0);class wm{constructor(e,t){this.databaseId=t,this.Fn=new bm,this.Mn=new Mh(e=>ch(e),(e,t)=>uh(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const s={collectionId:n,parent:kc(r)};return xm(e).put(s)}return tc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Al(t),""],!1,!0);return xm(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(jc(r.parent))}return n})}addFieldIndex(e,t){const n=_m(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=Sm(e);return s.next(e=>{n.put(Up(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=_m(e),r=Sm(e),s=km(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=_m(e),n=km(e),r=Sm(e);return t.X().next(()=>n.X()).next(()=>r.X())}createTargetIndexes(e,t){return tc.forEach(this.xn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new am(t).vn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=km(e);let r=!0;const s=new Map;return tc.forEach(this.xn(t),t=>this.On(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=Hh();const r=[];return tc.forEach(s,(s,i)=>{sl(vm,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(s)," to execute ").concat(ch(t)));const a=function(e,t){const n=Wl(t);if(void 0===n)return null;for(const r of hh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),o=function(e,t){const n=new Map;for(const r of ql(t))for(const t of hh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of ql(t)){const t=0===s.kind?fh(e,s.fieldPath,e.startAt):ph(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ld(n,r)}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of ql(t)){const t=0===s.kind?ph(e,s.fieldPath,e.endAt):fh(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ld(n,r)}(i,s),u=this.Nn(s,i,l),d=this.Nn(s,i,c),h=this.Bn(s,i,o),f=this.Ln(s.indexId,a,u,l.inclusive,d,c.inclusive,h);return tc.forEach(f,s=>n.Z(s,t.limit).next(t=>{t.forEach(t=>{const n=zl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return tc.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(t=0===e.filters.length?[e]:lm(Wd.create(e.filters,"and")).map(t=>lh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,n,r,s,i,a){const o=(null!=t?t.length:1)*Math.max(n.length,s.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.kn(t[u/l]):ym,d=this.qn(e,o,n[u%l],r),h=this.Qn(e,o,s[u%l],i),f=a.map(t=>this.qn(e,o,t,!0));c.push(...this.createRange(d,h,f))}return c}qn(e,t,n,r){const s=new tm(e,zl.empty(),t,n);return r?s:s.Rn()}Qn(e,t,n,r){const s=new tm(e,zl.empty(),t,n);return r?s.Rn():s}On(e,t){const n=new am(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.wn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.xn(t);return tc.forEach(r,t=>this.On(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new Bu(Ul.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}$n(e,t){const n=new em;for(const r of ql(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Tn(r.kind);Gp.Wt.vt(e,s)}return n.cn()}kn(e){const t=new em;return Gp.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const n=new em;return Gp.Wt.vt(wd(this.databaseId,t),n.Tn(function(e){const t=ql(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.cn()}Bn(e,t,n){if(null===n)return[];let r=[];r.push(new em);let s=0;for(const i of ql(e)){const e=n[s++];for(const n of r)if(this.Kn(t,i.fieldPath)&&kd(e))r=this.Wn(r,i,e);else{const t=n.Tn(i.kind);Gp.Wt.vt(e,t)}}return this.Gn(r)}Nn(e,t,n){return this.Bn(e,t,n.position)}Gn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].cn();return t}Wn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new em;n.seed(e.cn()),Gp.Wt.vt(i,n.Tn(t.kind)),s.push(n)}return s}Kn(e,t){return!!e.filters.find(e=>e instanceof Hd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=_m(e),r=Sm(e);return(t?n.J(ou,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return tc.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new Gl(t.sequenceNumber,new Yl(Op(t.readTime),new zl(jc(t.documentKey)),t.largestBatchId)):Gl.empty(),r=e.fields.map(e=>{let[t,n]=e;return new Kl(Ul.fromServerFormat(t),n)});return new Hl(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Nl(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=_m(e),s=Sm(e);return this.zn(e).next(e=>r.J(ou,IDBKeyRange.bound(t,t)).next(t=>tc.forEach(t,t=>s.put(Up(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return tc.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?tc.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),tc.forEach(s,n=>this.jn(e,t,n).next(t=>{const s=this.Hn(r,n);return t.isEqual(s)?tc.resolve():this.Jn(e,r,n,t,s)}))))})}Yn(e,t,n,r){return km(e).put(r.Vn(this.uid,this.Un(n,t.key),t.key))}Zn(e,t,n,r){return km(e).delete(r.mn(this.uid,this.Un(n,t.key),t.key))}jn(e,t,n){const r=km(e);let s=new Bu(nm);return r.te({index:pu,range:IDBKeyRange.only([n.indexId,this.uid,sm(this.Un(n,t))])},(e,r)=>{s=s.add(new tm(n.indexId,t,im(r.arrayValue),im(r.directionalValue)))}).next(()=>s)}Hn(e,t){let n=new Bu(nm);const r=this.$n(t,e);if(null==r)return n;const s=Wl(t);if(null!=s){const i=e.data.field(s.fieldPath);if(kd(i))for(const s of i.arrayValue.values||[])n=n.add(new tm(t.indexId,e.key,this.kn(s),r))}else n=n.add(new tm(t.indexId,e.key,ym,r));return n}Jn(e,t,n,r,s){sl(vm,"Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),a=t.getIterator();let o=zu(i),l=zu(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=zu(a)):t?(s(o),o=zu(i)):(o=zu(i),l=zu(a))}}(r,s,nm,r=>{i.push(this.Yn(e,t,n,r))},r=>{i.push(this.Zn(e,t,n,r))}),tc.waitFor(i)}zn(e){let t=1;return Sm(e).te({index:uu,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>nm(e,t)).filter((e,t,n)=>!t||0!==nm(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=nm(i,e),s=nm(i,t);if(0===n)r[0]=e.Rn();else if(n>0&&s<0)r.push(i),r.push(i.Rn());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.Xn(r[i],r[i+1]))return[];const e=r[i].mn(this.uid,ym,zl.empty()),t=r[i+1].mn(this.uid,ym,zl.empty());s.push(IDBKeyRange.bound(e,t))}return s}Xn(e,t){return nm(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jm)}getMinOffset(e,t){return tc.mapArray(this.xn(t),t=>this.On(e,t).next(e=>e||ll(44426))).next(jm)}}function xm(e){return Mu(e,tu)}function km(e){return Mu(e,hu)}function _m(e){return Mu(e,au)}function Sm(e){return Mu(e,lu)}function jm(e){ul(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;Ql(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Yl(t.readTime,t.documentKey,n)}const Nm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tm=41943040;class Em{static withCacheSize(e){return new Em(e,Em.DEFAULT_COLLECTION_PERCENTILE,Em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function Cm(e,t,n){const r=e.store(Ic),s=e.store(Lc),i=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.te({range:a},(e,t,n)=>(o++,n.delete()));i.push(l.next(()=>{ul(1===o,47070,{batchId:n.batchId})}));const c=[];for(const u of n.mutations){const e=Dc(t,u.key.path,n.batchId);i.push(s.delete(e)),c.push(u.key)}return tc.waitFor(i).next(()=>c)}function Im(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ll(14731);t=e.noDocument}return JSON.stringify(t).length}Em.DEFAULT_COLLECTION_PERCENTILE=10,Em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Em.DEFAULT=new Em(Tm,Em.DEFAULT_COLLECTION_PERCENTILE,Em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Em.DISABLED=new Em(-1,0,0);class Am{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.er={}}static bt(e,t,n,r){ul(""!==e.uid,64387);const s=e.isAuthenticated()?e.uid:"";return new Am(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Om(e).te({index:Mc,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=Rm(e),i=Om(e);return i.add({}).next(a=>{ul("number"==typeof a,49019);const o=new jf(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>pp(e.wt,t)),s=n.mutations.map(t=>pp(e.wt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,o),c=[];let u=new Bu((e,t)=>Nl(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Dc(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(i.put(l)),c.push(s.put(t,Pc))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.er[a]=o.keys()}),tc.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return Om(e).get(t).next(e=>e?(ul(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),Rp(this.serializer,e)):null)}tr(e,t){return this.er[t]?tc.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.er[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Om(e).te({index:Mc,range:r},(e,t,r)=>{t.userId===this.userId&&(ul(t.batchId>=n,47524,{nr:n}),s=Rp(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=bc;return Om(e).te({index:Mc,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,bc],[this.userId,Number.POSITIVE_INFINITY]);return Om(e).J(Mc,t).next(e=>e.map(e=>Rp(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Rc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Rm(e).te({range:r},(n,r,i)=>{const[a,o,l]=n,c=jc(o);if(a===this.userId&&t.path.isEqual(c))return Om(e).get(l).next(e=>{if(!e)throw ll(61480,{rr:n,batchId:l});ul(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),s.push(Rp(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bu(Nl);const r=[];return t.forEach(t=>{const s=Rc(this.userId,t.path),i=IDBKeyRange.lowerBound(s),a=Rm(e).te({range:i},(e,r,s)=>{const[i,a,o]=e,l=jc(a);i===this.userId&&t.path.isEqual(l)?n=n.add(o):s.done()});r.push(a)}),tc.waitFor(r).next(()=>this.ir(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Rc(this.userId,n),i=IDBKeyRange.lowerBound(s);let a=new Bu(Nl);return Rm(e).te({range:i},(e,t,s)=>{const[i,o,l]=e,c=jc(o);i===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):s.done()}).next(()=>this.ir(e,a))}ir(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Om(e).get(t).next(e=>{if(null===e)throw ll(35274,{batchId:t});ul(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(Rp(this.serializer,e))}))}),tc.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Cm(e.he,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),tc.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return tc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Rm(e).te({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=jc(e[1]);r.push(t)}else n.done()}).next(()=>{ul(0===r.length,56720,{_r:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return Mm(e,this.userId,t)}ar(e){return Dm(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:bc,lastStreamToken:""})}}function Mm(e,t,n){const r=Rc(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return Rm(e).te({range:i,ee:!0},(e,n,r)=>{const[i,o,l]=e;i===t&&o===s&&(a=!0),r.done()}).next(()=>a)}function Om(e){return Mu(e,Ic)}function Rm(e){return Mu(e,Lc)}function Dm(e){return Mu(e,Cc)}class Pm{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Pm(0)}static lr(){return new Pm(-1)}}class Lm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const n=new Pm(t.highestTargetId);return t.highestTargetId=n.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(e=>Dl.fromTimestamp(new Rl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.hr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pr(e,r)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(n=>(n.targetCount+=1,this.Ir(t,n),this.Pr(e,n))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fm(e).delete(t.targetId)).next(()=>this.hr(e)).next(t=>(ul(t.targetCount>0,8065),t.targetCount-=1,this.Pr(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return Fm(e).te((i,a)=>{const o=Dp(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,s.push(this.removeTargetData(e,o)))}).next(()=>tc.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Fm(e).te((e,n)=>{const r=Dp(n);t(r)})}hr(e){return Bm(e).get(Zc).next(e=>(ul(null!==e,2888),e))}Pr(e,t){return Bm(e).put(Zc,t)}Tr(e,t){return Fm(e).put(Pp(this.serializer,t))}Ir(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.hr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=ch(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Fm(e).te({range:r,index:Gc},(e,n,r)=>{const i=Dp(n);uh(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Um(e);return t.forEach(t=>{const i=kc(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),tc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Um(e);return tc.forEach(t,t=>{const s=kc(t.path);return tc.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Um(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Um(e);let s=Hh();return r.te({range:n,ee:!0},(e,t,n)=>{const r=jc(e[1]),i=new zl(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=kc(t.path),r=IDBKeyRange.bound([n],[Al(n)],!1,!0);let s=0;return Um(e).te({index:Qc,ee:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}Rt(e,t){return Fm(e).get(t).next(e=>e?Dp(e):null)}}function Fm(e){return Mu(e,Kc)}function Bm(e){return Mu(e,eu)}function Um(e){return Mu(e,Xc)}const zm="LruGarbageCollector",Vm=1048576;function Hm(e,t){let[n,r]=e,[s,i]=t;const a=Nl(n,s);return 0===a?Nl(r,i):a}class Wm{constructor(e){this.Er=e,this.buffer=new Bu(Hm),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Hm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Vr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return null!==this.Vr}mr(e){sl(zm,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){lc(e)?sl(zm,"Ignoring IndexedDB error during garbage collection: ",e):await ec(e)}await this.mr(3e5)})}}class Km{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return tc.resolve(gc.le);const n=new Wm(t);return this.gr.forEachTarget(e,e=>n.Rr(e.sequenceNumber)).next(()=>this.gr.yr(e,e=>n.Rr(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.gr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(sl("LruGarbageCollector","Garbage collection skipped; disabled"),tc.resolve(Nm)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(sl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Nm):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(sl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),rl()<=Pn.DEBUG&&sl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),tc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Gm(e,t){return new Km(e,t)}class $m{constructor(e,t){this.db=e,this.garbageCollector=Gm(this,t)}pr(e){const t=this.br(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}br(e){let t=0;return this.yr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return Xm(e,n)}removeReference(e,t,n){return Xm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Xm(e,t)}Dr(e,t){return function(e,t){let n=!1;return Dm(e).ne(r=>Mm(e,r,t).next(e=>(e&&(n=!0),tc.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(i,a)=>{if(a<=t){const t=this.Dr(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Dl.min()),Um(e).delete(function(e){return[0,kc(e.path)]}(i))))});r.push(t)}}).next(()=>tc.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Xm(e,t)}Sr(e,t){const n=Um(e);let r,s=gc.le;return n.te({index:Qc},(e,n)=>{let[i,a]=e,{path:o,sequenceNumber:l}=n;0===i?(s!==gc.le&&t(new zl(jc(r)),s),s=l,r=o):s=gc.le}).next(()=>{s!==gc.le&&t(new zl(jc(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xm(e,t){return Um(e).put(function(e,t){return{targetId:0,path:kc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Ym{constructor(){this.changes=new Mh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pd.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?tc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return tg(e).put(n)}removeEntry(e,t,n){return tg(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ap(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.vr(e,n)))}getEntry(e,t){let n=Pd.newInvalidDocument(t);return tg(e).te({index:Uc,range:IDBKeyRange.only(ng(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}Fr(e,t){let n={size:0,document:Pd.newInvalidDocument(t)};return tg(e).te({index:Uc,range:IDBKeyRange.only(ng(t))},(e,r)=>{n={document:this.Cr(t,r),size:Im(r)}}).next(()=>n)}getEntries(e,t){let n=Rh();return this.Mr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Or(e,t){let n=Rh(),r=new Pu(zl.comparator);return this.Mr(e,t,(e,t)=>{const s=this.Cr(e,t);n=n.insert(e,s),r=r.insert(e,Im(t))}).next(()=>({documents:n,Nr:r}))}Mr(e,t,n){if(t.isEmpty())return tc.resolve();let r=new Bu(sg);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(ng(r.first()),ng(r.last())),i=r.getIterator();let a=i.getNext();return tg(e).te({index:Uc,range:s},(e,t,r)=>{const s=zl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&sg(a,s)<0;)n(a,null),a=i.getNext();a&&a.isEqual(s)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.H(ng(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,a=[i.popLast().toArray(),i.lastSegment(),Ap(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tg(e).J(IDBKeyRange.bound(a,o,!0)).next(e=>{null==s||s.incrementDocumentReadCount(e.length);let n=Rh();for(const s of e){const e=this.Cr(zl.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(Eh(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=Rh();const i=rg(t,n),a=rg(t,Yl.max());return tg(e).te({index:Vc,range:IDBKeyRange.bound(i,a,!0)},(e,t,n)=>{const i=this.Cr(zl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Zm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return eg(e).get(qc).next(e=>(ul(!!e,20021),e))}vr(e,t){return eg(e).put(qc,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=fp(e.wt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=zl.fromSegments(t.noDocument.path),r=Op(t.noDocument.readTime);n=Pd.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ll(56709);{const e=zl.fromSegments(t.unknownDocument.path),r=Op(t.unknownDocument.version);n=Pd.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Rl(e[0],e[1]);return Dl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Dl.min()))return e}return Pd.newInvalidDocument(e)}}function Jm(e){return new Qm(e)}class Zm extends Ym{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Mh(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Bu((e,t)=>Nl(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const a=this.Lr.get(s);if(t.push(this.Br.removeEntry(e,s,a.readTime)),i.isValidDocument()){const o=Ip(this.Br.serializer,i);r=r.add(s.path.popLast());const l=Im(o);n+=l-a.size,t.push(this.Br.addEntry(e,s,o))}else if(n-=a.size,this.trackRemovals){const n=Ip(this.Br.serializer,i.convertToNoDocument(Dl.min()));t.push(this.Br.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Br.updateMetadata(e,n)),tc.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(e=>(this.Lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(e=>{let{documents:t,Nr:n}=e;return n.forEach((e,n)=>{this.Lr.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function eg(e){return Mu(e,Wc)}function tg(e){return Mu(e,Fc)}function ng(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function rg(e,t){const n=t.documentKey.path.toArray();return[e,Ap(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sg(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Nl(n[i],r[i]),s)return s;return s=Nl(n.length,r.length),s||(s=Nl(n[n.length-2],r[r.length-2]),s||Nl(n[n.length-1],r[r.length-1]))}class ig{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ag{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&mf(n.mutation,e,Vu.empty(),Rl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Hh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hh();const r=Fh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ph();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Fh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Hh()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Rh();const i=Uh(),a=Uh();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof yf)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),mf(a.mutation,t,a.mutation.getFieldMask(),Rl.now())):i.set(t.key,Vu.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ig(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Uh();let r=new Pu((e,t)=>e-t),s=Hh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Vu.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||Hh()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Bh();l.forEach(e=>{if(!s.has(e)){const r=ff(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return tc.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):tc.resolve(Fh());let a=Vl,o=s;return i.next(t=>tc.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?tc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,Hh())).next(e=>({batchId:a,changes:Lh(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zl(t)).next(e=>{let t=Ph();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Ph();return this.indexManager.getCollectionParents(e,s).next(a=>tc.forEach(a,a=>{const o=function(e,t){return new mh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Pd.newInvalidDocument(r)))});let n=Ph();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&mf(i.mutation,r,Vu.empty(),Rl.now()),Eh(t,r)&&(n=n.insert(e,r))}),n})}}class og{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return tc.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:np(e.createTime)}}(t)),tc.resolve()}getNamedQuery(e,t){return tc.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:Lp(e.bundledQuery),readTime:np(e.readTime)}}(t)),tc.resolve()}}class lg{constructor(){this.overlays=new Pu(zl.comparator),this.Qr=new Map}getOverlay(e,t){return tc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fh();return tc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),tc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Qr.delete(n)),tc.resolve()}getOverlaysForCollection(e,t,n){const r=Fh(),s=t.length+1,i=new zl(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return tc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Pu((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Fh(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Fh(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return tc.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Qr.get(r.largestBatchId).delete(n.key);this.Qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Tf(t,n));let s=this.Qr.get(t);void 0===s&&(s=Hh(),this.Qr.set(t,s)),this.Qr.set(t,s.add(n.key))}}class cg{constructor(){this.sessionToken=Wu.EMPTY_BYTE_STRING}getSessionToken(e){return tc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,tc.resolve()}}class ug{constructor(){this.$r=new Bu(dg.Ur),this.Kr=new Bu(dg.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new dg(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.zr(new dg(e,t))}jr(e,t){e.forEach(e=>this.removeReference(e,t))}Hr(e){const t=new zl(new Fl([])),n=new dg(t,e),r=new dg(t,e+1),s=[];return this.Kr.forEachInRange([n,r],e=>{this.zr(e),s.push(e.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new zl(new Fl([])),n=new dg(t,e),r=new dg(t,e+1);let s=Hh();return this.Kr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new dg(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class dg{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return zl.comparator(e.key,t.key)||Nl(e.Zr,t.Zr)}static Wr(e,t){return Nl(e.Zr,t.Zr)||zl.comparator(e.key,t.key)}}class hg{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Bu(dg.Ur)}checkEmpty(e){return tc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new jf(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Xr=this.Xr.add(new dg(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return tc.resolve(i)}lookupMutationBatch(e,t){return tc.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ti(n),s=r<0?0:r;return tc.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return tc.resolve(0===this.mutationQueue.length?bc:this.nr-1)}getAllMutationBatches(e){return tc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new dg(t,0),r=new dg(t,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([n,r],e=>{const t=this.ei(e.Zr);s.push(t)}),tc.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bu(Nl);return t.forEach(e=>{const t=new dg(e,0),r=new dg(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,r],e=>{n=n.add(e.Zr)})}),tc.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;zl.isDocumentKey(s)||(s=s.child(""));const i=new dg(new zl(s),0);let a=new Bu(Nl);return this.Xr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Zr)),!0)},i),tc.resolve(this.ni(a))}ni(e){const t=[];return e.forEach(e=>{const n=this.ei(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ul(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return tc.forEach(t.mutations,r=>{const s=new dg(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,t){const n=new dg(t,0),r=this.Xr.firstAfterOrEqual(n);return tc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,tc.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fg{constructor(e){this.ii=e,this.docs=new Pu(zl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return tc.resolve(n?n.document.mutableCopy():Pd.newInvalidDocument(t))}getEntries(e,t){let n=Rh();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Pd.newInvalidDocument(e))}),tc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Rh();const i=t.path,a=new zl(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Ql(Xl(a),n)<=0||(r.has(a.key)||Eh(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return tc.resolve(s)}getAllFromCollectionGroup(e,t,n,r){ll(9500)}si(e,t){return tc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new pg(this)}getSize(e){return tc.resolve(this.size)}}class pg extends Ym{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Br.addEntry(e,r)):this.Br.removeEntry(n)}),tc.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class mg{constructor(e){this.persistence=e,this.oi=new Mh(e=>ch(e),uh),this.lastRemoteSnapshotVersion=Dl.min(),this.highestTargetId=0,this._i=0,this.ai=new ug,this.targetCount=0,this.ui=Pm.cr()}forEachTarget(e,t){return this.oi.forEach((e,n)=>t(n)),tc.resolve()}getLastRemoteSnapshotVersion(e){return tc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tc.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),tc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),tc.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Pm(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,tc.resolve()}updateTargetData(e,t){return this.Tr(t),tc.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,tc.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.oi.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.oi.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),tc.waitFor(s).next(()=>r)}getTargetCount(e){return tc.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return tc.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),tc.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),tc.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),tc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return tc.resolve(n)}containsKey(e,t){return tc.resolve(this.ai.containsKey(t))}}class gg{constructor(e,t){this.ci={},this.overlays={},this.li=new gc(0),this.hi=!1,this.hi=!0,this.Pi=new cg,this.referenceDelegate=e(this),this.Ti=new mg(this),this.indexManager=new gm,this.remoteDocumentCache=function(e){return new fg(e)}(e=>this.referenceDelegate.Ii(e)),this.serializer=new Cp(t),this.Ei=new og(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new hg(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){sl("MemoryPersistence","Starting transaction:",e);const r=new bg(this.li.next());return this.referenceDelegate.di(),n(r).next(e=>this.referenceDelegate.Ai(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ri(e,t){return tc.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,t)))}}class bg extends Zl{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Vi=new ug,this.mi=null}static fi(e){return new vg(e)}get gi(){if(this.mi)return this.mi;throw ll(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),tc.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),tc.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),tc.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(e=>this.gi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.gi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tc.forEach(this.gi,n=>{const r=zl.fromPath(n);return this.pi(e,r).next(e=>{e||t.removeEntry(r,Dl.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return tc.or([()=>tc.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class yg{constructor(e,t){this.persistence=e,this.yi=new Mh(e=>kc(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Gm(this,t)}static fi(e,t){return new yg(e,t)}di(){}Ai(e){return tc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}br(e){let t=0;return this.yr(e,e=>{t++}).next(()=>t)}yr(e,t){return tc.forEach(this.yi,(n,r)=>this.Dr(e,n,r).next(e=>e?tc.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.si(e,r=>this.Dr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Dl.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),tc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),tc.resolve()}removeReference(e,t,n){return this.yi.set(n,e.currentSequenceNumber),tc.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),tc.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yd(e.data.value)),t}Dr(e,t,n){return tc.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.yi.get(t);return tc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class wg{constructor(e){this.serializer=e}q(e,t,n,r){const s=new rc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Tc)}(e),function(e){e.createObjectStore(Cc,{keyPath:"userId"});e.createObjectStore(Ic,{keyPath:Ac,autoIncrement:!0}).createIndex(Mc,Oc,{unique:!0}),e.createObjectStore(Lc)}(e),xg(e),function(e){e.createObjectStore(Nc)}(e));let i=tc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Xc),e.deleteObjectStore(Kc),e.deleteObjectStore(eu)}(e),xg(e)),i=i.next(()=>function(e){const t=e.store(eu),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dl.min().toTimestamp(),targetCount:0};return t.put(Zc,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(Ic).J().next(n=>{e.deleteObjectStore(Ic),e.createObjectStore(Ic,{keyPath:Ac,autoIncrement:!0}).createIndex(Mc,Oc,{unique:!0});const r=t.store(Ic),s=n.map(e=>r.put(e));return tc.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(ru,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.wi(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(Wc)}(e),this.bi(s)))),n<7&&r>=7&&(i=i.next(()=>this.Si(s))),n<8&&r>=8&&(i=i.next(()=>this.Di(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.Ci(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(su,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(iu,{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore(gu,{keyPath:bu});t.createIndex(vu,yu,{unique:!1}),t.createIndex(wu,xu,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore(Fc,{keyPath:Bc});t.createIndex(Uc,zc),t.createIndex(Vc,Hc)}(e)).next(()=>this.Fi(e,s)).next(()=>e.deleteObjectStore(Nc))),n<14&&r>=14&&(i=i.next(()=>this.Mi(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore(au,{keyPath:"indexId",autoIncrement:!0}).createIndex(ou,"collectionGroup",{unique:!1});e.createObjectStore(lu,{keyPath:cu}).createIndex(uu,du,{unique:!1});e.createObjectStore(hu,{keyPath:fu}).createIndex(pu,mu,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore(lu).clear()}).next(()=>{t.objectStore(hu).clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore(ku,{keyPath:"name"})}(e)})),n<18&&r>=18&&gn()&&(i=i.next(()=>{t.objectStore(lu).clear()}).next(()=>{t.objectStore(hu).clear()})),i}bi(e){let t=0;return e.store(Nc).te((e,n)=>{t+=Im(n)}).next(()=>{const n={byteSize:t};return e.store(Wc).put(qc,n)})}wi(e){const t=e.store(Cc),n=e.store(Ic);return t.J().next(t=>tc.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,bc],[t.userId,t.lastAcknowledgedBatchId]);return n.J(Mc,r).next(n=>tc.forEach(n,n=>{ul(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=Rp(this.serializer,n);return Cm(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(Xc),n=e.store(Nc);return e.store(eu).get(Zc).next(e=>{const r=[];return n.te((n,s)=>{const i=new Fl(n),a=function(e){return[0,kc(e)]}(i);r.push(t.get(a).next(n=>n?tc.resolve():(n=>t.put({targetId:0,path:kc(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>tc.waitFor(r))})}Di(e,t){e.createObjectStore(tu,{keyPath:nu});const n=t.store(tu),r=new bm,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:kc(r)})}};return t.store(Nc).te({ee:!0},(e,t)=>{const n=new Fl(e);return s(n.popLast())}).next(()=>t.store(Lc).te({ee:!0},(e,t)=>{let[n,r,i]=e;const a=jc(r);return s(a.popLast())}))}Ci(e){const t=e.store(Kc);return t.te((e,n)=>{const r=Dp(n),s=Pp(this.serializer,r);return t.put(s)})}Fi(e,t){const n=t.store(Nc),r=[];return n.te((e,n)=>{const s=t.store(Fc),i=function(e){return e.document?new zl(Fl.fromString(e.document.name).popFirst(5)):e.noDocument?zl.fromSegments(e.noDocument.path):e.unknownDocument?zl.fromSegments(e.unknownDocument.path):ll(36783)}(n).path.toArray(),a={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(a))}).next(()=>tc.waitFor(r))}Mi(e,t){const n=t.store(Ic),r=Jm(this.serializer),s=new gg(vg.fi,this.serializer.wt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Hh();Rp(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),tc.forEach(n,(e,n)=>{const i=new el(n),a=Wp.bt(this.serializer,i),o=s.getIndexManager(i),l=Am.bt(i,this.serializer,o,s.referenceDelegate);return new ag(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new Au(t,gc.le),e).next()})})}}function xg(e){e.createObjectStore(Xc,{keyPath:Yc}).createIndex(Qc,Jc,{unique:!0}),e.createObjectStore(Kc,{keyPath:"targetId"}).createIndex(Gc,$c,{unique:!0}),e.createObjectStore(eu)}const kg="IndexedDbPersistence",_g=18e5,Sg=5e3,jg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ng="main";class Tg{constructor(e,t,n,r,s,i,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.xi=s,this.window=i,this.document=a,this.Oi=l,this.Ni=c,this.Bi=u,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=e=>Promise.resolve(),!Tg.C())throw new fl(hl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $m(this,r),this.Ui=t+Ng,this.serializer=new Cp(o),this.Ki=new sc(this.Ui,this.Bi,new wg(this.serializer)),this.Pi=new Kp,this.Ti=new Lm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Jm(this.serializer),this.Ei=new zp,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,!1===c&&il(kg,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fl(hl.FAILED_PRECONDITION,jg);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new gc(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(e=>{e||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(lc(e))return sl(kg,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return sl(kg,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return Eg(e).get(Ec).next(e=>tc.resolve(this.ts(e)))}ns(e){return Cg(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,_g)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Mu(e,ru);return t.J().next(e=>{const n=this._s(e,_g),r=e.filter(e=>-1===n.indexOf(e));return tc.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?tc.resolve(!0):Eg(e).get(Ec).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,Sg)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new fl(hl.FAILED_PRECONDITION,jg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cg(e).J().next(e=>void 0===this._s(e,Sg).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&sl(kg,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Tc,ru],e=>{const t=new Au(e,gc.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(e=>this.ss(e.updateTimeMs,t)&&!this.cs(e.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Cg(e).J().next(e=>this._s(e,_g).map(e=>e.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Am.bt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wm(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return Wp.bt(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,n){sl(kg,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=function(e){return 18===e?Iu:17===e?Cu:16===e?Eu:15===e?Tu:14===e?Nu:13===e?ju:12===e?Su:11===e?_u:void ll(60245)}(this.Bi);let i;return this.Ki.runTransaction(e,r,s,r=>(i=new Au(r,this.li?this.li.next():gc.le),"readwrite-primary"===t?this.Yi(i).next(e=>!!e||this.Zi(i)).next(t=>{if(!t)throw il("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new fl(hl.FAILED_PRECONDITION,Jl);return n(i)}).next(e=>this.es(i).next(()=>e)):this.Es(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Es(e){return Eg(e).get(Ec).next(e=>{if(null!==e&&this.ss(e.leaseTimestampMs,Sg)&&!this.cs(e.ownerId)&&!this.ts(e)&&!(this.Ni||this.allowTabSynchronization&&e.allowTabSynchronization))throw new fl(hl.FAILED_PRECONDITION,jg)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Eg(e).put(Ec,t)}static C(){return sc.C()}Xi(e){const t=Eg(e);return t.get(Ec).next(e=>this.ts(e)?(sl(kg,"Releasing primary lease."),t.delete(Ec)):tc.resolve())}ss(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(il("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}zi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground="visible"===this.document.visibilityState)}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Li=()=>{this.ls();const e=/(?:Version|Mobile)\/1[456]/;mn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const n=null!==(null===(t=this.Wi)||void 0===t?void 0:t.getItem(this.us(e)));return sl(kg,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return il(kg,"Failed to get zombied client id.",e),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(fN){il("Failed to set zombie client id.",fN)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch(fN){}}us(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Eg(e){return Mu(e,Tc)}function Cg(e){return Mu(e,ru)}function Ig(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ag{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ds=n,this.As=r}static Rs(e,t){let n=Hh(),r=Hh();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ag(e,t.fromCache,n,r)}}class Mg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Og{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=mn()?8:ic(hn())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ws(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.bs(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Mg;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.fs)return this.Ds(e,t,n,r.size)})}).next(()=>s.result)}Ds(e,t,n,r){return n.documentReadCount<this.gs?(rl()<=Pn.DEBUG&&sl("QueryEngine","SDK will not create cache indexes for query:",Th(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),tc.resolve()):(rl()<=Pn.DEBUG&&sl("QueryEngine","Query:",Th(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ps*r?(rl()<=Pn.DEBUG&&sl("QueryEngine","The SDK decides to create cache indexes for query:",Th(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xh(t))):tc.resolve())}ws(e,t){if(vh(t))return tc.resolve(null);let n=xh(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Sh(t,null,"F"),n=xh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Hh(...r);return this.ys.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.vs(t,r);return this.Cs(t,i,s,n.readTime)?this.ws(e,Sh(t,null,"F")):this.Fs(e,i,t,n)}))})))}bs(e,t,n,r){return vh(t)||r.isEqual(Dl.min())?tc.resolve(null):this.ys.getDocuments(e,n).next(s=>{const i=this.vs(t,s);return this.Cs(t,i,n,r)?tc.resolve(null):(rl()<=Pn.DEBUG&&sl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Th(t)),this.Fs(e,i,t,$l(r,Vl)).next(e=>e))})}vs(e,t){let n=new Bu(Ih(e));return t.forEach((t,r)=>{Eh(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return rl()<=Pn.DEBUG&&sl("QueryEngine","Using full collection scan to execute query:",Th(t)),this.ys.getDocumentsMatchingQuery(e,t,Yl.min(),n)}Fs(e,t,n,r){return this.ys.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Rg="LocalStore";class Dg{constructor(e,t,n,r){this.persistence=e,this.Ms=t,this.serializer=r,this.xs=new Pu(Nl),this.Os=new Mh(e=>ch(e),uh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ag(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function Pg(e,t,n,r){return new Dg(e,t,n,r)}async function Lg(e,t){const n=dl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=Hh();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({ks:e,removedBatchIds:s,addedBatchIds:i}))})})}function Fg(e){const t=dl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function Bg(e,t,n){let r=Hh(),s=Hh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Rh();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Dl.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):sl(Rg,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{qs:r,Qs:s}})}function Ug(e,t){const n=dl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=bc),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function zg(e,t){const n=dl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ti.getTargetData(e,t).next(s=>s?(r=s,tc.resolve(r)):n.Ti.allocateTargetId(e).next(s=>(r=new Ep(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ti.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.xs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(e.targetId,e),n.Os.set(t,e.targetId)),e})}async function Vg(e,t,n){const r=dl(e),s=r.xs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!lc(e))throw e;sl(Rg,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.xs=r.xs.remove(t),r.Os.delete(s.target)}function Hg(e,t,n){const r=dl(e);let s=Dl.min(),i=Hh();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=dl(e),s=r.Os.get(n);return void 0!==s?tc.resolve(r.xs.get(s)):r.Ti.getTargetData(t,n)}(r,e,xh(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Ms.getDocumentsMatchingQuery(e,t,n?s:Dl.min(),n?i:Hh())).next(e=>(Kg(r,Ch(t),e),{documents:e,$s:i})))}function Wg(e,t){const n=dl(e),r=dl(n.Ti),s=n.xs.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Rt(e,t).next(e=>e?e.target:null))}function qg(e,t){const n=dl(e),r=n.Ns.get(t)||Dl.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Bs.getAllFromCollectionGroup(e,t,$l(r,Vl),Number.MAX_SAFE_INTEGER)).then(e=>(Kg(n,t,e),e))}function Kg(e,t,n){let r=e.Ns.get(t)||Dl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ns.set(t,r)}const Gg="firestore_clients";function $g(e,t){return"".concat(Gg,"_").concat(e,"_").concat(t)}const Xg="firestore_mutations";function Yg(e,t,n){let r="".concat(Xg,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const Qg="firestore_targets";function Jg(e,t){return"".concat(Qg,"_").concat(e,"_").concat(t)}const Zg="SharedClientState";class eb{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Gs(e,t,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new fl(r.error.code,r.error.message))),i?new eb(e,t,r.state,s):(il(Zg,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tb{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Gs(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new fl(n.error.code,n.error.message))),s?new tb(e,n.state,r):(il(Zg,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}zs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Gs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=qh();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=wc(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new nb(e,s):(il(Zg,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class rb{constructor(e,t){this.clientId=e,this.onlineState=t}static Gs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new rb(t.clientId,t.onlineState):(il(Zg,"Failed to parse online state: ".concat(e)),null)}}class sb{constructor(){this.activeTargetIds=qh()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ib{constructor(e,t,n,r,s){this.window=e,this.xi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ys=this.Zs.bind(this),this.Xs=new Pu(Nl),this.started=!1,this.eo=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.no=$g(this.persistenceKey,this.Js),this.ro=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Xs=this.Xs.insert(this.Js,new sb),this.io=new RegExp("^".concat(Gg,"_").concat(i,"_([^_]*)$")),this.so=new RegExp("^".concat(Xg,"_").concat(i,"_(\\d+)(?:_(.*))?$")),this.oo=new RegExp("^".concat(Qg,"_").concat(i,"_(\\d+)$")),this._o=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.ao=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ys)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Is();for(const n of e){if(n===this.Js)continue;const e=this.getItem($g(this.persistenceKey,n));if(e){const t=nb.Gs(n,e);t&&(this.Xs=this.Xs.insert(t.clientId,t))}}this.uo();const t=this.storage.getItem(this._o);if(t){const e=this.co(t);e&&this.lo(e)}for(const n of this.eo)this.Zs(n);this.eo=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ro,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ho(this.Xs)}isActiveQueryTarget(e){let t=!1;return this.Xs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Po(e,"pending")}updateMutationState(e,t,n){this.Po(e,t,n),this.To(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Jg(this.persistenceKey,e));if(t){const r=tb.Gs(e,t);r&&(n=r.state)}}return t&&this.Io.js(e),this.uo(),n}removeLocalQueryTarget(e){this.Io.Hs(e),this.uo()}isLocalQueryTarget(e){return this.Io.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jg(this.persistenceKey,e))}updateQueryState(e,t,n){this.Eo(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.To(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Ao(e)}notifyBundleLoaded(e){this.Ro(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ys),this.removeItem(this.no),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return sl(Zg,"READ",e,t),t}setItem(e,t){sl(Zg,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){sl(Zg,"REMOVE",e),this.storage.removeItem(e)}Zs(e){const t=e;if(t.storageArea===this.storage){if(sl(Zg,"EVENT",t.key,t.newValue),t.key===this.no)return void il("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.xi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.io.test(t.key)){if(null==t.newValue){const e=this.Vo(t.key);return this.mo(e,null)}{const e=this.fo(t.key,t.newValue);if(e)return this.mo(e.clientId,e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.po(t.key,t.newValue);if(e)return this.yo(e)}}else if(this.oo.test(t.key)){if(null!==t.newValue){const e=this.wo(t.key,t.newValue);if(e)return this.bo(e)}}else if(t.key===this._o){if(null!==t.newValue){const e=this.co(t.newValue);if(e)return this.lo(e)}}else if(t.key===this.ro){const e=function(e){let t=gc.le;if(null!=e)try{const n=JSON.parse(e);ul("number"==typeof n,30636,{So:e}),t=n}catch(e){il(Zg,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==gc.le&&this.sequenceNumberHandler(e)}else if(t.key===this.ao){const e=this.Do(t.newValue);await Promise.all(e.map(e=>this.syncEngine.vo(e)))}}else this.eo.push(t)})}}get Io(){return this.Xs.get(this.Js)}uo(){this.setItem(this.no,this.Io.zs())}Po(e,t,n){const r=new eb(this.currentUser,e,t,n),s=Yg(this.persistenceKey,this.currentUser,e);this.setItem(s,r.zs())}To(e){const t=Yg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ao(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this._o,JSON.stringify(t))}Eo(e,t,n){const r=Jg(this.persistenceKey,e),s=new tb(e,t,n);this.setItem(r,s.zs())}Ro(e){const t=JSON.stringify(Array.from(e));this.setItem(this.ao,t)}Vo(e){const t=this.io.exec(e);return t?t[1]:null}fo(e,t){const n=this.Vo(e);return nb.Gs(n,t)}po(e,t){const n=this.so.exec(e),r=Number(n[1]),s=void 0!==n[2]?n[2]:null;return eb.Gs(new el(s),r,t)}wo(e,t){const n=this.oo.exec(e),r=Number(n[1]);return tb.Gs(r,t)}co(e){return rb.Gs(e)}Do(e){return JSON.parse(e)}async yo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);sl(Zg,"Ignoring mutation for non-active user ".concat(e.user.uid))}bo(e){return this.syncEngine.Fo(e.targetId,e.state,e.error)}mo(e,t){const n=t?this.Xs.insert(e,t):this.Xs.remove(e),r=this.ho(this.Xs),s=this.ho(n),i=[],a=[];return s.forEach(e=>{r.has(e)||i.push(e)}),r.forEach(e=>{s.has(e)||a.push(e)}),this.syncEngine.Mo(i,a).then(()=>{this.Xs=n})}lo(e){this.Xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ho(e){let t=qh();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class ab{constructor(){this.xo=new sb,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new sb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ob{No(e){}shutdown(){}}const lb="ConnectivityMonitor";class cb{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){sl(lb,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){sl(lb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ub=null;function db(){return null===ub?ub=268435456+Math.round(2147483648*Math.random()):ub++,"0x"+ub.toString(16)}const hb="RestConnection",fb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pb{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(r),this.Go=this.databaseId.database===rd?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}zo(e,t,n,r,s){const i=db(),a=this.jo(e,t.toUriEncodedString());sl(hb,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(o,r,s);const{host:l}=new URL(a),c=an(l);return this.Jo(e,a,o,n,c).then(t=>(sl(hb,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw al(hb,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Yo(e,t,n,r,s,i){return this.zo(e,t,n,r,s)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}jo(e,t){const n=fb[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class mb{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const gb="WebChannelConnection";class bb extends pb{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=db();return new Promise((s,a)=>{const o=new Vo;o.setWithCredentials(!0),o.listenOnce(Wo.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case qo.NO_ERROR:const t=o.getResponseJson();sl(gb,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case qo.TIMEOUT:sl(gb,"RPC '".concat(e,"' ").concat(i," timed out")),a(new fl(hl.DEADLINE_EXCEEDED,"Request time out"));break;case qo.HTTP_ERROR:const n=o.getStatus();if(sl(gb,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(hl).indexOf(t)>=0?t:hl.UNKNOWN}(t.status);a(new fl(e,t.message))}else a(new fl(hl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new fl(hl.UNAVAILABLE,"Connection failed."));break;default:ll(9055,{h_:e,streamId:i,P_:o.getLastErrorCode(),T_:o.getLastError()})}}finally{sl(gb,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);sl(gb,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}I_(e,t,n){const r=db(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Xo(),a=$o(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Ho(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");sl(gb,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.E_(u);let d=!1,h=!1;const f=new mb({Zo:t=>{h?sl(gb,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(sl(gb,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),sl(gb,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Ho.EventType.OPEN,()=>{h||(sl(gb,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.__())}),p(u,Ho.EventType.CLOSE,()=>{h||(h=!0,sl(gb,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.u_(),this.d_(u))}),p(u,Ho.EventType.ERROR,t=>{h||(h=!0,al(gb,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new fl(hl.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ho.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];ul(!!s,16349);const i=s,a=(null==i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){sl(gb,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Cf[e];if(void 0!==t)return Mf(t)}(t),s=a.message;void 0===n&&(n=hl.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.u_(new fl(n,s)),u.close()}else sl(gb,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.c_(s)}}),p(a,Go.STAT_EVENT,t=>{t.stat===Ko.PROXY?sl(gb,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ko.NOPROXY&&sl(gb,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.a_()},0),f}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function vb(){return"undefined"!=typeof window?window:null}function yb(){return"undefined"!=typeof document?document:null}function wb(e){return new Qf(e,!0)}class xb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=r,this.V_=s,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),r=Math.max(0,t-n);r>0&&sl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}const kb="PersistentStream";class _b{constructor(e,t,n,r,s,i,a,o){this.xi=e,this.S_=n,this.D_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new xb(e,t)}O_(){return 1===this.state||5===this.state||this.N_()}N_(){return 2===this.state||3===this.state}start(){this.M_=0,4!==this.state?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&null===this.C_&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,4!==e?this.x_.reset():t&&t.code===hl.RESOURCE_EXHAUSTED?(il(t.toString()),il("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===hl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.v_===t&&this.z_(n,r)},t=>{e(()=>{const e=new fl(hl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.j_(e)})})}z_(e,t){const n=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{n(()=>this.listener.e_())}),this.stream.n_(()=>{n(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(e=>{n(()=>this.j_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.M_?this.J_(e):this.onNext(e))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return sl(kb,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(sl(kb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sb extends _b{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ll(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(ul(void 0===t||"string"==typeof t,58123),Wu.fromBase64String(t||"")):(ul(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Wu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?hl.UNKNOWN:Mf(e.code);return new fl(t,e.message||"")}(a);n=new Hf(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=op(e,r.document.name),i=np(r.document.updateTime),a=r.document.createTime?np(r.document.createTime):Dl.min(),o=new Rd({mapValue:{fields:r.document.fields}}),l=Pd.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new zf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=op(e,r.document),i=r.readTime?np(r.readTime):Dl.min(),a=Pd.newNoDocument(s,i),o=r.removedTargetIds||[];n=new zf([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=op(e,r.document),i=r.removedTargetIds||[];n=new zf([],i,s,null)}else{if(!("filter"in t))return ll(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Ef(r,s),a=e.targetId;n=new Vf(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Dl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Dl.min():t.readTime?np(t.readTime):Dl.min()}(e);return this.listener.Y_(t,n)}Z_(e){const t={};t.database=up(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=dh(r)?{documents:gp(e,r)}:{query:bp(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ep(e,t.resumeToken);const r=Jf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Dl.min())>0){n.readTime=Zf(e,t.snapshotVersion.toTimestamp());const r=Jf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ll(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Q_(t)}X_(e){const t={};t.database=up(this.serializer),t.removeTarget=e,this.Q_(t)}}class jb extends _b{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ul(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ul(!e.writeResults||0===e.writeResults.length,55816),this.listener.na()}onNext(e){ul(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=function(e,t){return e&&e.length>0?(ul(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?np(e.updateTime):np(t);return n.isEqual(Dl.min())&&(n=np(t)),new cf(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=np(e.commitTime);return this.listener.ra(n,t)}ia(){const e={};e.database=up(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>pp(this.serializer,e))};this.Q_(t)}}class Nb{}class Tb extends Nb{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.sa=!1}oa(){if(this.sa)throw new fl(hl.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.zo(e,sp(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===hl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fl(hl.UNKNOWN,e.toString())})}Yo(e,t,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Yo(e,sp(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===hl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new fl(hl.UNKNOWN,e.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Eb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(il(t),this.ua=!1):sl("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const Cb="RemoteStore";class Ib{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=s,this.Ra.No(e=>{n.enqueueAndForget(async()=>{Bb(this)&&(sl(Cb,"Restarting streams for network reachability change."),await async function(e){const t=dl(e);t.da.add(4),await Mb(t),t.Va.set("Unknown"),t.da.delete(4),await Ab(t)}(this))})}),this.Va=new Eb(n,r)}}async function Ab(e){if(Bb(e))for(const t of e.Aa)await t(!0)}async function Mb(e){for(const t of e.Aa)await t(!1)}function Ob(e,t){const n=dl(e);n.Ea.has(t.targetId)||(n.Ea.set(t.targetId,t),Fb(n)?Lb(n):sv(n).N_()&&Db(n,t))}function Rb(e,t){const n=dl(e),r=sv(n);n.Ea.delete(t),r.N_()&&Pb(n,t),0===n.Ea.size&&(r.N_()?r.k_():Bb(n)&&n.Va.set("Unknown"))}function Db(e,t){if(e.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}sv(e).Z_(t)}function Pb(e,t){e.ma.Ke(t),sv(e).X_(t)}function Lb(e){e.ma=new qf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e.Ea.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),sv(e).start(),e.Va.ca()}function Fb(e){return Bb(e)&&!sv(e).O_()&&e.Ea.size>0}function Bb(e){return 0===dl(e).da.size}function Ub(e){e.ma=void 0}async function zb(e){e.Va.set("Online")}async function Vb(e){e.Ea.forEach((t,n)=>{Db(e,t)})}async function Hb(e,t){Ub(e),Fb(e)?(e.Va.Pa(t),Lb(e)):e.Va.set("Unknown")}async function Wb(e,t,n){if(e.Va.set("Online"),t instanceof Hf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ea.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ea.delete(r),e.ma.removeTarget(r))}(e,t)}catch(n){sl(Cb,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await qb(e,n)}else if(t instanceof zf?e.ma.Xe(t):t instanceof Vf?e.ma.ot(t):e.ma.nt(t),!n.isEqual(Dl.min()))try{const t=await Fg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ma.It(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ea.get(r);s&&e.Ea.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ea.get(t);if(!r)return;e.Ea.set(t,r.withResumeToken(Wu.EMPTY_BYTE_STRING,r.snapshotVersion)),Pb(e,t);const s=new Ep(r.target,t,n,r.sequenceNumber);Db(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sl(Cb,"Failed to raise snapshot:",t),await qb(e,t)}}async function qb(e,t,n){if(!lc(t))throw t;e.da.add(1),await Mb(e),e.Va.set("Offline"),n||(n=()=>Fg(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sl(Cb,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Ab(e)})}function Kb(e,t){return t().catch(n=>qb(e,n,t))}async function Gb(e){const t=dl(e),n=iv(t);let r=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:bc;for(;$b(t);)try{const e=await Ug(t.localStore,r);if(null===e){0===t.Ia.length&&n.k_();break}r=e.batchId,Xb(t,e)}catch(e){await qb(t,e)}Yb(t)&&Qb(t)}function $b(e){return Bb(e)&&e.Ia.length<10}function Xb(e,t){e.Ia.push(t);const n=iv(e);n.N_()&&n.ea&&n.ta(t.mutations)}function Yb(e){return Bb(e)&&!iv(e).O_()&&e.Ia.length>0}function Qb(e){iv(e).start()}async function Jb(e){iv(e).ia()}async function Zb(e){const t=iv(e);for(const n of e.Ia)t.ta(n.mutations)}async function ev(e,t,n){const r=e.Ia.shift(),s=Nf.from(r,t,n);await Kb(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Gb(e)}async function tv(e,t){t&&iv(e).ea&&await async function(e,t){if(function(e){return Af(e)&&e!==hl.ABORTED}(t.code)){const n=e.Ia.shift();iv(e).L_(),await Kb(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Gb(e)}}(e,t),Yb(e)&&Qb(e)}async function nv(e,t){const n=dl(e);n.asyncQueue.verifyOperationInProgress(),sl(Cb,"RemoteStore received new credentials");const r=Bb(n);n.da.add(3),await Mb(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Ab(n)}async function rv(e,t){const n=dl(e);t?(n.da.delete(2),await Ab(n)):t||(n.da.add(2),await Mb(n),n.Va.set("Unknown"))}function sv(e){return e.fa||(e.fa=function(e,t,n){const r=dl(e);return r.oa(),new Sb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:zb.bind(null,e),n_:Vb.bind(null,e),i_:Hb.bind(null,e),Y_:Wb.bind(null,e)}),e.Aa.push(async t=>{t?(e.fa.L_(),Fb(e)?Lb(e):e.Va.set("Unknown")):(await e.fa.stop(),Ub(e))})),e.fa}function iv(e){return e.ga||(e.ga=function(e,t,n){const r=dl(e);return r.oa(),new jb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:Jb.bind(null,e),i_:tv.bind(null,e),na:Zb.bind(null,e),ra:ev.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Gb(e)):(await e.ga.stop(),e.Ia.length>0&&(sl(Cb,"Stopping write stream with ".concat(e.Ia.length," pending writes")),e.Ia=[]))})),e.ga}class av{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new pl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new av(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fl(hl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ov(e,t){if(il("AsyncQueue","".concat(t,": ").concat(e)),lc(e))return new fl(hl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class lv{static emptySet(e){return new lv(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||zl.comparator(t.key,n.key):(e,t)=>zl.comparator(e.key,t.key),this.keyedMap=Ph(),this.sortedSet=new Pu(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lv))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class cv{constructor(){this.pa=new Pu(zl.comparator)}track(e){const t=e.doc.key,n=this.pa.get(t);n?0!==e.type&&3===n.type?this.pa=this.pa.insert(t,e):3===e.type&&1!==n.type?this.pa=this.pa.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pa=this.pa.remove(t):1===e.type&&2===n.type?this.pa=this.pa.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):ll(63341,{Vt:e,ya:n}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,n)=>{e.push(n)}),e}}class uv{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new uv(e,t,lv.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class dv{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class hv{constructor(){this.queries=fv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=dl(e),r=n.queries;n.queries=fv(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new fl(hl.ABORTED,"Firestore shutting down"))}}function fv(){return new Mh(e=>Nh(e),jh)}async function pv(e,t){const n=dl(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Da()&&t.va()&&(r=2):(i=new dv,r=t.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=ov(e,"Initialization of query '".concat(Th(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.Fa(n.onlineState),i.ba&&t.Ma(i.ba)&&vv(n)}async function mv(e,t){const n=dl(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.va()?0:1:!i.Da()&&t.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gv(e,t){const n=dl(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Ma(s)&&(r=!0);t.ba=s}}r&&vv(n)}function bv(e,t,n){const r=dl(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function vv(e){e.Ca.forEach(e=>{e.next()})}var yv,wv;(wv=yv||(yv={})).xa="default",wv.Cache="cache";class xv{constructor(e,t,n){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=n||{}}Ma(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new uv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache)return!0;if(!this.va())return!0;const n="Offline"!==t;return(!this.options.Qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}qa(e){e=uv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==yv.Cache}}class kv{constructor(e){this.key=e}}class _v{constructor(e){this.key=e}}class Sv{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Hh(),this.mutatedKeys=Hh(),this.Za=Ih(e),this.Xa=new lv(this.Za)}get eu(){return this.Ha}tu(e,t){const n=t?t.nu:new cv,r=t?t.Xa:this.Xa;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Eh(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ru(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Za(u,o)>0||l&&this.Za(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Xa:i,nu:n,Cs:a,mutatedKeys:s}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const i=e.nu.wa();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ll(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Za(e.doc,t.doc)),this.iu(n),r=null!=r&&r;const a=t&&!r?this.su():[],o=0===this.Ya.size&&this.current&&!r?1:0,l=o!==this.Ja;return this.Ja=o,0!==i.length||l?{snapshot:new uv(this.query,e.Xa,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new cv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Hh(),this.Xa.forEach(e=>{this._u(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new _v(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new kv(n))}),t}au(e){this.Ha=e.$s,this.Ya=Hh();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return uv.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,0===this.Ja,this.hasCachedResults)}}const jv="SyncEngine";class Nv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tv{constructor(e){this.key=e,this.cu=!1}}class Ev{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.lu={},this.hu=new Mh(e=>Nh(e),jh),this.Pu=new Map,this.Tu=new Set,this.Iu=new Pu(zl.comparator),this.Eu=new Map,this.du=new ug,this.Au={},this.Ru=new Map,this.Vu=Pm.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}async function Cv(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=sy(e);let s;const i=r.hu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await Av(r,t,n,!0),s}async function Iv(e,t){const n=sy(e);await Av(n,t,!0,!1)}async function Av(e,t,n,r){const s=await zg(e.localStore,xh(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Mv(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Ob(e.remoteStore,s),o}async function Mv(e,t,n,r,s){e.fu=(t,n,r)=>async function(e,t,n,r){let s=t.view.tu(n);s.Cs&&(s=await Hg(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.tu(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Wv(e,t.targetId,o.ou),o.snapshot}(e,t,n,r);const i=await Hg(e.localStore,t,!0),a=new Sv(t,i.$s),o=a.tu(i.documents),l=Uf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Wv(e,n,c.ou);const u=new Nv(t,n,a);return e.hu.set(t,u),e.Pu.has(n)?e.Pu.get(n).push(t):e.Pu.set(n,[t]),c.snapshot}async function Ov(e,t,n){const r=dl(e),s=r.hu.get(t),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(e=>!jh(e,t))),void r.hu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Rb(r.remoteStore,s.targetId),Vv(r,s.targetId)}).catch(ec)):(Vv(r,s.targetId),await Vg(r.localStore,s.targetId,!0))}async function Rv(e,t){const n=dl(e),r=n.hu.get(t),s=n.Pu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rb(n.remoteStore,r.targetId))}async function Dv(e,t){const n=dl(e);try{const e=await function(e,t){const n=dl(e),r=t.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Ti.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Ti.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Wu.EMPTY_BYTE_STRING,Dl.min()).withLastLimboFreeSnapshotVersion(Dl.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Ti.updateTargetData(e,c))});let o=Rh(),l=Hh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Bg(e,i,t.documentUpdates).next(e=>{o=e.qs,l=e.Qs})),!r.isEqual(Dl.min())){const t=n.Ti.getLastRemoteSnapshotVersion(e).next(t=>n.Ti.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return tc.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.xs=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Eu.get(t);r&&(ul(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.cu=!0:e.modifiedDocuments.size>0?ul(r.cu,14607):e.removedDocuments.size>0&&(ul(r.cu,42227),r.cu=!1))}),await Gv(n,e,t)}catch(e){await ec(e)}}function Pv(e,t,n){const r=dl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.hu.forEach((n,r)=>{const s=r.view.Fa(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=dl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.Fa(t)&&(r=!0)}),r&&vv(n)}(r.eventManager,t),e.length&&r.lu.Y_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lv(e,t,n){const r=dl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let e=new Pu(zl.comparator);e=e.insert(i,Pd.newNoDocument(i,Dl.min()));const n=Hh().add(i),s=new Bf(Dl.min(),new Map,new Pu(Nl),e,n);await Dv(r,s),r.Iu=r.Iu.remove(i),r.Eu.delete(t),Kv(r)}else await Vg(r.localStore,t,!1).then(()=>Vv(r,t,n)).catch(ec)}async function Fv(e,t){const n=dl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=dl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=tc.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);ul(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Hh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);zv(n,r,null),Uv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gv(n,e)}catch(e){await ec(e)}}async function Bv(e,t,n){const r=dl(e);try{const e=await function(e,t){const n=dl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ul(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);zv(r,t,n),Uv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Gv(r,e)}catch(n){await ec(n)}}function Uv(e,t){(e.Ru.get(t)||[]).forEach(e=>{e.resolve()}),e.Ru.delete(t)}function zv(e,t,n){const r=dl(e);let s=r.Au[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Au[r.currentUser.toKey()]=s}}function Vv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Pu.get(t))e.hu.delete(r),n&&e.lu.gu(r,n);e.Pu.delete(t),e.isPrimaryClient&&e.du.Hr(t).forEach(t=>{e.du.containsKey(t)||Hv(e,t)})}function Hv(e,t){e.Tu.delete(t.path.canonicalString());const n=e.Iu.get(t);null!==n&&(Rb(e.remoteStore,n),e.Iu=e.Iu.remove(t),e.Eu.delete(n),Kv(e))}function Wv(e,t,n){for(const r of n)r instanceof kv?(e.du.addReference(r.key,t),qv(e,r)):r instanceof _v?(sl(jv,"Document no longer in limbo: "+r.key),e.du.removeReference(r.key,t),e.du.containsKey(r.key)||Hv(e,r.key)):ll(19791,{pu:r})}function qv(e,t){const n=t.key,r=n.path.canonicalString();e.Iu.get(n)||e.Tu.has(r)||(sl(jv,"New document in limbo: "+n),e.Tu.add(r),Kv(e))}function Kv(e){for(;e.Tu.size>0&&e.Iu.size<e.maxConcurrentLimboResolutions;){const t=e.Tu.values().next().value;e.Tu.delete(t);const n=new zl(Fl.fromString(t)),r=e.Vu.next();e.Eu.set(r,new Tv(n)),e.Iu=e.Iu.insert(n,r),Ob(e.remoteStore,new Ep(xh(bh(n.path)),r,"TargetPurposeLimboResolution",gc.le))}}async function Gv(e,t,n){const r=dl(e),s=[],i=[],a=[];r.hu.isEmpty()||(r.hu.forEach((e,o)=>{a.push(r.fu(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ag.Rs(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.lu.Y_(s),await async function(e,t){const n=dl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>tc.forEach(t,t=>tc.forEach(t.ds,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>tc.forEach(t.As,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!lc(e))throw e;sl(Rg,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.xs.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.xs=n.xs.insert(e,s)}}}(r.localStore,i))}async function $v(e,t){const n=dl(e);if(!n.currentUser.isEqual(t)){sl(jv,"User change. New user:",t.toKey());const e=await Lg(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach(e=>{e.forEach(e=>{e.reject(new fl(hl.CANCELLED,t))})}),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gv(n,e.ks)}}function Xv(e,t){const n=dl(e),r=n.Eu.get(t);if(r&&r.cu)return Hh().add(r.key);{let e=Hh();const r=n.Pu.get(t);if(!r)return e;for(const t of r){const r=n.hu.get(t);e=e.unionWith(r.view.eu)}return e}}async function Yv(e,t){const n=dl(e),r=await Hg(n.localStore,t.query,!0),s=t.view.au(r);return n.isPrimaryClient&&Wv(n,t.targetId,s.ou),s}async function Qv(e,t){const n=dl(e);return qg(n.localStore,t).then(e=>Gv(n,e))}async function Jv(e,t,n,r){const s=dl(e),i=await function(e,t){const n=dl(e),r=dl(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.tr(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):tc.resolve(null)))}(s.localStore,t);null!==i?("pending"===n?await Gb(s.remoteStore):"acknowledged"===n||"rejected"===n?(zv(s,t,r||null),Uv(s,t),function(e,t){dl(dl(e).mutationQueue).sr(t)}(s.localStore,t)):ll(6720,"Unknown batchState",{yu:n}),await Gv(s,i)):sl(jv,"Cannot apply mutation batch with id: "+t)}async function Zv(e,t,n){const r=dl(e),s=[],i=[];for(const a of t){let e;const t=r.Pu.get(a);if(t&&0!==t.length){e=await zg(r.localStore,xh(t[0]));for(const e of t){const t=r.hu.get(e),n=await Yv(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=await Wg(r.localStore,a);e=await zg(r.localStore,t),await Mv(r,ey(t),a,!1,e.resumeToken)}s.push(e)}return r.lu.Y_(i),s}function ey(e){return gh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ty(e){return function(e){return dl(dl(e).persistence).Is()}(dl(e).localStore)}async function ny(e,t,n,r){const s=dl(e);if(s.mu)return void sl(jv,"Ignoring unexpected query state notification.");const i=s.Pu.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{const e=await qg(s.localStore,Ch(i[0])),r=Bf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Wu.EMPTY_BYTE_STRING);await Gv(s,e,r);break}case"rejected":await Vg(s.localStore,t,!0),Vv(s,t,r);break;default:ll(64155,n)}}async function ry(e,t,n){const r=sy(e);if(r.mu){for(const e of t){if(r.Pu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){sl(jv,"Adding an already active target "+e);continue}const t=await Wg(r.localStore,e),n=await zg(r.localStore,t);await Mv(r,ey(t),n.targetId,!1,n.resumeToken),Ob(r.remoteStore,n)}for(const e of n)r.Pu.has(e)&&await Vg(r.localStore,e,!1).then(()=>{Rb(r.remoteStore,e),Vv(r,e)}).catch(ec)}}function sy(e){const t=dl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lv.bind(null,t),t.lu.Y_=gv.bind(null,t.eventManager),t.lu.gu=bv.bind(null,t.eventManager),t}function iy(e){const t=dl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bv.bind(null,t),t}class ay{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wb(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return Pg(this.persistence,new Og,e.initialUser,this.serializer)}Su(e){return new gg(vg.fi,this.serializer)}bu(e){return new ab}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ay.provider={build:()=>new ay};class oy extends ay{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ul(this.persistence.referenceDelegate instanceof yg,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new qm(n,e.asyncQueue,t)}Su(e){const t=void 0!==this.cacheSizeBytes?Em.withCacheSize(this.cacheSizeBytes):Em.DEFAULT;return new gg(e=>yg.fi(e,t),this.serializer)}}class ly extends ay{constructor(e,t,n){super(),this.Fu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Fu.initialize(this,e),await iy(this.Fu.syncEngine),await Gb(this.Fu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Du(e){return Pg(this.persistence,new Og,e.initialUser,this.serializer)}vu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new qm(n,e.asyncQueue,t)}Cu(e,t){const n=new mc(t,this.persistence);return new pc(e.asyncQueue,n)}Su(e){const t=Ig(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Em.withCacheSize(this.cacheSizeBytes):Em.DEFAULT;return new Tg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vb(),yb(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new ab}}class cy extends ly{constructor(e,t){super(e,t,!1),this.Fu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Fu.syncEngine;this.sharedClientState instanceof ib&&(this.sharedClientState.syncEngine={Co:Jv.bind(null,t),Fo:ny.bind(null,t),Mo:ry.bind(null,t),Is:ty.bind(null,t),vo:Qv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async e=>{await async function(e,t){const n=dl(e);if(sy(n),iy(n),!0===t&&!0!==n.mu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Zv(n,e.toArray());n.mu=!0,await rv(n.remoteStore,!0);for(const r of t)Ob(n.remoteStore,r)}else if(!1===t&&!1!==n.mu){const e=[];let t=Promise.resolve();n.Pu.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then(()=>(Vv(n,s),Vg(n.localStore,s,!0))),Rb(n.remoteStore,s)}),await t,await Zv(n,e),function(e){const t=dl(e);t.Eu.forEach((e,n)=>{Rb(t.remoteStore,n)}),t.du.Jr(),t.Eu=new Map,t.Iu=new Pu(zl.comparator)}(n),n.mu=!1,await rv(n.remoteStore,!1)}}(this.Fu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}bu(e){const t=vb();if(!ib.C(t))throw new fl(hl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ig(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ib(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class uy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Pv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=$v.bind(null,this.syncEngine),await rv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hv}createDatastore(e){const t=wb(e.databaseInfo.databaseId),n=function(e){return new bb(e)}(e.databaseInfo);return function(e,t,n,r){return new Tb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Ib(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Pv(this.syncEngine,e,0),cb.C()?new cb:new ob)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new Ev(e,t,n,r,s,i);return a&&(o.mu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=dl(e);sl(Cb,"RemoteStore shutting down."),t.da.add(5),await Mb(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}uy.provider={build:()=>new uy};class dy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):il("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const hy="FirestoreClient";class fy{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=el.UNAUTHENTICATED,this.clientId=jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{sl(hy,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(sl(hy,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ov(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function py(e,t){e.asyncQueue.verifyOperationInProgress(),sl(hy,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Lg(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function my(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gy(e);sl(hy,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>nv(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>nv(t.remoteStore,n)),e._onlineComponents=t}async function gy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sl(hy,"Using user provided OfflineComponentProvider");try{await py(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===hl.FAILED_PRECONDITION||e.code===hl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;al("Error using user provided cache. Falling back to memory cache: "+n),await py(e,new ay)}}else sl(hy,"Using default OfflineComponentProvider"),await py(e,new oy(void 0));return e._offlineComponents}async function by(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sl(hy,"Using user provided OnlineComponentProvider"),await my(e,e._uninitializedComponentsProvider._online)):(sl(hy,"Using default OnlineComponentProvider"),await my(e,new uy))),e._onlineComponents}function vy(e){return by(e).then(e=>e.syncEngine)}async function yy(e){const t=await by(e),n=t.eventManager;return n.onListen=Cv.bind(null,t.syncEngine),n.onUnlisten=Ov.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Iv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Rv.bind(null,t.syncEngine),n}function wy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new pl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new dy({next:o=>{i.xu(),t.enqueueAndForget(()=>mv(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new fl(hl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new fl(hl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new xv(bh(n.path),i,{includeMetadataChanges:!0,Qa:!0});return pv(e,a)}(await yy(e),e.asyncQueue,t,n,r)),r.promise}function xy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new pl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new dy({next:n=>{i.xu(),t.enqueueAndForget(()=>mv(e,a)),n.fromCache&&"server"===r.source?s.reject(new fl(hl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new xv(n,i,{includeMetadataChanges:!0,Qa:!0});return pv(e,a)}(await yy(e),e.asyncQueue,t,n,r)),r.promise}function ky(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const _y=new Map;function Sy(e,t,n){if(!n)throw new fl(hl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jy(e){if(!zl.isDocumentKey(e))throw new fl(hl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ny(e){if(zl.isDocumentKey(e))throw new fl(hl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ty(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ll(12329,{type:typeof e})}function Ey(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new fl(hl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ty(e);throw new fl(hl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Cy(e,t){if(t<=0)throw new fl(hl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}const Iy="firestore.googleapis.com",Ay=!0;class My{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new fl(hl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Iy,this.ssl=Ay}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Ay;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Tm;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Vm)throw new fl(hl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new fl(hl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ky(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new fl(hl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new fl(hl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new fl(hl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new My({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fl(hl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fl(hl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new My(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new gl;switch(e.type){case"firstParty":return new wl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new fl(hl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_y.get(e);t&&(sl("ComponentProvider","Removing Datastore"),_y.delete(e),t.terminate())}(this),Promise.resolve()}}class Ry{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ry(this.firestore,e,this._query)}}class Dy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Py(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dy(this.firestore,e,this._key)}}class Py extends Ry{constructor(e,t,n){super(e,t,bh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dy(this.firestore,null,new zl(e))}withConverter(e){return new Py(this.firestore,e,this._path)}}function Ly(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=In(e),Sy("collection","path",t),e instanceof Oy){const n=Fl.fromString(t,...r);return Ny(n),new Py(e,null,n)}{if(!(e instanceof Dy||e instanceof Py))throw new fl(hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fl.fromString(t,...r));return Ny(n),new Py(e.firestore,null,n)}}function Fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=In(e),1===arguments.length&&(t=jl.newId()),Sy("doc","path",t),e instanceof Oy){const n=Fl.fromString(t,...r);return jy(n),new Dy(e,null,new zl(n))}{if(!(e instanceof Dy||e instanceof Py))throw new fl(hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Fl.fromString(t,...r));return jy(n),new Dy(e.firestore,e instanceof Py?e.converter:null,new zl(n))}}const By="AsyncQueue";class Uy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new xb(this,"async_queue_retry"),this.rc=()=>{const e=yb();e&&sl(By,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=yb();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=yb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new pl;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(fN){if(!lc(fN))throw fN;sl(By,"Operation failed with retryable error: "+fN)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(e=>{throw this.Xu=e,this.ec=!1,il("INTERNAL UNHANDLED ERROR: ",zy(e)),e}).then(e=>(this.ec=!1,e))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const r=av.createAndSchedule(this,e,t,n,e=>this.uc(e));return this.Zu.push(r),r}oc(){this.Xu&&ll(47125,{cc:zy(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function zy(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Vy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Hy extends Oy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Uy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uy(e),this._firestoreClient=void 0,await e}}}function Wy(e,t){const n="object"==typeof e?e:$r(),r="string"==typeof e?e:t||rd,s=Vr(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=tn("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;e=Ey(e,Oy);const i=an(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&(on("https://".concat(l)),dn("Firestore",!0)),a.host!==Iy&&a.host!==l&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:i,emulatorOptions:r});if(!kn(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=el.MOCK_USER;else{t=ln(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new fl(hl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new el(i)}e._authCredentials=new bl(new ml(t,n))}}(s,...e)}return s}function qy(e){if(e._terminated)throw new fl(hl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ky(e),e._firestoreClient}function Ky(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new nd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ky(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new fy(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Gy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gy(Wu.fromBase64String(e))}catch(e){throw new fl(hl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Gy(Wu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $y{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new fl(hl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ul(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xy{constructor(e){this._methodName=e}}class Yy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fl(hl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fl(hl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nl(this._lat,e._lat)||Nl(this._long,e._long)}}class Qy{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Jy=/^__.*__$/;class Zy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new yf(e,this.data,this.fieldMask,t,this.fieldTransforms):new vf(e,this.data,t,this.fieldTransforms)}}class ew{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new yf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ll(40011,{Ic:e})}}class nw{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Ec(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new nw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Vc(e),r}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.dc({path:n,Rc:!1});return r.Ec(),r}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return vw(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(0===e.length)throw this.gc("Document fields must not be empty");if(tw(this.Ic)&&Jy.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class rw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||wb(e)}bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new nw({Ic:e,methodName:t,wc:n,path:Ul.emptyPath(),Rc:!1,yc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sw(e){const t=e._freezeSettings(),n=wb(e._databaseId);return new rw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iw(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.bc(i.merge||i.mergeFields?2:0,t,n,s);pw("Data must be an object, but it was:",a,r);const o=hw(r,a);let l,c;if(i.merge)l=new Vu(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=mw(t,r,n);if(!a.contains(s))throw new fl(hl.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));yw(e,s)||e.push(s)}l=new Vu(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Zy(new Rd(o),l,c)}class aw extends Xy{_toFieldTransform(e){if(2!==e.Ic)throw 1===e.Ic?e.gc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aw}}class ow extends Xy{_toFieldTransform(e){return new lf(e.path,new Zh)}isEqual(e){return e instanceof ow}}function lw(e,t,n,r){const s=e.bc(1,t,n);pw("Data must be an object, but it was:",s,r);const i=[],a=Rd.empty();Ru(r,(e,r)=>{const o=bw(t,e,n);r=In(r);const l=s.mc(o);if(r instanceof aw)i.push(o);else{const e=dw(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new Vu(i);return new ew(a,o,s.fieldTransforms)}function cw(e,t,n,r,s,i){const a=e.bc(1,t,n),o=[mw(t,r,n)],l=[s];if(i.length%2!=0)throw new fl(hl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(mw(t,i[h])),l.push(i[h+1]);const c=[],u=Rd.empty();for(let h=o.length-1;h>=0;--h)if(!yw(c,o[h])){const e=o[h];let t=l[h];t=In(t);const n=a.mc(e);if(t instanceof aw)c.push(e);else{const r=dw(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Vu(c);return new ew(u,d,a.fieldTransforms)}function uw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return dw(n,e.bc(r?4:3,t))}function dw(e,t){if(fw(e=In(e)))return pw("Unsupported field value:",t,e),hw(e,t);if(e instanceof Xy)return function(e,t){if(!tw(t.Ic))throw t.gc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&4!==t.Ic)throw t.gc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=dw(s,t.fc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=In(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $h(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Rl.fromDate(e);return{timestampValue:Zf(t.serializer,n)}}if(e instanceof Rl){const n=new Rl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Zf(t.serializer,n)}}if(e instanceof Yy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Gy)return{bytesValue:ep(t.serializer,e._byteString)};if(e instanceof Dy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.gc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:rp(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Qy)return function(e,t){return{mapValue:{fields:{[id]:{stringValue:ld},[cd]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.gc("VectorValues must only contain numeric values.");return Kh(t.serializer,e)})}}}}}}(e,t);throw t.gc("Unsupported field value: ".concat(Ty(e)))}(e,t)}function hw(e,t){const n={};return Du(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ru(e,(e,r)=>{const s=dw(r,t.Ac(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function fw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Rl||e instanceof Yy||e instanceof Gy||e instanceof Dy||e instanceof Xy||e instanceof Qy)}function pw(e,t,n){if(!fw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ty(n);throw"an object"===r?t.gc(e+" a custom object"):t.gc(e+" "+r)}}function mw(e,t,n){if((t=In(t))instanceof $y)return t._internalPath;if("string"==typeof t)return bw(e,t);throw vw("Field path arguments must be of type string or ",e,!1,void 0,n)}const gw=new RegExp("[~\\*/\\[\\]]");function bw(e,t,n){if(t.search(gw)>=0)throw vw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new $y(...t.split("."))._internalPath}catch(r){throw vw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function vw(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new fl(hl.INVALID_ARGUMENT,o+e+l)}function yw(e,t){return e.some(e=>e.isEqual(t))}class ww{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xw extends ww{data(){return super.data()}}function kw(e,t){return"string"==typeof t?bw(e,t):t instanceof $y?t._internalPath:t._delegate._internalPath}function _w(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new fl(hl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sw{}class jw extends Sw{}function Nw(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Sw&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Cw).length,n=e.filter(e=>e instanceof Tw).length;if(t>1||t>0&&n>0)throw new fl(hl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Tw extends jw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Tw(e,t,n)}_apply(e){const t=this._parse(e);return Dw(e._query,t),new Ry(e.firestore,e.converter,_h(e._query,t))}_parse(e){const t=sw(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new fl(hl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Rw(a,i);const t=[];for(const n of a)t.push(Ow(r,e,n));o={arrayValue:{values:t}}}else o=Ow(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Rw(a,i),o=uw(n,t,a,"in"===i||"not-in"===i);return Hd.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ew(e,t,n){const r=t,s=kw("where",e);return Tw._create(s,r,n)}class Cw extends Sw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cw(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Wd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Dw(n,s),n=_h(n,s)}(e._query,t),new Ry(e.firestore,e.converter,_h(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Iw extends jw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Iw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new fl(hl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new fl(hl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ud(t,n)}(e._query,this._field,this._direction);return new Ry(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new mh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Aw(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kw("orderBy",e);return Iw._create(n,t)}class Mw extends jw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Mw(e,t,n)}_apply(e){return new Ry(e.firestore,e.converter,Sh(e._query,this._limit,this._limitType))}}function Ow(e,t,n){if("string"==typeof(n=In(n))){if(""===n)throw new fl(hl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yh(t)&&-1!==n.indexOf("/"))throw new fl(hl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Fl.fromString(n));if(!zl.isDocumentKey(r))throw new fl(hl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wd(e,new zl(r))}if(n instanceof Dy)return wd(e,n._key);throw new fl(hl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ty(n),"."))}function Rw(e,t){if(!Array.isArray(e)||0===e.length)throw new fl(hl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Dw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new fl(hl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new fl(hl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Pw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(dd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ll(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ru(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[cd].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Gu(e.doubleValue));return new Qy(s)}convertGeoPoint(e){return new Yy(Gu(e.latitude),Gu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ed(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(td(e));default:return null}}convertTimestamp(e){const t=Ku(e);return new Rl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Fl.fromString(e);ul(Tp(n),9688,{name:e});const r=new sd(n.get(1),n.get(3)),s=new zl(n.popFirst(5));return r.isEqual(t)||il("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Lw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Fw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bw extends ww{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Uw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Uw extends Bw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class zw{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Fw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Uw(this._firestore,this._userDataWriter,n.key,n,new Fw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fl(hl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Uw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Fw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Uw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Fw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Vw(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Vw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ll(61501,{type:e})}}function Hw(e){e=Ey(e,Dy);const t=Ey(e.firestore,Hy);return wy(qy(t),e._key).then(n=>Jw(t,e,n))}class Ww extends Pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dy(this.firestore,null,t)}}function qw(e){e=Ey(e,Ry);const t=Ey(e.firestore,Hy),n=qy(t),r=new Ww(t);return _w(e._query),xy(n,e._query).then(n=>new zw(t,r,e,n))}function Kw(e,t,n){e=Ey(e,Dy);const r=Ey(e.firestore,Hy),s=Lw(e.converter,t,n);return Qw(r,[iw(sw(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,uf.none())])}function Gw(e,t,n){e=Ey(e,Dy);const r=Ey(e.firestore,Hy),s=sw(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=In(t))||t instanceof $y?cw(s,"updateDoc",e._key,t,n,o):lw(s,"updateDoc",e._key,t),Qw(r,[i.toMutation(e._key,uf.exists(!0))])}function $w(e){return Qw(Ey(e.firestore,Hy),[new _f(e._key,uf.none())])}function Xw(e,t){const n=Ey(e.firestore,Hy),r=Fy(e),s=Lw(e.converter,t);return Qw(n,[iw(sw(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,uf.exists(!1))]).then(()=>r)}function Yw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s,i,a;e=In(e);let o={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Vy(n[l])||(o=n[l],l++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Vy(n[l])){const e=n[l];n[l]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[l+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),n[l+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,d,h;if(e instanceof Dy)d=Ey(e.firestore,Hy),h=bh(e._key.path),u={next:t=>{n[l]&&n[l](Jw(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Ey(e,Ry);d=Ey(t.firestore,Hy),h=t._query;const r=new Ww(d);u={next:e=>{n[l]&&n[l](new zw(d,r,t,e))},error:n[l+1],complete:n[l+2]},_w(e._query)}return function(e,t,n,r){const s=new dy(r),i=new xv(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>pv(await yy(e),i)),()=>{s.xu(),e.asyncQueue.enqueueAndForget(async()=>mv(await yy(e),i))}}(qy(d),h,c,u)}function Qw(e,t){return function(e,t){const n=new pl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=iy(e);try{const e=await function(e,t){const n=dl(e),r=Rl.now(),s=t.reduce((e,t)=>e.add(t.key),Hh());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Rh(),l=Hh();return n.Bs.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=gf(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new yf(e.key,t,Dd(t.value.mapValue),uf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Lh(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Au[e.currentUser.toKey()];r||(r=new Pu(Nl)),r=r.insert(t,n),e.Au[e.currentUser.toKey()]=r}(r,e.batchId,n),await Gv(r,e.changes),await Gb(r.remoteStore)}catch(e){const t=ov(e,"Failed to persist write");n.reject(t)}}(await vy(e),t,n)),n.promise}(qy(e),t)}function Jw(e,t,n){const r=n.docs.get(t._key),s=new Ww(e);return new Bw(e,s,t._key,r,new Fw(n.hasPendingWrites,n.fromCache),t.converter)}class Zw{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=function(e){return new ex(null==e?void 0:e.forceOwnership)}(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class ex{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=uy.provider,this._offlineComponentProvider={build:t=>new ly(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class tx{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=uy.provider,this._offlineComponentProvider={build:t=>new cy(t,null==e?void 0:e.cacheSizeBytes)}}}function nx(){return new ow("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tl=e}(Kr),zr(new An("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new Hy(new vl(e.getProvider("auth-internal")),new kl(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new fl(hl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sd(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xr(Jo,Zo,e),Xr(Jo,Zo,"esm2017")}();Xr("firebase","11.9.1","app");const rx="@firebase/installations",sx="0.6.17",ix=1e4,ax="w:".concat(sx),ox="FIS_v2",lx=36e5,cx=new wn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ux(e){return e instanceof yn&&e.code.includes("request-failed")}function dx(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function hx(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function fx(e,t){const n=(await t.json()).error;return cx.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function px(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mx(e,t){let{refreshToken:n}=t;const r=px(e);return r.append("Authorization",function(e){return"".concat(ox," ").concat(e)}(n)),r}async function gx(e){const t=await e();return t.status>=500&&t.status<600?e():t}function bx(e){return new Promise(t=>{setTimeout(t,e)})}const vx=/^[cdef][\w-]{21}$/;function yx(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return vx.test(t)?t:""}catch(e){return""}}function wx(e){return"".concat(e.appName,"!").concat(e.appId)}const xx=new Map;function kx(e,t){const n=wx(e);_x(n,t),function(e,t){const n=jx();n&&n.postMessage({key:e,fid:t});Nx()}(n,t)}function _x(e,t){const n=xx.get(e);if(n)for(const r of n)r(t)}let Sx=null;function jx(){return!Sx&&"BroadcastChannel"in self&&(Sx=new BroadcastChannel("[Firebase] FID Change"),Sx.onmessage=e=>{_x(e.data.key,e.data.fid)}),Sx}function Nx(){0===xx.size&&Sx&&(Sx.close(),Sx=null)}const Tx="firebase-installations-store";let Ex=null;function Cx(){return Ex||(Ex=er("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Tx)}})),Ex}async function Ix(e,t){const n=wx(e),r=(await Cx()).transaction(Tx,"readwrite"),s=r.objectStore(Tx),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||kx(e,t.fid),t}async function Ax(e){const t=wx(e),n=(await Cx()).transaction(Tx,"readwrite");await n.objectStore(Tx).delete(t),await n.done}async function Mx(e,t){const n=wx(e),r=(await Cx()).transaction(Tx,"readwrite"),s=r.objectStore(Tx),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||kx(e,a.fid),a}async function Ox(e){let t;const n=await Mx(e.appConfig,n=>{const r=function(e){const t=e||{fid:yx(),registrationStatus:0};return Px(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(cx.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=dx(n),a=px(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:ox,appId:n.appId,sdkVersion:ax},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await gx(()=>fetch(i,c));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:hx(e.authToken)}}throw await fx("Create Installation",u)}(e,t);return Ix(e.appConfig,n)}catch(fN){throw ux(fN)&&409===fN.customData.serverCode?await Ax(e.appConfig):await Ix(e.appConfig,{fid:t.fid,registrationStatus:0}),fN}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Rx(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Rx(e){let t=await Dx(e.appConfig);for(;1===t.registrationStatus;)await bx(100),t=await Dx(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Ox(e);return n||t}return t}function Dx(e){return Mx(e,e=>{if(!e)throw cx.create("installation-not-found");return Px(e)})}function Px(e){return 1===(t=e).registrationStatus&&t.registrationTime+ix<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Lx(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(dx(e),"/").concat(n,"/authTokens:generate")}(n,t),i=mx(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:ax,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await gx(()=>fetch(s,l));if(c.ok){return hx(await c.json())}throw await fx("Generate Auth Token",c)}async function Fx(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Mx(e.appConfig,r=>{if(!Ux(r))throw cx.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+lx}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Bx(e.appConfig);for(;1===n.authToken.requestStatus;)await bx(100),n=await Bx(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Fx(e,t):r}(e,n),r;{if(!navigator.onLine)throw cx.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Lx(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ix(e.appConfig,r),n}catch(fN){if(!ux(fN)||401!==fN.customData.serverCode&&404!==fN.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ix(e.appConfig,n)}else await Ax(e.appConfig);throw fN}}(e,n),n}});return t?await t:r.authToken}function Bx(e){return Mx(e,e=>{if(!Ux(e))throw cx.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ix<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Ux(e){return void 0!==e&&2===e.registrationStatus}async function zx(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Ox(e);t&&await t}(n);return(await Fx(n,t)).token}function Vx(e){return cx.create("missing-app-config-values",{valueName:e})}const Hx="installations",Wx=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Vx("App Configuration");if(!e.name)throw Vx("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Vx(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Vr(t,"heartbeat"),_delete:()=>Promise.resolve()}},qx=e=>{const t=Vr(e.getProvider("app").getImmediate(),Hx).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Ox(t);return r?r.catch(console.error):Fx(t).catch(console.error),n.fid}(t),getToken:e=>zx(t,e)}};zr(new An(Hx,Wx,"PUBLIC")),zr(new An("installations-internal",qx,"PRIVATE")),Xr(rx,sx),Xr(rx,sx,"esm2017");const Kx="analytics",Gx="https://www.googletagmanager.com/gtag/js",$x=new zn("@firebase/analytics"),Xx=new wn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Yx(e){if(!e.startsWith(Gx)){const t=Xx.create("invalid-gtag-resource",{gtagURL:e});return $x.warn(t.message),""}return e}function Qx(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Jx(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Yx}),r=document.createElement("script"),s="".concat(Gx,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Zx(e,t,n,r){return async function(s){try{for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("event"===s){const[r,s]=a;await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await Qx(n);for(const n of e){const e=r.find(e=>e.measurementId===n),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(fN){$x.error(fN)}}(e,t,n,r,s)}else if("config"===s){const[s,i]=a;await async function(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const e=(await Qx(n)).find(e=>e.measurementId===s);e&&await t[e.appId]}}catch(fN){$x.error(fN)}e("config",s,i)}(e,t,n,r,s,i)}else if("consent"===s){const[t,n]=a;e("consent",t,n)}else if("get"===s){const[t,n,r]=a;e("get",t,n,r)}else if("set"===s){const[t]=a;e("set",t)}else e(s,...a)}catch(fN){$x.error(fN)}}}const ek=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function tk(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function nk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ek,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw Xx.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Xx.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new sk;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),rk({appId:r,apiKey:s,measurementId:i},a,o,t)}async function rk(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ek;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(Xx.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(fN){if(l)return $x.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===fN||void 0===fN?void 0:fN.message,"]")),{appId:o,measurementId:l};throw fN}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,s={method:"GET",headers:tk(r)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(i,s);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Xx.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return i.deleteThrottleMetadata(o),t}catch(fN){const r=fN;if(!function(e){if(!(e instanceof yn)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(i.deleteThrottleMetadata(o),l)return $x.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:o,measurementId:l};throw fN}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?Cn(s,i.intervalMillis,30):Cn(s,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:s+1};return i.setThrottleMetadata(o,u),$x.debug("Calling attemptFetch again in ".concat(c," millis")),rk(e,u,n,i)}}class sk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let ik,ak;function ok(e){ak=e}function lk(e){ik=e}async function ck(e,t,n,r,s,i,a){var o;const l=nk(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&$x.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>$x.error(e)),t.push(l);const c=async function(){if(!bn())return $x.warn(Xx.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await vn()}catch(fN){return $x.warn(Xx.create("indexeddb-unavailable",{errorInfo:null===fN||void 0===fN?void 0:fN.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Gx)&&n.src.includes(e))return n;return null})(i)||Jx(i,u.measurementId),ak&&(s("consent","default",ak),ok(void 0)),s("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),ik&&(s("set",ik),lk(void 0)),u.measurementId}class uk{constructor(e){this.app=e}_delete(){return delete dk[this.app.options.appId],Promise.resolve()}}let dk={},hk=[];const fk={};let pk,mk,gk="dataLayer",bk="gtag",vk=!1;function yk(){const e=[];if(pn()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=Xx.create("invalid-analytics-context",{errorInfo:t});$x.warn(n.message)}}function wk(e,t,n){yk();const r=e.options.appId;if(!r)throw Xx.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Xx.create("no-api-key");$x.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=dk[r])throw Xx.create("already-exists",{id:r});if(!vk){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(gk);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(i=window[s]),window[s]=Zx(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(dk,hk,fk,gk,bk);mk=e,pk=t,vk=!0}dk[r]=ck(e,hk,fk,t,pk,gk,n);return new uk(e)}function xk(e,t,n,r){e=In(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:s}))}}(mk,dk[e.app.options.appId],t,n,r).catch(e=>$x.error(e))}const kk="@firebase/analytics",_k="0.10.16";zr(new An(Kx,(e,t)=>{let{options:n}=t;return wk(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),zr(new An("analytics-internal",function(e){try{const t=e.getProvider(Kx).getImmediate();return{logEvent:(e,n,r)=>xk(t,e,n,r)}}catch(fN){throw Xx.create("interop-component-reg-failed",{reason:fN})}},"PRIVATE")),Xr(kk,_k),Xr(kk,_k,"esm2017");const Sk="firebasestorage.googleapis.com",jk="storageBucket";class Nk extends yn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ck(e),"Firebase Storage: ".concat(t," (").concat(Ck(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nk.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ck(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Tk,Ek;function Ck(e){return"storage/"+e}function Ik(){return new Nk(Tk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ak(){return new Nk(Tk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Mk(){return new Nk(Tk.CANCELED,"User canceled the upload/download.")}function Ok(){return new Nk(Tk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rk(e){return new Nk(Tk.INVALID_ARGUMENT,e)}function Dk(){return new Nk(Tk.APP_DELETED,"The Firebase app was deleted.")}function Pk(e,t){return new Nk(Tk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Lk(e){throw new Nk(Tk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Tk||(Tk={}));class Fk{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Fk.makeFromUrl(e,t)}catch(fN){return new Fk(e,"")}if(""===n.path)return n;throw r=e,new Nk(Tk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===Sk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Fk(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Nk(Tk.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Bk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Uk(e){return"string"===typeof e||e instanceof String}function zk(e){return Vk()&&e instanceof Blob}function Vk(){return"undefined"!==typeof Blob}function Hk(e,t,n,r){if(r<t)throw Rk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Rk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Wk(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function qk(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Kk(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ek||(Ek={}));class Gk{constructor(e,t,n,r,s,i,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new $k(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ek.NO_ERROR,s=n.getStatus();if(!t||Kk(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ek.ABORT;return void e(!1,new $k(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new $k(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(fN){r(fN)}else if(null!==s){const e=Ik();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Dk():Mk())}else{r(Ak())}};this.canceled_?t(0,new $k(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(o=2),clearTimeout(s),d(0)):e||(o=1)))}return d(0),i=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $k{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Xk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Yk(){const e=Xk();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Vk())return new Blob(n);throw new Nk(Tk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Qk(e){if("undefined"===typeof atob)throw t="base-64",new Nk(Tk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Jk="raw",Zk="base64",e_="base64url",t_="data_url";class n_{constructor(e,t){this.data=e,this.contentType=t||null}}function r_(e,t){switch(e){case Jk:return new n_(s_(t));case Zk:case e_:return new n_(i_(e,t));case t_:return new n_(function(e){const t=new a_(e);return t.base64?i_(Zk,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(fN){throw Pk(t_,"Malformed data URL.")}return s_(t)}(t.rest)}(t),new a_(t).contentType)}throw Ik()}function s_(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function i_(e,t){switch(e){case Zk:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Pk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case e_:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Pk(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Qk(t)}catch(fN){if(fN.message.includes("polyfill"))throw fN;throw Pk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class a_{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Pk(t_,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class o_{constructor(e,t){let n=0,r="";zk(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(zk(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new o_(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new o_(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Vk()){const e=t.map(e=>e instanceof o_?e.data_:e);return new o_(Yk.apply(null,e))}{const e=t.map(e=>Uk(e)?r_(Jk,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new o_(r,!0)}}uploadData(){return this.data_}}function l_(e){let t;try{t=JSON.parse(e)}catch(fN){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function c_(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function u_(e,t){return t}class d_{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||u_}}let h_=null;function f_(){if(h_)return h_;const e=[];e.push(new d_("bucket")),e.push(new d_("generation")),e.push(new d_("metageneration")),e.push(new d_("name","fullPath",!0));const t=new d_("name");t.xform=function(e,t){return function(e){return!Uk(e)||e.length<2?e:c_(e)}(t)},e.push(t);const n=new d_("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new d_("timeCreated")),e.push(new d_("updated")),e.push(new d_("md5Hash",null,!0)),e.push(new d_("cacheControl",null,!0)),e.push(new d_("contentDisposition",null,!0)),e.push(new d_("contentEncoding",null,!0)),e.push(new d_("contentLanguage",null,!0)),e.push(new d_("contentType",null,!0)),e.push(new d_("metadata","customMetadata",!0)),h_=e,h_}function p_(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new Fk(n,r);return t._makeStorageReference(s)}})}(r,e),r}function m_(e,t,n){const r=l_(t);if(null===r)return null;return p_(e,r,n)}function g_(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class b_{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function v_(e){if(!e)throw Ik()}function y_(e,t){return function(n,r){const s=m_(e,r,t);return v_(null!==s),s}}function w_(e,t){return function(n,r){const s=m_(e,r,t);return v_(null!==s),function(e,t,n,r){const s=l_(t);if(null===s)return null;if(!Uk(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return Wk("/b/"+a(s)+"/o/"+a(i),n,r)+qk({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function x_(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Nk(Tk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Nk(Tk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new Nk(Tk.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new Nk(Tk.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function k_(e){const t=x_(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new Nk(Tk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function __(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function S_(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=__(t,r,s),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+g_(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=o_.getBlob(c,r,u);if(null===d)throw Ok();const h={name:l.fullPath},f=Wk(i,e.host,e._protocol),p=e.maxUploadRetryTime,m=new b_(f,"POST",y_(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=x_(t),m}class j_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ek.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ek.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ek.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,s){if(this.sent_)throw Lk("cannot .send() more than once");if(an(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lk("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(fN){return-1}}getResponse(){if(!this.sent_)throw Lk("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lk("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class N_ extends j_{initXhr(){this.xhr_.responseType="text"}}function T_(){return new N_}class E_{constructor(e,t){this._service=e,this._location=t instanceof Fk?t:Fk.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new E_(e,t)}get root(){const e=new Fk(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c_(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Fk(this._location.bucket,e);return new E_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Nk(Tk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function C_(e,t,n){e._throwIfRoot("uploadBytes");const r=S_(e.storage,e._location,f_(),new o_(t,!0),n);return e.storage.makeRequestWithTokens(r,T_).then(t=>({metadata:t,ref:e}))}function I_(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Wk(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new b_(r,"GET",w_(e,n),s);return i.errorHandler=k_(t),i}(e.storage,e._location,f_());return e.storage.makeRequestWithTokens(t,T_).then(e=>{if(null===e)throw new Nk(Tk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function A_(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Wk(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new b_(n,"DELETE",function(e,t){},r);return s.successCodes=[200,204],s.errorHandler=k_(t),s}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,T_)}function M_(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Fk(e._location.bucket,n);return new E_(e.storage,r)}function O_(e,t){if(e instanceof P_){const n=e;if(null==n._bucket)throw new Nk(Tk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+jk+"' property when initializing the app?");const r=new E_(n,n._bucket);return null!=t?O_(r,t):r}return void 0!==t?M_(e,t):e}function R_(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof P_)return new E_(e,t);throw Rk("To use ref(service, url), the first argument must be a Storage instance.")}return O_(e,t)}function D_(e,t){const n=null===t||void 0===t?void 0:t[jk];return null==n?null:Fk.makeFromBucketSpec(n,e)}class P_{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=Sk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Fk.makeFromBucketSpec(r,this._host):D_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Fk.makeFromBucketSpec(this._url,e):this._bucket=D_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Hk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Hk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new E_(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Bk(Dk());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=qk(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Gk(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const L_="@firebase/storage",F_="0.13.13",B_="storage";function U_(e,t,n){return C_(e=In(e),t,n)}function z_(e){return I_(e=In(e))}function V_(e){return A_(e=In(e))}function H_(e,t){return R_(e=In(e),t)}function W_(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new P_(r,s,i,n,Kr)}zr(new An(B_,W_,"PUBLIC").setMultipleInstances(!0)),Xr(L_,F_,""),Xr(L_,F_,"esm2017");const q_="functions";class K_{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null===r||void 0===r||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(fN){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(fN){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const G_="us-central1";class $_{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:G_,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new K_(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(s);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=G_}catch(fN){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}const X_="@firebase/functions",Y_="0.12.8";!function(e){zr(new An(q_,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new $_(r,s,i,a,n)},"PUBLIC").setMultipleInstances(!0)),Xr(X_,Y_,e),Xr(X_,Y_,"esm2017")}();const Q_=Gr({apiKey:"AIzaSyA3zcD5eay3FbT1yqrNs7TnFUIKKm_0I0U",authDomain:"work-instruction-8ace7.firebaseapp.com",projectId:"work-instruction-8ace7",storageBucket:"work-instruction-8ace7.appspot.com",messagingSenderId:"163344858359",appId:"1:163344858359:web:184edf7dde09d91fb467f2",measurementId:"G-RRHHEX4XSC"}),J_=Po(Q_);let Z_;let eS;(async()=>{try{Z_=function(e,t,n){n||(n=rd);const r=Vr(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(kn(r.getOptions(n),t))return e;throw new fl(hl.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new fl(hl.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<Vm)throw new fl(hl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&an(t.host)&&on(t.host),r.initialize({options:t,instanceIdentifier:n})}(Q_,{localCache:(e={tabManager:new tx,fallbackToMemory:!0},new Zw(e)),ignoreUndefinedProperties:!0})}catch(t){console.warn("Firestore initialization error, falling back to default:",t),Z_=Wy(Q_)}var e})();try{eS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r(),t=arguments.length>1?arguments[1]:void 0;e=In(e);const n=Vr(e,B_).getImmediate({identifier:t}),r=tn("storage");return r&&function(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const s=an(t);s&&(on("https://".concat(e.host,"/b")),dn("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:ln(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}(n,...r),n}(Q_)}catch(pN){console.error("Storage initialization failed:",pN),eS=null}!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G_;const n=Vr(In(e),q_).getImmediate({identifier:t}),r=tn("functions");r&&function(e,t,n){!function(e,t,n){const r=an(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&(on(e.emulatorOrigin),dn("Functions",!0))}(In(e),t,n)}(n,...r)}(Q_);let tS;if("undefined"!==typeof window)try{tS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r();e=In(e);const t=Vr(e,Kx);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Vr(e,Kx);if(n.isInitialized()){const e=n.getImmediate();if(kn(t,n.getOptions()))return e;throw Xx.create("already-initialized")}return n.initialize({options:t})}(e)}(Q_)}catch(pN){console.warn("Analytics initialization failed:",pN)}const nS=Q_,rS=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),(0,qt.jsx)("polyline",{points:"22,6 12,13 2,6"})]}),sS=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,qt.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),iS=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,qt.jsx)("circle",{cx:"12",cy:"16",r:"1"}),(0,qt.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),aS=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),oS=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,qt.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),lS=()=>(0,qt.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,qt.jsx)("polyline",{points:"22,4 12,14.01 9,11.01"})]}),cS=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,qt.jsx)("polyline",{points:"12,5 5,12 12,19"})]});function uS(){const[t,n]=(0,e.useState)({email:"",username:"",password:"",confirmPassword:""}),[r,s]=(0,e.useState)(!1),[i,a]=(0,e.useState)(!1),[o,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),g=he(),b=Po(nS),v=(e,t)=>{n(n=>l(l({},n),{},{[e]:t})),o&&c("")},y=()=>(0,qt.jsxs)("div",{className:"success-container",children:[(0,qt.jsx)("div",{className:"success-animation",children:(0,qt.jsx)("div",{className:"success-icon",children:(0,qt.jsx)(lS,{})})}),(0,qt.jsxs)("div",{className:"success-content",children:[(0,qt.jsx)("h2",{children:"Pendaftaran Berhasil!"}),(0,qt.jsx)("p",{children:"Akun Anda sedang dalam proses persetujuan oleh admin. Anda akan menerima pemberitahuan via email setelah akun disetujui."}),(0,qt.jsxs)("div",{className:"success-details",children:[(0,qt.jsxs)("div",{className:"detail-item",children:[(0,qt.jsx)("strong",{children:"Email:"})," ",t.email]}),(0,qt.jsxs)("div",{className:"detail-item",children:[(0,qt.jsx)("strong",{children:"Username:"})," ",t.username]})]}),(0,qt.jsxs)("div",{className:"redirect-info",children:[(0,qt.jsxs)("div",{className:"loading-dots",children:[(0,qt.jsx)("span",{}),(0,qt.jsx)("span",{}),(0,qt.jsx)("span",{})]}),(0,qt.jsx)("p",{children:"Anda akan diarahkan ke halaman login..."})]}),(0,qt.jsx)("button",{onClick:()=>g("/login"),className:"goto-login-btn",children:"Ke Halaman Login"})]})]}),w=()=>{g("/")},x=u||p||h;return(0,qt.jsxs)("div",{className:"modern-register-container",children:[(0,qt.jsxs)("div",{className:"background-pattern",children:[(0,qt.jsx)("div",{className:"pattern-circle circle-1"}),(0,qt.jsx)("div",{className:"pattern-circle circle-2"}),(0,qt.jsx)("div",{className:"pattern-circle circle-3"})]}),(0,qt.jsx)("div",{className:"page-header",children:(0,qt.jsxs)("div",{className:"header-left",children:[(0,qt.jsx)("button",{onClick:()=>{g(-1)},className:"register-back-button","aria-label":"Kembali",disabled:x,children:(0,qt.jsx)(cS,{})}),(0,qt.jsx)("div",{className:"logo-section",onClick:w,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),w())},"aria-label":"Kembali ke halaman utama",children:(0,qt.jsx)("img",{src:Bt,alt:"Len Railway Systems",className:"company-logo"})})]})}),(0,qt.jsx)("div",{className:"register-card",children:(0,qt.jsx)("div",{className:"register-content",children:h?(0,qt.jsx)(y,{}):(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("div",{className:"register-intro",children:[(0,qt.jsx)("h1",{children:"Buat Akun Baru"}),(0,qt.jsx)("p",{children:"Bergabunglah dengan platform manajemen proyek terdepan untuk efisiensi maksimal"})]}),(0,qt.jsxs)("form",{className:"modern-register-form",onSubmit:async e=>{if(e.preventDefault(),!(u||p||h)&&(()=>{const{email:e,username:n,password:r,confirmPassword:s}=t;return e.trim()?e.includes("@")&&e.includes(".")?e.toLowerCase()==="admin@gmail.com".toLowerCase()?(c("Email ini tidak dapat digunakan untuk registrasi. Silakan gunakan email lain."),!1):n.trim()?n.length<3?(c("Username minimal 3 karakter"),!1):"admin"===n.toLowerCase()?(c('Username "admin" tidak dapat digunakan. Silakan pilih username lain.'),!1):r?r.length<6?(c("Password minimal 6 karakter"),!1):r===s||(c("Konfirmasi password tidak cocok"),!1):(c("Password harus diisi"),!1):(c("Username harus diisi"),!1):(c("Format email tidak valid"),!1):(c("Email harus diisi"),!1)})()){d(!0),m(!0),c("");try{const{email:e,username:n,password:r}=t,s=e.toLowerCase().trim(),i=n.trim(),a=await(async e=>{try{const t=Nw(Ly(Z_,"users"),Ew("email","==",e.toLowerCase().trim()));return!(await qw(t)).empty}catch(t){return console.error("Error checking email:",t),!1}})(s);if(a)throw new Error("Email sudah terdaftar dalam sistem. Silakan gunakan email lain atau login.");const o=await(async e=>{try{const t=Nw(Ly(Z_,"users"),Ew("username","==",e.toLowerCase().trim()));return!(await qw(t)).empty}catch(t){return console.error("Error checking username:",t),!1}})(i);if(o)throw new Error("Username sudah digunakan. Silakan pilih username lain.");const l=await async function(e,t,n){if(Hr(e.app))return Promise.reject(ms(e));const r=xi(e),s=Ai(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ta,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&da(e),t}),a=await na._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(b,s,r),c=l.user;await ha(c,{displayName:i});const u=Fy(Z_,"users",c.uid);(await Hw(u)).exists()?(console.log("User document already exists, updating status..."),await Gw(u,{username:i,displayName:i,status:"pending",updatedAt:nx()})):await Kw(u,{uid:c.uid,email:s,username:i,displayName:i,role:"employee",status:"pending",provider:"email",createdAt:nx(),updatedAt:nx()}),await b.signOut(),f(!0),setTimeout(()=>{g("/login",{state:{successMessage:"Akun Anda sedang menunggu persetujuan admin. Anda akan menerima email ketika akun telah disetujui.",registeredEmail:s}})},5e3)}catch(n){switch(console.error("Registration error:",n),n.code){case"auth/email-already-in-use":c("Email sudah terdaftar di sistem autentikasi. Silakan gunakan email lain atau login.");break;case"auth/weak-password":c("Password terlalu lemah. Gunakan minimal 6 karakter.");break;case"auth/invalid-email":c("Format email tidak valid.");break;case"auth/network-request-failed":c("Koneksi internet bermasalah. Coba lagi.");break;case"auth/too-many-requests":c("Terlalu banyak percobaan. Silakan tunggu beberapa saat sebelum mencoba lagi.");break;default:c(n.message||"Terjadi kesalahan. Silakan coba lagi.")}}finally{d(!1),setTimeout(()=>{m(!1)},2e3)}}},children:[(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,qt.jsxs)("div",{className:"input-container",children:[(0,qt.jsx)("div",{className:"input-icon",children:(0,qt.jsx)(rS,{})}),(0,qt.jsx)("input",{id:"email",type:"email",className:"form-input",value:t.email,onChange:e=>v("email",e.target.value),placeholder:"Masukkan email",disabled:x,required:!0})]})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"username",children:"Username"}),(0,qt.jsxs)("div",{className:"input-container",children:[(0,qt.jsx)("div",{className:"input-icon",children:(0,qt.jsx)(sS,{})}),(0,qt.jsx)("input",{id:"username",type:"text",className:"form-input",value:t.username,onChange:e=>v("username",e.target.value),placeholder:"Masukkan username",disabled:x,required:!0})]})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"password",children:"Password"}),(0,qt.jsxs)("div",{className:"input-container",children:[(0,qt.jsx)("div",{className:"input-icon",children:(0,qt.jsx)(iS,{})}),(0,qt.jsx)("input",{id:"password",type:r?"text":"password",className:"form-input",value:t.password,onChange:e=>v("password",e.target.value),placeholder:"Minimal 6 karakter",disabled:x,required:!0}),(0,qt.jsx)("button",{type:"button",className:"password-toggle-btn",onClick:()=>s(!r),disabled:x,"aria-label":r?"Sembunyikan password":"Tampilkan password",children:r?(0,qt.jsx)(oS,{}):(0,qt.jsx)(aS,{})})]})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"confirmPassword",children:"Konfirmasi Password"}),(0,qt.jsxs)("div",{className:"input-container",children:[(0,qt.jsx)("div",{className:"input-icon",children:(0,qt.jsx)(iS,{})}),(0,qt.jsx)("input",{id:"confirmPassword",type:i?"text":"password",className:"form-input",value:t.confirmPassword,onChange:e=>v("confirmPassword",e.target.value),placeholder:"Ulangi password",disabled:x,required:!0}),(0,qt.jsx)("button",{type:"button",className:"password-toggle-btn",onClick:()=>a(!i),disabled:x,"aria-label":i?"Sembunyikan konfirmasi password":"Tampilkan konfirmasi password",children:i?(0,qt.jsx)(oS,{}):(0,qt.jsx)(aS,{})})]})]}),o&&(0,qt.jsxs)("div",{className:"error-message",role:"alert",children:[(0,qt.jsx)("div",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,qt.jsx)("span",{children:o})]}),(0,qt.jsx)("button",{type:"submit",className:"submit-button ".concat(u?"loading":""," ").concat(p?"disabled":""),disabled:x,style:{pointerEvents:x?"none":"auto",opacity:x?.7:1},children:u?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("div",{className:"spinner"}),(0,qt.jsx)("span",{children:"Membuat akun..."})]}):"Buat Akun"}),(0,qt.jsx)("div",{className:"form-footer",children:(0,qt.jsxs)("p",{children:["Sudah punya akun? "," ",(0,qt.jsx)("button",{type:"button",onClick:()=>{g("/login")},className:"link-button",disabled:x,children:"Masuk di sini"})]})})]})]})})})]})}function dS(){const[t,n]=(0,e.useState)(""),[r,s]=(0,e.useState)(""),[i,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(!1),[m,g]=(0,e.useState)(!0),b=he(),v=Po(nS),y=new Ji;y.setCustomParameters({prompt:"select_account"});const w="admin@gmail.com";(0,e.useEffect)(()=>{const e=fa(v,async e=>{if(e)try{if(e.email!==w){const t=await Hw(Fy(Z_,"users",e.uid));if(t.exists()&&"approved"===t.data().status)return void b("/home")}}catch(t){console.error("Auth state check error:",t)}g(!1)});return()=>e()},[v,b]);const x=()=>(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,qt.jsx)("polyline",{points:"12,5 5,12 12,19"})]}),k=async e=>{try{const t=Fy(Z_,"users",e),n=await Hw(t);if(n.exists()){const e=n.data().loginHistory||[],r=[{timestamp:nx(),ip:"unknown",userAgent:navigator.userAgent},...e].slice(0,10);await Gw(t,{lastLogin:nx(),loginHistory:r})}}catch(t){console.error("Error updating login history:",t)}},_=o||c||m;return m?(0,qt.jsxs)("div",{className:"modern-login-container",children:[(0,qt.jsxs)("div",{className:"background-pattern",children:[(0,qt.jsx)("div",{className:"pattern-circle circle-1"}),(0,qt.jsx)("div",{className:"pattern-circle circle-2"}),(0,qt.jsx)("div",{className:"pattern-circle circle-3"})]}),(0,qt.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,qt.jsxs)("div",{className:"text-center",children:[(0,qt.jsx)("div",{className:"spinner mb-4"}),(0,qt.jsx)("p",{className:"text-gray-600",children:"Checking authentication..."})]})})]}):(0,qt.jsxs)("div",{className:"modern-login-container",children:[(0,qt.jsxs)("div",{className:"background-pattern",children:[(0,qt.jsx)("div",{className:"pattern-circle circle-1"}),(0,qt.jsx)("div",{className:"pattern-circle circle-2"}),(0,qt.jsx)("div",{className:"pattern-circle circle-3"})]}),(0,qt.jsxs)("div",{className:"page-header",children:[(0,qt.jsxs)("div",{className:"header-left",children:[(0,qt.jsx)("button",{onClick:()=>b(-1),className:"login-back-button","aria-label":"Kembali",disabled:_,children:(0,qt.jsx)(x,{})}),(0,qt.jsx)("div",{className:"logo-section",onClick:()=>b("/"),children:(0,qt.jsx)("img",{src:Bt,alt:"Len Railway Systems",className:"company-logo"})})]}),(0,qt.jsx)("div",{className:"header-right",children:(0,qt.jsxs)("div",{className:"auth-links",children:[(0,qt.jsx)("span",{className:"auth-text",children:"Belum punya akun?"}),(0,qt.jsx)("button",{onClick:()=>b("/register"),className:"header-register-btn",disabled:_,children:"Daftar"})]})})]}),(0,qt.jsx)("div",{className:"login-card",children:(0,qt.jsxs)("div",{className:"login-content",children:[(0,qt.jsxs)("div",{className:"login-intro",children:[(0,qt.jsx)("h1",{children:"Sign In"}),(0,qt.jsx)("p",{children:"Welcome back to Len Railway System"})]}),(0,qt.jsx)("button",{onClick:async()=>{if(!(o||c||m)){u(!0),a(""),p(!1);try{const t=await async function(e,t,n){if(Hr(e.app))return Promise.reject(fs(e,"operation-not-supported-in-this-environment"));const r=xi(e);gs(e,t,Xi);const s=qa(r,n);return new Ja(r,"signInViaPopup",t,s).executeNotNull()}(v,y),n=t.user;if(n.email===w)throw await v.signOut(),new Error("Akun admin tidak dapat menggunakan Google Sign-in. Silakan gunakan email dan password admin.");const r=Fy(Z_,"users",n.uid);let s;try{s=await Hw(r)}catch(e){throw console.error("Error fetching user document:",e),new Error("Terjadi kesalahan saat mengakses data pengguna. Silakan coba lagi.")}if(!s.exists())throw await Kw(r,{uid:n.uid,email:n.email,displayName:n.displayName,username:n.displayName||n.email.split("@")[0],role:"employee",status:"pending",provider:"google",photoURL:n.photoURL,createdAt:nx(),updatedAt:nx(),loginHistory:[]}),console.log("New Google user created with pending status"),await v.signOut(),new Error("Akun Google Anda telah dibuat dan sedang menunggu persetujuan admin.");{const e=s.data();if("pending"===e.status)throw await v.signOut(),new Error("Akun Google Anda sedang menunggu persetujuan admin.");if("rejected"===e.status)throw await v.signOut(),new Error("Akun Google Anda telah ditolak oleh admin.");if("approved"!==e.status)throw await v.signOut(),new Error("Status akun Google tidak valid.")}await k(n.uid),b("/home")}catch(t){console.error("Google sign-in error:",t);let e="Gagal login dengan Google. Silakan coba lagi.";switch(t.code){case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":return void u(!1);case"auth/popup-blocked":e="Popup diblokir browser. Silakan aktifkan popup untuk login dengan Google.";break;case"auth/network-request-failed":e="Gagal terhubung ke server. Periksa koneksi internet Anda.";break;case"auth/account-exists-with-different-credential":e="Akun dengan email ini sudah terdaftar dengan metode login lain. Silakan gunakan email dan password.";break;case"auth/operation-not-allowed":e="Login dengan Google tidak diaktifkan. Silakan hubungi administrator.";break;default:e=t.message||e}a(e)}finally{u(!1)}}},disabled:_,className:"google-signin-btn",type:"button",children:c?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("div",{className:"spinner"}),"Signing in..."]}):(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("svg",{viewBox:"0 0 24 24",className:"google-icon",children:[(0,qt.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,qt.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,qt.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,qt.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),(0,qt.jsx)("div",{className:"divider",children:(0,qt.jsx)("span",{className:"divider-text",children:"or"})}),(0,qt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(o||c||m)){l(!0),a(""),p(!1);try{if(!t||!r)throw new Error("Email dan password wajib diisi");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error("Format email tidak valid");const e=await function(e,t,n){return Hr(e.app)?Promise.reject(ms(e)):ca(In(e),$i.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&da(e),t})}(v,t,r),a=e.user;if(a.email===w&&t===w&&"admin123"===r){try{await(async e=>{try{var t,n;const s=Fy(Z_,"users",e.uid);let i;try{i=await Hw(s)}catch(r){console.log("Could not read admin document, will create new one")}const a={uid:e.uid,email:e.email,username:"admin",displayName:"System Administrator",role:"admin",status:"approved",isSystemAdmin:!0,provider:"email",updatedAt:nx(),loginHistory:null!==(t=i)&&void 0!==t&&t.exists()&&i.data().loginHistory||[]};null!==(n=i)&&void 0!==n&&n.exists()||(a.createdAt=nx()),await Kw(s,a,{merge:!0}),console.log("Admin user document created/updated successfully")}catch(s){console.error("Error creating/updating admin user document:",s),console.log("Admin will continue without document creation")}})(a)}catch(n){console.error("Admin document creation failed, but allowing login:",n)}try{await k(a.uid)}catch(n){console.error("Login history update failed, but allowing login:",n)}return void b("/admin")}const o=Fy(Z_,"users",a.uid);let l;try{l=await Hw(o)}catch(s){throw console.error("Error fetching user document:",s),new Error("Terjadi kesalahan saat mengakses data pengguna. Silakan coba lagi.")}if(!l.exists())try{throw await Kw(o,{uid:a.uid,email:a.email,displayName:a.displayName||a.email.split("@")[0],username:a.displayName||a.email.split("@")[0],role:"employee",status:"pending",provider:"email",createdAt:nx(),updatedAt:nx(),loginHistory:[]}),console.log("Created new user document for existing Firebase user"),await v.signOut(),new Error("Akun Anda telah dibuat dan sedang menunggu persetujuan admin. Kami akan mengirim email ketika akun telah disetujui.")}catch(i){throw console.error("Error creating user document:",i),await v.signOut(),new Error("Terjadi kesalahan saat membuat profil pengguna. Silakan hubungi administrator.")}const c=l.data();if("pending"===c.status)throw await v.signOut(),new Error("Akun Anda sedang menunggu persetujuan admin. Kami akan mengirim email ketika akun telah disetujui.");if("rejected"===c.status)throw await v.signOut(),new Error("Akun Anda telah ditolak oleh admin. Silakan hubungi administrator untuk informasi lebih lanjut.");if("approved"!==c.status)throw await v.signOut(),new Error("Status akun tidak valid. Silakan hubungi administrator.");await k(a.uid),b("/home")}catch(n){console.error("Login error:",n);let e="Terjadi kesalahan saat login. Silakan coba lagi.";switch(n.code){case"auth/user-not-found":e=t===w?"Akun admin tidak ditemukan. Silakan hubungi administrator sistem.":"Email tidak terdaftar. Silakan periksa email Anda atau daftar terlebih dahulu.";break;case"auth/wrong-password":e="Password salah. Silakan periksa kembali password Anda.";break;case"auth/invalid-email":e="Format email tidak valid.";break;case"auth/user-disabled":e="Akun Anda telah dinonaktifkan. Silakan hubungi administrator.";break;case"auth/too-many-requests":e="Terlalu banyak percobaan login yang gagal. Silakan coba lagi nanti atau reset password Anda.";break;case"auth/network-request-failed":e="Gagal terhubung ke server. Periksa koneksi internet Anda.";break;case"auth/invalid-credential":e="Email atau password tidak valid.";break;default:e=n.message||e}a(e)}finally{l(!1)}}},className:"modern-login-form",children:[(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"email",children:"Email"}),(0,qt.jsx)("div",{className:"input-container",children:(0,qt.jsx)("input",{id:"email",type:"email",value:t,onChange:e=>n(e.target.value),className:"form-input",placeholder:"Enter your email",required:!0,disabled:_,autoComplete:"email"})})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"password",children:"Password"}),(0,qt.jsxs)("div",{className:"input-container",children:[(0,qt.jsx)("input",{id:"password",type:d?"text":"password",value:r,onChange:e=>s(e.target.value),className:"form-input",placeholder:"Enter your password",required:!0,disabled:_,autoComplete:"current-password"}),(0,qt.jsx)("button",{type:"button",onClick:()=>{o||c||h(!d)},className:"password-toggle-btn",disabled:_,"aria-label":d?"Hide password":"Show password",children:(0,qt.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:d?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,qt.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),(0,qt.jsx)("div",{className:"forgot-password-section",children:(0,qt.jsx)("button",{type:"button",onClick:async()=>{if(o||c)return;if(!t.trim())return void a("Silakan masukkan email Anda terlebih dahulu.");if(t===w)return void a("Reset password tidak tersedia untuk akun admin. Gunakan password default: admin123");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){l(!0),a("");try{const n=Nw(Ly(Z_,"users"),Ew("email","==",t.trim()),(Cy("limit",e=1),Mw._create("limit",e,"F"))),r=await qw(n);if(r.empty)throw new Error("Email tidak ditemukan dalam sistem. Pastikan Anda sudah mendaftar.");const s=r.docs[0].data();if("pending"===s.status)throw new Error("Akun Anda masih pending approval. Reset password hanya tersedia untuk akun yang sudah disetujui.");if("rejected"===s.status)throw new Error("Akun Anda telah ditolak. Silakan hubungi administrator.");if("approved"!==s.status)throw new Error("Status akun tidak valid. Silakan hubungi administrator.");const i={url:"".concat(window.location.origin,"/login?email=").concat(encodeURIComponent(t)),handleCodeInApp:!1};await async function(e,t,n){const r=xi(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&ua(r,s,n),await Ai(r,s,"getOobCode",Ui,"EMAIL_PASSWORD_PROVIDER")}(v,t.trim(),i),p(!0),setTimeout(()=>{p(!1)},15e3)}catch(n){console.error("Password reset error:",n);let e="Gagal mengirim email reset password. Silakan coba lagi.";switch(n.code){case"auth/user-not-found":e="Email tidak ditemukan dalam sistem autentikasi.";break;case"auth/invalid-email":e="Format email tidak valid.";break;case"auth/too-many-requests":e="Terlalu banyak permintaan reset password. Silakan coba lagi dalam beberapa menit.";break;case"auth/network-request-failed":e="Gagal terhubung ke server. Periksa koneksi internet Anda.";break;default:e=n.message||e}a(e)}finally{l(!1)}var e}else a("Format email tidak valid.")},className:"forgot-password-btn",disabled:_,children:"Lupa password?"})}),f&&(0,qt.jsx)("div",{className:"success-message",children:(0,qt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,qt.jsx)("span",{className:"success-icon",children:"\u2705"}),(0,qt.jsxs)("div",{className:"flex-1",children:[(0,qt.jsx)("p",{className:"font-medium",children:"Email reset password berhasil dikirim!"}),(0,qt.jsxs)("p",{className:"text-sm opacity-90",children:["Silakan cek inbox atau folder spam di ",(0,qt.jsx)("strong",{children:t})]}),(0,qt.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"Email mungkin memerlukan beberapa menit untuk sampai."})]})]})}),i&&(0,qt.jsx)("div",{className:"error-message",children:(0,qt.jsxs)("div",{className:"flex items-start gap-2",children:[(0,qt.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,qt.jsxs)("div",{className:"flex-1",children:[(0,qt.jsx)("p",{children:i}),i.includes("Terlalu banyak percobaan")&&(0,qt.jsx)("p",{className:"text-sm opacity-90 mt-1",children:'Anda dapat mencoba lagi dalam beberapa menit atau menggunakan fitur "Lupa password".'})]})]})}),(0,qt.jsx)("button",{type:"submit",className:"submit-button",disabled:_||!t.trim()||!r.trim(),children:o?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("div",{className:"spinner"}),"Signing in..."]}):"Sign In"})]})]})})]})}const hS=Et("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fS=Et("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),pS=Et("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),mS=Et("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),gS=Et("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),bS=Et("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),vS=Et("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),yS=Et("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),wS=Et("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),xS=()=>{var t,n,r,s;const i=he(),[a,o]=(0,e.useState)(!1),[c,u]=(0,e.useState)({nama:"User",email:"No email",avatar:"",uid:null}),[d,h]=(0,e.useState)([]),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)(!0),[b,v]=(0,e.useState)(null),[y,w]=(0,e.useState)(null),x={id:"1",title:"Work Instruction",isStatic:!0};(0,e.useEffect)(()=>{const e=fa(J_,async e=>{if(e)try{g(!0);const t=Fy(Z_,"users",e.uid),n=await Hw(t);if(n.exists()){const t=n.data();u({nama:t.nama||t.fullName||e.displayName||"User",email:e.email||"No email",avatar:t.avatar||e.photoURL||"",uid:e.uid})}else u({nama:e.displayName||"User",email:e.email||"No email",avatar:e.photoURL||"",uid:e.uid});await _(e.uid),await S(e.uid),await k(e)}catch(b){console.error("Error loading user data:",b),v("Gagal memuat data pengguna")}finally{g(!1)}else i("/login")});return()=>e()},[i]);const k=async e=>{try{var t;const n=Fy(Z_,"users",e.uid),r={uid:e.uid,email:e.email,displayName:e.displayName||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"Anonymous",photoURL:e.photoURL||null,lastLogin:new Date,updatedAt:new Date};await Kw(n,r,{merge:!0}),console.log("User data saved to Firestore")}catch(b){console.error("Error saving user to Firestore:",b)}},_=async e=>{try{const t=Ly(Z_,"rekapPengerjaan"),n=Yw(Nw(t,Ew("_name_","==",e)),e=>{const t=[];e.forEach(e=>{t.push(l({id:e.id},e.data()))});const n=[x,...t];h(n)},e=>{console.error("Error loading rekap:",e),v("Gagal memuat data rekap"),h([x])});return n}catch(b){console.error("Error setting up rekap listener:",b),v("Gagal memuat data rekap"),h([x])}},S=async e=>{try{console.log("\ud83d\udcca [HomePage] Setting up COMPLETE real-time listener for user:",e),y&&(console.log("\ud83e\uddf9 [HomePage] Cleaning up previous listener"),y());const t=Ly(Z_,"workSessions");let n;try{n=Nw(t,Ew("operatorId","==",e),Ew("type","==","work_session"))}catch(b){console.warn("\u26a0\ufe0f [HomePage] operatorId compound query failed, using simple query:",b),n=Nw(t,Ew("operatorId","==",e))}const r=Yw(n,e=>{console.log("\ud83d\udce1 [HomePage] REAL-TIME UPDATE received:",e.size,"documents");const t=[],n=new Set;e.forEach(e=>{var r,s,i,a,o,l,c,u,d,h;const f=e.data();if(n.has(e.id))return void console.log("\u26a0\ufe0f [HomePage] Duplicate session detected:",e.id);if("work_session"!==f.type)return;n.add(e.id);const p={id:e.id,workInstructionTitle:f.taskName||f.workInstructionTitle||"Unknown Task",workInstructionId:f.taskId||f.workInstructionId||"unknown",moNumber:f.moNumber||f.moDisplay||"No MO",operatorId:f.operatorId||f.createdBy,operatorName:f.operatorName||"Unknown Operator",userId:f.operatorId||f.createdBy,rawStatus:f.status||"unknown",isActive:!1!==f.isActive&&"in_progress"===f.status,createdAt:(null===(r=f.createdAt)||void 0===r?void 0:r.toDate())||(null===(s=f.startTime)||void 0===s?void 0:s.toDate())||new Date,completedAt:"completed"===f.status?(null===(i=f.completedAt)||void 0===i?void 0:i.toDate())||(null===(a=f.lastUpdated)||void 0===a?void 0:a.toDate()):null,startTime:null===(o=f.startTime)||void 0===o?void 0:o.toDate(),lastUpdated:(null===(l=f.lastUpdated)||void 0===l?void 0:l.toDate())||(null===(c=f.createdAt)||void 0===c?void 0:c.toDate())||new Date,currentStep:f.currentStep||0,stepStatuses:f.stepStatuses||[],totalTime:f.totalTime||0,stepCompletionTimes:f.stepCompletionTimes||[],stepTimes:f.stepTimes||[],totalSteps:f.totalSteps||(null===(u=f.stepStatuses)||void 0===u?void 0:u.length)||0,adminStatus:f.adminStatus||("completed"===f.status?"pending":"in_progress"===f.status?"in_progress":f.isActive?"active":"unknown"),adminComment:f.adminComment||"",adminId:f.adminId||null,adminName:f.adminName||null,reviewedAt:(null===(d=f.reviewedAt)||void 0===d?void 0:d.toDate())||(null===(h=f.statusUpdatedAt)||void 0===h?void 0:h.toDate())||null,statusUpdatedBy:f.statusUpdatedBy||null,participants:f.participants||[],stepOperators:f.stepOperators||{},troubleshootHistory:f.troubleshootHistory||[],stepTargetTimes:f.stepTargetTimes||[],totalTargetTime:f.totalTargetTime||f.targetTime||0,finalEfficiency:f.finalEfficiency||0,type:f.type||"work_session"};t.push(p),console.log("\ud83d\udccb [HomePage] Session ".concat(e.id,":"),{taskName:p.workInstructionTitle,moNumber:p.moNumber,rawStatus:p.rawStatus,adminStatus:p.adminStatus,isActive:p.isActive,currentStep:p.currentStep,totalSteps:p.totalSteps,operatorId:p.operatorId,lastUpdated:p.lastUpdated})}),t.sort((e,t)=>{const n=e.lastUpdated||e.createdAt||new Date(0);return(t.lastUpdated||t.createdAt||new Date(0))-n}),console.log("\u2705 [HomePage] REAL-TIME: ".concat(t.length," sessions loaded and sorted")),console.log("\ud83d\udcca [HomePage] Session breakdown:",{total:t.length,active:t.filter(e=>e.isActive).length,completed:t.filter(e=>"completed"===e.rawStatus).length,in_progress:t.filter(e=>"in_progress"===e.rawStatus).length}),p(t),v(null)},t=>{console.error("\u274c [HomePage] Real-time listener error:",t);let n="Gagal memuat work sessions secara real-time";"failed-precondition"===t.code?(n="Database index diperlukan. Mencoba query alternatif...",console.error("\u274c [HomePage] Required Firestore indexes:",{collection:"workSessions",indexes:["operatorId ASC, type ASC","createdBy ASC, type ASC","operatorId ASC, type ASC, lastUpdated DESC"]}),setTimeout(()=>{console.log("\ud83d\udd04 [HomePage] Attempting fallback query..."),j(e)},1e3)):"permission-denied"===t.code?n="Tidak memiliki izin untuk mengakses work sessions.":"unavailable"===t.code?(n="Layanan database tidak tersedia. Mencoba koneksi ulang...",setTimeout(()=>{console.log("\ud83d\udd04 [HomePage] Retrying work sessions connection..."),S(e)},5e3)):n="".concat(n,": ").concat(t.message),console.warn("\u26a0\ufe0f [HomePage] Work sessions error:",n),p([])});return w(()=>r),r}catch(b){console.error("\u274c [HomePage] Error setting up work sessions listener:",b),p([])}},j=async e=>{try{console.log("\ud83d\udd04 [HomePage] Setting up fallback work sessions query...");const t=Ly(Z_,"workSessions"),n=Yw(Nw(t,Ew("operatorId","==",e)),e=>{console.log("\ud83d\udce1 [HomePage] FALLBACK: Work sessions update received:",e.size);const t=[];e.forEach(e=>{const n=e.data();var r,s,i,a,o,l,c;"work_session"===n.type&&t.push({id:e.id,workInstructionTitle:n.taskName||n.workInstructionTitle||"Unknown Task",workInstructionId:n.taskId||n.workInstructionId||"unknown",moNumber:n.moNumber||n.moDisplay||"No MO",operatorId:n.operatorId||n.createdBy,operatorName:n.operatorName||"Unknown Operator",userId:n.operatorId||n.createdBy,rawStatus:n.status||"unknown",isActive:!1!==n.isActive&&"in_progress"===n.status,createdAt:(null===(r=n.createdAt)||void 0===r?void 0:r.toDate())||(null===(s=n.startTime)||void 0===s?void 0:s.toDate())||new Date,completedAt:"completed"===n.status?(null===(i=n.completedAt)||void 0===i?void 0:i.toDate())||(null===(a=n.lastUpdated)||void 0===a?void 0:a.toDate()):null,lastUpdated:(null===(o=n.lastUpdated)||void 0===o?void 0:o.toDate())||(null===(l=n.createdAt)||void 0===l?void 0:l.toDate())||new Date,currentStep:n.currentStep||0,stepStatuses:n.stepStatuses||[],totalTime:n.totalTime||0,stepCompletionTimes:n.stepCompletionTimes||[],totalSteps:n.totalSteps||(null===(c=n.stepStatuses)||void 0===c?void 0:c.length)||0,adminStatus:n.adminStatus||("completed"===n.status?"pending":"in_progress"===n.status?"in_progress":"unknown"),type:n.type})}),t.sort((e,t)=>(t.lastUpdated||t.createdAt)-(e.lastUpdated||e.createdAt)),console.log("\u2705 [HomePage] FALLBACK: ".concat(t.length," work sessions loaded")),p(t)},e=>{console.error("\u274c [HomePage] Fallback work sessions query also failed:",e),p([])});w(()=>n)}catch(b){console.error("\u274c [HomePage] Fallback work sessions setup failed:",b),p([])}},N=()=>{console.log("Navigating to Progress page"),i("/progress")},T=e=>{if(!e)return"Invalid Date";let t;return t=null!==e&&void 0!==e&&e.toDate&&"function"===typeof e.toDate?e.toDate():e instanceof Date?e:"string"===typeof e?new Date(e):new Date,isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})},E=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"high":return"priority-high";case"medium":default:return"priority-medium";case"low":return"priority-low"}},C=e=>{if(!e||0===e)return"0 detik";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60,s=[];return t>0&&s.push("".concat(t," jam")),n>0&&s.push("".concat(n," menit")),r>0&&0===t&&s.push("".concat(r," detik")),s.join(" ")||"0 detik"};if((0,e.useEffect)(()=>()=>{y&&(console.log("\ud83e\uddf9 [HomePage] Component unmount: cleaning up real-time listener"),y())},[y]),m)return(0,qt.jsx)("div",{className:"modern-loading-container",children:(0,qt.jsxs)("div",{className:"modern-loading-content",children:[(0,qt.jsx)("div",{className:"modern-loading-spinner"}),(0,qt.jsx)("p",{className:"modern-loading-text",children:"Memuat dashboard..."}),(0,qt.jsx)("p",{className:"modern-loading-subtitle",children:"\ud83d\udd04 Menghubungkan real-time data..."})]})});if(b)return(0,qt.jsx)("div",{className:"modern-error-container",children:(0,qt.jsxs)("div",{className:"modern-error-content",children:[(0,qt.jsx)("div",{className:"modern-error-icon",children:"\u26a0\ufe0f"}),(0,qt.jsx)("h3",{children:"Oops! Terjadi Kesalahan"}),(0,qt.jsx)("p",{className:"modern-error-text",children:b}),(0,qt.jsx)("button",{onClick:()=>window.location.reload(),className:"modern-retry-btn",children:"Coba Lagi"})]})});const I=(()=>{console.log("\ud83d\udcca [HomePage] Calculating stats for",f.length,"sessions");const e=f.filter(e=>!0===e.isActive||"in_progress"===e.rawStatus).length,t=f.filter(e=>"completed"===e.rawStatus||null!=e.completedAt).length,n=f.filter(e=>!e.isActive&&"completed"!==e.rawStatus&&!e.completedAt).length,r={total:f.length,completed:t,active:e,paused:n};return console.log("\ud83d\udcca [HomePage] Stats calculated:",r),r})(),A=(console.log("\ud83d\udccb [HomePage] Getting recent work sessions from",f.length,"total sessions"),f.slice(0,5).map(e=>{let t="Tidak Dikenal";t="in_progress"===e.rawStatus?"Sedang Dikerjakan":"completed"===e.rawStatus?"Selesai":e.isActive?"Aktif":"Terhenti";const n=e.stepStatuses||[],r=n.length,s=n.filter(e=>"completed"===e).length,i=r>0?Math.round(s/r*100):0,a=((e,t)=>{if(t)switch(t.toLowerCase()){case"approved":return{text:"Disetujui",class:"status-approved"};case"rejected":return{text:"Ditolak",class:"status-rejected"};case"pending":return{text:"Menunggu Review",class:"status-pending"};case"in_progress":return{text:"Sedang Dikerjakan",class:"status-active"};default:return{text:"Belum Direview",class:"status-pending"}}switch(e){case"completed":return{text:"Menunggu Review",class:"status-pending"};case"in_progress":return{text:"Sedang Dikerjakan",class:"status-active"};default:return{text:"Status Tidak Dikenal",class:"status-unknown"}}})(e.rawStatus,e.adminStatus),o={id:e.id,title:e.workInstructionTitle||"Untitled Task",status:t,date:e.createdAt,completionRate:i,totalTime:e.totalTime||0,approvalStatus:a,rawStatus:e.rawStatus,adminStatus:e.adminStatus,moNumber:e.moNumber,operatorId:e.operatorId};return console.log("\ud83d\udccb [HomePage] Recent session ".concat(e.id,":"),{title:o.title,displayStatus:o.status,approvalStatus:o.approvalStatus.text,completionRate:o.completionRate,rawStatus:o.rawStatus,adminStatus:o.adminStatus}),o}));return console.log("\ud83c\udfa8 [HomePage] Rendering with stats:",I),console.log("\ud83c\udfa8 [HomePage] Rendering with recent sessions:",A.length),(0,qt.jsxs)("div",{className:"modern-home-container",children:[(0,qt.jsx)("header",{className:"modern-header",children:(0,qt.jsxs)("div",{className:"modern-header-content",children:[(0,qt.jsxs)("div",{className:"modern-logo-section",children:[(0,qt.jsx)("img",{src:Bt,alt:"Len Railway Systems",className:"modern-logo",onClick:()=>i("/")}),(0,qt.jsx)("div",{className:"modern-brand-text",children:"Task Management"})]}),(0,qt.jsxs)("div",{className:"modern-profile-section",children:[(0,qt.jsxs)("button",{className:"modern-profile-btn",onClick:()=>o(!a),children:[(0,qt.jsx)("div",{className:"modern-avatar",children:c.avatar?(0,qt.jsx)("img",{src:c.avatar,alt:"Avatar"}):c.nama.charAt(0).toUpperCase()}),(0,qt.jsxs)("div",{className:"modern-profile-info",children:[(0,qt.jsx)("div",{className:"modern-profile-name",children:c.nama}),(0,qt.jsxs)("div",{className:"modern-profile-id",children:["ID: ",(null===(t=c.uid)||void 0===t?void 0:t.substring(0,8))||"N/A"]})]})]}),a&&(0,qt.jsxs)("div",{className:"modern-dropdown",children:[(0,qt.jsxs)("div",{className:"modern-dropdown-header",children:[(0,qt.jsx)("div",{className:"modern-avatar",children:c.avatar?(0,qt.jsx)("img",{src:c.avatar,alt:"Avatar"}):c.nama.charAt(0).toUpperCase()}),(0,qt.jsxs)("div",{className:"modern-dropdown-info",children:[(0,qt.jsx)("h4",{children:c.nama}),(0,qt.jsx)("p",{children:c.email}),(0,qt.jsxs)("p",{children:["ID: ",(null===(n=c.uid)||void 0===n?void 0:n.substring(0,8))||"N/A"]})]})]}),(0,qt.jsxs)("button",{className:"modern-dropdown-item",onClick:()=>{console.log("Navigate to profile page"),i("/profil"),o(!1)},children:[(0,qt.jsx)(hS,{size:18}),(0,qt.jsx)("span",{children:"Profile"})]}),(0,qt.jsxs)("button",{className:"modern-dropdown-item logout",onClick:async()=>{if(window.confirm("Apakah Anda yakin ingin logout?"))try{y&&(y(),w(null)),await pa(J_),localStorage.removeItem("currentUser"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userToken"),localStorage.removeItem("previousStats"),alert("Logout berhasil!"),i("/login")}catch(b){console.error("Error during logout:",b),alert("Terjadi kesalahan saat logout: "+b.message)}},children:[(0,qt.jsx)(fS,{size:18}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})]})}),(0,qt.jsxs)("main",{className:"modern-main-content",children:[(0,qt.jsxs)("section",{className:"modern-welcome-section",children:[(0,qt.jsxs)("h1",{className:"modern-welcome-title",children:["Selamat Datang, ",c.nama,"!"]}),(0,qt.jsx)("p",{className:"modern-welcome-subtitle",children:"Kelola tugas dan monitor progress pekerjaan Anda dengan mudah dan efisien"}),(0,qt.jsxs)("div",{className:"modern-time-info",children:[(0,qt.jsx)(Ot,{size:18}),(0,qt.jsx)("span",{children:(new Date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),f.length>0&&(0,qt.jsx)("div",{className:"modern-realtime-status",children:y?(0,qt.jsx)("span",{className:"modern-realtime-active",children:"\ud83d\udfe2 Real-time aktif \u2022 Data terupdate otomatis"}):(0,qt.jsx)("span",{className:"modern-realtime-inactive",children:"\ud83d\udfe1 Mode statis \u2022 Refresh manual"})})]}),(0,qt.jsxs)("section",{className:"modern-tasks-section",children:[(0,qt.jsxs)("h2",{className:"modern-section-title",children:[(0,qt.jsx)("div",{className:"modern-section-icon",children:(0,qt.jsx)(pS,{size:20})}),"Your Tasks"]}),0===d.length?(0,qt.jsxs)("div",{className:"modern-no-data",children:[(0,qt.jsx)("div",{className:"modern-no-data-icon",children:"\ud83d\udcdd"}),(0,qt.jsx)("h3",{children:"Tidak ada tugas saat ini"}),(0,qt.jsx)("p",{children:"Semua tugas Anda telah selesai atau belum ada tugas yang diberikan."})]}):(0,qt.jsx)("div",{className:"modern-tasks-grid",children:d.map(e=>(0,qt.jsxs)("div",{className:"modern-task-card",children:[(0,qt.jsx)("div",{className:"modern-task-header",children:e.priority&&(0,qt.jsx)("span",{className:"modern-priority-badge ".concat(E(e.priority)),children:e.priority})}),(0,qt.jsx)("h3",{className:"modern-task-title",children:e.title||"Untitled Task"}),e.description&&(0,qt.jsx)("p",{className:"modern-task-description",children:e.description}),void 0!==e.progress&&(0,qt.jsxs)("div",{className:"modern-progress-section",children:[(0,qt.jsxs)("div",{className:"modern-progress-header",children:[(0,qt.jsx)("span",{className:"modern-progress-label",children:"Progress"}),(0,qt.jsxs)("span",{className:"modern-progress-value",children:[e.progress||0,"%"]})]}),(0,qt.jsx)("div",{className:"modern-progress-bar",children:(0,qt.jsx)("div",{className:"modern-progress-fill",style:{width:"".concat(e.progress||0,"%")}})})]}),(e.tags||e.status)&&(0,qt.jsxs)("div",{className:"modern-task-tags",children:[e.tags&&e.tags.map((e,t)=>(0,qt.jsx)("span",{className:"modern-tag",children:e},t)),e.status&&(0,qt.jsx)("span",{className:"modern-tag",children:e.status})]}),(0,qt.jsxs)("div",{className:"modern-task-footer",children:[e.dueDate&&(0,qt.jsxs)("div",{className:"modern-task-date",children:[(0,qt.jsx)(mS,{size:16}),(0,qt.jsx)("span",{children:T(e.dueDate)})]}),(0,qt.jsxs)("button",{className:"modern-start-btn",onClick:()=>(e=>{const t=d.find(t=>t.id===e);if(t){if(t.isStatic)return console.log("Starting static task:",t.title),void i("/task");console.log("Starting task:",t.title),i("/task/".concat(e))}else console.error("Task not found:",e)})(e.id),disabled:"Completed"===e.status,children:[(0,qt.jsx)(Dt,{size:16}),(0,qt.jsx)("span",{children:"Completed"===e.status?"Selesai":"In Progress"===e.status?"Lanjutkan":"Mulai"})]})]})]},e.id))})]}),(0,qt.jsxs)("div",{className:"modern-dashboard-grid",children:[(0,qt.jsxs)("section",{className:"modern-quick-actions",children:[(0,qt.jsxs)("h2",{className:"modern-section-title",children:[(0,qt.jsx)("div",{className:"modern-section-icon",children:(0,qt.jsx)(gS,{size:20})}),"Quick Actions"]}),(0,qt.jsxs)("button",{className:"modern-action-btn",onClick:N,children:[(0,qt.jsxs)("div",{className:"modern-action-content",children:[(0,qt.jsx)("div",{className:"modern-action-icon",children:(0,qt.jsx)(bS,{size:24})}),(0,qt.jsxs)("div",{className:"modern-action-text",children:[(0,qt.jsx)("h3",{children:"View Work Progress"}),(0,qt.jsx)("p",{children:"Lihat dan kelola log progress pekerjaan Anda secara real-time"})]})]}),(0,qt.jsx)(vS,{size:24})]})]}),(0,qt.jsxs)("section",{className:"modern-stats-overview",children:[(0,qt.jsxs)("h2",{className:"modern-section-title",children:[(0,qt.jsx)("div",{className:"modern-section-icon",children:(0,qt.jsx)(yS,{size:20})}),"Overview",0===f.length&&!b&&(0,qt.jsx)("small",{style:{color:"#666",fontWeight:"normal"},children:"\ud83d\udd04 Memuat..."})]}),(0,qt.jsxs)("div",{className:"modern-stats-grid",children:[(0,qt.jsxs)("div",{className:"modern-stat-card",children:[(0,qt.jsx)("span",{className:"modern-stat-number",children:I.total}),(0,qt.jsx)("span",{className:"modern-stat-label",children:"Total Sessions"})]}),(0,qt.jsxs)("div",{className:"modern-stat-card",children:[(0,qt.jsx)("span",{className:"modern-stat-number",children:I.completed}),(0,qt.jsx)("span",{className:"modern-stat-label",children:"Completed"})]}),(0,qt.jsxs)("div",{className:"modern-stat-card",children:[(0,qt.jsx)("span",{className:"modern-stat-number",children:I.active}),(0,qt.jsx)("span",{className:"modern-stat-label",children:"Active"})]})]}),(0,qt.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"rgba(102, 126, 234, 0.05)",borderRadius:"15px",textAlign:"center"},children:[(0,qt.jsx)("p",{style:{color:"#667eea",fontWeight:"600",fontSize:"0.9rem",margin:0},children:f.length>0?"Terakhir diperbarui: ".concat(T((null===(r=f[0])||void 0===r?void 0:r.lastUpdated)||(null===(s=f[0])||void 0===s?void 0:s.createdAt))):"Belum ada aktivitas work session"}),y&&(0,qt.jsx)("small",{style:{color:"#28a745",display:"block",marginTop:"0.5rem"},children:"\ud83d\udfe2 Data real-time aktif"})]})]})]}),(0,qt.jsxs)("section",{className:"modern-recent-activity",children:[(0,qt.jsxs)("h2",{className:"modern-section-title",children:[(0,qt.jsx)("div",{className:"modern-section-icon",children:(0,qt.jsx)(wS,{size:20})}),"Recent Work Sessions",A.length>0&&(0,qt.jsxs)("span",{className:"modern-section-count",children:["(",A.length,")"]})]}),A.length>0?(0,qt.jsx)("div",{className:"modern-activity-list",children:A.map(e=>(0,qt.jsxs)("div",{className:"modern-activity-item",children:[(0,qt.jsxs)("div",{className:"modern-activity-content",children:[(0,qt.jsx)("div",{className:"modern-activity-icon",children:"in_progress"===e.rawStatus&&(0,qt.jsx)("div",{className:"modern-activity-pulse",children:"\ud83d\udd34"})}),(0,qt.jsxs)("div",{className:"modern-activity-text",children:[(0,qt.jsx)("div",{className:"modern-activity-title",children:e.title}),(0,qt.jsxs)("div",{className:"modern-activity-subtitle",children:["Progress: ",e.completionRate,"% \u2022 Duration: ",C(e.totalTime),e.moNumber&&(0,qt.jsxs)(qt.Fragment,{children:[" \u2022 MO: ",e.moNumber]})]}),(0,qt.jsxs)("div",{className:"modern-activity-approval",children:["Status Approval: ",(0,qt.jsx)("span",{className:"modern-approval-badge ".concat(e.approvalStatus.class),children:e.approvalStatus.text}),!1]})]})]}),(0,qt.jsxs)("div",{className:"modern-activity-meta",children:[(0,qt.jsx)("div",{className:"modern-activity-time",children:T(e.date)}),(0,qt.jsxs)("span",{className:"modern-activity-status status-".concat(e.status.toLowerCase().replace(" ","-")),children:[e.status,"in_progress"===e.rawStatus&&(0,qt.jsx)("small",{className:"modern-live-indicator",children:" LIVE"})]})]})]},e.id))}):(0,qt.jsxs)("div",{className:"modern-no-data",children:[(0,qt.jsx)("div",{className:"modern-no-data-icon",children:"\ud83d\udcca"}),(0,qt.jsx)("h3",{children:0!==f.length||b?"Belum ada work sessions":"Memuat work sessions..."}),(0,qt.jsx)("p",{children:0!==f.length||b?"Mulai bekerja pada tugas untuk melihat aktivitas di sini.":"\ud83d\udd04 Menghubungkan ke database real-time..."}),0===f.length&&!m&&(0,qt.jsxs)("div",{className:"modern-no-data-actions",children:[(0,qt.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual refresh work sessions"),c.uid&&S(c.uid)},className:"modern-refresh-btn",children:"\ud83d\udd04 Refresh Work Sessions"}),(0,qt.jsx)("button",{onClick:()=>i("/task"),className:"modern-start-btn",children:"\ud83d\ude80 Mulai Task Baru"})]})]}),A.length>0&&(0,qt.jsx)("div",{className:"modern-section-footer",children:(0,qt.jsxs)("button",{onClick:N,className:"modern-view-all-btn",children:["Lihat Semua Sessions (",f.length,") \u2192"]})})]})]})]})},kS=Et("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_S=()=>{const t=he(),[n,r]=(0,e.useState)({displayName:"",email:"",uid:"",photoURL:""}),[s,i]=(0,e.useState)(!0),[a,o]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=fa(J_,e=>{e?m():t("/login")});return()=>e()},[t]);const m=async()=>{try{const e=J_.currentUser;if(e){const t=Fy(Z_,"users",e.uid),n=await Hw(t);if(n.exists()){const t=n.data();r({displayName:t.displayName||"Nama tidak tersedia",email:t.email||e.email,uid:t.uid||e.uid,photoURL:t.photoURL||e.photoURL||""}),h(t.displayName||"")}else r({displayName:e.displayName||"Nama tidak tersedia",email:e.email,uid:e.uid,photoURL:e.photoURL||""}),h(e.displayName||"")}}catch(pN){console.error("Error fetching user data:",pN)}finally{i(!1)}},g=()=>{t("/home")},b=e=>e?e.substring(0,8).toUpperCase():"ID tidak tersedia";return s?(0,qt.jsx)("div",{className:"loading-container",children:(0,qt.jsxs)("div",{className:"loading-content",children:[(0,qt.jsx)("div",{className:"loading-spinner"}),(0,qt.jsx)("p",{className:"loading-text",children:"Memuat data profil..."})]})}):(0,qt.jsxs)("div",{className:"profile-page-container",children:[(0,qt.jsx)("div",{className:"profile-header-bar",children:(0,qt.jsxs)("div",{className:"profile-header-content",children:[(0,qt.jsxs)("div",{className:"profile-header-left",children:[(0,qt.jsx)("button",{className:"profile-back-btn",onClick:g,title:"Kembali ke Home",children:(0,qt.jsx)(kS,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"Len Railway Systems",className:"profile-logo",onClick:g})]}),(0,qt.jsx)("div",{className:"profile-header-center",children:(0,qt.jsx)("h1",{className:"profile-title-header",children:"Profile"})}),(0,qt.jsx)("div",{className:"profile-header-right",children:(0,qt.jsxs)("div",{className:"profile-header-profile-container",children:[(0,qt.jsxs)("button",{className:"profile-header-profile-btn",onClick:()=>p(!f),children:[(0,qt.jsx)("div",{className:"profile-header-profile-avatar",children:n.photoURL?(0,qt.jsx)("img",{src:n.photoURL,alt:"Avatar",className:"profile-header-avatar-image"}):(0,qt.jsx)("span",{className:"profile-header-avatar-text",children:n.displayName.charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"profile-header-profile-info",children:[(0,qt.jsx)("div",{className:"profile-header-profile-name",children:n.displayName}),(0,qt.jsxs)("div",{className:"profile-header-profile-id",children:["ID: ",b(n.uid)]})]})]}),f&&(0,qt.jsxs)("div",{className:"profile-header-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"profile-header-dropdown-header",children:[(0,qt.jsx)("div",{className:"profile-header-profile-avatar",children:n.photoURL?(0,qt.jsx)("img",{src:n.photoURL,alt:"Avatar",className:"profile-header-avatar-image"}):(0,qt.jsx)("span",{className:"profile-header-avatar-text",children:n.displayName.charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"profile-header-dropdown-info",children:[(0,qt.jsx)("div",{className:"profile-header-dropdown-name",children:n.displayName}),(0,qt.jsx)("div",{className:"profile-header-dropdown-email",children:n.email}),(0,qt.jsxs)("div",{className:"profile-header-dropdown-id",children:["ID: ",b(n.uid)]})]})]}),(0,qt.jsxs)("button",{className:"profile-header-dropdown-item",onClick:()=>p(!1),children:[(0,qt.jsx)(hS,{className:"profile-header-dropdown-icon"}),(0,qt.jsx)("span",{children:"Profile"})]}),(0,qt.jsx)("hr",{className:"profile-header-dropdown-divider"}),(0,qt.jsxs)("button",{className:"profile-header-dropdown-item logout",onClick:async()=>{if(window.confirm("Apakah Anda yakin ingin logout?"))try{await pa(J_),localStorage.removeItem("currentUser"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userToken"),localStorage.removeItem("previousStats"),alert("Logout berhasil!"),t("/login")}catch(pN){console.error("Error during logout:",pN),alert("Terjadi kesalahan saat logout: "+pN.message)}},children:[(0,qt.jsx)(fS,{className:"profile-header-dropdown-icon"}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]})}),(0,qt.jsx)("div",{className:"profile-main-content",children:(0,qt.jsx)("div",{className:"profile-container",children:(0,qt.jsxs)("div",{className:"profile-card",children:[(0,qt.jsx)("div",{className:"profile-header",children:(0,qt.jsx)("h2",{children:"Informasi Akun"})}),(0,qt.jsxs)("div",{className:"profile-content",children:[(0,qt.jsx)("div",{className:"profile-image-section",children:(0,qt.jsx)("div",{className:"profile-image-container",children:(0,qt.jsx)("img",{src:n.photoURL||"/default-avatar.png",alt:"Profile",className:"profile-image",onError:e=>{e.target.src="/default-avatar.png"}})})}),(0,qt.jsxs)("div",{className:"profile-info",children:[(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("label",{children:"Nama:"}),c?(0,qt.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),className:"edit-input",placeholder:"Masukkan nama"}):(0,qt.jsx)("span",{className:"info-value",children:n.displayName})]}),(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("label",{children:"Email:"}),(0,qt.jsx)("span",{className:"info-value",children:n.email})]}),(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("label",{children:"ID:"}),(0,qt.jsx)("span",{className:"info-value user-id",children:b(n.uid)})]})]}),(0,qt.jsx)("div",{className:"profile-actions",children:c?(0,qt.jsxs)("div",{className:"edit-actions",children:[(0,qt.jsx)("button",{onClick:async()=>{o(!0);try{const e=J_.currentUser;if(!e)throw new Error("User not authenticated. Silakan login ulang.");const t={displayName:d};console.log("\ud83d\udd04 Updating Firebase Auth profile..."),await ha(e,t),console.log("\u2705 Auth profile updated"),console.log("\ud83d\udd04 Updating Firestore document...");const n=Fy(Z_,"users",e.uid),s={displayName:d,updatedAt:new Date};await Gw(n,s),console.log("\u2705 Firestore document updated"),r(e=>l(l({},e),{},{displayName:d})),u(!1),console.log("\u2705 Profile update completed successfully"),alert("Nama berhasil diperbarui!")}catch(pN){console.error("\u274c Profile update error:",pN);let t="Gagal memperbarui nama. ";"auth/network-request-failed"===pN.code?t+="Masalah jaringan. Periksa koneksi internet.":pN.message.includes("User not authenticated")?t+="Sesi login expired. Silakan login ulang.":t+=pN.message,alert(t)}finally{o(!1)}},disabled:a,className:"save-button",children:a?"Menyimpan...":"Simpan"}),(0,qt.jsx)("button",{onClick:()=>{u(!1),h(n.displayName)},disabled:a,className:"cancel-button",children:"Batal"})]}):(0,qt.jsx)("button",{onClick:()=>u(!0),className:"edit-button",children:"Edit Nama"})})]})]})})})]})},SS=t=>{let{isOpen:n,onClose:r,onSave:s,currentStep:i,activeStep:a,stepNotes:o=[],currentUserId:l,currentUserName:c,isTeamMode:u=!1,teamMembers:d=[],stepOperators:h=[],canCompleteStep:f=!0,shouldPromptForCompletion:p=!1}=t;const[m,g]=(0,e.useState)(""),[b,v]=(0,e.useState)(!1),[y,w]=(0,e.useState)(!0),x=(0,e.useRef)(null),k=(0,e.useRef)(null),_=(0,e.useRef)(null);(0,e.useEffect)(()=>{n?setTimeout(()=>{_.current&&_.current.focus(),x.current&&(x.current.scrollTop=0)},100):g("")},[n]),(0,e.useEffect)(()=>{n&&o.length>0&&k.current&&setTimeout(()=>{const e=k.current;if(e){const t=e.querySelector(".note-item");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}},100)},[o.length,n]);const S=async()=>{if(m.trim()){v(!0);try{await s(m.trim()),g(""),setTimeout(()=>{k.current&&k.current.scrollIntoView({behavior:"smooth",block:"start"})},200)}catch(pN){console.error("Error saving note:",pN),alert("Gagal menyimpan catatan. Silakan coba lagi.")}finally{v(!1)}}else alert("Silakan isi catatan terlebih dahulu")},j=e=>{if(!e)return"Unknown time";try{return(e.toDate?e.toDate():new Date(e)).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch(pN){return"Invalid time"}},N=e=>{const t=e.toLowerCase();return t.includes("mulai")||t.includes("start")?"\ud83d\ude80":t.includes("selesai")||t.includes("done")||t.includes("complete")?"\u2705":t.includes("kendala")||t.includes("masalah")||t.includes("error")?"\u26a0\ufe0f":t.includes("bantuan")||t.includes("help")?"\ud83e\udd1d":t.includes("saran")||t.includes("tip")?"\ud83d\udca1":t.includes("troubleshoot")||t.includes("solusi")?"\ud83d\udd27":t.includes("progress")||t.includes("update")?"\ud83d\udccb":t.includes("pause")||t.includes("stop")?"\u23f8\ufe0f":"\ud83d\udcac"};return n?(0,qt.jsx)("div",{className:"modal-overlay step-notes-modal-overlay",onClick:e=>{e.target.classList.contains("modal-overlay")&&r()},children:(0,qt.jsxs)("div",{className:"modal-content step-notes-modal",children:[(0,qt.jsxs)("div",{className:"modal-header",children:[(0,qt.jsxs)("h3",{children:["\ud83d\udcac Catatan Kolaborasi - Step ",i+1,u&&(0,qt.jsx)("span",{className:"team-badge",children:"\ud83d\udc65 Tim Mode"})]}),(0,qt.jsxs)("div",{className:"header-actions",children:[(0,qt.jsx)("button",{className:"scroll-btn scroll-top",onClick:()=>{x.current&&x.current.scrollTo({top:0,behavior:"smooth"})},title:"Scroll ke atas",type:"button",children:"\u2b06\ufe0f"}),(0,qt.jsx)("button",{className:"scroll-btn scroll-notes",onClick:()=>{k.current&&k.current.scrollIntoView({behavior:"smooth",block:"start"})},title:"Scroll ke catatan",type:"button",children:"\ud83d\udcdd"}),(0,qt.jsx)("button",{className:"modal-close",onClick:r,children:"\xd7"})]})]}),(0,qt.jsxs)("div",{className:"modal-body",ref:x,children:[(0,qt.jsxs)("div",{className:"step-info",children:[(0,qt.jsx)("h4",{children:(null===a||void 0===a?void 0:a.title)||"Step ".concat(i+1)}),u&&(0,qt.jsxs)("div",{className:"team-status",children:[(0,qt.jsxs)("div",{className:"current-operators",children:[(0,qt.jsx)("strong",{children:"\ud83c\udfaf Sedang mengerjakan:"}),h.length>0?(0,qt.jsx)("span",{className:"operators-list",children:h.map(e=>{const t=d.find(t=>t.userId===e);return(0,qt.jsxs)("span",{className:"operator ".concat(e===l?"current-user":""),children:[(null===t||void 0===t?void 0:t.userName)||"Unknown",e===l&&" (Anda)"]},e)})}):(0,qt.jsx)("span",{className:"no-operators",children:"Belum ada operator"})]}),(0,qt.jsxs)("div",{className:"team-members",children:[(0,qt.jsxs)("strong",{children:["\ud83d\udc65 Anggota tim (",d.filter(e=>e.isActive).length,"):"]}),(0,qt.jsx)("span",{className:"members-list",children:d.filter(e=>e.isActive).map(e=>(0,qt.jsxs)("span",{className:"team-member ".concat(e.userId===l?"current-user":""),children:[e.userName,e.userId===l&&" (Anda)"]},e.userId))})]})]})]}),(0,qt.jsxs)("div",{className:"notes-content",children:[(0,qt.jsxs)("div",{className:"note-input-section",children:[(0,qt.jsx)("h4",{children:"\u270f\ufe0f Tulis Catatan Manual"}),y&&(0,qt.jsxs)("div",{className:"quick-actions",children:[(0,qt.jsxs)("div",{className:"quick-actions-header",children:[(0,qt.jsx)("span",{className:"quick-actions-title",children:"\ud83d\ude80 Template Cepat (Opsional):"}),(0,qt.jsx)("button",{className:"toggle-quick-actions",onClick:()=>w(!1),type:"button",children:"Sembunyikan"})]}),(0,qt.jsx)("div",{className:"quick-action-buttons",children:[{label:"\ud83d\ude80 Mulai mengerjakan",template:"Saya mulai mengerjakan step ini",category:"start"},{label:"\u2705 Selesai dikerjakan",template:"Step ini sudah saya selesaikan",category:"complete"},{label:"\u26a0\ufe0f Ada kendala",template:"Menemui kendala: ",category:"issue"},{label:"\ud83e\udd1d Butuh bantuan",template:"Memerlukan bantuan tim untuk ",category:"help"},{label:"\ud83d\udca1 Saran/Tips",template:"Saran untuk step ini: ",category:"suggestion"},{label:"\ud83d\udd27 Troubleshoot",template:"Masalah ditemukan dan solusi: ",category:"troubleshoot"},{label:"\ud83d\udccb Update progress",template:"Progress saat ini: ",category:"progress"},{label:"\u23f8\ufe0f Pause sementara",template:"Pause sementara karena ",category:"pause"}].map((e,t)=>(0,qt.jsx)("button",{type:"button",className:"quick-action-btn ".concat(e.category),onClick:()=>{return t=e.template,g(e=>e.trim()?e+"\n\n"+t:t),void setTimeout(()=>{_.current&&(_.current.focus(),_.current.setSelectionRange(_.current.value.length,_.current.value.length))},50);var t},title:'Klik untuk menggunakan template: "'.concat(e.template,'"'),children:e.label},t))}),(0,qt.jsx)("div",{className:"quick-actions-help",children:(0,qt.jsxs)("small",{children:["\ud83d\udca1 ",(0,qt.jsx)("strong",{children:"Tips:"})," Klik template di atas untuk memulai catatan, kemudian edit sesuai situasi Anda. Ctrl+Enter untuk simpan cepat."]})})]}),!y&&(0,qt.jsx)("button",{className:"show-quick-actions",onClick:()=>w(!0),type:"button",children:"\ud83d\ude80 Tampilkan Template Cepat"}),(0,qt.jsxs)("div",{className:"note-input-container",children:[(0,qt.jsx)("textarea",{ref:_,value:m,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),S()),"Escape"===e.key&&(e.preventDefault(),r())},placeholder:u?"Tulis catatan untuk koordinasi tim (contoh: 'Saya mulai step ini', 'Butuh bantuan untuk bagian X', 'Step sudah selesai')...":"Tulis catatan untuk step ini...",rows:4,className:"manual-note-input",disabled:b}),(0,qt.jsxs)("div",{className:"input-footer",children:[(0,qt.jsxs)("div",{className:"char-counter",children:[m.length," karakter",m.length>500&&(0,qt.jsx)("span",{className:"warning",children:" (Sebaiknya di bawah 500 karakter)"})]}),(0,qt.jsx)("div",{className:"input-shortcuts",children:(0,qt.jsx)("small",{children:"\ud83d\udca1 Ctrl+Enter untuk simpan cepat | ESC untuk tutup"})})]})]}),(0,qt.jsxs)("div",{className:"note-actions",children:[(0,qt.jsx)("button",{onClick:S,disabled:!m.trim()||b,className:"save-note-btn",type:"button",children:b?"\u23f3 Menyimpan...":"\ud83d\udcbe Simpan Catatan"}),m.trim()&&(0,qt.jsx)("button",{onClick:()=>g(""),className:"clear-note-btn",disabled:b,type:"button",children:"\ud83d\uddd1\ufe0f Bersihkan"})]}),u&&p&&!f&&(0,qt.jsxs)("div",{className:"completion-prompt",children:[(0,qt.jsxs)("div",{className:"prompt-header",children:[(0,qt.jsx)("span",{className:"prompt-icon",children:"\ud83e\udd1d"}),(0,qt.jsx)("span",{className:"prompt-title",children:"Koordinasi Penyelesaian Step"})]}),(0,qt.jsx)("p",{children:'Untuk menyelesaikan step ini dalam mode tim, koordinasikan terlebih dahulu dengan anggota tim yang sedang bekerja. Tulis catatan seperti "Step sudah selesai" atau "Siap untuk lanjut" agar tim tahu status terkini.'})]})]}),(0,qt.jsxs)("div",{className:"notes-history-section",ref:k,children:[(0,qt.jsxs)("div",{className:"notes-history-header",children:[(0,qt.jsxs)("h4",{children:["\ud83d\udcdd Riwayat Catatan (",o.length,")",0===o.length&&(0,qt.jsx)("span",{className:"no-notes-hint",children:"Belum ada catatan"})]}),o.length>3&&(0,qt.jsx)("button",{className:"scroll-to-latest",onClick:()=>{if(k.current){const e=k.current.querySelector(".note-item");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},type:"button",title:"Scroll ke catatan terbaru",children:"\u2b06\ufe0f Terbaru"})]}),o.length>0?(0,qt.jsx)("div",{className:"notes-list",children:o.sort((e,t)=>{var n,r,s,i,a,o,l,c;const u=(null===e||void 0===e||null===(n=e.timestamp)||void 0===n||null===(r=n.toMillis)||void 0===r?void 0:r.call(n))||(null===e||void 0===e||null===(s=e.createdAt)||void 0===s||null===(i=s.toMillis)||void 0===i?void 0:i.call(s))||0;return((null===t||void 0===t||null===(a=t.timestamp)||void 0===a||null===(o=a.toMillis)||void 0===o?void 0:o.call(a))||(null===t||void 0===t||null===(l=t.createdAt)||void 0===l||null===(c=l.toMillis)||void 0===c?void 0:c.call(l))||0)-u}).map((e,t)=>(0,qt.jsxs)("div",{className:"note-item",children:[(0,qt.jsxs)("div",{className:"note-header",children:[(0,qt.jsxs)("span",{className:"note-author",children:[N(e.note),(0,qt.jsx)("strong",{children:e.userName}),e.userId===l&&(0,qt.jsx)("span",{className:"you-badge",children:"(Anda)"}),e.isSystemNote&&(0,qt.jsx)("span",{className:"system-badge",children:"SISTEM"})]}),(0,qt.jsx)("span",{className:"note-time",children:j(e.timestamp||e.createdAt)})]}),(0,qt.jsx)("div",{className:"note-content",children:e.note}),u&&(e.note.toLowerCase().includes("selesai")||e.note.toLowerCase().includes("done")||e.note.toLowerCase().includes("lanjut"))&&(0,qt.jsx)("div",{className:"note-significance",children:(0,qt.jsx)("small",{children:"\ud83c\udfaf Catatan koordinasi penting"})})]},e.id||t))}):(0,qt.jsxs)("div",{className:"empty-notes",children:[(0,qt.jsx)("div",{className:"empty-notes-icon",children:"\ud83d\udcdd"}),(0,qt.jsx)("p",{children:"Belum ada catatan untuk step ini."}),(0,qt.jsx)("p",{children:u?"Mulai koordinasi dengan menulis catatan di atas!":"Tulis catatan pertama untuk step ini!"})]})]})]})]}),(0,qt.jsxs)("div",{className:"modal-footer",children:[(0,qt.jsxs)("div",{className:"footer-info",children:[u&&(0,qt.jsxs)("small",{children:["\ud83d\udca1 ",(0,qt.jsx)("strong",{children:"Tips Tim:"})," Gunakan catatan untuk koordinasi yang efektif. Tuliskan status progress, kendala, atau pertanyaan untuk tim."]}),!u&&(0,qt.jsxs)("small",{children:["\ud83d\udca1 ",(0,qt.jsx)("strong",{children:"Tips:"})," Catat informasi penting, kendala, atau observasi untuk referensi dan evaluasi nanti."]})]}),(0,qt.jsx)("div",{className:"footer-actions",children:(0,qt.jsx)("button",{onClick:r,className:"close-modal-btn",type:"button",children:"\u274c Tutup"})})]})]})}):null},jS=Et("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),NS={PENDING:"pending",IN_PROGRESS:"in-progress",COMPLETED:"completed",SKIPPED:"skipped"},TS=e=>{const t=Math.floor(e/3600).toString().padStart(2,"0"),n=Math.floor(e%3600/60).toString().padStart(2,"0"),r=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n,":").concat(r)},ES=e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)},CS=e=>{switch(e){case NS.COMPLETED:return"#22c55e";case NS.IN_PROGRESS:return"#3b82f6";case NS.SKIPPED:return"#f59e0b";default:return"#6b7280"}},IS=e=>{switch(e){case NS.COMPLETED:return"\u2705 Selesai";case NS.IN_PROGRESS:return"\u25b6 Berlangsung";case NS.SKIPPED:return"\u2b50 Dilewati";default:return"\u25ef Belum"}},AS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("[".concat(t.toUpperCase(),"] ").concat(e));const n=document.createElement("div");n.className="task-notification ".concat(t),n.innerHTML='\n    <div class="notification-content">\n      <span class="notification-icon">\n        '.concat("success"===t?"\u2705":"error"===t?"\u274c":"warning"===t?"\u26a0\ufe0f":"\u2139\ufe0f",'\n      </span>\n      <span class="notification-message">').concat(e,"</span>\n    </div>\n  "),document.body.appendChild(n),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},3e3)},MS=t=>{let{workInstructionTitle:n,moNumber:r,moDisplay:s,onEditMONumber:i}=t;const a=he(),[o,l]=(0,e.useState)({displayName:"",email:"",uid:"",photoURL:""}),[c,u]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=fa(J_,e=>{e?d():a("/login")});return()=>e()},[a]);const d=async()=>{try{const e=J_.currentUser;if(e){const t=Fy(Z_,"users",e.uid),n=await Hw(t);if(n.exists()){const t=n.data();l({displayName:t.displayName||"Nama tidak tersedia",email:t.email||e.email,uid:t.uid||e.uid,photoURL:t.photoURL||e.photoURL||""})}else l({displayName:e.displayName||"Nama tidak tersedia",email:e.email,uid:e.uid,photoURL:e.photoURL||""})}}catch(pN){console.error("Error fetching user data:",pN)}},h=e=>e?e.substring(0,8).toUpperCase():"ID tidak tersedia",f=()=>{a("/home")};return(0,qt.jsxs)("div",{className:"task-header",children:[(0,qt.jsxs)("div",{className:"task-header-left",children:[(0,qt.jsx)("button",{className:"task-back-button",onClick:f,title:"Kembali ke Home",children:(0,qt.jsx)(kS,{size:20,color:"currentColor"})}),(0,qt.jsx)("img",{src:Bt,alt:"Logo LRS",className:"task-header-logo",onClick:f,style:{cursor:"pointer"}})]}),(0,qt.jsxs)("div",{className:"task-header-center",children:[(0,qt.jsx)("h1",{className:"title-header",children:n||"Pilih Manufacturing Order"}),(r||s)&&(0,qt.jsxs)("div",{className:"task-header-mo-info",children:[(0,qt.jsxs)("span",{className:"mo-info-text",children:["\ud83d\udccb ",s||r]}),i&&(0,qt.jsx)("button",{className:"edit-mo-header-btn",onClick:i,title:"Edit MO",children:(0,qt.jsx)(jS,{size:16})})]})]}),(0,qt.jsx)("div",{className:"task-header-right",children:(0,qt.jsxs)("div",{className:"task-header-profile-container",children:[(0,qt.jsxs)("button",{className:"task-header-profile-btn",onClick:()=>u(!c),children:[(0,qt.jsx)("div",{className:"task-header-profile-avatar",children:o.photoURL?(0,qt.jsx)("img",{src:o.photoURL,alt:"Avatar",className:"task-header-avatar-image"}):(0,qt.jsx)("span",{className:"task-header-avatar-text",children:o.displayName.charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"task-header-profile-info",children:[(0,qt.jsx)("div",{className:"task-header-profile-name",children:o.displayName}),(0,qt.jsxs)("div",{className:"task-header-profile-id",children:["ID: ",h(o.uid)]})]})]}),c&&(0,qt.jsxs)("div",{className:"task-header-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"task-header-dropdown-header",children:[(0,qt.jsx)("div",{className:"task-header-profile-avatar",children:o.photoURL?(0,qt.jsx)("img",{src:o.photoURL,alt:"Avatar",className:"task-header-avatar-image"}):(0,qt.jsx)("span",{className:"task-header-avatar-text",children:o.displayName.charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"task-header-dropdown-info",children:[(0,qt.jsx)("div",{className:"task-header-dropdown-name",children:o.displayName}),(0,qt.jsx)("div",{className:"task-header-dropdown-email",children:o.email}),(0,qt.jsxs)("div",{className:"task-header-dropdown-id",children:["ID: ",h(o.uid)]})]})]}),(0,qt.jsxs)("button",{className:"task-header-dropdown-item",onClick:()=>{a("/profil")},children:[(0,qt.jsx)(hS,{className:"task-header-dropdown-icon"}),(0,qt.jsx)("span",{children:"Profile"})]}),(0,qt.jsx)("hr",{className:"task-header-dropdown-divider"}),(0,qt.jsxs)("button",{className:"task-header-dropdown-item logout",onClick:async()=>{if(window.confirm("Apakah Anda yakin ingin logout?"))try{await pa(J_),localStorage.removeItem("currentUser"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userToken"),localStorage.removeItem("previousStats"),alert("Logout berhasil!"),a("/login")}catch(pN){console.error("Error during logout:",pN),alert("Terjadi kesalahan saat logout: "+pN.message)}},children:[(0,qt.jsx)(fS,{className:"task-header-dropdown-icon"}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]})},OS=e=>{let{completedSteps:t,totalSteps:n}=e;const r=n>0?t/n*100:0;return(0,qt.jsxs)("div",{className:"task-progress",children:[(0,qt.jsx)("div",{className:"task-progress-bar",children:(0,qt.jsx)("div",{className:"task-progress-fill",style:{width:"".concat(r,"%")}})}),(0,qt.jsxs)("div",{className:"task-progress-text",children:["Progress: ",t," dari ",n," langkah selesai (",Math.round(r),"%)"]})]})},RS=e=>{let{stepStatuses:t,currentStep:n,steps:r,onGoToStep:s,stepOperators:i={},sessionParticipants:a=[],isTeamMode:o=!1}=e;const l=e=>{const t=i[e]||[];return Array.isArray(t)?t:[t].filter(Boolean)},c=t.map((e,t)=>({status:e,index:t})).filter(e=>e.status===NS.SKIPPED),u=(()=>{var e;return(null===(e=J_.currentUser)||void 0===e?void 0:e.uid)||null})();return(0,qt.jsxs)("div",{className:"step-navigator",children:[(0,qt.jsxs)("div",{className:"step-navigator-header",children:[(0,qt.jsx)("h3",{children:"Navigasi Langkah:"}),o&&(0,qt.jsxs)("div",{className:"multi-user-indicator",children:[(0,qt.jsx)("span",{className:"team-mode-badge",children:"Mode Tim (Concurrent)"}),(0,qt.jsx)("div",{className:"concurrent-help",children:(0,qt.jsxs)("small",{children:["\ud83d\udca1 ",(0,qt.jsx)("strong",{children:"Mode Concurrent:"}),' Multiple operator dapat mengerjakan step yang sama secara bersamaan. Klik "Mulai Langkah" untuk bergabung dengan step yang sedang dikerjakan atau pilih step baru!']})})]})]}),(0,qt.jsx)("div",{className:"step-buttons",children:t.map((e,t)=>{var i;const c=l(t),d=l(t).map(e=>{const t=a.find(t=>t.userId===e);return t?t.userName:"User-".concat((null===e||void 0===e?void 0:e.substring(0,6))||"Unknown")});const h=!!u&&c.includes(u),f=c.filter(e=>e!==u).length>0,p=c.length;let m="Step ".concat(t+1,": ").concat((null===(i=r[t])||void 0===i?void 0:i.title)||"Unknown Step");return o&&p>0?h&&f?(m+="\n\ud83c\udfaf Anda dan ".concat(p-1," operator lain sedang mengerjakan step ini"),m+="\n\ud83d\udc65 Operator: ".concat(d.join(", "))):h&&!f?m+="\n\ud83c\udfaf Anda sedang mengerjakan step ini":!h&&f&&(m+="\n\ud83d\udc65 ".concat(p," operator sedang mengerjakan step ini"),m+="\n\ud83d\udd0d Operator: ".concat(d.join(", ")),m+="\n\u2705 Anda juga bisa bergabung mengerjakan step ini"):o&&(m+="\n\ud83d\udfe2 Step tersedia untuk dikerjakan"),(0,qt.jsx)("button",{onClick:()=>s(t),className:"step-button ".concat(n===t?"active":""," ").concat(h?"occupied-self":f?"occupied-shared":""),style:{color:CS(e),borderColor:h?"#3b82f6":f?"#22c55e":CS(e)},title:m,disabled:!1,children:(0,qt.jsxs)("div",{className:"step-button-content",children:[(0,qt.jsx)("span",{className:"step-number",children:t+1}),(0,qt.jsx)("span",{className:"step-status",children:IS(e)}),o&&p>0&&(0,qt.jsx)("div",{className:"step-operator-info",children:h&&f?(0,qt.jsxs)("span",{className:"operator-indicator shared",title:"Anda + ".concat(p-1," operator lain"),children:["\ud83c\udfaf\ud83d\udc65",p>2?"+".concat(p-2):""]}):h?(0,qt.jsx)("span",{className:"operator-indicator self",title:"Anda mengerjakan",children:"\ud83c\udfaf"}):(0,qt.jsxs)("span",{className:"operator-indicator others",title:"".concat(p," operator sedang mengerjakan"),children:["\ud83d\udc65",p>1?p:""]})})]})},t)})}),c.length>0&&(0,qt.jsxs)("div",{className:"skipped-steps-warning",children:[(0,qt.jsx)("div",{className:"skipped-header",children:(0,qt.jsxs)("strong",{children:["\u26a0\ufe0f Langkah yang dilewati (",c.length,"):"]})}),(0,qt.jsx)("div",{className:"skipped-list",children:c.map(e=>{var t;let{index:n}=e;return(0,qt.jsxs)("button",{onClick:()=>s(n),className:"skipped-step-link",title:"Klik untuk kembali ke step ".concat(n+1),children:["Step ",n+1,": ",null===(t=r[n])||void 0===t?void 0:t.title]},n)})})]}),o&&Object.keys(i).length>0&&(0,qt.jsxs)("div",{className:"active-operators-summary",children:[(0,qt.jsx)("h4",{children:"\ud83d\udc65 Aktivitas Tim (Concurrent):"}),(0,qt.jsx)("div",{className:"operators-list",children:Object.entries(i).map(e=>{let[t,n]=e;const r=Array.isArray(n)?n:[n].filter(Boolean),i=parseInt(t)+1,o=!!u&&r.includes(u);if(r.length>0){const e=r.map(e=>{const t=a.find(t=>t.userId===e);return t?t.userName:"User-".concat((null===e||void 0===e?void 0:e.substring(0,6))||"Unknown")});return(0,qt.jsxs)("div",{className:"operator-activity ".concat(o?"includes-self":"others-only"),children:[(0,qt.jsx)("span",{className:"operator-names",children:o&&1===r.length?"\ud83c\udfaf Anda":o&&r.length>1?"\ud83c\udfaf Anda + ".concat(r.length-1," operator lain"):"\ud83d\udc65 ".concat(e.join(", "))}),(0,qt.jsxs)("span",{className:"operator-step",children:["Step ",i]}),(0,qt.jsx)("button",{onClick:()=>s(parseInt(t)),className:"goto-step-btn",title:"Lihat step ".concat(i," - ").concat(o?"Bergabung":"Join kolaborasi"),children:o?"\ud83c\udfaf":"\ud83d\udc41\ufe0f"})]},t)}return null})})]})]})},DS=e=>{let{totalTime:t,stepTime:n,targetTime:r,showWarning:s,isOverTarget:i}=e;return(0,qt.jsxs)("div",{className:"task-timer-display ".concat(i?"over-target":""),children:[(0,qt.jsxs)("div",{className:"task-total-time",children:["Total Waktu: ",(0,qt.jsx)("span",{children:TS(t)})]}),(0,qt.jsxs)("div",{className:"task-step-time ".concat(s?"time-warning":""),children:["Waktu Langkah: ",(0,qt.jsx)("span",{children:ES(n)}),i&&(0,qt.jsx)("span",{className:"over-target-indicator",children:"\u26a0\ufe0f MELEBIHI TARGET"})]}),r>0&&(0,qt.jsxs)("div",{className:"task-target-time",children:["Target: ",(0,qt.jsx)("span",{children:ES(r)}),(0,qt.jsx)("div",{className:"time-progress-bar",children:(0,qt.jsx)("div",{className:"time-progress-fill",style:{width:"".concat(Math.min(n/r*100,100),"%"),backgroundColor:i?"#ef4444":n/r>.8?"#f59e0b":"#22c55e"}})})]})]})},PS=e=>{let{activeStep:t,stepStatus:n,stepImages:r,currentStep:s}=e;if(console.log("\ud83d\udcdd StepContent render:",{activeStep:null===t||void 0===t?void 0:t.title,stepStatus:n,currentStep:s,stepImages:Object.keys(r||{}),activeStepImageUrls:null===t||void 0===t?void 0:t.imageUrls}),!t||"object"!==typeof t||!t.title)return(0,qt.jsx)("div",{className:"task-details-wrapper",children:(0,qt.jsx)("div",{className:"no-step-selected",children:(0,qt.jsxs)("div",{className:"loading-step-content",children:[(0,qt.jsx)("div",{className:"loading-spinner"}),(0,qt.jsx)("h2",{children:"Memuat langkah kerja..."})]})})});const i="string"===typeof t.maxTime?parseInt(t.maxTime,10):t.maxTime||0,a=r&&void 0!==s?r[s]:null;console.log("\ud83d\uddbc\ufe0f Current step images:",a);const o=a&&Object.keys(a).length>0&&Object.values(a).some(e=>e&&e.loaded),l=t.imageUrls&&Array.isArray(t.imageUrls)?t.imageUrls:t.imageUrl&&"string"===typeof t.imageUrl?[t.imageUrl]:[],c=o||l.length>0;return console.log("\ud83d\uddbc\ufe0f Image status:",{hasLoadedImages:o,fallbackImagesCount:l.length,hasImages:c}),(0,qt.jsxs)("div",{className:"task-details-wrapper",children:[(0,qt.jsxs)("div",{className:"task-step-info",children:[(0,qt.jsx)("div",{className:"step-header",children:(0,qt.jsxs)("h2",{className:"task-step-title",children:[t.title,(0,qt.jsx)("span",{className:"step-status-badge",style:{color:CS(n),backgroundColor:CS(n)+"20"},children:IS(n)})]})}),i>0&&(0,qt.jsxs)("div",{className:"task-max-time",children:[(0,qt.jsx)("h3",{children:"\u23f1\ufe0f WAKTU TARGET:"}),(0,qt.jsxs)("div",{className:"target-time-info",children:[(0,qt.jsx)("span",{className:"target-time-value",children:ES(i)}),(0,qt.jsx)("span",{className:"target-time-label",children:"(Target waktu penyelesaian)"})]})]}),t.description&&(0,qt.jsxs)("div",{className:"task-step-description",children:[(0,qt.jsx)("h3",{children:"\ud83d\udccb LANGKAH KERJA:"}),(0,qt.jsx)("div",{className:"description-content",children:(0,qt.jsx)("p",{children:t.description})})]}),t.keyPoints&&Array.isArray(t.keyPoints)&&t.keyPoints.length>0&&(0,qt.jsxs)("div",{className:"task-key-points",children:[(0,qt.jsx)("h3",{children:"\ud83c\udfaf TITIK KUNCI KERJA:"}),(0,qt.jsx)("ul",{className:"key-points-list",children:t.keyPoints.map((e,t)=>(0,qt.jsxs)("li",{className:"key-point-item",children:[(0,qt.jsx)("span",{className:"key-point-bullet",children:"\u2022"}),(0,qt.jsx)("span",{className:"key-point-text",children:e})]},t))})]}),t.safetyPoints&&Array.isArray(t.safetyPoints)&&t.safetyPoints.length>0&&(0,qt.jsxs)("div",{className:"task-safety-points",children:[(0,qt.jsx)("h3",{children:"\u26a0\ufe0f TITIK KUNCI KESELAMATAN KERJA:"}),(0,qt.jsx)("ul",{className:"safety-points-list",children:t.safetyPoints.map((e,t)=>(0,qt.jsxs)("li",{className:"safety-point-item",children:[(0,qt.jsx)("span",{className:"safety-point-bullet",children:"\u26a0\ufe0f"}),(0,qt.jsx)("span",{className:"safety-point-text",children:e})]},t))})]}),(0,qt.jsxs)("div",{className:"task-safety-reminder",children:[(0,qt.jsx)("h3",{children:"\ud83e\uddba KESELAMATAN KERJA UMUM"}),(0,qt.jsxs)("ul",{className:"safety-reminder-list",children:[(0,qt.jsx)("li",{children:"Selalu gunakan APD & Alat Pendukung yang sesuai."}),(0,qt.jsx)("li",{children:"Jaga selalu kebersihan tempat kerja."})]})]})]}),c&&(0,qt.jsxs)("div",{className:"task-step-images",children:[(0,qt.jsx)("h3",{children:"\ud83d\uddbc\ufe0f Gambar Referensi:"}),(0,qt.jsxs)("div",{className:"images-gallery",children:[o&&Object.values(a).filter(e=>e&&e.loaded).map((e,n)=>(0,qt.jsxs)("div",{className:"image-container loaded",children:[(0,qt.jsx)("img",{src:e.url,alt:"Ilustrasi ".concat(t.title," - ").concat(n+1),className:"step-image",onError:t=>{console.warn("Error displaying loaded image: ".concat(e.url)),t.target.style.display="none"}}),(0,qt.jsxs)("div",{className:"image-caption",children:[(0,qt.jsxs)("span",{className:"image-number",children:["Gambar ",n+1]}),(0,qt.jsx)("span",{className:"image-status loaded",children:"\u2705 Loaded"})]})]},"loaded-".concat(n))),!o&&l.length>0&&l.map((e,n)=>e&&""!==e.trim()?(0,qt.jsxs)("div",{className:"image-container fallback",children:[(0,qt.jsx)("img",{src:e.trim(),alt:"Ilustrasi ".concat(t.title," - ").concat(n+1),className:"step-image",onError:t=>{console.warn("Failed to load fallback image: ".concat(e)),t.target.style.display="none",t.target.parentElement.classList.add("error")},onLoad:t=>{console.log("\u2705 Fallback image loaded: ".concat(e)),t.target.parentElement.classList.add("loaded")}}),(0,qt.jsxs)("div",{className:"image-caption",children:[(0,qt.jsxs)("span",{className:"image-number",children:["Gambar ",n+1]}),(0,qt.jsx)("span",{className:"image-status loading",children:"\ud83d\udd04 Loading..."})]})]},"fallback-".concat(n)):null)]}),!o&&l.length>0&&(0,qt.jsx)("div",{className:"images-loading-status",children:(0,qt.jsxs)("span",{className:"loading-text",children:["Sedang memuat ",l.length," gambar referensi..."]})})]})]})},LS=e=>{var t;let{isRunning:n,showStopNotification:r,stepStatus:s,isLastStep:i,onStartStep:a,onStopStep:o,onCompleteStep:l,onShowSkipModal:c,onReset:u,hasSelectedInstruction:d,onShowTroubleshoot:h,autoStopEnabled:f,onToggleAutoStop:p,canControlStep:m=!0,stepOperators:g={},sessionParticipants:b=[],currentStep:v=0,isTeamMode:y=!1,onSetStepStatus:w,onSetIsStepActive:x,onStartTimer:k,onStopTimer:_}=e;if(!d)return null;const S=g[v]||[],j=Array.isArray(S)?S:[S].filter(Boolean),N=(j.map(e=>b.find(t=>t.userId===e)).filter(Boolean),null===(t=J_.currentUser)||void 0===t?void 0:t.uid),T=!!N&&j.includes(N),E=j.filter(e=>e!==N).length>0,C=j.length,I=!n,A=s===NS.COMPLETED?{startDisabled:!0,startLabel:"\u2705 Sudah Selesai",startClass:"completed"}:n&&T?{startDisabled:!0,startLabel:"\u25b6\ufe0f Anda Sedang Mengerjakan",startClass:"running-self"}:r?{startDisabled:!1,startLabel:"\ud83d\udd04 Mulai Lagi",startClass:"restart"}:s===NS.SKIPPED?{startDisabled:!1,startLabel:E?"\ud83d\udd04 Mulai Langkah (".concat(C," operator aktif)"):"\ud83d\udd04 Mulai Langkah (Dilewati)",startClass:"skipped"}:y&&E&&!T?{startDisabled:!1,startLabel:"\ud83d\udc65 Bergabung (".concat(C," operator aktif)"),startClass:"join-concurrent"}:{startDisabled:!1,startLabel:"\u25b6\ufe0f Mulai Langkah",startClass:"ready"};return(0,qt.jsxs)("div",{className:"task-controls",children:[y&&(0,qt.jsx)("div",{className:"team-mode-indicator",children:(0,qt.jsxs)("div",{className:"team-status",children:[C>0&&(0,qt.jsx)("div",{className:"step-concurrent-info",children:T&&E?(0,qt.jsxs)("span",{className:"concurrent-status working-with-others",children:["\ud83c\udfaf Anda + ",C-1," operator lain mengerjakan step ini"]}):T&&!E?(0,qt.jsx)("span",{className:"concurrent-status working-alone",children:"\ud83c\udfaf Anda mengerjakan step ini"}):!T&&E?(0,qt.jsx)("span",{className:"concurrent-status others-working"}):null}),0===C&&(0,qt.jsx)("span",{className:"step-available"})]})}),(0,qt.jsxs)("div",{className:"control-buttons-row",children:[(0,qt.jsx)("button",{onClick:async()=>{console.log("\ud83d\udd25 handleStartStep called:",{isRunning:n,stepStatus:s,currentStep:v,isTeamMode:y,isCurrentUserWorking:T});try{if(y){const e=zS(v);console.log("\ud83d\udd25 Join step result:",e)}w&&(w(v,NS.IN_PROGRESS),console.log("\ud83d\udd25 Step status set to IN_PROGRESS")),x&&(x(!0),console.log("\ud83d\udd25 Step marked as active")),k&&(k(),console.log("\ud83d\udd25 Timer started")),a&&"function"===typeof a&&(await a(),console.log("\ud83d\udd25 Original onStartStep called")),AS(y&&E?"Bergabung mengerjakan step ".concat(v+1," dengan ").concat(C-1," operator lain"):"Memulai step ".concat(v+1),"success")}catch(pN){console.error("\ud83d\udd25 Error in handleStartStep:",pN),AS("Gagal memulai step: "+pN.message,"error")}},disabled:A.startDisabled&&s===NS.COMPLETED,className:"task-btn mulai-lagi ".concat(A.startClass),title:E&&!T&&y?"Bergabung dengan ".concat(C," operator yang sedang mengerjakan step ini dan mulai timer Anda"):A.startLabel+" - Timer akan dimulai otomatis",children:A.startLabel}),(0,qt.jsxs)("button",{onClick:async()=>{console.log("\ud83d\udd25 handleStopStep called:",{isRunning:n,currentStep:v,isTeamMode:y});try{_&&(_(),console.log("\ud83d\udd25 Timer stopped")),x&&(x(!1),console.log("\ud83d\udd25 Step marked as inactive")),o&&"function"===typeof o&&(await o(),console.log("\ud83d\udd25 Original onStopStep called")),AS(y?"Timer Anda untuk step ".concat(v+1," dihentikan"):"Timer step ".concat(v+1," dihentikan"),"info")}catch(pN){console.error("\ud83d\udd25 Error in handleStopStep:",pN),AS("Gagal menghentikan timer: "+pN.message,"error")}},disabled:!n,className:"task-btn task-btn-warning",title:n?y?"Hentikan timer Anda (tidak mempengaruhi operator lain)":"Hentikan timer":"Timer Anda tidak sedang berjalan",children:["\u23f8\ufe0f ",y?"Stop Timer Saya":"Stop Timer"]}),(0,qt.jsx)("button",{onClick:async()=>{console.log("\ud83d\udd25 handleCompleteStep called:",{isRunning:n,currentStep:v,isLastStep:i,isTeamMode:y});try{if(_&&(_(),console.log("\ud83d\udd25 Timer stopped for completion")),w&&(w(v,NS.COMPLETED),console.log("\ud83d\udd25 Step status set to COMPLETED")),x&&(x(!1),console.log("\ud83d\udd25 Step marked as inactive")),y){const e=VS(v);console.log("\ud83d\udd25 Leave step result:",e)}l&&"function"===typeof l&&(await l(),console.log("\ud83d\udd25 Original onCompleteStep called")),AS(i?y?"Anda telah menyelesaikan semua langkah! \ud83c\udf89":"Tugas selesai! \ud83c\udf89":"Step ".concat(v+1,y?" Anda selesai, lanjut ke step berikutnya":" selesai, lanjut ke step berikutnya"),"success")}catch(pN){console.error("\ud83d\udd25 Error in handleCompleteStep:",pN),AS("Gagal menyelesaikan step: "+pN.message,"error")}},disabled:!n,className:"task-btn task-btn-success",title:n?i?y?"Selesaikan step terakhir Anda dan hentikan timer":"Selesaikan tugas dan hentikan timer":y?"Selesaikan step ini, hentikan timer, dan lanjut ke berikutnya":"Selesai, hentikan timer, dan lanjut":"Mulai timer terlebih dahulu untuk menyelesaikan step",children:i?"\ud83c\udf89 Selesaikan Tugas"+(y?" Saya":""):"\u2705 Selesai Langkah"+(y?" Saya":"")}),(0,qt.jsx)("button",{onClick:c,disabled:!I||s===NS.COMPLETED,className:"task-btn lewati-dulu",title:I?y?"Lewati langkah ini dengan alasan (hanya untuk Anda)":"Lewati langkah ini dengan alasan":"Tidak dapat melewati step saat timer Anda sedang berjalan",children:"\u2b50\ufe0f Lewati Dulu"})]}),(0,qt.jsxs)("div",{className:"control-buttons-row secondary",children:[(0,qt.jsxs)("button",{onClick:()=>{if(y){window.confirm("\ud83d\udd04 Reset Progress Individu\n\nHanya progress Anda yang akan di-reset.\nOperator lain akan tetap melanjutkan pekerjaan mereka.\n\nApakah Anda yakin ingin melanjutkan?")&&u()}else window.confirm("Apakah Anda yakin ingin reset semua progress?")&&u()},className:"task-btn reset-semua",title:y?"Reset progress Anda (tidak mempengaruhi operator lain)":"Reset seluruh progres tugas",children:["\ud83d\udd04 ",y?"Reset Progress Saya":"Reset Semua"]}),(0,qt.jsx)("button",{onClick:h,className:"task-btn task-btn-info",title:"Troubleshooting - Lupa klik tombol? Ada masalah dengan step?",children:"\ud83d\udd27 Troubleshoot"}),(0,qt.jsxs)("button",{onClick:p,className:"task-btn ".concat(f?"task-btn-success":"task-btn-secondary"),title:"Auto-stop timer: ".concat(f?"Aktif - Timer akan berhenti otomatis saat melebihi target":"Nonaktif - Timer akan terus berjalan"),children:["\u23f0 Auto-Stop: ",f?"ON":"OFF"]})]})]})},FS=e=>{let{message:t="Memuat data...",progress:n=null}=e;return(0,qt.jsx)("div",{className:"loading-overlay",children:(0,qt.jsxs)("div",{className:"loading-content",children:[(0,qt.jsx)("div",{className:"loading-spinner"}),(0,qt.jsx)("p",{className:"loading-message",children:t}),null!==n&&(0,qt.jsxs)("div",{className:"loading-progress",children:[(0,qt.jsx)("div",{className:"progress-bar",children:(0,qt.jsx)("div",{className:"progress-fill",style:{width:"".concat(n,"%")}})}),(0,qt.jsxs)("span",{className:"progress-text",children:[Math.round(n),"%"]})]})]})})};let BS={},US={setStepOperators:null,setCollaborativeMode:null,setIsStepActive:null};const zS=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=null===(t=J_.currentUser)||void 0===t?void 0:t.uid;if(!r)return AS("Tidak dapat mengidentifikasi user","error"),!1;console.log("\ud83d\udd25 Joining step:",e,"by user:",r);const s=BS[e]||[],i=Array.isArray(s)?s:[s].filter(Boolean);if(!i.includes(r)){BS[e]=[...i,r],US.setStepOperators&&US.setStepOperators(l({},BS)),n.onJoin&&n.onJoin(e,r);const t=BS[e].length;return console.log("\ud83d\udd25 Successfully joined step ".concat(e+1,", total operators: ").concat(t)),!0}return console.log("\ud83d\udd25 User already in step ".concat(e+1)),!1},VS=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=null===(t=J_.currentUser)||void 0===t?void 0:t.uid;if(!r)return!1;console.log("\ud83d\udd25 Leaving step:",e,"by user:",r);const s=BS[e]||[],i=(Array.isArray(s)?s:[s].filter(Boolean)).filter(e=>e!==r);i.length>0?BS[e]=i:delete BS[e],US.setStepOperators&&US.setStepOperators(l({},BS)),n.onLeave&&n.onLeave(e,r);const a=BS[e]||[];return console.log("\ud83d\udd25 Successfully left step ".concat(e+1,", remaining operators: ").concat(a.length)),!0},HS=t=>{let{images:n,onImagesLoaded:r}=t;const[s,i]=(0,e.useState)(0);return(0,e.useEffect)(()=>{if(console.log("\ud83d\uddbc\ufe0f ImagePreloader received images:",n),!n||0===n.length)return console.log("\ud83d\uddbc\ufe0f No images to preload"),void r({});const e=[];if(n.forEach((t,n)=>{console.log("\ud83d\uddbc\ufe0f Processing step ".concat(n,":"),t),Array.isArray(t)?t.forEach((t,r)=>{t&&"string"===typeof t&&""!==t.trim()&&e.push({stepIndex:n,imageIndex:r,url:t.trim()})}):t&&"string"===typeof t&&""!==t.trim()&&e.push({stepIndex:n,imageIndex:0,url:t.trim()})}),console.log("\ud83d\uddbc\ufe0f Flattened ".concat(e.length," image URLs:"),e),0===e.length)return console.log("\ud83d\uddbc\ufe0f No valid image URLs found"),void r({});const t=e.map(e=>new Promise(t=>{const n=new Image;n.onload=()=>{console.log("\u2705 Image loaded: ".concat(e.url)),t(l(l({},e),{},{loaded:!0,image:n}))},n.onerror=n=>{console.warn("\u274c Failed to load image: ".concat(e.url),n),t(l(l({},e),{},{loaded:!1,error:!0}))},e.url.startsWith("http")&&(n.crossOrigin="anonymous"),n.src=e.url}));let s=0;t.forEach(t=>{t.then(()=>{s++;const t=s/e.length*100;i(t),console.log("\ud83d\udcca Loading progress: ".concat(Math.round(t),"% (").concat(s,"/").concat(e.length,")"))})}),Promise.all(t).then(e=>{const t={};e.forEach(e=>{t[e.stepIndex]||(t[e.stepIndex]={}),t[e.stepIndex][e.imageIndex]=e}),console.log("\u2705 All images processed:",t),i(100),r(t)})},[n,r]),n&&n.length>0&&s<100?(0,qt.jsx)("div",{className:"image-preloader",children:(0,qt.jsxs)("div",{className:"preloader-info",children:[(0,qt.jsxs)("span",{children:["Memuat gambar... ",Math.round(s),"%"]}),(0,qt.jsx)("div",{className:"preloader-bar",children:(0,qt.jsx)("div",{className:"preloader-progress",style:{width:"".concat(s,"%")}})})]})}):null},WS=t=>{let{isOpen:n,onClose:r,stepTime:s,totalTime:i,currentStep:a,activeStep:o,stepStatus:c,isRunning:u,onApplyFix:d,onResetStep:h,onForceComplete:f,onAdjustTime:p,workSessionId:m,autoSaveInterval:g=5e3,troubleshootHistory:b=[]}=t;const[v,y]=(0,e.useState)(null),[w,x]=(0,e.useState)(s),[k,_]=(0,e.useState)(!1),[S,j]=(0,e.useState)(""),[N,T]=(0,e.useState)(Date.now()),[E,C]=(0,e.useState)(!1),[I,A]=(0,e.useState)(null),[M,O]=(0,e.useState)(""),[R,D]=(0,e.useState)(!1),[P,L]=(0,e.useState)(""),[F,B]=(0,e.useState)(""),[U,z]=(0,e.useState)(s),[V,H]=(0,e.useState)("slider"),[W,q]=(0,e.useState)({}),[K,G]=(0,e.useState)(null),[$,X]=(0,e.useState)(!1),Y="string"===typeof(null===o||void 0===o?void 0:o.maxTime)?parseInt(o.maxTime,10):(null===o||void 0===o?void 0:o.maxTime)||0,Q=k?Y:w,J=Y>0&&s>Y;(0,e.useEffect)(()=>{if(n){y(null),x(s),z(s),_(!1),j(""),C(!1),D(!1);const e=new Date,t=new Date(e.getTime()-1e3*s);L(t.toISOString().slice(0,16)),B(e.toISOString().slice(0,16))}},[n,s]),(0,e.useEffect)(()=>{if(!n||!m)return;const e=setInterval(()=>{const e=Date.now();e-N>=g&&(Z(),T(e))},1e3);return()=>clearInterval(e)},[n,m,N,g]);const Z=async()=>{try{const e={stepTime:s,totalTime:i,currentStep:a,stepStatus:c,lastAutoSave:(new Date).toISOString(),troubleshootActive:!0};console.log("\ud83d\udd04 Auto-saving troubleshoot progress:",e)}catch(pN){console.error("\u274c Auto-save failed:",pN)}},ee=(e,t)=>{q(n=>l(l({},n),{},{[e]:t}))},te=e=>{q(t=>l(l({},t),{},{[e]:!1}))},ne=()=>{D(!0)},re=()=>{if(P&&F){const e=new Date(P),t=new Date(F),n=Math.max(0,Math.floor((t-e)/1e3));z(n),x(n)}},se=[{id:"forgot_stop",title:"Lupa klik STOP",description:"Timer masih berjalan padahal sudah selesai bekerja",icon:"\u23f8\ufe0f",severity:"warning",tooltip:"Menghentikan timer dan menyesuaikan waktu sesuai durasi kerja sebenarnya",fixes:[{action:"stop_and_adjust",label:"Stop timer dan sesuaikan waktu",description:"Hentikan timer dan ubah waktu sesuai durasi kerja sebenarnya",tooltip:"Timer akan dihentikan dan waktu dapat disesuaikan manual",requiresConfirmation:!1},{action:"use_target_time",label:"Gunakan waktu target",description:"Gunakan waktu target (".concat(ES(Y),") sebagai waktu langkah"),tooltip:"Menggunakan waktu target yang telah ditetapkan untuk langkah ini",requiresConfirmation:!1}]},{id:"forgot_complete",title:"Sudah selesai tapi belum tandai selesai",description:'Langkah sudah selesai tapi lupa klik tombol "Selesai Langkah"',icon:"\u2705",severity:"info",tooltip:"Menandai langkah sebagai selesai tanpa mencatat waktu aktual yang tepat",fixes:[{action:"force_complete_current",label:"Tandai selesai dengan waktu saat ini",description:"Selesaikan langkah dengan waktu ".concat(ES(s)),tooltip:"Langkah akan ditandai selesai dengan waktu yang tertera saat ini",requiresConfirmation:!0,confirmMessage:"Langkah akan ditandai selesai dengan waktu saat ini. Tindakan ini akan mempengaruhi statistik waktu. Lanjutkan?"},{action:"force_complete_target",label:"Tandai selesai dengan waktu target",description:"Selesaikan langkah dengan waktu target (".concat(ES(Y),")"),tooltip:"Menggunakan waktu target sebagai waktu penyelesaian langkah",requiresConfirmation:!0,confirmMessage:"Langkah akan ditandai selesai dengan waktu target. Waktu aktual tidak akan tercatat. Lanjutkan?"}]},{id:"time_too_long",title:"Waktu terlalu panjang",description:"Timer berjalan lebih lama dari yang seharusnya",icon:"\u23f0",severity:"error",tooltip:"Mengatasi masalah waktu yang tidak sesuai dengan durasi kerja sebenarnya",fixes:[{action:"reset_step",label:"Reset dan mulai ulang langkah",description:"Kembalikan langkah ke status awal dan mulai dari 0",tooltip:"Semua progres langkah ini akan hilang dan dimulai dari awal",requiresConfirmation:!0,confirmMessage:"Yakin ingin menghapus seluruh progres langkah ini? Tindakan ini tidak bisa dibatalkan dan langkah akan kembali ke status belum dimulai."},{action:"adjust_to_target",label:"Sesuaikan ke waktu target",description:"Ubah waktu langkah menjadi ".concat(ES(Y)),tooltip:"Waktu langkah akan diubah menjadi waktu target yang ditetapkan",requiresConfirmation:!1}]},{id:"manual_time",title:"Perbaiki waktu manual",description:"Sesuaikan waktu secara manual sesuai kebutuhan",icon:"\ud83d\udd27",severity:"neutral",tooltip:"Memberikan kontrol penuh untuk menyesuaikan waktu langkah",fixes:[{action:"custom_time",label:"Masukkan waktu custom",description:"Tentukan waktu yang tepat secara manual",tooltip:"Anda dapat menentukan waktu dengan slider atau input datetime",requiresConfirmation:!1,customHandler:ne},{action:"revert_to_target",label:"Kembalikan ke waktu target",description:"Gunakan waktu target sebagai waktu langkah",tooltip:"Mengembalikan waktu ke nilai target default",requiresConfirmation:!1}]}],ie=e=>{const t={troubleshootType:e.optionId,fixAction:e.action,originalTime:s,adjustedTime:Q,reason:S,timestamp:(new Date).toISOString()};switch(e.action){case"stop_and_adjust":d(l({type:"STOP_AND_ADJUST",newStepTime:Q},t));break;case"use_target_time":d(l({type:"USE_TARGET_TIME",newStepTime:Y},t));break;case"force_complete_current":f(l({useCurrentTime:!0},t));break;case"force_complete_target":f(l({useTargetTime:!0,newStepTime:Y},t));break;case"reset_step":h(t);break;case"adjust_to_target":case"revert_to_target":p(l({newStepTime:Y},t));break;case"custom_time":p(l({newStepTime:Q},t));break;default:console.warn("Unknown fix action:",e.action)}r()};return n?(0,qt.jsx)("div",{className:"troubleshoot-modal-overlay",children:(0,qt.jsxs)("div",{className:"troubleshoot-modal-content",children:[(0,qt.jsxs)("div",{className:"troubleshoot-modal-header",children:[(0,qt.jsx)("h3",{children:"\u26a0\ufe0f Troubleshoot Timer"}),(0,qt.jsxs)("div",{className:"header-actions",children:[$&&(0,qt.jsx)("button",{onClick:()=>{K&&$&&(d({type:"UNDO_ACTION",previousAction:K,timestamp:(new Date).toISOString()}),G(null),X(!1))},className:"undo-btn",title:"Batalkan tindakan terakhir",children:"\u23ea Undo"}),(0,qt.jsx)("button",{onClick:r,className:"troubleshoot-close-btn","aria-label":"Close",children:"\xd7"})]})]}),b.length>0&&(0,qt.jsxs)("div",{className:"troubleshoot-history",children:[(0,qt.jsx)("h4",{children:"Riwayat Perubahan:"}),(0,qt.jsx)("div",{className:"history-list",children:b.slice(-3).map((e,t)=>(0,qt.jsxs)("div",{className:"history-item",children:[(0,qt.jsx)("span",{className:"history-badge",children:"\u26a0\ufe0f Diubah Manual"}),(0,qt.jsx)("span",{className:"history-description",children:e.description}),(0,qt.jsx)("span",{className:"history-time",children:new Date(e.timestamp).toLocaleTimeString()})]},t))})]}),(0,qt.jsxs)("div",{className:"troubleshoot-status",children:[(0,qt.jsxs)("div",{className:"status-item",children:[(0,qt.jsx)("span",{className:"status-label",children:"Langkah Saat Ini:"}),(0,qt.jsx)("span",{className:"status-value",children:(null===o||void 0===o?void 0:o.title)||"N/A"})]}),(0,qt.jsxs)("div",{className:"status-item",children:[(0,qt.jsx)("span",{className:"status-label",children:"Waktu Langkah:"}),(0,qt.jsxs)("span",{className:"status-value ".concat(J?"over-target":""),children:[ES(s),J&&(0,qt.jsx)("span",{className:"warning-badge",children:"MELEBIHI TARGET"})]})]}),(0,qt.jsxs)("div",{className:"status-item",children:[(0,qt.jsx)("span",{className:"status-label",children:"Waktu Target:"}),(0,qt.jsx)("span",{className:"status-value",children:Y>0?ES(Y):"Tidak ada target"})]}),(0,qt.jsxs)("div",{className:"status-item",children:[(0,qt.jsx)("span",{className:"status-label",children:"Status:"}),(0,qt.jsx)("span",{className:"status-badge status-".concat(c),children:c===NS.IN_PROGRESS?"Sedang Berjalan":c===NS.COMPLETED?"Selesai":c===NS.SKIPPED?"Dilewati":"Belum Dimulai"})]})]}),(0,qt.jsxs)("div",{className:"troubleshoot-options",children:[(0,qt.jsx)("h4",{children:"Pilih masalah yang terjadi:"}),se.map(e=>(0,qt.jsxs)("div",{className:"troubleshoot-option ".concat(e.severity),children:[(0,qt.jsxs)("div",{className:"option-header",children:[(0,qt.jsx)("span",{className:"option-icon",children:e.icon}),(0,qt.jsx)("h5",{children:e.title}),(0,qt.jsx)("button",{className:"info-tooltip-btn",onMouseEnter:()=>ee(e.id,e.tooltip),onMouseLeave:()=>te(e.id),children:"\u2139\ufe0f"}),W[e.id]&&(0,qt.jsx)("div",{className:"tooltip",children:W[e.id]})]}),(0,qt.jsx)("p",{className:"option-description",children:e.description}),(0,qt.jsx)("div",{className:"option-fixes",children:e.fixes.map((t,n)=>(0,qt.jsxs)("div",{className:"fix-wrapper",children:[(0,qt.jsxs)("button",{onClick:()=>{return n=e.id,r=t.action,s=t.label,i=t.description,void y({optionId:n,action:r,label:s,description:i});var n,r,s,i},className:"fix-button ".concat((null===v||void 0===v?void 0:v.action)===t.action?"selected":""),children:[(0,qt.jsx)("span",{className:"fix-label",children:t.label}),(0,qt.jsx)("small",{className:"fix-description",children:t.description}),t.requiresConfirmation&&(0,qt.jsx)("span",{className:"confirmation-indicator",children:"\ud83d\udd12 Butuh konfirmasi"})]}),(0,qt.jsx)("button",{className:"fix-tooltip-btn",onMouseEnter:()=>ee("".concat(e.id,"-").concat(n),t.tooltip),onMouseLeave:()=>te("".concat(e.id,"-").concat(n)),children:"\u2139\ufe0f"}),W["".concat(e.id,"-").concat(n)]&&(0,qt.jsx)("div",{className:"tooltip",children:W["".concat(e.id,"-").concat(n)]})]},n))})]},e.id))]}),"custom_time"===(null===v||void 0===v?void 0:v.action)&&!R&&(0,qt.jsxs)("div",{className:"custom-time-section",children:[(0,qt.jsx)("h4",{children:"Sesuaikan Waktu:"}),(0,qt.jsxs)("div",{className:"time-input-group",children:[(0,qt.jsxs)("div",{className:"time-option",children:[(0,qt.jsxs)("label",{children:[(0,qt.jsx)("input",{type:"radio",checked:!k,onChange:()=>_(!1)}),"Waktu Custom (detik):"]}),(0,qt.jsx)("input",{type:"number",value:w,onChange:e=>x(parseInt(e.target.value,10)||0),disabled:k,min:"0",className:"time-input"}),(0,qt.jsxs)("span",{className:"time-preview",children:["= ",ES(w)]})]}),Y>0&&(0,qt.jsx)("div",{className:"time-option",children:(0,qt.jsxs)("label",{children:[(0,qt.jsx)("input",{type:"radio",checked:k,onChange:()=>_(!0)}),"Gunakan Waktu Target: ",ES(Y)]})}),(0,qt.jsx)("button",{onClick:ne,className:"advanced-time-btn",children:"\ud83d\udd27 Penyesuaian Waktu Lanjutan"})]})]}),R&&(0,qt.jsxs)("div",{className:"time-adjustment-modal",children:[(0,qt.jsxs)("div",{className:"time-adjustment-header",children:[(0,qt.jsx)("h4",{children:"Penyesuaian Waktu Lanjutan"}),(0,qt.jsx)("button",{onClick:()=>D(!1),children:"\xd7"})]}),(0,qt.jsxs)("div",{className:"time-adjustment-modes",children:[(0,qt.jsxs)("label",{children:[(0,qt.jsx)("input",{type:"radio",checked:"slider"===V,onChange:()=>H("slider")}),"Slider Durasi"]}),(0,qt.jsxs)("label",{children:[(0,qt.jsx)("input",{type:"radio",checked:"datetime"===V,onChange:()=>H("datetime")}),"Waktu Mulai & Selesai"]})]}),"slider"===V&&(0,qt.jsxs)("div",{className:"slider-mode",children:[(0,qt.jsxs)("label",{children:["Durasi: ",ES(U)]}),(0,qt.jsx)("input",{type:"range",min:"0",max:Math.max(3600,2*s),value:U,onChange:e=>{return t=parseInt(e.target.value),z(t),void x(t);var t},className:"duration-slider"}),(0,qt.jsxs)("div",{className:"slider-markers",children:[(0,qt.jsx)("span",{children:"0:00"}),(0,qt.jsxs)("span",{children:["Target: ",ES(Y)]}),(0,qt.jsxs)("span",{children:["Saat ini: ",ES(s)]})]})]}),"datetime"===V&&(0,qt.jsxs)("div",{className:"datetime-mode",children:[(0,qt.jsxs)("div",{className:"datetime-input",children:[(0,qt.jsx)("label",{children:"Waktu Mulai:"}),(0,qt.jsx)("input",{type:"datetime-local",value:P,onChange:e=>{L(e.target.value),re()}})]}),(0,qt.jsxs)("div",{className:"datetime-input",children:[(0,qt.jsx)("label",{children:"Waktu Selesai:"}),(0,qt.jsx)("input",{type:"datetime-local",value:F,onChange:e=>{B(e.target.value),re()}})]}),(0,qt.jsxs)("div",{className:"duration-preview",children:["Durasi: ",ES(Math.max(0,Math.floor((new Date(F)-new Date(P))/1e3)))]})]}),(0,qt.jsxs)("div",{className:"time-adjustment-actions",children:[(0,qt.jsx)("button",{onClick:()=>{const e="datetime"===V?Math.floor((new Date(F)-new Date(P))/1e3):U,t={optionId:"manual_time",action:"custom_time",label:"Waktu disesuaikan manual",description:"Waktu diubah menjadi ".concat(ES(e))};p({newStepTime:e,troubleshootType:"manual_time",fixAction:"custom_time",originalTime:s,adjustedTime:e,reason:S,adjustmentMode:V,timestamp:(new Date).toISOString()}),G(t),X(!0),D(!1),r()},className:"apply-time-btn",children:"Terapkan Waktu"}),(0,qt.jsx)("button",{onClick:()=>D(!1),className:"cancel-time-btn",children:"Batal"})]})]}),v&&!R&&(0,qt.jsxs)("div",{className:"fix-preview",children:[(0,qt.jsx)("h4",{children:"Tindakan yang akan dilakukan:"}),(0,qt.jsxs)("div",{className:"preview-content",children:[(0,qt.jsx)("strong",{children:v.label}),(0,qt.jsx)("p",{children:v.description}),("stop_and_adjust"===v.action||"custom_time"===v.action||"force_complete_target"===v.action)&&(0,qt.jsxs)("p",{className:"time-change",children:["Waktu akan diubah menjadi: ",(0,qt.jsx)("strong",{children:ES(Q)})]})]})]}),E&&(0,qt.jsx)("div",{className:"confirmation-overlay",children:(0,qt.jsxs)("div",{className:"confirmation-modal",children:[(0,qt.jsx)("h4",{children:"\u26a0\ufe0f Konfirmasi Tindakan"}),(0,qt.jsx)("p",{children:M}),(0,qt.jsxs)("div",{className:"confirmation-actions",children:[(0,qt.jsx)("button",{onClick:()=>{I&&(ie(I),G(I),X(!0)),C(!1),A(null)},className:"confirm-btn",children:"Ya, Lanjutkan"}),(0,qt.jsx)("button",{onClick:()=>{C(!1),A(null),O("")},className:"cancel-btn",children:"Batal"})]})]})}),!R&&(0,qt.jsxs)("div",{className:"troubleshoot-actions",children:[(0,qt.jsx)("button",{onClick:()=>{var e;if(!v)return;const t={optionId:v.optionId,action:v.action,label:v.label,description:v.description},n=null===(e=se.find(e=>e.id===v.optionId))||void 0===e?void 0:e.fixes.find(e=>e.action===v.action);var s,i;null!==n&&void 0!==n&&n.requiresConfirmation?(s=t,i=n.confirmMessage,A(s),O(i),C(!0)):null!==n&&void 0!==n&&n.customHandler?n.customHandler():(ie(t),G(t),X(!0),r())},disabled:!v,className:"apply-fix-btn",children:"Terapkan Perbaikan"}),(0,qt.jsx)("button",{onClick:r,className:"cancel-btn",children:"Batal"})]}),(0,qt.jsx)("div",{className:"auto-save-indicator",children:(0,qt.jsxs)("small",{children:["\ud83d\udcbe Progress disimpan otomatis setiap ",g/1e3," detik"]})})]})}):null},qS=()=>{var t,n,r,s;const i=he(),{taskId:a}=fe(),o=ce(),c=(0,e.useRef)(null),u=(0,e.useRef)(null),d=(0,e.useRef)(0),[h,f]=(0,e.useState)({currentUser:null,currentUserId:null,currentUserName:null,userRole:null,isLoading:!0}),[p,m]=(0,e.useState)(()=>{var e;if(null!==(e=o.state)&&void 0!==e&&e.selectedTask)return o.state.selectedTask;try{const e=localStorage.getItem("currentTask");if(e)return JSON.parse(e)}catch(le){console.error("Error loading saved task:",le)}return null}),[g,b]=(0,e.useState)(null),[v,y]=(0,e.useState)([]),[w,x]=(0,e.useState)(0),[k,_]=(0,e.useState)(!1),[S,j]=(0,e.useState)(0),[N,T]=(0,e.useState)(0),[E,C]=(0,e.useState)([]),[I,A]=(0,e.useState)([]),[M,O]=(0,e.useState)(null),[R,D]=(0,e.useState)(null),[P,L]=(0,e.useState)([]),[F,B]=(0,e.useState)({}),[U,z]=(0,e.useState)(!1),[V,H]=(0,e.useState)(!1),[W,q]=(0,e.useState)(!1),[K,G]=(0,e.useState)(!1),[$,X]=(0,e.useState)(!1),[Y,Q]=(0,e.useState)(!1),[J,Z]=(0,e.useState)(!1),[ee,te]=(0,e.useState)(!1),[ne,re]=(0,e.useState)(!1),[se,ie]=(0,e.useState)(!1),[ae,oe]=(0,e.useState)(!1),[le,ue]=(0,e.useState)(null),[de,pe]=(0,e.useState)(!1),[me,ge]=(0,e.useState)(null),[be,ve]=(0,e.useState)(""),[ye,we]=(0,e.useState)({}),[xe,ke]=(0,e.useState)(!0),[_e,Se]=(0,e.useState)(!1),[je,Ne]=(0,e.useState)(!1),[Te,Ee]=(0,e.useState)(Date.now()),[Ce,Ie]=(0,e.useState)([]),[Ae,Me]=(0,e.useState)(!1),[Oe,Re]=(0,e.useState)(new Set),[De,Pe]=(0,e.useState)(""),{currentUser:Le,currentUserId:Fe,currentUserName:Be,userRole:Ue,isLoading:ze}=h,Ve=(0,e.useMemo)(()=>v[w]||{},[v,w]),He=(0,e.useMemo)(()=>w===v.length-1,[w,v.length]),We=(0,e.useMemo)(()=>I.filter(e=>e===NS.COMPLETED).length,[I]),qe=(0,e.useMemo)(()=>{const e=Ve.maxTime;if("string"===typeof e){const t=parseInt(e,10);return isNaN(t)?0:t}return e||0},[Ve.maxTime]),Ke=(0,e.useMemo)(()=>v.reduce((e,t)=>{const n=t.maxTime;if("string"===typeof n){const t=parseInt(n,10);return e+(isNaN(t)?0:t)}return e+(n||0)},0),[v]),Ge=(0,e.useMemo)(()=>qe>0&&S>qe,[qe,S]),$e=(0,e.useMemo)(()=>{if(null===R||void 0===R||!R.data)return[];const e=R.data,t=e.participants||[],n=new Set;t.forEach(e=>n.add(e.userId)),Object.values(F||{}).forEach(e=>{Array.isArray(e)?e.forEach(e=>n.add(e)):n.add(e)}),Object.values(e.stepCompletedBy||{}).forEach(e=>n.add(e.userId)),e.createdBy&&n.add(e.createdBy),e.operatorId&&n.add(e.operatorId);const r=Array.from(n).map(n=>{let r=t.find(e=>e.userId===n);if(!r){let t="Unknown User";const s=Object.values(e.stepCompletedBy||{}).find(e=>e.userId===n);null!==s&&void 0!==s&&s.userName&&(t=s.userName),n===e.operatorId&&e.operatorName&&(t=e.operatorName),r={userId:n,userName:t,joinedAt:e.createdAt||Rl.now(),isActive:!0,role:n===e.createdBy?"creator":"participant"}}const s=Object.values(e.stepCompletedBy||{}).filter(e=>e.userId===n).length;return l(l({},r),{},{contributions:{completed:s,total:s},isCurrentUser:n===Fe,isCreator:n===e.createdBy})});return r.sort((e,t)=>e.isCreator&&!t.isCreator?-1:!e.isCreator&&t.isCreator?1:e.isCurrentUser&&!t.isCurrentUser?-1:!e.isCurrentUser&&t.isCurrentUser?1:t.contributions.total-e.contributions.total)},[R,F,Fe]),Xe=((0,e.useMemo)(()=>$e.filter(e=>e.userId!==Fe),[$e,Fe]),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log("[".concat(t.toUpperCase(),"] ").concat(e))}),Ye=(0,e.useCallback)((e,t)=>t<=0||e<=0?0:Math.round(t/e*100),[]),Qe=((0,e.useCallback)(e=>"task_session_".concat(e),[]),(0,e.useCallback)(e=>(console.log("\ud83d\uddbc\ufe0f Extracting image URLs from steps:",e),e.map((e,t)=>{let n=[];if(e.imageUrls&&Array.isArray(e.imageUrls))n=e.imageUrls.filter(e=>e&&"string"===typeof e&&""!==e.trim());else if(e.imageUrls&&"string"===typeof e.imageUrls){const t=e.imageUrls.trim();t.includes(",")?n=t.split(",").map(e=>e.trim()).filter(e=>""!==e):""!==t&&(n=[t])}return console.log("\ud83d\uddbc\ufe0f Step ".concat(t," (").concat(e.title,"): Found ").concat(n.length," images"),n),n})),[])),Je=(0,e.useCallback)(e=>{console.log("\u2705 Images loaded callback triggered:",e),we(e),pe(!1)},[]),Ze=(0,e.useMemo)(()=>g?Qe(v):[],[g,v,Qe]),et=(0,e.useCallback)(()=>{console.log("\ud83e\uddf9 Cleaning up TaskPage..."),c.current&&(c.current(),c.current=null),u.current&&(clearInterval(u.current),u.current=null)},[]),tt=(0,e.useCallback)(e=>Array.isArray(e)?e:e?[e]:[],[]),nt=(0,e.useCallback)(e=>{var t,n;if(null===R||void 0===R||null===(t=R.data)||void 0===t||null===(n=t.stepNotes)||void 0===n||!n[e])return[];const r=R.data.stepNotes[e];return(Array.isArray(r)?r:Object.values(r).filter(e=>e&&"object"===typeof e)).sort((e,t)=>{var n,r,s,i,a,o,l,c;const u=(null===e||void 0===e||null===(n=e.timestamp)||void 0===n||null===(r=n.toMillis)||void 0===r?void 0:r.call(n))||(null===e||void 0===e||null===(s=e.createdAt)||void 0===s||null===(i=s.toMillis)||void 0===i?void 0:i.call(s))||0;return((null===t||void 0===t||null===(a=t.timestamp)||void 0===a||null===(o=a.toMillis)||void 0===o?void 0:o.call(a))||(null===t||void 0===t||null===(l=t.createdAt)||void 0===l||null===(c=l.toMillis)||void 0===c?void 0:c.call(l))||0)-u})},[R]),rt=(0,e.useCallback)(()=>{const e=tt(F[w]||[]);if(0===e.length)return!0;if(e.includes(Fe))return!0;return nt(w).filter(e=>e.note&&(e.note.toLowerCase().includes("selesai")||e.note.toLowerCase().includes("done")||e.note.toLowerCase().includes("lanjut")||e.note.toLowerCase().includes("complete"))).length>0},[F,w,Fe,nt,tt]),st=(0,e.useCallback)(()=>{if(tt(F[w]||[]).length<=1)return!1;const e=nt(w).filter(e=>e.userId===Fe);if(0===e.length)return!0;const t=e[0];return!(t.note&&(t.note.toLowerCase().includes("selesai")||t.note.toLowerCase().includes("done")||t.note.toLowerCase().includes("complete")))},[F,w,Fe,nt,tt]),it=(0,e.useCallback)(async e=>{try{const t=Nw(Ly(Z_,"workSessions"),Ew("taskId","==",e.id),Ew("isActive","==",!0)),n=await qw(t);if(!n.empty){const e=n.docs.map(e=>({id:e.id,data:e.data()}));return console.log("\ud83d\udd0d Found existing active sessions:",e.length),e}return[]}catch(le){return console.error("\u274c Error finding existing sessions:",le),[]}},[]),at=(0,e.useCallback)(async e=>{if(!Fe||!Be)throw new Error("User not authenticated or name missing");try{console.log("\ud83c\udd95 Creating new work session for task:",e.id);const t=e.steps.map(e=>{const t=e.maxTime;if("string"===typeof t){const e=parseInt(t,10);return isNaN(e)?0:e}return t||0}),n=t.reduce((e,t)=>e+t,0),r={type:"work_session",taskId:e.id,moNumber:e.moNumber,moDisplay:e.moDisplay,workInstructionTitle:e.title,taskName:e.title,startTime:Rl.now(),currentStep:0,stepStatuses:e.steps.map(()=>NS.PENDING),stepCompletionTimes:new Array(e.steps.length).fill(0),stepTimes:new Array(e.steps.length).fill(0),stepTargetTimes:t,totalTargetTime:n,targetTime:n,totalSteps:e.steps.length,totalTime:0,stepOperators:{},stepCompletedBy:{},stepStartedBy:{},stepSkippedBy:{},stepStoppedBy:{},stepNotes:{},isActive:!0,status:"in_progress",createdBy:Fe,createdAt:Rl.now(),lastUpdated:Rl.now(),troubleshootHistory:[],operatorId:Fe,operatorName:Be||"Unknown User",participants:[{userId:Fe,userName:Be||"Unknown User",joinedAt:Rl.now(),isActive:!0,role:"creator"}],workInstructionData:{id:e.id,title:e.title,steps:e.steps,category:e.category||"Unknown"},finalEfficiency:0,finalTotalTime:0,finalStepStatuses:{},finalData:null},s=await Xw(Ly(Z_,"workSessions"),r);return console.log("\u2705 Created session with operator name:",Be),{id:s.id,data:r}}catch(le){throw console.error("\u274c Error creating work session:",le),le}},[Fe,Be]),ot=(0,e.useCallback)(async(e,t)=>{try{const n=Fy(Z_,"workSessions",e),r=await Hw(n);if(r.exists()){const e=r.data().participants||[],s=e.findIndex(e=>e.userId===t.userId);if(-1===s){const r=[...e,t];await Gw(n,{participants:r,lastUpdated:nx()}),console.log("\u2795 Added participant to session:",t.userName)}else{const r=[...e];r[s]=l(l({},r[s]),{},{isActive:!0,rejoinedAt:Rl.now()}),await Gw(n,{participants:r,lastUpdated:nx()}),console.log("\ud83d\udd04 Reactivated participant:",t.userName)}}}catch(le){console.error("\u274c Error adding participant to session:",le)}},[]),lt=(0,e.useCallback)(async e=>{if(Fe)try{const t=Fy(Z_,"workSessions",e),n=await Hw(t);if(n.exists()){const e=n.data(),r=(e.participants||[]).map(e=>e.userId===Fe?l(l({},e),{},{isActive:!1,leftAt:Rl.now()}):e);await Gw(t,{participants:r,lastUpdated:nx()}),console.log("\u2796 Removed participant from session")}}catch(le){console.error("\u274c Error removing participant from session:",le)}},[Fe]),ct=(0,e.useCallback)(async e=>{if(!M||!Fe)return!1;try{const t=Fy(Z_,"workSessions",M),n=await Hw(t);if(n.exists()){const r=n.data().stepOperators||{},s=r[e]||[],i=tt(s);if(i.includes(Fe))return console.log("\u2705 User ".concat(Fe," already has access to step ").concat(e)),!0;const a=[...i,Fe],o=l(l({},r),{},{[e]:a});return await Gw(t,{stepOperators:o,lastUpdated:nx()}),console.log("\ud83c\udfc6 Added ".concat(Fe," to step ").concat(e," operators:"),a),!0}return!1}catch(le){return console.error("\u274c Error claiming step ownership:",le),!1}},[M,Fe,tt]),ut=(0,e.useCallback)(async e=>{if(M&&Fe)try{const t=Fy(Z_,"workSessions",M),n=await Hw(t);if(n.exists()){const r=n.data().stepOperators||{},s=r[e]||[],i=tt(s).filter(e=>e!==Fe),a=l({},r);0===i.length?delete a[e]:a[e]=i,await Gw(t,{stepOperators:a,lastUpdated:nx()}),console.log("\ud83d\udd13 Released step ".concat(e," ownership for user ").concat(Fe))}}catch(le){console.error("\u274c Error releasing step ownership:",le)}},[M,Fe,tt]),dt=(0,e.useCallback)(e=>{console.log("\ud83d\udd17 Setting up real-time listeners for session:",e),c.current&&(c.current(),c.current=null);const t=Yw(Fy(Z_,"workSessions",e),e=>{if(e.exists()){const t=e.data(),n=Date.now();if(n-d.current<500)return void console.log("\u23ed Skipping rapid sync update");d.current=n,console.log("\ud83d\udce1 Real-time session update received:",t.currentStep),D({id:e.id,data:t}),L(t.participants||[]);const r={};Object.entries(t.stepOperators||{}).forEach(e=>{let[t,n]=e;r[t]=tt(n)}),B(r);const s=(r[w]||[]).includes(Fe)&&k;s||x(e=>{const n=t.currentStep||0;return e!==n?(console.log("\ud83d\udd04 Step synced from ".concat(e," to ").concat(n)),ie(!0),setTimeout(()=>ie(!1),3e3),n):e}),A(t.stepStatuses||[]),C(t.stepCompletionTimes||[]),k&&s||T(t.totalTime||0),Ie(t.troubleshootHistory||[]),t.isActive||"completed"!==t.status||(console.log("\ud83c\udf89 Session completed, showing completion modal"),_(!1),q(!0))}else console.log("\ud83d\udce1 Session document no longer exists"),D(null)},e=>{console.error("\u274c Real-time session listener error:",e)});return c.current=t,t},[k,w,Fe,tt]),ht=(0,e.useCallback)(async()=>{if(p&&M&&Fe){console.log("\ud83d\ude80 Starting step in concurrent mode with coordination");try{var e;if(!await ct(w))return void console.error("\u274c Failed to claim step ownership");_(!0),j(0),te(!1),Se(!1),Ne(!1);const t=[...I];t[w]!==NS.IN_PROGRESS&&(t[w]=NS.IN_PROGRESS,A(t));const n=Fy(Z_,"workSessions",M);await Gw(n,{currentStep:w,stepStatuses:t,["stepStartedBy.".concat(w,".").concat(Fe)]:{userId:Fe,userName:Be,startedAt:Rl.now(),individualStepTime:0},operatorId:Fe,operatorName:Be,lastUpdated:nx()});const r={id:"start_".concat(Fe,"_").concat(Date.now()),userId:Fe,userName:Be,note:"\ud83d\ude80 Saya mulai mengerjakan step ini",timestamp:Rl.now(),stepIndex:w,stepTitle:(null===Ve||void 0===Ve?void 0:Ve.title)||"Step ".concat(w+1),isSystemNote:!0},s=(null===R||void 0===R||null===(e=R.data.stepNotes)||void 0===e?void 0:e[w])||[],i=[...Array.isArray(s)?s:[],r];await Gw(n,{["stepNotes.".concat(w)]:i}),console.log("\u25b6\ufe0f ".concat(Be," joined step ").concat(w+1," with coordination note"))}catch(le){console.error("\u274c Error starting step in concurrent mode:",le),_(!1)}}},[p,M,w,I,ct,Fe,Be,Ve,R]),ft=(0,e.useCallback)(async()=>{if(p&&M&&Fe){if(!rt())return Xe("Koordinasi dengan tim terlebih dahulu sebelum menyelesaikan step ini","warning"),void Z(!0);try{var e;_(!1);const t=[...I];t[w]=NS.COMPLETED,A(t);const n=[...E];n[w]=S,C(n);const r=N+S;T(r);const s=[...(null===R||void 0===R?void 0:R.data.stepTimes)||new Array(v.length).fill(0)];s[w]=S;const i=w+1,a=i>=v.length,o=Fy(Z_,"workSessions",M),c={currentStep:a?w:i,stepStatuses:t,stepCompletionTimes:n,stepTimes:s,totalTime:r,["stepCompletedBy.".concat(w)]:{userId:Fe,userName:Be,completedAt:Rl.now(),completionTime:S,activeOperators:tt(F[w]||[]),teamSize:tt(F[w]||[]).length},operatorId:Fe,operatorName:Be||"Unknown User",status:a?"completed":"in_progress",lastUpdated:nx()},u=l({},F);if(delete u[w],c.stepOperators=u,a){const e=Ye(r,Ke);c.isActive=!1,c.completedAt=Rl.now(),c.endTime=Rl.now(),c.finalStepStatuses=t,c.finalTotalTime=r,c.finalEfficiency=e,c.finalData={targetTime:Ke,totalTargetTime:Ke,actualTime:r,efficiency:e,stepStatuses:t,stepTimes:s,stepCompletionTimes:n,stepTargetTimes:(null===R||void 0===R?void 0:R.data.stepTargetTimes)||[],totalTime:r,troubleshootHistory:Ce||[],completedAt:Rl.now(),operatorId:Fe,operatorName:Be||"Unknown User",sessionParticipants:$e.length,teamWork:$e.length>1,completedBy:Be||"Unknown User",taskId:p.id,moNumber:p.moNumber,moDisplay:p.moDisplay,workInstructionTitle:p.title,concurrentModeStats:{totalOperators:$e.length,stepsWithMultipleOperators:Object.values(F).filter(e=>tt(e).length>1).length,averageOperatorsPerStep:Object.values(F).reduce((e,t)=>e+tt(t).length,0)/Math.max(Object.keys(F).length,1)}},q(!0),console.log("\ud83c\udf89 Task completed in concurrent mode with enhanced analytics!")}else x(i),j(0),await ut(w),Re(e=>{const t=new Set(e);return t.delete(i),t});await Gw(o,c);const d={id:"completion_".concat(Fe,"_").concat(Date.now()),userId:Fe,userName:Be,note:"\u2705 Step ".concat(w+1," telah saya selesaikan"),timestamp:Rl.now(),stepIndex:w,stepTitle:(null===Ve||void 0===Ve?void 0:Ve.title)||"Step ".concat(w+1),isSystemNote:!0},h=(null===R||void 0===R||null===(e=R.data.stepNotes)||void 0===e?void 0:e[w])||[],f=[...Array.isArray(h)?h:[],d];await Gw(o,{["stepNotes.".concat(w)]:f})}catch(le){console.error("\u274c Error completing step in concurrent mode:",le)}}},[p,M,w,I,E,S,N,Fe,Be,ut,Ye,Ke,null===R||void 0===R?void 0:R.data,Ce,$e,v.length,F,rt,Xe,Ve,tt]),pt=(0,e.useCallback)(async()=>{_(!1),te(!0);const e=[...I];if(e[w]===NS.IN_PROGRESS&&(e[w]=NS.PENDING,A(e)),M&&Fe)try{await ut(w);const t=Fy(Z_,"workSessions",M);await Gw(t,{stepStatuses:e,totalTime:N,["stepStoppedBy.".concat(w)]:{userId:Fe,userName:Be,stoppedAt:Rl.now(),stoppedAtTime:S},lastUpdated:nx()})}catch(le){console.error("\u274c Error updating stop in session:",le)}setTimeout(()=>{te(!1)},2e3),console.log("\u23f8\ufe0f Step stopped with real-time sync")},[w,I,N,S,M,ut,Fe,Be]),mt=(0,e.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(p&&M&&Fe)try{const t=[...I];t[w]=NS.SKIPPED,A(t);const n=[...E];n[w]=0,C(n);const r=[...(null===R||void 0===R?void 0:R.data.stepTimes)||new Array(v.length).fill(0)];r[w]=0;const s=w+1,i=s>=v.length,a=Fy(Z_,"workSessions",M),o={currentStep:i?w:s,stepStatuses:t,stepCompletionTimes:n,stepTimes:r,totalTime:N,["stepSkippedBy.".concat(w)]:{userId:Fe,userName:Be||"Unknown User",skippedAt:Rl.now(),reason:e,skippedAtTime:S},operatorId:Fe,operatorName:Be||"Unknown User",lastUpdated:nx()};if(_(!1),j(0),await ut(w),i){const e=Ye(N,Ke);o.isActive=!1,o.status="completed",o.completedAt=Rl.now(),o.endTime=Rl.now(),o.finalEfficiency=e,o.finalTotalTime=N,o.finalStepStatuses=t,o.finalData={targetTime:Ke,efficiency:e,stepStatuses:t,stepTimes:r,totalTime:N,troubleshootHistory:Ce||[],operatorName:Be||"Unknown User",completedBy:Be||"Unknown User"},q(!0)}else x(s),Re(e=>{const t=new Set(e);return t.delete(s),t});await Gw(a,o),console.log("\u2b50 Step ".concat(w+1," skipped by: ").concat(Be))}catch(le){console.error("\u274c Error skipping step:",le)}},[p,M,w,I,E,S,N,Fe,Be,ut,null===R||void 0===R?void 0:R.data,v.length,Ye,Ke,Ce]),gt=(0,e.useCallback)(async()=>{if(_(!1),x(0),j(0),T(0),q(!1),C([]),te(!1),Ie([]),Re(new Set),p&&M&&Fe){const e=v.map(()=>NS.PENDING);A(e);try{const t=Fy(Z_,"workSessions",M);await Gw(t,{currentStep:0,stepStatuses:e,stepCompletionTimes:new Array(v.length).fill(0),stepTimes:new Array(v.length).fill(0),totalTime:0,stepOperators:{},troubleshootHistory:[],stepCompletedBy:{},stepStartedBy:{},stepSkippedBy:{},stepStoppedBy:{},stepNotes:{},resetBy:{userId:Fe,userName:Be,resetAt:Rl.now()},operatorId:Fe,operatorName:Be,status:"in_progress",isActive:!0,finalData:null,finalEfficiency:0,lastUpdated:nx()}),console.log("\ud83d\udd04 Task reset with clean slate and AdminPage compatibility")}catch(le){console.error("\u274c Error resetting task in session:",le)}}},[p,M,v,Fe,Be]),bt=(0,e.useCallback)(async e=>{if(e>=0&&e<v.length){if(x(e),j(0),_(!1),Se(!1),Ne(!1),Re(t=>{const n=new Set(t);return n.delete(e),n}),M)try{const t=Fy(Z_,"workSessions",M);await Gw(t,{currentStep:e,["stepNavigatedBy.".concat(e)]:{userId:Fe,userName:Be,navigatedAt:Rl.now(),fromStep:w},operatorId:Fe,operatorName:Be,lastUpdated:nx()})}catch(le){console.error("\u274c Error updating step navigation:",le)}console.log("\ud83c\udfaf Moved to step ".concat(e+1))}},[v.length,w,M,Fe,Be]),vt=(0,e.useCallback)(async e=>{if(Fe&&Be)try{Me(!0),await ot(e.id,{userId:Fe,userName:Be,joinedAt:Rl.now(),isActive:!0,role:"participant"}),O(e.id),D(e);const t=e.data;x(t.currentStep||0),A(t.stepStatuses||[]),C(t.stepCompletionTimes||[]),T(t.totalTime||0),Ie(t.troubleshootHistory||[]),B(t.stepOperators||{}),L(t.participants||[]),_(!1),j(0),Q(!1),dt(e.id),Me(!1),console.log("\ud83e\udd1d Successfully joined session with name:",Be)}catch(le){console.error("\u274c Error joining session:",le),Me(!1),Q(!1)}else console.error("\u274c Cannot join session: missing user info")},[Fe,Be,ot,dt]),yt=(0,e.useCallback)(async()=>{if(p&&Fe)try{Me(!0);const e=await at(p);O(e.id),D(e);const t=v.map(()=>NS.PENDING);A(t),x(0),T(0),C([]),Ie([]),B({}),L(e.data.participants||[]),Re(new Set),dt(e.id),Q(!1),Me(!1),console.log("\ud83c\udd95 Created and joined new session with AdminPage compatibility")}catch(le){console.error("\u274c Error creating new session:",le),Me(!1)}},[p,v,at,dt,Fe]),wt=(0,e.useCallback)(()=>{et(),M&&Fe&&lt(M),i("/mo-selection")},[i,M,Fe,lt,et]),xt=(0,e.useCallback)(()=>{me&&(x(me.currentStep||0),A(me.stepStatuses||[]),T(me.totalTime||0),C(me.stepCompletionTimes||[]),O(me.workSessionId),console.log("\ud83d\udd04 Resumed from existing progress")),z(!1),ge(null)},[me]),kt=(0,e.useCallback)(()=>{H(!0)},[]),_t=(0,e.useCallback)(e=>{mt(e),H(!1),ve("")},[mt]),St=(0,e.useCallback)(()=>{H(!1),ve("")},[]),jt=((0,e.useCallback)(()=>{G(!1)},[]),(0,e.useCallback)(()=>{_(!0),G(!1),Se(!1);const e=[...I];e[w]=NS.IN_PROGRESS,A(e),console.log("\u23f1\ufe0f Timer continued manually despite exceeding target time")},[I,w])),Nt=(0,e.useCallback)(()=>{ke(e=>!e)},[]),Tt=(0,e.useCallback)(()=>{X(!0)},[]),Et=(0,e.useCallback)(()=>{X(!1)},[]),Ct=(0,e.useCallback)(()=>{Z(!0)},[]),It=(0,e.useCallback)(async e=>{if(M&&Fe&&e.trim())try{var t;const n={id:"note_".concat(Fe,"_").concat(Date.now()),userId:Fe,userName:Be,note:e.trim(),timestamp:Rl.now(),stepIndex:w,stepTitle:(null===Ve||void 0===Ve?void 0:Ve.title)||"Step ".concat(w+1),isSystemNote:!1},r=Fy(Z_,"workSessions",M),s=(null===R||void 0===R||null===(t=R.data.stepNotes)||void 0===t?void 0:t[w])||[],i=[...Array.isArray(s)?s:[],n];await Gw(r,{["stepNotes.".concat(w)]:i,lastUpdated:nx()}),Pe(""),Z(!1),console.log("\ud83d\udcdd Step note saved by ".concat(Be,": ").concat(e.slice(0,50),"...")),Xe("Catatan langkah disimpan","success")}catch(le){console.error("\u274c Error saving step notes:",le),Xe("Gagal menyimpan catatan","error")}},[M,Fe,Be,w,Ve,R]),At=(0,e.useCallback)(async e=>{const t=l(l({},e),{},{id:Date.now(),stepIndex:w,stepTitle:null===Ve||void 0===Ve?void 0:Ve.title,userId:Fe,userName:Be,timestamp:Date.now()});if(Ie(e=>[...e,t]),M)try{const e=Fy(Z_,"workSessions",M),n=await Hw(e);if(n.exists()){const r=n.data().troubleshootHistory||[];await Gw(e,{troubleshootHistory:[...r,t],lastUpdated:nx()})}}catch(le){console.error("\u274c Error syncing troubleshoot history:",le)}},[w,null===Ve||void 0===Ve?void 0:Ve.title,Fe,Be,M]),Mt=(0,e.useCallback)(()=>I.map((e,t)=>({status:e,index:t})).filter(e=>e.status===NS.SKIPPED),[I]),Ot=e=>{let{stepIndex:t}=e;const n=tt(F[t]||[]),r=nt(t).slice(0,3);if(0===n.length&&I[t]===NS.PENDING)return(0,qt.jsxs)("div",{className:"coordination-status idle",children:[(0,qt.jsx)("span",{className:"status-icon",children:"\u23f8\ufe0f"}),(0,qt.jsx)("span",{className:"status-text",children:"Belum ada yang mengerjakan"})]});if(1===n.length){const e=$e.find(e=>e.userId===n[0]);return(0,qt.jsxs)("div",{className:"coordination-status single",children:[(0,qt.jsx)("span",{className:"status-icon",children:"\ud83d\udc64"}),(0,qt.jsxs)("span",{className:"status-text",children:[(null===e||void 0===e?void 0:e.userName)||"Unknown"," sedang bekerja",n[0]===Fe&&" (Anda)"]})]})}var s;return n.length>1?(0,qt.jsxs)("div",{className:"coordination-status multiple",children:[(0,qt.jsx)("span",{className:"status-icon",children:"\ud83d\udc65"}),(0,qt.jsxs)("span",{className:"status-text",children:[n.length," operator berkolaborasi"]}),(0,qt.jsx)("div",{className:"recent-activity",children:r.length>0&&(0,qt.jsxs)("small",{className:"last-activity",children:["Terakhir: ",r[0].userName," - ",null===(s=r[0].note)||void 0===s?void 0:s.slice(0,30),"..."]})})]}):null};return(0,e.useEffect)(()=>{const e=fa(Po(),async e=>{if(e)try{var t;const n=Fy(Z_,"users",e.uid),r=await Hw(n),s=r.exists()?r.data():{},i=s.displayName||e.displayName||(null===(t=e.email)||void 0===t?void 0:t.split("@")[0])||"Anonymous User";f({currentUser:e,currentUserId:e.uid,currentUserName:i,userRole:s.role||"user",isLoading:!1}),console.log("\ud83d\udd10 Auth state updated:",{uid:e.uid,name:i})}catch(le){var n;console.error("Error fetching user data:",le),f({currentUser:e,currentUserId:e.uid,currentUserName:e.displayName||(null===(n=e.email)||void 0===n?void 0:n.split("@")[0])||"Anonymous User",userRole:"user",isLoading:!1})}else f({currentUser:null,currentUserId:null,currentUserName:null,userRole:null,isLoading:!1}),i("/login")});return e},[i]),(0,e.useEffect)(()=>(k?u.current=setInterval(()=>{j(e=>{const t=e+1;if(t%30===0&&M){Gw(Fy(Z_,"workSessions",M),{["currentStepTime.".concat(w)]:t,totalTime:N+t,lastUpdated:nx()}).catch(e=>{console.error("\u274c Error syncing step time:",e)})}return t}),T(e=>e+1)},1e3):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&(clearInterval(u.current),u.current=null)}),[k,M,w,N]),(0,e.useEffect)(()=>{if(k&&xe&&qe>0&&S>=qe&&!_e){console.log("\u23f0 Auto-stop triggered: Step time ".concat(S,"s exceeded target ").concat(qe,"s")),Se(!0),G(!0),_(!1);const e=[...I];e[w]===NS.IN_PROGRESS&&(e[w]=NS.PENDING,A(e)),console.log("\u23f0 Timer auto-stopped due to exceeding target time")}},[k,S,qe,xe,_e,w,I]),(0,e.useEffect)(()=>{k&&Se(!1)},[k,w]),(0,e.useEffect)(()=>{if(!ze&&Fe&&p&&p.steps){console.log("\ud83c\udfaf Initializing task execution:",p);const e={id:p.id,title:p.title,steps:p.steps};b(e),y(p.steps),M||it(p).then(e=>{if(console.log("\ud83d\udd0d Session check result:",e.length,"active sessions found"),e.length>0){var t;const n=e.reduce((e,t)=>{var n,r;const s=(null===(n=e.data.lastUpdated)||void 0===n?void 0:n.toMillis())||0;return((null===(r=t.data.lastUpdated)||void 0===r?void 0:r.toMillis())||0)>s?t:e}),r=null===(t=n.data.participants)||void 0===t?void 0:t.some(e=>e.userId===Fe&&e.isActive);r?(console.log("\ud83e\udd1d User is already participant, auto-joining..."),vt(n)):(D(n),Q(!0))}else yt()}).catch(e=>{console.error("\u274c Error checking existing sessions:",e),ue("Failed to check existing work sessions")})}},[p,ze,Fe,M,it,yt,vt]),(0,e.useEffect)(()=>{if(!p&&!ze){var e;console.warn("\u26a0\ufe0f No task data found");document.referrer.includes("/mo-selection")||(null===(e=o.state)||void 0===e?void 0:e.fromMOSelection)||(console.log("\ud83d\udd04 Direct access detected, redirecting to MO selection"),i("/mo-selection",{state:{message:"Silakan pilih tugas terlebih dahulu"}}))}},[p,i,o.state,ze]),(0,e.useEffect)(()=>()=>{et()},[et]),ze||!Fe?(0,qt.jsx)(FS,{message:"Memuat data autentikasi..."}):p?g&&0!==v.length?(0,qt.jsxs)("div",{className:"task-page",children:[(0,qt.jsx)(MS,{workInstructionTitle:g.title,moNumber:p.moNumber,moDisplay:p.moDisplay,onEditMONumber:wt}),R&&P.length>1&&(0,qt.jsxs)("div",{className:"multi-user-status",children:[(0,qt.jsxs)("div",{className:"participants-info",children:[(0,qt.jsxs)("span",{className:"participants-label",children:["\ud83d\udc65 Tim Aktif (",P.filter(e=>e.isActive).length,"):"]}),P.filter(e=>e.isActive).map(e=>(0,qt.jsxs)("span",{className:"participant ".concat(e.userId===Fe?"current-user":""),children:[e.userName,tt(F[w]).includes(e.userId)&&" \ud83c\udfaf",e.userId===(null===R||void 0===R?void 0:R.data.createdBy)&&" \ud83d\udc51"]},e.userId))]}),tt(F[w]).length>0&&(0,qt.jsxs)("div",{className:"step-ownership-info",children:["\u26a1 Step ",w+1," sedang dikerjakan oleh"," ",(0,qt.jsx)("strong",{children:tt(F[w]).map(e=>{var t;return(null===(t=P.find(t=>t.userId===e))||void 0===t?void 0:t.userName)||"operator lain"}).join(", ")})]}),Ke>0&&(0,qt.jsxs)("div",{className:"efficiency-info",children:["\ud83c\udfaf Target waktu total: ",TS(Ke)," | Saat ini: ",TS(N)]}),(0,qt.jsxs)("div",{className:"sync-status",children:["\ud83d\udd04 Sinkronisasi real-time aktif | Terakhir update: ",(new Date).toLocaleTimeString()]})]}),(0,qt.jsx)(OS,{completedSteps:We,totalSteps:v.length}),(0,qt.jsx)(DS,{totalTime:N,stepTime:S,targetTime:qe,showWarning:ne,isOverTarget:Ge}),(0,qt.jsx)(RS,{stepStatuses:I,currentStep:w,steps:v,onGoToStep:bt,isTeamMode:!0,stepOperators:F,sessionParticipants:$e,currentUserId:Fe,showOperatorCount:!0,showCoordinationStatus:!0,getStepNotes:nt}),P.length>1&&(0,qt.jsxs)("div",{className:"concurrent-mode-status",children:[(0,qt.jsxs)("h4",{children:["STATUS KOLABORASI STEP ",w+1]}),(0,qt.jsx)(Ot,{stepIndex:w}),nt(w).length>0&&(0,qt.jsxs)("div",{className:"step-coordination-preview",children:[(0,qt.jsx)("h5",{children:"\ud83d\udcac Komunikasi Tim Terbaru:"}),(0,qt.jsx)("div",{className:"recent-notes",children:nt(w).slice(0,3).map((e,t)=>{var n,r,s;return(0,qt.jsxs)("div",{className:"coordination-note",children:[(0,qt.jsxs)("span",{className:"note-author",children:[e.userName,":"]}),(0,qt.jsx)("span",{className:"note-text",children:e.note}),(0,qt.jsx)("span",{className:"note-time",children:(null===(n=e.timestamp)||void 0===n||null===(r=n.toDate)||void 0===r||null===(s=r.call(n))||void 0===s?void 0:s.toLocaleTimeString())||"Unknown time"})]},e.id||t)})}),nt(w).length>3&&(0,qt.jsxs)("button",{onClick:Ct,className:"view-all-notes-btn",children:["Lihat semua catatan (",nt(w).length,")"]})]})]}),Ze&&Ze.length>0&&(0,qt.jsx)(HS,{images:Ze,onImagesLoaded:Je}),(0,qt.jsx)(PS,{activeStep:Ve,stepStatus:I[w],stepImages:ye,currentStep:w,isCollaborativeMode:tt(F[w]).length>1,stepNotes:nt(w),activeOperators:tt(F[w]),sessionParticipants:$e,currentUserId:Fe}),(()=>{const e=tt(F[w]||[]),t=e.includes(Fe),n=e.length>1,r=rt();return(0,qt.jsx)(LS,{isRunning:k,showStopNotification:ee,stepStatus:I[w],isLastStep:He,onStartStep:ht,onStopStep:pt,onCompleteStep:()=>{if(n&&st()){if(!window.confirm("Ada ".concat(e.length," operator bekerja di step ini. ")+"Apakah Anda yakin step ini sudah selesai? Sebaiknya koordinasi dengan tim terlebih dahulu melalui catatan kolaborasi."))return void Z(!0)}ft()},onShowSkipModal:kt,onReset:gt,hasSelectedInstruction:!!g,onShowTroubleshoot:Tt,onShowStepNotes:Ct,autoStopEnabled:xe,onToggleAutoStop:Nt,canControlStep:!0,isTeamMode:!0,stepOperators:F,sessionParticipants:$e,currentStep:w,currentUserId:Fe,multipleOperators:n,isCurrentUserWorking:t,canComplete:r,totalOperators:e.length})})(),Y&&R&&(0,qt.jsx)("div",{className:"modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content join-session-modal",children:[(0,qt.jsx)("h3",{children:"Sesi Kerja Aktif Ditemukan"}),(0,qt.jsx)("p",{children:"Ada sesi kerja aktif untuk tugas ini dengan data lengkap:"}),(0,qt.jsxs)("div",{className:"session-info",children:[(0,qt.jsxs)("div",{className:"session-basic-info",children:[(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- MO:"})," ",p.moDisplay]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Instruksi:"})," ",p.title]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Step saat ini:"})," ",(R.data.currentStep||0)+1," dari ",v.length]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Progress:"})," ",(null===(t=R.data.stepStatuses)||void 0===t?void 0:t.filter(e=>e===NS.COMPLETED).length)||0," / ",v.length," step selesai"]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Total waktu:"})," ",TS(R.data.totalTime||0)]})]}),(0,qt.jsxs)("div",{className:"current-participants",children:[(0,qt.jsxs)("h4",{children:["\ud83d\udc65 Operator aktif (",P.filter(e=>e.isActive).length,"):"]}),(0,qt.jsx)("ul",{children:P.filter(e=>e.isActive).map(e=>{var t;return(0,qt.jsxs)("li",{children:["\ud83d\udc64 ",(0,qt.jsx)("strong",{children:e.userName}),e.userId===R.data.createdBy&&" \ud83d\udc51 (Koordinator)",tt(F[R.data.currentStep||0]).includes(e.userId)&&" \ud83c\udfaf (Sedang bekerja)",(0,qt.jsx)("br",{}),(0,qt.jsxs)("small",{children:["Bergabung: ",null===(t=e.joinedAt)||void 0===t?void 0:t.toDate().toLocaleString()]})]},e.userId)})})]}),tt(F[R.data.currentStep||0]).length>0&&(0,qt.jsxs)("div",{className:"current-work-info",children:[(0,qt.jsx)("h4",{children:"\ud83d\udd27 Sedang dikerjakan:"}),(0,qt.jsxs)("p",{children:[(0,qt.jsxs)("strong",{children:["Step ",(R.data.currentStep||0)+1,":"]})," ",(null===(n=v[R.data.currentStep||0])||void 0===n?void 0:n.title)||"Unknown Step"]}),(null===(r=v[R.data.currentStep||0])||void 0===r?void 0:r.maxTime)&&(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"Target waktu step:"})," ",TS(v[R.data.currentStep||0].maxTime)]})]}),(null===(s=R.data.troubleshootHistory)||void 0===s?void 0:s.length)>0&&(0,qt.jsx)("div",{className:"troubleshoot-info",children:(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"\ud83d\udd27 Troubleshoot:"})," ",R.data.troubleshootHistory.length," masalah telah ditangani"]})})]}),(0,qt.jsxs)("div",{className:"session-choices",children:[(0,qt.jsx)("p",{children:(0,qt.jsx)("strong",{children:"Pilihan Anda:"})}),(0,qt.jsxs)("div",{className:"modal-actions",children:[(0,qt.jsx)("button",{onClick:()=>vt(R),className:"task-btn task-btn-primary",disabled:Ae,children:Ae?"\u23f3 Bergabung...":"\ud83e\udd1d Bergabung dengan Tim"}),(0,qt.jsx)("button",{onClick:yt,className:"task-btn task-btn-secondary",disabled:Ae,children:Ae?"\u23f3 Membuat...":"\ud83c\udd95 Buat Sesi Terpisah"})]}),(0,qt.jsx)("div",{className:"session-choice-info",children:(0,qt.jsxs)("small",{children:["\ud83d\udca1 ",(0,qt.jsx)("strong",{children:"Bergabung:"})," Anda akan berkolaborasi dalam satu tim, sharing progress dan bisa mengerjakan step yang tersedia",(0,qt.jsx)("br",{}),"\ud83d\udca1 ",(0,qt.jsx)("strong",{children:"Sesi Terpisah:"})," Anda akan memulai session baru terpisah untuk MO yang sama"]})})]})]})}),U&&me&&(0,qt.jsx)("div",{className:"modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content",children:[(0,qt.jsx)("h3",{children:"\ud83d\udccb Progress Sebelumnya Ditemukan"}),(0,qt.jsx)("p",{children:"Anda memiliki progress yang belum selesai pada tugas ini:"}),(0,qt.jsxs)("div",{className:"progress-info",children:[(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"MO:"})," ",p.moDisplay]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"Instruksi:"})," ",p.title]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"Langkah terakhir:"})," ",(me.currentStep||0)+1]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"Total waktu:"})," ",TS(me.totalTime||0)]})]}),(0,qt.jsxs)("p",{children:["Apakah Anda ingin ",(0,qt.jsx)("strong",{children:"melanjutkan dari langkah tersebut"})," atau ",(0,qt.jsx)("strong",{children:"memulai ulang dari awal?"})]}),(0,qt.jsxs)("div",{className:"modal-actions",children:[(0,qt.jsxs)("button",{onClick:xt,className:"task-btn task-btn-primary",children:["\u25b6\ufe0f Lanjutkan dari Langkah ",(me.currentStep||0)+1]}),(0,qt.jsx)("button",{onClick:yt,className:"task-btn task-btn-secondary",children:"\ud83d\udd04 Mulai dari Awal"})]})]})}),V&&(0,qt.jsx)("div",{className:"modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content",children:[(0,qt.jsx)("h3",{children:"\u2b50 Lewati Langkah"}),(0,qt.jsxs)("p",{children:["Apakah Anda yakin ingin melewati langkah ",(0,qt.jsx)("strong",{children:w+1}),"?"]}),(0,qt.jsxs)("p",{className:"step-info",children:[(0,qt.jsx)("strong",{children:"Langkah:"})," ",null===Ve||void 0===Ve?void 0:Ve.title]}),qe>0&&(0,qt.jsxs)("p",{className:"target-time-info",children:[(0,qt.jsx)("strong",{children:"Target waktu:"})," ",TS(qe)," |",(0,qt.jsx)("strong",{children:"Waktu saat ini:"})," ",TS(S)]}),tt(F[w]).length>1&&(0,qt.jsxs)("div",{className:"team-warning",children:[(0,qt.jsx)("p",{children:(0,qt.jsx)("strong",{children:"\u26a0\ufe0f Peringatan Tim:"})}),(0,qt.jsxs)("p",{children:["Ada ",tt(F[w]).length," operator yang sedang bekerja di step ini. Pastikan Anda sudah berkoordinasi dengan tim sebelum melewati step ini."]})]}),(0,qt.jsx)("textarea",{placeholder:"Alasan melewati langkah (opsional)...",rows:"3",value:be,onChange:e=>ve(e.target.value)}),(0,qt.jsxs)("div",{className:"modal-actions",children:[(0,qt.jsx)("button",{onClick:()=>_t(be),className:"task-btn task-btn-warning",children:"\u2705 Ya, Lewati Langkah"}),(0,qt.jsx)("button",{onClick:St,className:"task-btn task-btn-secondary",children:"\u274c Batal"})]})]})}),W&&(0,qt.jsx)("div",{className:"modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content completion-modal",children:[(0,qt.jsxs)("h3",{children:["\ud83c\udf89 Selamat! ",P.length>1?"Tim":"Anda"," Berhasil Menyelesaikan Tugas!"]}),(0,qt.jsx)("p",{children:P.length>1?"Tim ".concat(P.length," operator telah menyelesaikan semua langkah dalam tugas ini!"):"Anda telah menyelesaikan semua langkah dalam tugas ini!"}),(0,qt.jsxs)("div",{className:"completion-summary",children:[(0,qt.jsx)("h4",{children:"\ud83d\udcca Ringkasan Penyelesaian Lengkap (AdminPage Compatible):"}),(0,qt.jsxs)("div",{className:"summary-basic",children:[(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- MO:"})," ",p.moDisplay]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Instruksi Kerja:"})," ",p.title]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Total Waktu Kerja:"})," ",TS(N)]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Langkah Selesai:"})," ",We," dari ",v.length]}),Ke>0&&(0,qt.jsxs)("div",{className:"efficiency-summary",children:[(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Target Waktu Total:"})," ",TS(Ke)]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Selisih Waktu:"})," ",N<=Ke?"".concat(TS(Ke-N)," lebih cepat"):"".concat(TS(N-Ke)," melebihi target \u26a0\ufe0f")]})]})]}),P.length>1&&(0,qt.jsxs)("div",{className:"team-summary",children:[(0,qt.jsxs)("h4",{children:["\ud83d\udc65 Tim yang Berpartisipasi (",P.length," operator):"]}),(0,qt.jsx)("ul",{children:P.map(e=>{var t;const n=Object.values((null===R||void 0===R?void 0:R.data.stepCompletedBy)||{}).filter(t=>t.userId===e.userId).length,r=Object.values((null===R||void 0===R?void 0:R.data.stepStartedBy)||{}).filter(t=>Object.keys(t).includes(e.userId)).length;return(0,qt.jsxs)("li",{children:["\ud83d\udc64 ",(0,qt.jsx)("strong",{children:e.userName}),e.userId===(null===R||void 0===R?void 0:R.data.createdBy)&&" \ud83d\udc51 (Koordinator)",e.userId===Fe&&" (Anda)",(0,qt.jsx)("br",{}),(0,qt.jsxs)("small",{children:["Menyelesaikan ",n," step, bekerja di ",r," step | Bergabung: ",null===(t=e.joinedAt)||void 0===t?void 0:t.toDate().toLocaleString()]})]},e.userId)})}),(0,qt.jsxs)("div",{className:"collaboration-stats",children:[(0,qt.jsx)("h5",{children:"STATISTIK KOLABORASI:"}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Step dengan multiple operator:"})," ",Object.values((null===R||void 0===R?void 0:R.data.stepOperators)||{}).filter(e=>tt(e).length>1).length," dari ",v.length]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Rata-rata operator per step:"})," ",(Object.values((null===R||void 0===R?void 0:R.data.stepOperators)||{}).reduce((e,t)=>e+tt(t).length,0)/Math.max(Object.keys((null===R||void 0===R?void 0:R.data.stepOperators)||{}).length,1)).toFixed(1)]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Total catatan koordinasi:"})," ",Object.values((null===R||void 0===R?void 0:R.data.stepNotes)||{}).reduce((e,t)=>e+(Array.isArray(t)?t.length:Object.keys(t).length),0)]})]})]}),Mt().length>0&&(0,qt.jsxs)("div",{className:"skipped-summary",children:[(0,qt.jsxs)("h4",{children:["\u2b50 Langkah yang Dilewati (",Mt().length,"):"]}),(0,qt.jsxs)("details",{children:[(0,qt.jsx)("summary",{children:"Lihat detail langkah yang dilewati"}),(0,qt.jsx)("ul",{children:Mt().map(e=>{var t,n;let{index:r}=e;const s=null===R||void 0===R||null===(t=R.data.stepSkippedBy)||void 0===t?void 0:t[r];return(0,qt.jsxs)("li",{children:[(0,qt.jsxs)("strong",{children:["Step ",r+1,":"]})," ",null===(n=v[r])||void 0===n?void 0:n.title,s&&(0,qt.jsx)("div",{children:(0,qt.jsxs)("small",{children:["Dilewati oleh: ",s.userName," | Alasan: ",s.reason||"Tidak disebutkan"]})})]},r)})})]})]}),Ce.length>0&&(0,qt.jsxs)("div",{className:"troubleshoot-summary",children:[(0,qt.jsxs)("h4",{children:["\ud83d\udd27 Troubleshoot yang Dilakukan (",Ce.length," kali):"]}),(0,qt.jsxs)("details",{children:[(0,qt.jsx)("summary",{children:"Lihat Detail Troubleshoot"}),(0,qt.jsx)("ul",{children:Ce.map((e,t)=>(0,qt.jsxs)("li",{children:[(0,qt.jsxs)("strong",{children:["Step ",e.stepIndex+1,":"]})," ",e.description,(0,qt.jsx)("br",{}),(0,qt.jsxs)("small",{children:["Oleh: ",e.userName," | Waktu: ",new Date(e.timestamp).toLocaleString(),e.solution&&" | Solusi: ".concat(e.solution)]})]},e.id||t))})]})]}),(0,qt.jsxs)("div",{className:"performance-summary",children:[(0,qt.jsx)("h4",{children:"\ud83d\udcc8 Analisis Performa (AdminPage Metrics):"}),(0,qt.jsxs)("div",{className:"perf-stats",children:[(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Rata-rata waktu per step:"})," ",TS(Math.round(N/Math.max(We,1)))]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Step tercepat:"})," ",E.length>0?"Step ".concat(E.indexOf(Math.min(...E.filter(e=>e>0)))+1," (").concat(TS(Math.min(...E.filter(e=>e>0))),")"):"N/A"]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Step terlama:"})," ",E.length>0?"Step ".concat(E.indexOf(Math.max(...E))+1," (").concat(TS(Math.max(...E)),")"):"N/A"]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Tingkat penyelesaian:"})," ",Math.round(We/v.length*100),"%"]}),Ke>0&&(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Target vs Aktual:"})," ",TS(Ke)," vs ",TS(N)]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Status Efisiensi:"})," ",Ye(N,Ke)>=100?"EFISIEN \u2705":Ye(N,Ke)>=80?"CUKUP BAIK \u26a0\ufe0f":"PERLU PERBAIKAN \u274c"]})]}),P.length>1&&(0,qt.jsxs)("div",{className:"team-efficiency",children:[(0,qt.jsx)("h5",{children:"\ud83c\udfc3\u200d\u2642\ufe0f Efisiensi Tim:"}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Waktu kerja per operator:"})," ",TS(Math.round(N/P.length))]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Kolaborasi efektif:"})," ",Object.values((null===R||void 0===R?void 0:R.data.stepOperators)||{}).filter(e=>tt(e).length>1).length>0?"YA (Multi-operator pada beberapa step)":"TIDAK (Single operator per step)"]}),(0,qt.jsxs)("p",{children:[(0,qt.jsx)("strong",{children:"- Koordinasi tim:"})," ",Object.values((null===R||void 0===R?void 0:R.data.stepNotes)||{}).reduce((e,t)=>e+(Array.isArray(t)?t.length:Object.keys(t).length),0)>5?"AKTIF (Komunikasi teratur)":"MINIMAL (Komunikasi terbatas)"]})]})]})]}),(0,qt.jsxs)("div",{className:"completion-actions",children:[(0,qt.jsx)("p",{children:(0,qt.jsx)("strong",{children:"Data telah disimpan dan siap untuk AdminPage."})}),(0,qt.jsx)("small",{children:"\u2139\ufe0f Semua data performa, kolaborasi, dan troubleshooting telah disimpan ke database dan dapat dianalisis melalui AdminPage untuk pelaporan dan optimasi proses."})]})]}),(0,qt.jsxs)("div",{className:"modal-actions",children:[(0,qt.jsx)("button",{onClick:gt,className:"task-btn task-btn-primary",children:"\ud83d\udd04 Kerjakan Tugas Lain"}),(0,qt.jsx)("button",{onClick:wt,className:"task-btn task-btn-secondary",children:"\ud83d\udccb Kembali ke Daftar MO"})]})]})}),K&&(0,qt.jsx)("div",{className:"modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content",children:[(0,qt.jsx)("h3",{children:"\u23f0 Timer Otomatis Berhenti"}),(0,qt.jsxs)("p",{children:["Timer telah dihentikan secara otomatis karena waktu langkah (",ES(S),") telah melebihi target waktu (",TS(qe),")."]}),tt(F[w]).length>1&&(0,qt.jsxs)("div",{className:"team-warning",children:[(0,qt.jsx)("p",{children:(0,qt.jsx)("strong",{children:"\u26a0\ufe0f Informasi Tim:"})}),(0,qt.jsxs)("p",{children:["Ada ",tt(F[w]).length," operator yang bekerja di step ini. Pertimbangkan untuk berkoordinasi dengan tim sebelum melanjutkan."]})]}),(0,qt.jsx)("p",{children:(0,qt.jsx)("strong",{children:"Anda dapat:"})}),(0,qt.jsxs)("ul",{children:[(0,qt.jsxs)("li",{children:["\u2705 ",(0,qt.jsx)("strong",{children:"Selesaikan langkah"})," jika sudah selesai"]}),(0,qt.jsxs)("li",{children:["\u25b6\ufe0f ",(0,qt.jsx)("strong",{children:"Lanjutkan manual"})," jika butuh waktu lebih"]}),(0,qt.jsxs)("li",{children:["\u2b50 ",(0,qt.jsx)("strong",{children:"Lewati langkah"})," jika ada masalah"]}),(0,qt.jsxs)("li",{children:["\u2699\ufe0f ",(0,qt.jsx)("strong",{children:"Matikan auto-stop"})," untuk langkah berikutnya"]})]}),(0,qt.jsxs)("div",{className:"modal-actions",children:[(0,qt.jsx)("button",{onClick:ft,className:"task-btn task-btn-success",children:"\u2705 Selesaikan Langkah"}),(0,qt.jsx)("button",{onClick:jt,className:"task-btn task-btn-primary",children:"\u25b6\ufe0f Lanjutkan Manual"}),(0,qt.jsx)("button",{onClick:kt,className:"task-btn task-btn-warning",children:"\u2b50 Lewati Langkah"}),(0,qt.jsxs)("button",{onClick:Nt,className:"task-btn task-btn-secondary",children:["\u2699\ufe0f ",xe?"Matikan":"Aktifkan"," Auto-Stop"]})]}),(0,qt.jsx)("div",{className:"auto-stop-info",children:(0,qt.jsxs)("small",{children:["\ud83d\udca1 Auto-stop: ",xe?"AKTIF":"NONAKTIF"," | Dapat diubah melalui pengaturan kontrol"]})})]})}),$&&(0,qt.jsx)(WS,{isOpen:$,onClose:Et,onSave:At,currentStep:w,activeStep:Ve,troubleshootHistory:Ce,isTeamMode:P.length>1,teamMembers:P,currentUserId:Fe}),J&&(0,qt.jsx)(SS,{isOpen:J,onClose:()=>Z(!1),onSave:It,currentStep:w,activeStep:Ve,stepNotes:nt(w),currentUserId:Fe,currentUserName:Be,isTeamMode:P.length>1,teamMembers:P,stepOperators:tt(F[w]||[]),canCompleteStep:rt(),shouldPromptForCompletion:st()}),ee&&(0,qt.jsxs)("div",{className:"notification-toast stop-notification",children:[(0,qt.jsx)("span",{className:"notification-icon",children:"\u23f8\ufe0f"}),(0,qt.jsx)("span",{className:"notification-text",children:"Timer dihentikan"})]}),ne&&(0,qt.jsxs)("div",{className:"notification-toast warning-notification",children:[(0,qt.jsx)("span",{className:"notification-icon",children:"\u26a0\ufe0f"}),(0,qt.jsxs)("span",{className:"notification-text",children:["Mendekati target waktu! (",ES(S)," / ",TS(qe),")"]})]}),se&&(0,qt.jsxs)("div",{className:"notification-toast sync-notification",children:[(0,qt.jsx)("span",{className:"notification-icon",children:"\ud83d\udd04"}),(0,qt.jsx)("span",{className:"notification-text",children:"Step disinkronkan dengan tim"})]}),ae&&(0,qt.jsx)(FS,{message:"Memproses data..."}),de&&(0,qt.jsx)(FS,{message:"Memuat gambar langkah..."}),le&&(0,qt.jsxs)("div",{className:"error-notification",children:[(0,qt.jsx)("span",{className:"error-icon",children:"\u274c"}),(0,qt.jsx)("span",{className:"error-text",children:le}),(0,qt.jsx)("button",{onClick:()=>ue(null),className:"error-close",children:"\xd7"})]}),(0,qt.jsx)("div",{className:"task-page-footer",children:(0,qt.jsxs)("div",{className:"footer-info",children:[(0,qt.jsx)("div",{className:"session-info",children:M&&(0,qt.jsxs)("small",{children:["\ud83d\udd17 Session: ",M.slice(-8)," | Real-time: ",c.current?"Connected":"Disconnected"," |",P.length>1?"Team Mode":"Solo Mode"]})}),(0,qt.jsx)("div",{className:"version-info",children:(0,qt.jsxs)("small",{children:["TaskPage v2.0 | Concurrent Mode | AdminPage Compatible | User: ",Be," (",Ue,")"]})})]})})]}):(0,qt.jsx)(FS,{message:"Memuat instruksi kerja..."}):(0,qt.jsx)(FS,{message:"Memuat data tugas..."})},KS=t=>{let{isOpen:n,onClose:r,onSelectWithMO:s,selectedTask:i}=t;const a=he(),[o,l]=(0,e.useState)(null);if((0,e.useEffect)(()=>{n&&l(null)},[n]),(0,e.useEffect)(()=>{const e=e=>{27===e.keyCode&&u()};return n&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[n]),!n)return null;const c=e=>{l(e),setTimeout(()=>{"with-mo"===e?(console.log("\ud83d\ude80 User selected: Work with MO"),s()):"without-mo"===e&&(console.log("\ud83d\ude80 Navigating to task without MO..."),a("/tasklist"))},150)},u=()=>{l(null),r()};return(0,qt.jsx)("div",{className:"mo-selection-modal-overlay",onClick:e=>{e.target===e.currentTarget&&u()},children:(0,qt.jsxs)("div",{className:"mo-selection-work-type-modal",onClick:e=>e.stopPropagation(),children:[(0,qt.jsxs)("div",{className:"mo-selection-modal-header",children:[(0,qt.jsx)("h3",{children:"\ud83d\ude80 Pilih Jenis Pekerjaan"}),(0,qt.jsx)("button",{className:"mo-selection-modal-close-btn",onClick:u,"aria-label":"Tutup modal",children:"\u2715"})]}),(0,qt.jsxs)("div",{className:"mo-selection-modal-content",children:[(0,qt.jsx)("p",{className:"mo-selection-modal-description",children:"Silakan pilih jenis pekerjaan yang akan Anda lakukan:"}),(0,qt.jsxs)("div",{className:"mo-selection-work-type-options",children:[(0,qt.jsxs)("button",{className:"mo-selection-work-type-card ".concat("with-mo"===o?"selected":""),onClick:()=>c("with-mo"),onMouseEnter:()=>l("with-mo"),onMouseLeave:()=>l(null),children:[(0,qt.jsx)("div",{className:"mo-selection-card-icon",children:"\ud83d\udccb"}),(0,qt.jsx)("div",{className:"mo-selection-card-content",children:(0,qt.jsx)("h4",{children:"Kerja dengan MO"})}),(0,qt.jsx)("div",{className:"mo-selection-card-arrow",children:"\u2192"})]}),(0,qt.jsxs)("button",{className:"mo-selection-work-type-card ".concat("without-mo"===o?"selected":""),onClick:()=>c("without-mo"),onMouseEnter:()=>l("without-mo"),onMouseLeave:()=>l(null),children:[(0,qt.jsx)("div",{className:"mo-selection-card-icon",children:"\u2699\ufe0f"}),(0,qt.jsx)("div",{className:"mo-selection-card-content",children:(0,qt.jsx)("h4",{children:"Kerja tanpa MO"})}),(0,qt.jsx)("div",{className:"mo-selection-card-arrow",children:"\u2192"})]})]})]}),(0,qt.jsx)("div",{className:"mo-selection-modal-footer",children:(0,qt.jsx)("button",{className:"mo-selection-cancel-btn",onClick:u,children:"Batal"})})]})})},GS=e.memo(t=>{let{assignedTasks:n,onSelectMO:r,loading:s,error:i,onRefresh:a}=t;const[o,l]=(0,e.useState)(""),c=(0,e.useMemo)(()=>{if(!o.trim())return n;const e=o.toLowerCase();return n.filter(t=>{var n,r,s,i;return(null===(n=t.moDisplay)||void 0===n?void 0:n.toLowerCase().includes(e))||(null===(r=t.moNumber)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(s=t.title)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(i=t.description)||void 0===i?void 0:i.toLowerCase().includes(e))})},[n,o]);if(s)return(0,qt.jsx)(FS,{message:"Memuat daftar MO yang ditugaskan..."});if(i)return(0,qt.jsxs)("div",{className:"error-container",children:[(0,qt.jsx)("h2",{children:"Terjadi Kesalahan"}),(0,qt.jsx)("p",{children:i}),(0,qt.jsx)("button",{onClick:a,className:"retry-button",children:"Coba Lagi"})]});if(0===n.length)return(0,qt.jsx)("div",{className:"no-tasks-container",children:(0,qt.jsxs)("div",{className:"no-tasks-content",children:[(0,qt.jsx)("h2",{children:"\ud83d\udccb Tidak Ada Tugas"}),(0,qt.jsx)("p",{children:"Saat ini tidak ada Manufacturing Order yang ditugaskan kepada Anda."}),(0,qt.jsx)("p",{children:"Silakan hubungi admin untuk mendapatkan tugas baru."}),(0,qt.jsx)("button",{onClick:a,className:"retry-button",children:"Refresh"})]})});const u=e=>{const t={low:{class:"badge-success",text:"Rendah",icon:"\ud83d\udfe2"},medium:{class:"badge-warning",text:"Sedang",icon:"\ud83d\udfe1"},high:{class:"badge-danger",text:"Tinggi",icon:"\ud83d\udfe0"},urgent:{class:"badge-critical",text:"Urgent",icon:"\ud83d\udd34"}};return t[e]||t.medium},d=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})};return(0,qt.jsxs)("div",{className:"mo-selection-section",children:[(0,qt.jsxs)("div",{className:"mo-selection-header",children:[(0,qt.jsxs)("div",{className:"mo-stats",children:[(0,qt.jsxs)("div",{className:"mo-stat-item",children:[(0,qt.jsx)("span",{className:"mo-stat-number",children:n.length}),(0,qt.jsx)("span",{className:"mo-stat-label",children:"Total MO"})]}),(0,qt.jsxs)("div",{className:"mo-stat-item",children:[(0,qt.jsx)("span",{className:"mo-stat-number",children:c.length}),(0,qt.jsx)("span",{className:"mo-stat-label",children:"Hasil Filter"})]})]}),(0,qt.jsx)("div",{className:"mo-search-container",children:(0,qt.jsx)("input",{type:"text",placeholder:"Cari MO, instruksi kerja, atau deskripsi...",value:o,onChange:e=>l(e.target.value),className:"mo-search-input"})})]}),(0,qt.jsx)("div",{className:"mo-cards-container",children:c.map(e=>{var t;return(0,qt.jsxs)("div",{className:"mo-card",children:[(0,qt.jsxs)("div",{className:"mo-card-header",children:[(0,qt.jsxs)("div",{className:"mo-header-top",children:[(0,qt.jsx)("h3",{className:"mo-display",children:e.moDisplay}),(0,qt.jsxs)("div",{className:"mo-badges",children:[e.priority&&(0,qt.jsxs)("span",{className:"badge ".concat(u(e.priority).class),children:[u(e.priority).icon," ",u(e.priority).text]}),e.category&&(0,qt.jsx)("span",{className:"badge badge-category",children:e.category})]})]}),(0,qt.jsxs)("div",{className:"mo-meta-line",children:[e.division&&(0,qt.jsxs)("span",{className:"mo-division",children:["\ud83c\udfe2 ",e.division]}),(0,qt.jsxs)("span",{className:"mo-number",children:["\ud83d\udcc4 ",e.moNumber]})]})]}),(0,qt.jsxs)("div",{className:"mo-card-content",children:[(0,qt.jsxs)("div",{className:"work-instruction-info",children:[(0,qt.jsx)("h4",{children:"Instruksi Kerja:"}),(0,qt.jsx)("p",{className:"wi-title",children:e.title}),e.description&&(0,qt.jsx)("p",{className:"wi-description",children:e.description}),(0,qt.jsxs)("div",{className:"wi-details",children:[(0,qt.jsxs)("span",{className:"wi-steps",children:["\ud83d\udcdd ",(null===(t=e.steps)||void 0===t?void 0:t.length)||0," Langkah"]}),e.estimatedDuration&&(0,qt.jsxs)("span",{className:"wi-duration",children:["\u23f1\ufe0f ",e.estimatedDuration," menit"]})]})]}),(0,qt.jsxs)("div",{className:"assignment-info",children:[(0,qt.jsx)("div",{className:"assignment-dates",children:(0,qt.jsxs)("small",{children:["\ud83d\udcc5 Ditugaskan: ",d(e.createdAt)]})}),e.assignments&&e.assignments.length>0&&(0,qt.jsxs)("div",{className:"operator-assignments",children:[(0,qt.jsx)("h5",{children:"\ud83d\udc65 Operator Assigned:"}),(0,qt.jsx)("div",{className:"assignment-list",children:e.assignments.map((e,t)=>(0,qt.jsx)("div",{className:"assignment-item",children:(0,qt.jsx)("span",{className:"operator-name",children:e.operatorName})},t))})]})]})]}),(0,qt.jsx)("div",{className:"mo-card-actions",children:(0,qt.jsxs)("button",{className:"select-mo-btn",onClick:()=>r(e),title:"Mulai mengerjakan ".concat(e.moDisplay),children:[(0,qt.jsx)(Dt,{size:14}),"Mulai Kerja"]})})]},e.id)})}),0===c.length&&o&&(0,qt.jsxs)("div",{className:"no-search-results",children:[(0,qt.jsxs)("p",{children:['\ud83d\udd0d Tidak ada hasil untuk pencarian "',o,'"']}),(0,qt.jsx)("button",{onClick:()=>l(""),className:"clear-search-btn",children:"\u274c Hapus Pencarian"})]})]})});GS.displayName="MOSelectionComponent";const $S=()=>{const t=he(),{moId:n}=fe(),[r,s]=(0,e.useState)([]),[i,a]=(0,e.useState)(!1),[o,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!0),[h,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(null),g=(0,e.useCallback)(()=>{t("/home")},[t]),b=(0,e.useCallback)(async()=>{try{a(!0),c(null);const e=Po().currentUser;if(!e)return console.error("\u274c User not authenticated"),void t("/login");console.log("\ud83d\udd04 Fetching assigned tasks for user: ".concat(e.uid)),console.log("\ud83d\udce7 User email: ".concat(e.email));const r=Ly(Z_,"mos");let i=[];try{(await qw(r)).forEach(t=>{const n=t.data();n.assignments&&n.assignments.some(t=>t.operatorId===e.uid||t.operatorEmail===e.email)&&!1!==n.isActive&&(console.log("\u2705 Found assigned MO: ".concat(n.moNumber),n),i.push(l({id:t.id},n)))}),console.log("\ud83d\udcca Found ".concat(i.length," assigned MOs"))}catch(o){console.error("\u274c Error querying MOs:",o)}const u=Ly(Z_,"tasks"),d=[];if(i.length>0)try{const t=Nw(u,Ew("isActive","==",!0));(await qw(t)).forEach(t=>{const n=t.data(),r=i.find(e=>e.moNumber===n.moNumber||e.id===n.moId||e.title===n.title&&e.moNumber),s=n.assignedOperators&&n.assignedOperators.includes(e.uid)||n.assignments&&n.assignments.some(t=>(t.operatorId===e.uid||t.operatorEmail===e.email)&&"assigned"===t.status)||n.operatorAssigned&&n.operatorAssigned.some(t=>t.operatorId===e.uid||t.email===e.email);if(r||s){const e=l(l(l({id:t.id},n),r&&{moNumber:r.moNumber,moDisplay:r.moNumber?"".concat(r.moNumber," - ").concat(n.title||r.title):n.moDisplay,description:n.description||r.description,division:r.division,category:r.category,priority:r.priority,estimatedDuration:n.estimatedDuration||r.estimatedDuration,assignments:r.assignments,createdAt:n.createdAt||r.createdAt,updatedAt:n.updatedAt||r.updatedAt}),{},{moNumber:n.moNumber||(null===r||void 0===r?void 0:r.moNumber)||"MO-".concat(t.id.substring(0,4)),moDisplay:n.moDisplay||(r?"".concat(r.moNumber," - ").concat(n.title):"".concat(n.moNumber||"MO"," - ").concat(n.title||"Untitled")),title:n.title||(null===r||void 0===r?void 0:r.title)||"Untitled Task",steps:n.steps||[],isActive:!1!==n.isActive});console.log("\u2705 Added task: ".concat(e.moDisplay)),d.push(e)}})}catch(o){console.error("\u274c Error querying tasks:",o)}if(0===d.length){console.log("\ud83d\udd04 No MO-based assignments found, trying legacy task assignments...");try{const t=[Nw(u,Ew("assignedOperators","array-contains",e.uid),Ew("isActive","==",!0)),Nw(u,Ew("operatorAssigned","array-contains",{operatorId:e.uid,status:"assigned"}),Ew("isActive","==",!0))],n=await Promise.allSettled(t.map(e=>qw(e)));n.forEach(e=>{"fulfilled"===e.status&&e.value.forEach(e=>{const t=e.data(),n={id:e.id,moNumber:t.moNumber||"MO-".concat(e.id.substring(0,4)),moDisplay:t.moDisplay||"".concat(t.moNumber||"MO"," - ").concat(t.title||"Untitled"),title:t.title||"Untitled Task",description:t.description||"",steps:t.steps||[],assignments:t.assignments||[],operatorAssigned:t.operatorAssigned||[],assignedOperators:t.assignedOperators||[],createdAt:t.createdAt,updatedAt:t.updatedAt,estimatedDuration:t.estimatedDuration,category:t.category,priority:t.priority,difficulty:t.difficulty,division:t.division,isActive:!1!==t.isActive};d.some(e=>e.id===n.id)||d.push(n)})})}catch(o){console.error("\u274c Error in legacy query:",o)}}if(console.log("\u2705 Final task list: ".concat(d.length," tasks")),s(d),n&&d.length>0){const e=d.find(e=>e.id===n||e.moNumber===n);e&&(console.log("\ud83c\udfaf Auto-selecting task:",e),v(e))}}catch(o){console.error("\u274c Error fetching assigned tasks:",o),c("Gagal memuat daftar tugas: ".concat(o.message))}finally{a(!1)}},[t,n]),v=(0,e.useCallback)(e=>{if(console.log("\ud83c\udfaf Task selected for execution:",e),!e||!e.steps||0===e.steps.length)return console.warn("\u26a0\ufe0f Task has no steps, checking if we should create WI first"),void c("Task tidak memiliki langkah kerja yang valid. Silakan hubungi admin untuk menambahkan Work Instruction.");t("/task-execution/".concat(e.id),{state:{selectedTask:l(l({},e),{},{workType:"with-mo"}),fromMOSelection:!0,timestamp:(new Date).toISOString()}})},[t]),y=(0,e.useCallback)(()=>{d(!1),m(null),t("/home")},[t]),w=(0,e.useCallback)(()=>{console.log("\ud83c\udfaf Showing MO Selection..."),d(!1),f(!0),b()},[b]);return(0,e.useEffect)(()=>{if(!h)return;const e=setInterval(()=>{console.log("\ud83d\udd04 Auto-refreshing assigned tasks..."),b()},3e5);return()=>clearInterval(e)},[b,h]),(0,qt.jsxs)("div",{className:"task-page",children:[(0,qt.jsx)(MS,{workInstructionTitle:"Pilih Manufacturing Order",onBack:g}),h&&(0,qt.jsx)(GS,{assignedTasks:r,onSelectMO:v,loading:i,error:o,onRefresh:b}),(0,qt.jsx)(KS,{isOpen:u,onClose:y,onSelectWithMO:w,selectedTask:p})]})};var XS=n(223),YS=n.n(XS),QS=n(450);const JS=new class{constructor(){this.workbook=null}resetWorkbook(){this.workbook=new(YS().Workbook),this.workbook.creator="Work Sessions Dashboard",this.workbook.lastModifiedBy="System",this.workbook.created=new Date,this.workbook.modified=new Date}formatTime(e){if(!e||0===e)return"00:00:00";const t=Math.floor(e/3600).toString().padStart(2,"0"),n=Math.floor(e%3600/60).toString().padStart(2,"0"),r=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n,":").concat(r)}formatStepTime(e){if(!e||0===e)return"00:00";const t=Math.floor(e/60).toString().padStart(2,"0"),n=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(n)}getMonthName(e){return["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][e-1]||"Invalid Month"}getStatusName(e){return{pending:"Menunggu Persetujuan",approved:"Disetujui",rejected:"Ditolak"}[e]||"Menunggu Persetujuan"}getStepStatusName(e){return{completed:"Selesai",skipped:"Dilewati",pending:"Menunggu"}[e]||"Menunggu"}getWorkMode(e){var t;return((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1?"Tim":"Individu"}getTotalActivities(e){const t=e.originalSession||e;let n=0;return t.stepStartedBy&&(n+=Object.keys(t.stepStartedBy).length),t.stepCompletedBy&&(n+=Object.keys(t.stepCompletedBy).length),t.stepSkippedBy&&(n+=Object.keys(t.stepSkippedBy).length),t.stepStoppedBy&&(n+=Object.keys(t.stepStoppedBy).length),e.troubleshootHistory&&(n+=e.troubleshootHistory.length),n}getComprehensiveStats(e){const t=e.length,n=e.filter(e=>"approved"===e.status).length,r=e.filter(e=>"rejected"===e.status).length,s=e.filter(e=>"pending"===e.status||!e.status).length,i=e.reduce((e,t)=>e+t.stepTimes.length,0),a=e.reduce((e,t)=>e+t.stepTimes.filter(e=>"completed"===e.status).length,0),o=e.reduce((e,t)=>e+t.stepTimes.filter(e=>"skipped"===e.status).length,0),l=i-a-o,c=e.filter(e=>e.hasTargetTime).length,u=e.filter(e=>e.isEfficient&&e.hasTargetTime).length,d=e.reduce((e,t)=>e+t.totalTime,0),h=t>0?d/t:0,f=c>0?e.filter(e=>e.hasTargetTime).reduce((e,t)=>e+t.targetTime,0)/c:0,p=[...new Set(e.map(e=>e.mo).filter(e=>e))].length,m=e.filter(e=>e.mo&&""!==e.mo.trim()).length,g=e.filter(e=>{var t;return((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1}).length,b=t-g,v=e.reduce((e,t)=>e+this.getTotalActivities(t),0),y=[...new Set(e.map(e=>e.nama))].length,w=e.reduce((e,t)=>{var n;return e+((null===(n=t.originalSession)||void 0===n?void 0:n.participants)||[]).length},0);return{totalSessions:t,approvedSessions:n,rejectedSessions:r,pendingSessions:s,approvalRate:t>0?n/t*100:0,totalSteps:i,completedSteps:a,skippedSteps:o,pendingSteps:l,completionRate:i>0?a/i*100:0,sessionsWithTarget:c,efficientSessions:u,efficiencyRate:c>0?u/c*100:0,totalTime:d,avgActualTime:h,avgTargetTime:f,uniqueMOs:p,sessionsWithMO:m,teamSessions:g,individualSessions:b,teamWorkRate:t>0?g/t*100:0,totalActivities:v,avgActivitiesPerSession:t>0?v/t:0,uniqueUsers:y,totalParticipants:w,avgParticipantsPerSession:t>0?w/t:0}}createSummarySheet(e,t,n,r,s){const i=this.workbook.addWorksheet("Ringkasan"),a=this.getComprehensiveStats(e);i.mergeCells("A1:G2");const o=i.getCell("A1");o.value="LAPORAN WORK SESSIONS",o.font={bold:!0,size:18,color:{argb:"FFFFFF"}},o.alignment={horizontal:"center",vertical:"middle"},o.fill={type:"pattern",pattern:"solid",fgColor:{argb:"667EEA"}};let l=4;[["Periode Export",(new Date).toLocaleString("id-ID")],["Filter Bulan",t?this.getMonthName(t):"Semua Bulan"],["Filter Tahun",n||"Semua Tahun"],["Filter User",r||"Semua User"],["Filter Status",s?this.getStatusName(s):"Semua Status"]].forEach(e=>{let[t,n]=e;i.getCell("A".concat(l)).value=t,i.getCell("B".concat(l)).value=n,i.getCell("A".concat(l)).font={bold:!0},l++}),l+=2,i.getCell("A".concat(l)).value="STATISTIK UMUM",i.getCell("A".concat(l)).font={bold:!0,size:14,color:{argb:"1F2937"}},l++;const c=[["Total Work Sessions",a.totalSessions],["Total Langkah",a.totalSteps],["Langkah Selesai","".concat(a.completedSteps," (").concat(a.completionRate.toFixed(1),"%)")],["Langkah Dilewati","".concat(a.skippedSteps," (").concat((a.skippedSteps/a.totalSteps*100).toFixed(1),"%)")],["Langkah Pending","".concat(a.pendingSteps," (").concat((a.pendingSteps/a.totalSteps*100).toFixed(1),"%)")],["Total MO Unik",a.uniqueMOs],["Sessions dengan MO","".concat(a.sessionsWithMO," (").concat((a.sessionsWithMO/a.totalSessions*100).toFixed(1),"%)")]];this.addStatsRows(i,c,l),l+=c.length+1,i.getCell("A".concat(l)).value="STATISTIK MODE KERJA",i.getCell("A".concat(l)).font={bold:!0,size:14,color:{argb:"7C3AED"}},l++;const u=[["Sessions Tim","".concat(a.teamSessions," (").concat(a.teamWorkRate.toFixed(1),"%)")],["Sessions Individu","".concat(a.individualSessions," (").concat((a.individualSessions/a.totalSessions*100).toFixed(1),"%)")],["Total Aktivitas",a.totalActivities],["Rata-rata Aktivitas per Session",a.avgActivitiesPerSession.toFixed(1)],["Unique Users",a.uniqueUsers],["Total Participants",a.totalParticipants],["Rata-rata Participants per Session",a.avgParticipantsPerSession.toFixed(1)]];this.addStatsRows(i,u,l),l+=u.length+1,i.getCell("A".concat(l)).value="STATISTIK STATUS APPROVAL",i.getCell("A".concat(l)).font={bold:!0,size:14,color:{argb:"1F2937"}},l++;const d=[["Sessions Disetujui","".concat(a.approvedSessions," (").concat(a.approvalRate.toFixed(1),"%)")],["Sessions Ditolak","".concat(a.rejectedSessions," (").concat((a.rejectedSessions/a.totalSessions*100).toFixed(1),"%)")],["Sessions Menunggu","".concat(a.pendingSessions," (").concat((a.pendingSessions/a.totalSessions*100).toFixed(1),"%)")]];this.addStatsRows(i,d,l),l+=d.length+1,i.getCell("A".concat(l)).value="STATISTIK EFISIENSI",i.getCell("A".concat(l)).font={bold:!0,size:14,color:{argb:"1F2937"}},l++;const h=[["Sessions dengan Target Waktu",a.sessionsWithTarget],["Sessions Efisien","".concat(a.efficientSessions," (").concat(a.efficiencyRate.toFixed(1),"%)")],["Rata-rata Waktu Aktual",this.formatTime(a.avgActualTime)],["Rata-rata Waktu Target",a.avgTargetTime>0?this.formatTime(a.avgTargetTime):"N/A"],["Total Waktu Keseluruhan",this.formatTime(a.totalTime)]];return this.addStatsRows(i,h,l),i.columns=[{width:35},{width:30},{width:15},{width:15},{width:15},{width:15},{width:15}],i}addStatsRows(e,t,n){t.forEach((t,r)=>{const s=n+r;e.getCell("A".concat(s)).value=t[0],e.getCell("B".concat(s)).value=t[1],e.getCell("A".concat(s)).font={bold:!0},e.getCell("B".concat(s)).font={color:{argb:"2563EB"}},["A","B"].forEach(t=>{e.getCell("".concat(t).concat(s)).border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})})}createMainDataSheet(e){const t=this.workbook.addWorksheet("Data Work Sessions");return["No","Nama User","MO (Manufacturing Order)","Instruksi Kerja","Mode Kerja","Tanggal Selesai","Waktu Mulai","Waktu Selesai","Waktu Aktual (detik)","Waktu Aktual (HH:MM:SS)","Waktu Target (detik)","Waktu Target (HH:MM:SS)","Efisiensi (%)","Status Efisiensi","Total Langkah","Langkah Selesai","Langkah Dilewati","Tingkat Penyelesaian (%)","Status Approval","Total Aktivitas","Tanggal Update Status","Diupdate Oleh"].forEach((e,n)=>{const r=t.getCell(1,n+1);r.value=e,r.font={bold:!0,color:{argb:"FFFFFF"}},r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"667EEA"}},r.alignment={horizontal:"center",vertical:"middle"},r.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),e.forEach((e,n)=>{const r=n+2,s=e.stepTimes.filter(e=>"completed"===e.status).length,i=e.stepTimes.filter(e=>"skipped"===e.status).length,a=e.stepTimes.length,o=a>0?(s/a*100).toFixed(1):"0";[n+1,e.nama,e.mo||"-",e.workInstructionTitle,this.getWorkMode(e),e.tanggal.toLocaleDateString("id-ID"),e.startTime?e.startTime.toLocaleTimeString("id-ID"):"-",e.tanggal.toLocaleTimeString("id-ID"),e.totalTime,this.formatTime(e.totalTime),e.targetTime||0,e.hasTargetTime?this.formatTime(e.targetTime):"Tidak ada",e.hasTargetTime?e.efficiency:"N/A",e.isEfficient&&e.hasTargetTime?"Efisien":"Tidak Efisien",a,s,i,o+"%",this.getStatusName(e.status),this.getTotalActivities(e),e.statusUpdatedAt?e.statusUpdatedAt.toLocaleDateString("id-ID"):"-",e.statusUpdatedBy||"-"].forEach((n,s)=>{const i=t.getCell(r,s+1);if(i.value=n,r%2===0&&(i.fill={type:"pattern",pattern:"solid",fgColor:{argb:"F8FAFC"}}),2===s&&"-"!==n&&(i.font={color:{argb:"7C3AED"},bold:!0}),4===s&&(i.font="Tim"===n?{color:{argb:"7C3AED"},bold:!0}:{color:{argb:"059669"}}),17===s){const e=parseFloat(o);i.font=e>=90?{color:{argb:"10B981"},bold:!0}:e>=70?{color:{argb:"F59E0B"},bold:!0}:{color:{argb:"EF4444"},bold:!0}}if(18===s){const t=e.status;i.font="approved"===t?{color:{argb:"10B981"},bold:!0}:"rejected"===t?{color:{argb:"EF4444"},bold:!0}:{color:{argb:"F59E0B"},bold:!0}}if(19===s){const e=parseInt(n);e>10?i.font={color:{argb:"7C3AED"},bold:!0}:e>5&&(i.font={color:{argb:"F59E0B"}})}i.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}})}),t.columns=[{width:5},{width:20},{width:20},{width:25},{width:12},{width:15},{width:12},{width:12},{width:18},{width:15},{width:18},{width:15},{width:12},{width:15},{width:12},{width:12},{width:12},{width:20},{width:18},{width:15},{width:18},{width:15}],t}createStepDetailsSheet(e){const t=this.workbook.addWorksheet("Detail Langkah");["Session No","User","MO","Instruksi Kerja","Mode","Tanggal","Session Status","Langkah No","Nama Langkah","Status Langkah","Waktu Aktual (detik)","Waktu Aktual (MM:SS)","Waktu Target (detik)","Waktu Target (MM:SS)","Efisiensi (%)","Status Efisiensi"].forEach((e,n)=>{const r=t.getCell(1,n+1);r.value=e,r.font={bold:!0,color:{argb:"FFFFFF"}},r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"764BA2"}},r.alignment={horizontal:"center",vertical:"middle"},r.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let n=2;return e.forEach((e,r)=>{e.stepTimes.forEach((s,i)=>{[r+1,e.nama,e.mo||"-",e.workInstructionTitle,this.getWorkMode(e),e.tanggal.toLocaleDateString("id-ID"),this.getStatusName(e.status),i+1,s.step,this.getStepStatusName(s.status),s.duration,this.formatStepTime(s.duration),s.targetTime||0,s.targetTime>0?this.formatStepTime(s.targetTime):"N/A",s.efficiency||"N/A",s.targetTime>0&&s.duration<=s.targetTime?"Efisien":"Tidak Efisien"].forEach((e,i)=>{const a=t.getCell(n,i+1);a.value=e,r%2===0&&(a.fill={type:"pattern",pattern:"solid",fgColor:{argb:"F8FAFC"}}),2===i&&"-"!==e&&(a.font={color:{argb:"7C3AED"},bold:!0}),4===i&&(a.font="Tim"===e?{color:{argb:"7C3AED"},bold:!0}:{color:{argb:"059669"}}),9===i&&("completed"===s.status?a.font={color:{argb:"10B981"},bold:!0}:"skipped"===s.status?a.font={color:{argb:"F59E0B"},bold:!0}:a.font={color:{argb:"EF4444"},bold:!0}),a.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),n++})}),t.columns=[{width:10},{width:20},{width:15},{width:25},{width:10},{width:12},{width:15},{width:10},{width:20},{width:12},{width:15},{width:12},{width:15},{width:12},{width:12},{width:15}],t}createStatusAnalysisSheet(e){const t=this.workbook.addWorksheet("Analisis Status"),n={};e.forEach(e=>{var t;n[e.nama]||(n[e.nama]={approved:0,rejected:0,pending:0,total:0,uniqueMOs:new Set,teamSessions:0,individualSessions:0,totalActivities:0}),n[e.nama][e.status||"pending"]++,n[e.nama].total++,e.mo&&""!==e.mo.trim()&&n[e.nama].uniqueMOs.add(e.mo);((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1?n[e.nama].teamSessions++:n[e.nama].individualSessions++,n[e.nama].totalActivities+=this.getTotalActivities(e)});["Nama User","Total Sessions","Unique MOs","Sessions Tim","Sessions Individu","Total Aktivitas","Disetujui","Ditolak","Menunggu","Tingkat Persetujuan (%)","Tingkat Penolakan (%)"].forEach((e,n)=>{const r=t.getCell(1,n+1);r.value=e,r.font={bold:!0,color:{argb:"FFFFFF"}},r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"059669"}},r.alignment={horizontal:"center",vertical:"middle"},r.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=2;return Object.keys(n).forEach(e=>{const s=n[e],i=s.total>0?(s.approved/s.total*100).toFixed(1):0,a=s.total>0?(s.rejected/s.total*100).toFixed(1):0;[e,s.total,s.uniqueMOs.size,s.teamSessions,s.individualSessions,s.totalActivities,s.approved,s.rejected,s.pending,i+"%",a+"%"].forEach((e,n)=>{const s=t.getCell(r,n+1);if(s.value=e,r%2===0&&(s.fill={type:"pattern",pattern:"solid",fgColor:{argb:"F0FDF4"}}),2===n&&(s.font={color:{argb:"7C3AED"},bold:!0}),3===n&&e>0&&(s.font={color:{argb:"7C3AED"},bold:!0}),5===n){const t=parseInt(e);t>20?s.font={color:{argb:"7C3AED"},bold:!0}:t>10&&(s.font={color:{argb:"F59E0B"}})}s.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),r++}),t.columns=[{width:20},{width:15},{width:12},{width:12},{width:15},{width:15},{width:12},{width:10},{width:12},{width:20},{width:20}],t}createMOAnalysisSheet(e){const t=this.workbook.addWorksheet("Analisis MO"),n={};e.forEach(e=>{var t;const r=e.mo||"Tanpa MO";n[r]||(n[r]={totalSessions:0,users:new Set,approved:0,rejected:0,pending:0,totalTime:0,avgTime:0,workInstructions:new Set,teamSessions:0,individualSessions:0,totalActivities:0,totalParticipants:0}),n[r].totalSessions++,n[r].users.add(e.nama),n[r][e.status||"pending"]++,n[r].totalTime+=e.totalTime,n[r].workInstructions.add(e.workInstructionTitle);var s;((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1?(n[r].teamSessions++,n[r].totalParticipants+=((null===(s=e.originalSession)||void 0===s?void 0:s.participants)||[]).length):(n[r].individualSessions++,n[r].totalParticipants+=1);n[r].totalActivities+=this.getTotalActivities(e)}),Object.keys(n).forEach(e=>{n[e].avgTime=n[e].totalSessions>0?n[e].totalTime/n[e].totalSessions:0,n[e].avgParticipants=n[e].totalSessions>0?n[e].totalParticipants/n[e].totalSessions:0});["MO (Manufacturing Order)","Total Sessions","Sessions Tim","Sessions Individu","Unique Users","Avg Participants","Total Aktivitas","Unique Work Instructions","Disetujui","Ditolak","Menunggu","Total Waktu (HH:MM:SS)","Rata-rata Waktu (HH:MM:SS)","Tingkat Persetujuan (%)"].forEach((e,n)=>{const r=t.getCell(1,n+1);r.value=e,r.font={bold:!0,color:{argb:"FFFFFF"}},r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"7C3AED"}},r.alignment={horizontal:"center",vertical:"middle"},r.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=2;return Object.keys(n).sort((e,t)=>n[t].totalSessions-n[e].totalSessions).forEach(e=>{const s=n[e],i=s.totalSessions>0?(s.approved/s.totalSessions*100).toFixed(1):0;[e,s.totalSessions,s.teamSessions,s.individualSessions,s.users.size,s.avgParticipants.toFixed(1),s.totalActivities,s.workInstructions.size,s.approved,s.rejected,s.pending,this.formatTime(s.totalTime),this.formatTime(s.avgTime),i+"%"].forEach((e,n)=>{const s=t.getCell(r,n+1);if(s.value=e,r%2===0&&(s.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FAF5FF"}}),0===n&&"Tanpa MO"!==e&&(s.font={color:{argb:"7C3AED"},bold:!0}),2===n&&parseInt(e)>0&&(s.font={color:{argb:"7C3AED"},bold:!0}),6===n){const t=parseInt(e);t>50?s.font={color:{argb:"7C3AED"},bold:!0}:t>25&&(s.font={color:{argb:"F59E0B"}})}if(13===n){const e=parseFloat(i);s.font=e>=80?{color:{argb:"10B981"},bold:!0}:e>=60?{color:{argb:"F59E0B"},bold:!0}:{color:{argb:"EF4444"},bold:!0}}s.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),r++}),t.columns=[{width:25},{width:15},{width:12},{width:15},{width:12},{width:15},{width:15},{width:20},{width:10},{width:10},{width:10},{width:18},{width:18},{width:20}],t}createActivityAnalysisSheet(e){const t=this.workbook.addWorksheet("Analisis Aktivitas"),n={};e.forEach(e=>{var t;const r=e.tanggal.toDateString(),s=e.nama,i=((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1,a=this.getTotalActivities(e);n[r]||(n[r]={date:e.tanggal,totalSessions:0,teamSessions:0,individualSessions:0,totalActivities:0,uniqueUsers:new Set,avgActivitiesPerSession:0,mostActiveUser:"",mostActiveUserActivities:0});const o=n[r];o.totalSessions++,o.totalActivities+=a,o.uniqueUsers.add(s),i?o.teamSessions++:o.individualSessions++,a>o.mostActiveUserActivities&&(o.mostActiveUser=s,o.mostActiveUserActivities=a)}),Object.keys(n).forEach(e=>{const t=n[e];t.avgActivitiesPerSession=t.totalSessions>0?(t.totalActivities/t.totalSessions).toFixed(1):0});["Tanggal","Total Sessions","Sessions Tim","Sessions Individu","Unique Users","Total Aktivitas","Avg Aktivitas/Session","User Paling Aktif","Aktivitas Tertinggi"].forEach((e,n)=>{const r=t.getCell(1,n+1);r.value=e,r.font={bold:!0,color:{argb:"FFFFFF"}},r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"F59E0B"}},r.alignment={horizontal:"center",vertical:"middle"},r.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=2;return Object.keys(n).sort((e,t)=>new Date(t)-new Date(e)).forEach(e=>{const s=n[e];[s.date.toLocaleDateString("id-ID"),s.totalSessions,s.teamSessions,s.individualSessions,s.uniqueUsers.size,s.totalActivities,s.avgActivitiesPerSession,s.mostActiveUser,s.mostActiveUserActivities].forEach((e,n)=>{const s=t.getCell(r,n+1);if(s.value=e,r%2===0&&(s.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFBEB"}}),2===n&&parseInt(e)>0&&(s.font={color:{argb:"7C3AED"},bold:!0}),5===n){const t=parseInt(e);t>100?s.font={color:{argb:"DC2626"},bold:!0}:t>50&&(s.font={color:{argb:"F59E0B"},bold:!0})}7===n&&(s.font={color:{argb:"059669"},bold:!0}),s.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}),r++}),t.columns=[{width:15},{width:15},{width:12},{width:15},{width:12},{width:15},{width:18},{width:20},{width:15}],t}async exportWorkSessions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getFullYear(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!e||0===e.length)throw new Error("Tidak ada data untuk diekspor");try{this.resetWorkbook(),this.createSummarySheet(e,t,n,r,s),this.createMainDataSheet(e),this.createStepDetailsSheet(e),this.createStatusAnalysisSheet(e),this.createMOAnalysisSheet(e),this.createActivityAnalysisSheet(e);const i=await this.workbook.xlsx.writeBuffer(),a=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19);let o="WorkSessions_Enhanced_".concat(a);r&&(o+="_".concat(r.replace(/\s+/g,"_"))),s&&(o+="_".concat(s)),t&&(o+="_".concat(this.getMonthName(t))),n&&(o+="_".concat(n)),o+=".xlsx";const l=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return(0,QS.saveAs)(l,o),this.workbook=null,{success:!0,fileName:o,recordCount:e.length,message:"Export berhasil dengan fitur team analytics!"}}catch(pN){throw console.error("Export error:",pN),this.workbook=null,new Error("Gagal export: ".concat(pN.message))}}async exportSummaryReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getFullYear(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!e||0===e.length)throw new Error("Tidak ada data untuk diekspor");try{this.resetWorkbook(),this.createSummarySheet(e,t,n,r,s),this.createMainDataSheet(e);const i=await this.workbook.xlsx.writeBuffer(),a=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19);let o="Ringkasan_WorkSessions_".concat(a);r&&(o+="_".concat(r.replace(/\s+/g,"_"))),t&&(o+="_".concat(this.getMonthName(t))),n&&(o+="_".concat(n)),o+=".xlsx";const l=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return(0,QS.saveAs)(l,o),this.workbook=null,{success:!0,fileName:o,recordCount:e.length,message:"Export ringkasan berhasil!"}}catch(pN){throw console.error("Error exporting summary report:",pN),this.workbook=null,new Error("Gagal mengekspor laporan ringkasan: ".concat(pN.message))}}async exportMOAnalysisOnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getFullYear();if(!e||0===e.length)throw new Error("Tidak ada data untuk diekspor");try{this.resetWorkbook(),this.createMOAnalysisSheet(e);const r=await this.workbook.xlsx.writeBuffer(),s=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19);let i="Analisis_MO_Enhanced_".concat(s);t&&(i+="_".concat(this.getMonthName(t))),n&&(i+="_".concat(n)),i+=".xlsx";const a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return(0,QS.saveAs)(a,i),this.workbook=null,{success:!0,fileName:i,recordCount:e.length,message:"Export analisis MO berhasil!"}}catch(pN){throw console.error("Error exporting MO analysis:",pN),this.workbook=null,new Error("Gagal mengekspor analisis MO: ".concat(pN.message))}}async exportActivityAnalysisOnly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getFullYear();if(!e||0===e.length)throw new Error("Tidak ada data untuk diekspor");try{this.resetWorkbook(),this.createActivityAnalysisSheet(e);const r=await this.workbook.xlsx.writeBuffer(),s=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19);let i="Analisis_Aktivitas_".concat(s);t&&(i+="_".concat(this.getMonthName(t))),n&&(i+="_".concat(n)),i+=".xlsx";const a=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return(0,QS.saveAs)(a,i),this.workbook=null,{success:!0,fileName:i,recordCount:e.length,message:"Export analisis aktivitas berhasil!"}}catch(pN){throw console.error("Error exporting activity analysis:",pN),this.workbook=null,new Error("Gagal mengekspor analisis aktivitas: ".concat(pN.message))}}async exportTeamCollaborationReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getFullYear();if(!e||0===e.length)throw new Error("Tidak ada data untuk diekspor");try{this.resetWorkbook();const r=e.filter(e=>{var t;return((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1});if(0===r.length)throw new Error("Tidak ada data team collaboration untuk diekspor");this.createSummarySheet(r,t,n,"",""),this.createActivityAnalysisSheet(r),this.createStatusAnalysisSheet(r),this.createMOAnalysisSheet(r);const s=await this.workbook.xlsx.writeBuffer(),i=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19);let a="Team_Collaboration_Report_".concat(i);t&&(a+="_".concat(this.getMonthName(t))),n&&(a+="_".concat(n)),a+=".xlsx";const o=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});return(0,QS.saveAs)(o,a),this.workbook=null,{success:!0,fileName:a,recordCount:r.length,message:"Export team collaboration berhasil! (".concat(r.length," team sessions)")}}catch(pN){throw console.error("Error exporting team collaboration report:",pN),this.workbook=null,new Error("Gagal mengekspor laporan team collaboration: ".concat(pN.message))}}},ZS=JS,ej=Et("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),tj=Et("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),nj=e=>{if(!e||"00:00:00"===e||"00:00"===e)return 0;const t=e.toString().split(":").map(Number).reverse(),[n=0,r=0,s=0]=t;return 3600*s+60*r+n},rj=(e,t,n)=>{if("skipped"===n)return 0;if("pending"===n)return 0;if(!t||t<=0)return null;const r="string"===typeof e?nj(e):e||0,s="string"===typeof t?nj(t):t||0;if(s<=0||r<=0)return 0;const i=s/r*100,a=Math.min(i,100);return Math.round(10*a)/10},sj=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||0===e.length)return 0;let n=0,r=0,s=0,i=0,a=0,o=0;console.log("\ud83e\uddee Calculating session efficiency for ".concat(e.length," steps:")),e.forEach((e,l)=>{const c=rj(e.duration,e.targetTime,e.status);switch(console.log("  Step ".concat(l+1," (").concat(e.step,"):"),{status:e.status,duration:e.duration,targetTime:e.targetTime,efficiency:c}),r++,e.status){case"completed":i++;break;case"skipped":a++;break;default:o++}t?null!==c?(n+=c,s++):e.targetTime<=0&&(n+=0,s++):"completed"===e.status&&null!==c&&(n+=c,s++)});const l=r>0?n/r:0;return console.log("\ud83d\udcca Session efficiency calculation result:",{totalEfficiency:n,totalStepsCount:r,stepsWithEfficiency:s,sessionEfficiency:l.toFixed(1)+"%",completedSteps:i,skippedSteps:a,pendingSteps:o}),Math.round(10*Math.min(l,100))/10},ij=e=>{if(!e||0===e)return"00:00:00";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))},aj=e=>{if(!e||0===e)return"00:00";const t=Math.floor(e/60),n=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},oj=e=>{console.log("\ud83d\udcca Calculating completion stats for ".concat(e.length," sessions"));const t=(e=>{let t=e.length,n=0,r=0,s=0,i=0,a=0,o=0,l=0,c=0,u=0,d=0;console.log("\ud83c\udf1f Calculating overall stats for ".concat(t," sessions")),e.forEach((e,t)=>{if(!e.stepTimes)return void console.log("\u26a0\ufe0f Session ".concat(t+1," has no stepTimes"));console.log("\ud83d\udcc8 Processing session ".concat(t+1,":"),{id:e.id,stepTimesLength:e.stepTimes.length,sessionEfficiency:e.efficiency}),e.stepTimes.forEach(e=>{i++,e.targetTime>0&&c++;const t=rj(e.duration,e.targetTime,e.status);switch(null!==t&&(u+=t,d++),e.status){case"completed":a++;break;case"skipped":o++;break;default:l++}});const h=sj(e.stepTimes,!0);h>0&&(r+=h,n++,h>=80&&s++)});const h=i>0?u/i:0,f=n>0?r/n:0;return console.log("\ud83c\udfaf Overall Statistics Summary:",{totalSessions:t,totalSteps:i,stepsWithTargets:c,stepsWithCalculatedEfficiency:d,totalStepEfficiencySum:u.toFixed(1),overallStepEfficiency:h.toFixed(1)+"%",avgSessionEfficiency:f.toFixed(1)+"%",efficientSessions:s,completedSteps:a,skippedSteps:o,pendingSteps:l}),{totalSessions:t,sessionsWithTargets:n,avgEfficiency:Math.round(10*f)/10,overallStepEfficiency:Math.round(10*h)/10,totalStepEfficiencySum:u,stepsWithCalculatedEfficiency:d,efficientSessions:s,efficiencyRate:n>0?Math.round(s/n*100*10)/10:0,stepStats:{total:i,completed:a,skipped:o,pending:l,withTargets:c,completionRate:i>0?Math.round(a/i*100*10)/10:0,targetCoverage:i>0?Math.round(c/i*100*10)/10:0,withCalculatedEfficiency:d,efficiencyCalculationCoverage:i>0?Math.round(d/i*100*10)/10:0}}})(e),n=(e=>{let t=0,n=0,r=0,s=0,i=0,a=0;e.forEach(e=>{e.stepTimes&&e.stepTimes.forEach(e=>{const o=rj(e.duration,e.targetTime,e.status);null===o?a++:o>=90?t++:o>=80?n++:o>=60?r++:o>=40?s++:i++})});const o=t+n+r+s+i;return{excellent:{count:t,percentage:o>0?(t/o*100).toFixed(1):0},good:{count:n,percentage:o>0?(n/o*100).toFixed(1):0},average:{count:r,percentage:o>0?(r/o*100).toFixed(1):0},poor:{count:s,percentage:o>0?(s/o*100).toFixed(1):0},veryPoor:{count:i,percentage:o>0?(i/o*100).toFixed(1):0},noTarget:{count:a,percentage:0},totalWithEfficiency:o}})(e),r=e.filter(e=>"approved"===e.status).length,s=e.filter(e=>"rejected"===e.status).length,i=e.filter(e=>"pending"===e.status||!e.status).length;return console.log("\u2705 Completion stats calculated:",{overallStats:t,efficiencyBreakdown:n,statusStats:{approvedSessions:r,rejectedSessions:s,pendingSessions:i}}),{total:t.stepStats.total,completed:t.stepStats.completed,skipped:t.stepStats.skipped,pending:t.stepStats.pending,completedPercentage:t.stepStats.completionRate,skippedPercentage:t.stepStats.total>0?Math.round(t.stepStats.skipped/t.stepStats.total*100*10)/10:0,pendingPercentage:t.stepStats.total>0?Math.round(t.stepStats.pending/t.stepStats.total*100*10)/10:0,avgEfficiency:t.avgEfficiency,overallStepEfficiency:t.overallStepEfficiency,totalStepEfficiencySum:t.totalStepEfficiencySum,efficientSessions:t.efficientSessions,totalSessions:t.totalSessions,sessionsWithTarget:t.sessionsWithTargets,efficiencyPercentage:t.efficiencyRate,approvedSessions:r,rejectedSessions:s,pendingSessions:i,approvalRate:e.length>0?(r/e.length*100).toFixed(1):0,stepStats:t.stepStats,efficiencyBreakdown:n}},lj=e=>{let{isOpen:t,onClose:n,sessionData:r}=e;if(!t||!r)return null;const s=r.stepTimes.filter(e=>"completed"===e.status).length,i=r.stepTimes.filter(e=>"skipped"===e.status).length,a=r.stepTimes.filter(e=>"pending"===e.status).length,o=r.stepTimes.filter(e=>e.targetTime>0).length;return(0,qt.jsx)("div",{className:"modal-overlay",onClick:n,children:(0,qt.jsxs)("div",{className:"modal-container",onClick:e=>e.stopPropagation(),children:[(0,qt.jsxs)("div",{className:"modal-header",children:[(0,qt.jsxs)("div",{className:"modal-title",children:[(0,qt.jsx)("h2",{children:"Detail Langkah Work Session"}),(0,qt.jsxs)("div",{className:"modal-session-info",children:[(0,qt.jsx)("span",{className:"session-user",children:r.nama}),(0,qt.jsxs)("span",{className:"session-mo",children:["MO: ",r.moNumber]}),(0,qt.jsx)("span",{className:"session-task",children:r.workInstructionTitle})]})]}),(0,qt.jsx)("button",{className:"modal-close",onClick:n,children:(0,qt.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,qt.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,qt.jsxs)("div",{className:"modal-summary",children:[(0,qt.jsxs)("div",{className:"summary-card",children:[(0,qt.jsx)("div",{className:"summary-icon completed",children:(0,qt.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("polyline",{points:"20,6 9,17 4,12"})})}),(0,qt.jsxs)("div",{className:"summary-info",children:[(0,qt.jsx)("h3",{children:s}),(0,qt.jsx)("p",{children:"Selesai"})]})]}),(0,qt.jsxs)("div",{className:"summary-card",children:[(0,qt.jsx)("div",{className:"summary-icon skipped",children:(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("polygon",{points:"5,3 19,12 5,21"}),(0,qt.jsx)("polygon",{points:"19,3 19,21"})]})}),(0,qt.jsxs)("div",{className:"summary-info",children:[(0,qt.jsx)("h3",{children:i}),(0,qt.jsx)("p",{children:"Dilewati"})]})]}),(0,qt.jsxs)("div",{className:"summary-card",children:[(0,qt.jsx)("div",{className:"summary-icon pending",children:(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("polyline",{points:"12,6 12,12 16,14"})]})}),(0,qt.jsxs)("div",{className:"summary-info",children:[(0,qt.jsx)("h3",{children:a}),(0,qt.jsx)("p",{children:"Pending"})]})]}),(0,qt.jsxs)("div",{className:"summary-card",children:[(0,qt.jsx)("div",{className:"summary-icon efficiency",children:(0,qt.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),(0,qt.jsxs)("div",{className:"summary-info",children:[(0,qt.jsxs)("h3",{children:[r.efficiency.toFixed(1),"%"]}),(0,qt.jsx)("p",{children:"Efisiensi"})]})]}),(0,qt.jsxs)("div",{className:"summary-card",children:[(0,qt.jsx)("div",{className:"summary-icon target",children:(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"6"}),(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"2"})]})}),(0,qt.jsxs)("div",{className:"summary-info",children:[(0,qt.jsx)("h3",{children:o}),(0,qt.jsx)("p",{children:"Punya Target"})]})]})]}),(0,qt.jsx)("div",{className:"modal-body",children:(0,qt.jsx)("div",{className:"steps-list",children:r.stepTimes.map((e,t)=>{const n=rj(e.duration,e.targetTime,e.status),r=(e=>{if(null===e||void 0===e)return{value:"N/A",className:"no-target",color:"#999"};if(0===e)return{value:"0.0%",className:"zero-efficiency",color:"#ff4444"};const t=e>=80?"efficient":"inefficient",n=e>=80?"#28a745":e>=60?"#ffc107":"#dc3545";return{value:"".concat(e.toFixed(1),"%"),className:t,color:n}})(n);return(0,qt.jsxs)("div",{className:"step-item ".concat(e.status),children:[(0,qt.jsxs)("div",{className:"step-header",children:[(0,qt.jsxs)("div",{className:"step-info",children:[(0,qt.jsx)("div",{className:"step-number",children:t+1}),(0,qt.jsxs)("div",{className:"step-content",children:[(0,qt.jsx)("h4",{className:"step-name",children:e.step}),(0,qt.jsx)("div",{className:"step-meta",children:(0,qt.jsxs)("span",{className:"step-status-badge ".concat(e.status),children:["completed"===e.status&&(0,qt.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("polyline",{points:"20,6 9,17 4,12"})}),"skipped"===e.status&&(0,qt.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("polygon",{points:"5,3 19,12 5,21"})}),"pending"===e.status&&(0,qt.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"})}),"completed"===e.status?"Selesai":"skipped"===e.status?"Dilewati":"Pending"]})})]})]}),e.targetTime>0&&"pending"!==e.status&&(0,qt.jsxs)("div",{className:"efficiency-badge ".concat(r.className),children:[(0,qt.jsx)("span",{className:"efficiency-value",style:{color:r.color},children:r.value}),(0,qt.jsx)("div",{className:"efficiency-bar",children:(0,qt.jsx)("div",{className:"efficiency-fill",style:{width:"".concat(Math.min(n||0,100),"%"),backgroundColor:r.color}})})]})]}),(0,qt.jsxs)("div",{className:"step-times",children:[(0,qt.jsxs)("div",{className:"time-item actual",children:[(0,qt.jsx)("span",{className:"time-label",children:"Waktu Aktual:"}),(0,qt.jsx)("span",{className:"time-value",children:aj(e.duration)})]}),(0,qt.jsxs)("div",{className:"time-item target",children:[(0,qt.jsx)("span",{className:"time-label",children:"Waktu Target:"}),(0,qt.jsx)("span",{className:"time-value",children:e.targetTime>0?aj(e.targetTime):"Tidak diset"})]}),e.targetTime>0&&e.duration>0&&(0,qt.jsxs)("div",{className:"time-item difference",children:[(0,qt.jsx)("span",{className:"time-label",children:"Selisih:"}),(0,qt.jsxs)("span",{className:"time-value ".concat(e.duration<=e.targetTime?"under":"over"),children:[e.duration<=e.targetTime?"-":"+",aj(Math.abs(e.duration-e.targetTime))]})]})]}),"skipped"===e.status&&(0,qt.jsxs)("div",{className:"step-note skipped",children:[(0,qt.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,qt.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,qt.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),"Langkah ini dilewati dalam proses"]})]},t)})})}),(0,qt.jsxs)("div",{className:"modal-footer",children:[(0,qt.jsxs)("div",{className:"modal-total-times",children:[(0,qt.jsxs)("div",{className:"total-time actual",children:[(0,qt.jsx)("span",{className:"label",children:"Total Waktu Aktual:"}),(0,qt.jsx)("span",{className:"value",children:ij(r.totalTime)})]}),(0,qt.jsxs)("div",{className:"total-time target",children:[(0,qt.jsx)("span",{className:"label",children:"Total Waktu Target:"}),(0,qt.jsx)("span",{className:"value",children:r.targetTime>0?ij(r.targetTime):"N/A"})]}),(0,qt.jsxs)("div",{className:"total-time efficiency",children:[(0,qt.jsx)("span",{className:"label",children:"Efisiensi Keseluruhan:"}),(0,qt.jsxs)("span",{className:"value ".concat(r.efficiency>=80?"efficient":"inefficient"),children:[r.efficiency.toFixed(1),"%"]})]})]}),(0,qt.jsx)("button",{className:"modal-button primary",onClick:n,children:"Tutup"})]})]})})},cj=t=>{let{isOpen:n,onClose:r,sessionData:s}=t;const[i,a]=(0,e.useState)("activities");if(!n||!s)return null;const o=(()=>{const e=[],t=s.originalSession||s;return t.createdAt&&e.push({type:"session_created",timestamp:t.createdAt,userId:t.createdBy||t.operatorId,userName:t.operatorName||t.userName||"Unknown",details:"Sesi kerja dibuat untuk ".concat(s.workInstructionTitle)}),t.stepStartedBy&&Object.entries(t.stepStartedBy).forEach(t=>{var n;let[r,i]=t;e.push({type:"step_started",timestamp:i.startedAt,userId:i.userId,userName:i.userName,stepIndex:parseInt(r),details:"Memulai Step ".concat(parseInt(r)+1,": ").concat((null===(n=s.stepTimes[r])||void 0===n?void 0:n.step)||"Langkah ".concat(parseInt(r)+1))})}),t.stepCompletedBy&&Object.entries(t.stepCompletedBy).forEach(t=>{let[n,r]=t;e.push({type:"step_completed",timestamp:r.completedAt,userId:r.userId,userName:r.userName,stepIndex:parseInt(n),details:"Menyelesaikan Step ".concat(parseInt(n)+1," dalam ").concat(ij(r.completionTime||0))})}),t.stepSkippedBy&&Object.entries(t.stepSkippedBy).forEach(t=>{let[n,r]=t;e.push({type:"step_skipped",timestamp:r.skippedAt,userId:r.userId,userName:r.userName,stepIndex:parseInt(n),details:"Melewati Step ".concat(parseInt(n)+1).concat(r.reason?": ".concat(r.reason):"")})}),t.stepStoppedBy&&Object.entries(t.stepStoppedBy).forEach(t=>{let[n,r]=t;e.push({type:"step_stopped",timestamp:r.stoppedAt,userId:r.userId,userName:r.userName,stepIndex:parseInt(n),details:"Menghentikan Step ".concat(parseInt(n)+1," pada waktu ").concat(ij(r.stoppedAtTime||0))})}),s.troubleshootHistory&&s.troubleshootHistory.forEach(t=>{e.push({type:"troubleshoot",timestamp:new Date(t.timestamp),userId:t.userId,userName:t.userName,stepIndex:t.stepIndex,details:"Troubleshoot Step ".concat(t.stepIndex+1,": ").concat(t.description).concat(t.solution?" | Solusi: ".concat(t.solution):"")})}),t.completedAt&&e.push({type:"session_completed",timestamp:t.completedAt,userId:t.operatorId||t.createdBy,userName:t.operatorName||t.userName||"Unknown",details:"Sesi kerja diselesaikan dengan total waktu ".concat(ij(s.totalTime))}),e.sort((e,t)=>{var n,r;const s=null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():new Date(e.timestamp);return(null!==(r=t.timestamp)&&void 0!==r&&r.toDate?t.timestamp.toDate():new Date(t.timestamp))-s})})(),l=(s.originalSession||s).participants||[],c=l.length>1;return(0,qt.jsx)("div",{className:"modal-overlay activity-modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content activity-history-modal",children:[(0,qt.jsxs)("div",{className:"modal-header",children:[(0,qt.jsx)("h3",{children:"\ud83d\udcca Riwayat Aktivitas & Detail Sesi"}),(0,qt.jsx)("button",{onClick:r,className:"modal-close-btn",children:"\u2715"})]}),(0,qt.jsxs)("div",{className:"session-mode-indicator",children:[(0,qt.jsxs)("div",{className:"mode-badge ".concat(c?"team-mode":"individual-mode"),children:[(0,qt.jsx)("span",{className:"mode-icon",children:c?"\ud83d\udc65":"\ud83d\udc64"}),(0,qt.jsxs)("span",{className:"mode-text",children:["Mode: ",c?"Tim (".concat(l.length," operator)"):"Individu"]})]}),c&&(0,qt.jsxs)("div",{className:"team-efficiency-indicator",children:[(0,qt.jsx)("span",{className:"team-label",children:"Efisiensi Tim:"}),(0,qt.jsxs)("span",{className:"efficiency-value ".concat(s.efficiency>=80?"efficient":"needs-improvement"),children:[s.efficiency.toFixed(1),"%"]})]})]}),(0,qt.jsxs)("div",{className:"activity-tabs",children:[(0,qt.jsxs)("button",{className:"tab-btn ".concat("activities"===i?"active":""),onClick:()=>a("activities"),children:["\ud83d\udccb Aktivitas (",o.length,")"]}),(0,qt.jsxs)("button",{className:"tab-btn ".concat("participants"===i?"active":""),onClick:()=>a("participants"),children:["\ud83d\udc65 ",c?"Tim (".concat(l.length,")"):"Operator (1)"]}),(0,qt.jsxs)("button",{className:"tab-btn ".concat("steps"===i?"active":""),onClick:()=>a("steps"),children:["\ud83d\udcdd Detail Langkah (",s.stepTimes.length,")"]})]}),(0,qt.jsxs)("div",{className:"tab-content",children:["activities"===i&&(0,qt.jsx)("div",{className:"activities-content",children:0===o.length?(0,qt.jsx)("div",{className:"no-activities",children:(0,qt.jsx)("p",{children:"\ud83d\udcdd Belum ada aktivitas yang tercatat"})}):(0,qt.jsx)("div",{className:"activities-timeline",children:o.map((e,t)=>{var n;const r=null!==(n=e.timestamp)&&void 0!==n&&n.toDate?e.timestamp.toDate():new Date(e.timestamp);return(0,qt.jsxs)("div",{className:"activity-item ".concat(e.type),children:[(0,qt.jsxs)("div",{className:"activity-icon",children:["session_created"===e.type&&"\ud83c\udd95","step_started"===e.type&&"\u25b6\ufe0f","step_completed"===e.type&&"\u2705","step_skipped"===e.type&&"\u2b50","step_stopped"===e.type&&"\u23f8\ufe0f","troubleshoot"===e.type&&"\ud83d\udd27","session_completed"===e.type&&"\ud83c\udf89"]}),(0,qt.jsxs)("div",{className:"activity-content",children:[(0,qt.jsxs)("div",{className:"activity-header",children:[(0,qt.jsx)("span",{className:"activity-user",children:e.userName}),(0,qt.jsx)("span",{className:"activity-time",children:r.toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),(0,qt.jsx)("div",{className:"activity-details",children:e.details}),void 0!==e.stepIndex&&(0,qt.jsx)("div",{className:"activity-step-info",children:(0,qt.jsxs)("small",{children:["\ud83d\udccd Step ",e.stepIndex+1]})})]})]},t)})})}),"participants"===i&&(0,qt.jsxs)("div",{className:"participants-content",children:[0===l.length?(0,qt.jsx)("div",{className:"no-participants",children:(0,qt.jsx)("p",{children:"\ud83d\udc64 Data partisipan tidak tersedia"})}):(0,qt.jsx)("div",{className:"participants-list",children:l.map((e,t)=>{var n,r;const s=o.filter(t=>t.userId===e.userId).length,i=o.filter(t=>t.userId===e.userId&&"step_completed"===t.type).length;return(0,qt.jsxs)("div",{className:"participant-card",children:[(0,qt.jsxs)("div",{className:"participant-header",children:[(0,qt.jsx)("div",{className:"participant-avatar",children:(null===(n=e.userName)||void 0===n?void 0:n.charAt(0).toUpperCase())||"?"}),(0,qt.jsxs)("div",{className:"participant-info",children:[(0,qt.jsx)("h4",{className:"participant-name",children:e.userName||"Unknown"}),(0,qt.jsxs)("div",{className:"participant-roles",children:["creator"===e.role&&(0,qt.jsx)("span",{className:"role-badge creator",children:"\ud83d\udc51 Koordinator"}),!1===e.isActive&&(0,qt.jsx)("span",{className:"role-badge inactive",children:"\ud83d\udd34 Keluar"}),!1!==e.isActive&&(0,qt.jsx)("span",{className:"role-badge active",children:"\ud83d\udfe2 Aktif"})]})]})]}),(0,qt.jsxs)("div",{className:"participant-stats",children:[(0,qt.jsxs)("div",{className:"stat-item",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Bergabung:"}),(0,qt.jsx)("span",{className:"stat-value",children:(null===(r=e.joinedAt)||void 0===r?void 0:r.toDate().toLocaleString("id-ID"))||"Unknown"})]}),(0,qt.jsxs)("div",{className:"stat-item",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Total Aktivitas:"}),(0,qt.jsx)("span",{className:"stat-value",children:s})]}),(0,qt.jsxs)("div",{className:"stat-item",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Langkah Diselesaikan:"}),(0,qt.jsx)("span",{className:"stat-value",children:i})]}),e.leftAt&&(0,qt.jsxs)("div",{className:"stat-item",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Keluar:"}),(0,qt.jsx)("span",{className:"stat-value",children:e.leftAt.toDate().toLocaleString("id-ID")})]})]})]},t)})}),c&&(0,qt.jsxs)("div",{className:"team-summary",children:[(0,qt.jsx)("h4",{children:"\ud83d\udcca Ringkasan Tim"}),(0,qt.jsxs)("div",{className:"team-stats",children:[(0,qt.jsxs)("div",{className:"team-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Total Operator:"}),(0,qt.jsx)("span",{className:"stat-value",children:l.length})]}),(0,qt.jsxs)("div",{className:"team-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Operator Aktif:"}),(0,qt.jsx)("span",{className:"stat-value",children:l.filter(e=>!1!==e.isActive).length})]}),(0,qt.jsxs)("div",{className:"team-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"Kolaborasi:"}),(0,qt.jsxs)("span",{className:"stat-value",children:[o.filter(e=>e.type.includes("step_")).length," aktivitas step"]})]})]})]})]}),"steps"===i&&(0,qt.jsxs)("div",{className:"steps-detail-content",children:[(0,qt.jsx)("div",{className:"steps-overview",children:(0,qt.jsxs)("div",{className:"overview-stats",children:[(0,qt.jsxs)("div",{className:"overview-stat",children:[(0,qt.jsx)("span",{className:"stat-number",children:s.stepTimes.length}),(0,qt.jsx)("span",{className:"stat-label",children:"Total Langkah"})]}),(0,qt.jsxs)("div",{className:"overview-stat",children:[(0,qt.jsx)("span",{className:"stat-number",children:s.stepTimes.filter(e=>"completed"===e.status).length}),(0,qt.jsx)("span",{className:"stat-label",children:"Selesai"})]}),(0,qt.jsxs)("div",{className:"overview-stat",children:[(0,qt.jsx)("span",{className:"stat-number",children:s.stepTimes.filter(e=>"skipped"===e.status).length}),(0,qt.jsx)("span",{className:"stat-label",children:"Dilewati"})]})]})}),(0,qt.jsx)("div",{className:"steps-list-detailed",children:s.stepTimes.map((e,t)=>{const n=o.filter(e=>e.stepIndex===t),r=e.efficiency>=80;return(0,qt.jsxs)("div",{className:"step-detail-card ".concat(e.status),children:[(0,qt.jsxs)("div",{className:"step-detail-header",children:[(0,qt.jsxs)("div",{className:"step-number",children:["#",t+1]}),(0,qt.jsx)("div",{className:"step-title",children:e.step}),(0,qt.jsxs)("div",{className:"step-status-badge ".concat(e.status),children:["completed"===e.status&&"\u2705","skipped"===e.status&&"\u2b50","pending"===e.status&&"\u23f3"]})]}),(0,qt.jsxs)("div",{className:"step-detail-info",children:[(0,qt.jsxs)("div",{className:"step-times",children:[(0,qt.jsxs)("div",{className:"time-info",children:[(0,qt.jsx)("span",{className:"time-label",children:"Waktu Aktual:"}),(0,qt.jsx)("span",{className:"time-value actual",children:ij(e.duration)})]}),e.targetTime>0&&(0,qt.jsxs)("div",{className:"time-info",children:[(0,qt.jsx)("span",{className:"time-label",children:"Waktu Target:"}),(0,qt.jsx)("span",{className:"time-value target",children:ij(e.targetTime)})]}),e.targetTime>0&&(0,qt.jsxs)("div",{className:"efficiency-info",children:[(0,qt.jsx)("span",{className:"efficiency-label",children:"Efisiensi:"}),(0,qt.jsxs)("span",{className:"efficiency-value ".concat(r?"efficient":"inefficient"),children:[e.efficiency.toFixed(1),"%"]})]})]}),n.length>0&&(0,qt.jsxs)("div",{className:"step-activities-summary",children:[(0,qt.jsxs)("strong",{children:["Aktivitas (",n.length,"):"]}),(0,qt.jsxs)("ul",{children:[n.slice(0,3).map((e,t)=>(0,qt.jsx)("li",{children:(0,qt.jsxs)("small",{children:[(0,qt.jsx)("strong",{children:e.userName})," - ",e.details]})},t)),n.length>3&&(0,qt.jsx)("li",{children:(0,qt.jsxs)("small",{children:["... dan ",n.length-3," aktivitas lainnya"]})})]})]})]})]},t)})})]})]})]})})},uj=()=>{const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)(""),[i,a]=(0,e.useState)((new Date).getFullYear()),[o,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)([]),[g,b]=(0,e.useState)([]),[v,y]=(0,e.useState)({}),[w,x]=(0,e.useState)(!0),[k,_]=(0,e.useState)(""),[S,j]=(0,e.useState)(!1),[N,T]=(0,e.useState)(!1),[E,C]=(0,e.useState)({}),[I,A]=(0,e.useState)(null),[M,O]=(0,e.useState)(!1),[R,D]=(0,e.useState)(null),[P,L]=(0,e.useState)(!1),F=he(),B=async(e,t)=>{try{C(t=>l(l({},t),{},{[e]:!0}));const r=Fy(Z_,"workSessions",e);await Gw(r,{status:t,statusUpdatedAt:new Date,statusUpdatedBy:"admin"}),n(n=>n.map(n=>n.id===e?l(l({},n),{},{status:t,statusUpdatedAt:new Date,statusUpdatedBy:"admin"}):n)),console.log("\u2705 Status updated for session ".concat(e,": ").concat(t))}catch(k){console.error("\u26a0\ufe0f Error updating status:",k),alert("Gagal mengupdate status: ".concat(k.message))}finally{C(t=>l(l({},t),{},{[e]:!1}))}},U=()=>{F("/")},z=()=>{j(!S)},V=e=>{const t={approved:{label:"Disetujui",class:"approved",icon:"\u2713"},rejected:{label:"Ditolak",class:"rejected",icon:"\u2715"},pending:{label:"Menunggu",class:"pending",icon:"\u23f3"}},n=t[e]||t.pending;return(0,qt.jsxs)("span",{className:"admin-status-badge ".concat(n.class),children:[(0,qt.jsx)("span",{className:"admin-status-icon",children:n.icon}),n.label]})},H=(e,t)=>{const n=E[e];return(0,qt.jsxs)("div",{className:"admin-action-buttons",children:["approved"!==t&&(0,qt.jsx)("button",{onClick:()=>B(e,"approved"),disabled:n,className:"admin-action-btn approve",title:"Setujui",children:n?(0,qt.jsx)("div",{className:"mini-spinner"}):(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("polyline",{points:"20,6 9,17 4,12"})})}),"rejected"!==t&&(0,qt.jsx)("button",{onClick:()=>B(e,"rejected"),disabled:n,className:"admin-action-btn reject",title:"Tolak",children:n?(0,qt.jsx)("div",{className:"mini-spinner"}):(0,qt.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,qt.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),"pending"!==t&&(0,qt.jsx)("button",{onClick:()=>B(e,"pending"),disabled:n,className:"admin-action-btn pending",title:"Set Pending",children:n?(0,qt.jsx)("div",{className:"mini-spinner"}):(0,qt.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("polyline",{points:"12,6 12,12 16,14"})]})})]})},W=e=>(0,qt.jsxs)("button",{onClick:()=>(A(e),void O(!0)),className:"admin-steps-modal-btn",title:"Lihat detail langkah",children:[(0,qt.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),"Lihat Detail (",e.stepTimes.length," langkah)"]}),q=e=>{var t;const n=(null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[],r=n.length>1;return(0,qt.jsxs)("div",{className:"team-mode-indicator",children:[(0,qt.jsxs)("span",{className:"mode-badge ".concat(r?"team":"individual"),children:[(0,qt.jsx)("span",{className:"mode-icon",children:r?"\ud83d\udc65":"\ud83d\udc64"}),(0,qt.jsx)("span",{className:"mode-text",children:r?"Tim (".concat(n.length,")"):"Individu"})]}),r&&(0,qt.jsx)("span",{className:"team-efficiency-badge",children:"Kolaborasi"})]})},K=e=>{var t;const n=(null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[],r=e.originalSession||e;let s=0;return r.stepStartedBy&&(s+=Object.keys(r.stepStartedBy).length),r.stepCompletedBy&&(s+=Object.keys(r.stepCompletedBy).length),r.stepSkippedBy&&(s+=Object.keys(r.stepSkippedBy).length),r.stepStoppedBy&&(s+=Object.keys(r.stepStoppedBy).length),e.troubleshootHistory&&(s+=e.troubleshootHistory.length),(0,qt.jsxs)("div",{className:"activity-buttons",children:[(0,qt.jsxs)("button",{onClick:()=>(D(e),void L(!0)),className:"admin-activity-modal-btn",title:"Lihat riwayat aktivitas dan detail tim",children:[(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,qt.jsxs)("span",{className:"activity-btn-text",children:["Riwayat Aktivitas (",s,")"]})]}),n.length>1&&(0,qt.jsx)("div",{className:"team-info-preview",children:(0,qt.jsxs)("small",{children:[n.length," operator berkolaborasi"]})})]})};(0,e.useEffect)(()=>{(async()=>{try{x(!0),_("");const t=await(async()=>{try{const e=Ly(Z_,"tasks"),t=await qw(e),n={};return console.log("\ud83d\udcca Found ".concat(t.size," task documents")),t.forEach(e=>{const t=e.data();console.log("\ud83d\udcc4 Processing task document: ".concat(e.id),t);const r=t.steps||[];let s=0,i=0;const a=Array.isArray(r)?r.map((e,t)=>{let n=0;return void 0!==e.maxTime&&(n="string"===typeof e.maxTime?parseInt(e.maxTime,10)||0:"number"===typeof e.maxTime?e.maxTime:0),n>0&&(s+=n,i++),l(l({},e),{},{maxTime:n,title:e.title||e.name||e.stepName||"Langkah ".concat(t+1)})}):[];console.log('\ud83d\udcca Task "'.concat(t.title,'": ').concat(i," steps with targets, total: ").concat(s,"s")),n[e.id]={title:t.title||t.name||"Instruksi ".concat(e.id),targetTime:t.targetTime||s,standardTime:t.standardTime||t.targetTime||s,steps:a,totalStepTargetTime:s,stepsWithTarget:i,totalSteps:a.length}}),console.log("\u2705 Work Instructions loaded:",Object.keys(n).map(e=>({id:e,title:n[e].title,totalStepTargetTime:n[e].totalStepTargetTime,stepsWithTarget:n[e].stepsWithTarget}))),y(n),n}catch(k){return console.error("\u26a0\ufe0f Error fetching work instructions:",k),{}}})(),r=Ly(Z_,"workSessions");let s=[];try{const e=Nw(r,Aw("createdAt","desc"));(await qw(e)).forEach(e=>{var t,n,r,i,a;const o=e.data();s.push(l(l({id:e.id},o),{},{createdAt:null===(t=o.createdAt)||void 0===t?void 0:t.toDate(),completedAt:null===(n=o.completedAt)||void 0===n?void 0:n.toDate(),startTime:null===(r=o.startTime)||void 0===r?void 0:r.toDate(),lastUpdated:null===(i=o.lastUpdated)||void 0===i?void 0:i.toDate(),statusUpdatedAt:null===(a=o.statusUpdatedAt)||void 0===a?void 0:a.toDate()}))})}catch(e){console.warn("OrderBy query failed, falling back to simple query:",e);(await qw(r)).forEach(e=>{var t,n,r,i,a;const o=e.data();s.push(l(l({id:e.id},o),{},{createdAt:null===(t=o.createdAt)||void 0===t?void 0:t.toDate(),completedAt:null===(n=o.completedAt)||void 0===n?void 0:n.toDate(),startTime:null===(r=o.startTime)||void 0===r?void 0:r.toDate(),lastUpdated:null===(i=o.lastUpdated)||void 0===i?void 0:i.toDate(),statusUpdatedAt:null===(a=o.statusUpdatedAt)||void 0===a?void 0:a.toDate()}))}),s.sort((e,t)=>{const n=e.completedAt||e.createdAt||e.startTime||new Date(0);return(t.completedAt||t.createdAt||t.startTime||new Date(0))-n})}const i=new Set,a=new Set,o=await Promise.all(s.filter(e=>e.completedAt||"completed"===e.status).map(async e=>{console.log("\ud83d\udd0d Processing session ".concat(e.id,":"),{operatorId:e.operatorId,operatorName:e.operatorName,userId:e.userId,userName:e.userName,createdBy:e.createdBy});const n=e.taskId||e.workInstructionId,r=t[n];console.log("\ud83d\udd0d Looking for instruction ".concat(n,":"),r?"Found":"Not found");let s=0;s=e.totalTargetTime?e.totalTargetTime:e.stepTargetTimes&&Array.isArray(e.stepTargetTimes)?e.stepTargetTimes.reduce((e,t)=>e+(t||0),0):r?r.totalStepTargetTime||r.targetTime||0:e.targetTime||0;const o=[];e.stepStatuses&&e.stepCompletionTimes&&e.stepStatuses.forEach((t,n)=>{const s=e.stepCompletionTimes[n]||0;let i="Langkah ".concat(n+1),a=0;null!==r&&void 0!==r&&r.steps&&r.steps[n]?(i=r.steps[n].title||i,a=r.steps[n].maxTime||0):e.stepTargetTimes&&e.stepTargetTimes[n]&&(a=e.stepTargetTimes[n]),"string"===typeof a&&(a=parseInt(a,10)||0);const l=rj(s,a,t);o.push({step:i,duration:s,targetTime:a,status:t,efficiency:l})});const l=await(async e=>{try{const t=e.operatorId||e.userId||e.createdBy;if(!t)return e.operatorName||e.userName||"Unknown User";const n=await Hw(Fy(Z_,"users",t));if(n.exists()){const e=n.data();return e.displayName||e.name||e.email||t}return e.operatorName||e.userName||t}catch(k){return console.error("Error fetching user data:",k),e.operatorName||e.userName||e.userId||e.operatorId||"Unknown User"}})(e);i.add(l);const c=e.moNumber||e.mo||e.manufacturingOrder||"N/A";"N/A"!==c&&a.add(c),console.log("\u2705 Processed session ".concat(e.id,":"),{userName:l,moNumber:c,instructionId:n,workInstruction:r?"Found":"Not found",calculatedTargetTime:s,stepTimesCount:o.length,stepsWithTargets:o.filter(e=>e.targetTime>0).length,totalTime:e.totalTime});const u=e.totalTime||0,d=sj(o,!0),h=d>=80,f=e.completedAt||e.createdAt||e.startTime||new Date;return{id:e.id,nama:l,userId:e.operatorId||e.userId||e.createdBy,mo:c,moNumber:c,tanggal:f,totalTime:u,targetTime:s,stepTimes:o,workInstructionTitle:e.workInstructionTitle||(null===r||void 0===r?void 0:r.title)||"Unknown Task",workInstructionId:n,startTime:e.startTime,currentStep:e.currentStep,totalSteps:e.totalSteps||o.length,isActive:e.isActive,efficiency:d,isEfficient:h,hasTargetTime:s>0,status:e.status||"pending",statusUpdatedAt:e.statusUpdatedAt,statusUpdatedBy:e.statusUpdatedBy,originalSession:{operatorId:e.operatorId,operatorName:e.operatorName,userId:e.userId,userName:e.userName,createdBy:e.createdBy,totalTargetTime:e.totalTargetTime,stepTargetTimes:e.stepTargetTimes,participants:e.participants||[],stepStartedBy:e.stepStartedBy||{},stepCompletedBy:e.stepCompletedBy||{},stepSkippedBy:e.stepSkippedBy||{},stepStoppedBy:e.stepStoppedBy||{},stepOperators:e.stepOperators||{},createdAt:e.createdAt,completedAt:e.completedAt,startTime:e.startTime,lastUpdated:e.lastUpdated},troubleshootHistory:e.troubleshootHistory||[],rawCreatedAt:e.rawCreatedAt,rawCompletedAt:e.rawCompletedAt,rawStartTime:e.rawStartTime}}));o.sort((e,t)=>{const n=e.rawCompletedAt||e.rawCreatedAt||e.rawStartTime||new Date(0);return(t.rawCompletedAt||t.rawCreatedAt||t.rawStartTime||new Date(0))-n}),console.log("\ud83d\udd0d Sample transformed data:",o.slice(0,2).map(e=>{var t,n;return{id:e.id,nama:e.nama,userId:e.userId,moNumber:e.moNumber,tanggal:e.tanggal,targetTime:e.targetTime,hasTargetTime:e.hasTargetTime,efficiency:e.efficiency,stepTimesWithTargets:e.stepTimes.filter(e=>e.targetTime>0).length,originalData:e.originalSession,isTeamWork:((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1,teamSize:((null===(n=e.originalSession)||void 0===n?void 0:n.participants)||[]).length}})),m(Array.from(i).sort()),b(Array.from(a).sort()),n(o),_("")}catch(k){console.error("Gagal mengambil data work sessions:",k),_("Gagal mengambil data: ".concat(k.message))}finally{x(!1)}})()},[]);const G=t.filter(e=>{const t=e.tanggal,n=!r||t.getMonth()+1===parseInt(r),s=!i||t.getFullYear()===parseInt(i),a=!o||e.nama===o,l=!u||e.status===u,c=!h||e.moNumber===h;return n&&s&&a&&l&&c}).sort((e,t)=>{const n=e.rawCompletedAt||e.rawCreatedAt||e.rawStartTime||new Date(0);return(t.rawCompletedAt||t.rawCreatedAt||t.rawStartTime||new Date(0))-n}),$=oj(G);return w?(0,qt.jsxs)("div",{className:"admin-container",children:[(0,qt.jsx)("div",{className:"admin-header",children:(0,qt.jsx)("div",{className:"admin-header-left",children:(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"admin-logo",onClick:U})})}),(0,qt.jsxs)("div",{className:"admin-loading",children:[(0,qt.jsx)("div",{className:"loading-spinner"}),(0,qt.jsx)("p",{children:"Memuat data..."})]})]}):(0,qt.jsxs)("div",{className:"admin-container",children:[(0,qt.jsxs)("div",{className:"admin-header",children:[(0,qt.jsxs)("div",{className:"admin-header-left",children:[(0,qt.jsx)("button",{className:"admin-sidebar-toggle",onClick:z,children:(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,qt.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,qt.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"admin-logo",onClick:U})]}),(0,qt.jsx)("div",{className:"admin-header-center",children:(0,qt.jsx)("h1",{className:"admin-title",children:"Dashboard Work Sessions"})}),(0,qt.jsx)("div",{className:"admin-header-right",children:(0,qt.jsxs)("button",{onClick:()=>{F("/")},className:"admin-back-button",children:[(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Logout"]})})]}),(0,qt.jsxs)("div",{className:"admin-sidebar ".concat(S?"admin-sidebar-open":""),children:[(0,qt.jsxs)("div",{className:"admin-sidebar-header",children:[(0,qt.jsx)("h3",{children:"Menu"}),(0,qt.jsx)("button",{className:"admin-sidebar-close",onClick:z,children:(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,qt.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,qt.jsxs)("nav",{className:"admin-sidebar-nav",children:[(0,qt.jsxs)("button",{onClick:()=>{j(!1)},className:"admin-sidebar-item active",children:[(0,qt.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M9 11H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h4m6-6h4a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-4m-6 0V9a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z"})}),(0,qt.jsx)("span",{children:"Work Sessions"})]}),(0,qt.jsxs)("button",{onClick:()=>{F("/approvals"),j(!1)},className:"admin-sidebar-item",children:[(0,qt.jsx)(ej,{size:20}),(0,qt.jsx)("span",{children:"User Management"})]}),(0,qt.jsxs)("button",{onClick:()=>{F("/add-mo")},className:"add-task-sidebar-item",children:[(0,qt.jsx)(tj,{size:20}),(0,qt.jsx)("span",{children:"MO Management"})]}),(0,qt.jsxs)("button",{onClick:()=>{F("/addtask"),j(!1)},className:"admin-sidebar-item",children:[(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,qt.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),(0,qt.jsx)("span",{children:"Add Task"})]})]})]}),S&&(0,qt.jsx)("div",{className:"admin-sidebar-overlay",onClick:z}),(0,qt.jsxs)("div",{className:"admin-main-content ".concat(S?"admin-main-content-shifted":""),children:[k&&(0,qt.jsxs)("div",{className:"admin-error",children:[(0,qt.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,qt.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),k]}),(0,qt.jsxs)("div",{className:"admin-filters",children:[(0,qt.jsxs)("div",{className:"admin-filter-group",children:[(0,qt.jsx)("label",{children:"Bulan:"}),(0,qt.jsxs)("select",{value:r,onChange:e=>s(e.target.value),className:"admin-filter-select",children:[(0,qt.jsx)("option",{value:"",children:"Semua Bulan"}),(0,qt.jsx)("option",{value:"1",children:"Januari"}),(0,qt.jsx)("option",{value:"2",children:"Februari"}),(0,qt.jsx)("option",{value:"3",children:"Maret"}),(0,qt.jsx)("option",{value:"4",children:"April"}),(0,qt.jsx)("option",{value:"5",children:"Mei"}),(0,qt.jsx)("option",{value:"6",children:"Juni"}),(0,qt.jsx)("option",{value:"7",children:"Juli"}),(0,qt.jsx)("option",{value:"8",children:"Agustus"}),(0,qt.jsx)("option",{value:"9",children:"September"}),(0,qt.jsx)("option",{value:"10",children:"Oktober"}),(0,qt.jsx)("option",{value:"11",children:"November"}),(0,qt.jsx)("option",{value:"12",children:"Desember"})]})]}),(0,qt.jsxs)("div",{className:"admin-filter-group",children:[(0,qt.jsx)("label",{children:"Tahun:"}),(0,qt.jsx)("select",{value:i,onChange:e=>a(e.target.value),className:"admin-filter-select",children:[...Array(5)].map((e,t)=>{const n=(new Date).getFullYear()-t;return(0,qt.jsx)("option",{value:n,children:n},n)})})]}),(0,qt.jsxs)("div",{className:"admin-filter-group",children:[(0,qt.jsx)("label",{children:"User:"}),(0,qt.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"admin-filter-select",children:[(0,qt.jsx)("option",{value:"",children:"Semua User"}),p.map(e=>(0,qt.jsx)("option",{value:e,children:e},e))]})]}),(0,qt.jsxs)("div",{className:"admin-filter-group",children:[(0,qt.jsx)("label",{children:"Nomor MO:"}),(0,qt.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"admin-filter-select",children:[(0,qt.jsx)("option",{value:"",children:"Semua MO"}),g.map(e=>(0,qt.jsx)("option",{value:e,children:e},e))]})]}),(0,qt.jsxs)("div",{className:"admin-filter-group",children:[(0,qt.jsx)("label",{children:"Status:"}),(0,qt.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"admin-filter-select",children:[(0,qt.jsx)("option",{value:"",children:"Semua Status"}),(0,qt.jsx)("option",{value:"pending",children:"Menunggu"}),(0,qt.jsx)("option",{value:"approved",children:"Disetujui"}),(0,qt.jsx)("option",{value:"rejected",children:"Ditolak"})]})]}),(0,qt.jsxs)("button",{onClick:async()=>{if(0!==G.length)try{T(!0);const e=await ZS.exportWorkSessions(G,r,i,o,u,h);alert("\u2705 Export berhasil!\nFile: ".concat(e.fileName,"\nJumlah data: ").concat(e.recordCount," sessions"))}catch(k){console.error("Export error:",k),alert("\u26a0\ufe0f Export gagal: ".concat(k.message))}finally{T(!1)}else alert("Tidak ada data untuk diekspor")},disabled:N||0===G.length,className:"admin-action-button export",children:[N?(0,qt.jsx)("div",{className:"mini-spinner"}):(0,qt.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,qt.jsx)("polyline",{points:"7,10 12,15 17,10"}),(0,qt.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Export Excel"]})]}),(0,qt.jsxs)("div",{className:"admin-summary-cards",children:[(0,qt.jsxs)("div",{className:"admin-summary-card total",children:[(0,qt.jsx)("div",{className:"admin-summary-icon",children:(0,qt.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M9 11H5a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h4m6-6h4a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-4m-6 0V9a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z"})})}),(0,qt.jsxs)("div",{className:"admin-summary-info",children:[(0,qt.jsx)("h3",{style:{color:"#2563eb"},children:G.length}),(0,qt.jsx)("p",{style:{color:"#1d4ed8"},children:"Total Sessions"})]})]}),(0,qt.jsxs)("div",{className:"admin-summary-card completed",children:[(0,qt.jsx)("div",{className:"admin-summary-icon",children:(0,qt.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("polyline",{points:"20,6 9,17 4,12"})})}),(0,qt.jsxs)("div",{className:"admin-summary-info",children:[(0,qt.jsx)("h3",{style:{color:"#059669"},children:$.completed}),(0,qt.jsx)("p",{style:{color:"#047857"},children:"Steps Completed"})]})]}),(0,qt.jsxs)("div",{className:"admin-summary-card efficiency-enhanced",children:[(0,qt.jsx)("div",{className:"admin-summary-icon",children:(0,qt.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),(0,qt.jsxs)("div",{className:"admin-summary-info",children:[(0,qt.jsxs)("h3",{style:{color:"#dc2626"},children:[$.overallStepEfficiency,"%"]}),(0,qt.jsx)("p",{style:{color:"#b91c1c"},children:"Efisiensi Keseluruhan"})]})]}),(0,qt.jsxs)("div",{className:"admin-summary-card efficiency",children:[(0,qt.jsx)("div",{className:"admin-summary-icon",children:(0,qt.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,qt.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,qt.jsxs)("div",{className:"admin-summary-info",children:[(0,qt.jsxs)("h3",{style:{color:"#d97706"},children:[$.avgEfficiency,"%"]}),(0,qt.jsx)("p",{style:{color:"#c05300ff"},children:"Rata-rata Per Session"})]})]}),(0,qt.jsxs)("div",{className:"admin-summary-card approved",children:[(0,qt.jsx)("div",{className:"admin-summary-icon",children:(0,qt.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("polyline",{points:"16,12 12,8 8,12"}),(0,qt.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"8"})]})}),(0,qt.jsxs)("div",{className:"admin-summary-info",children:[(0,qt.jsx)("h3",{style:{color:"#059669"},children:$.approvedSessions}),(0,qt.jsx)("p",{style:{color:"#047857"},children:"Sessions Approved"})]})]}),(0,qt.jsxs)("div",{className:"admin-summary-card team-work",children:[(0,qt.jsx)("div",{className:"admin-summary-icon",children:(0,qt.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,qt.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,qt.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,qt.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,qt.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),(0,qt.jsxs)("div",{className:"admin-summary-info",children:[(0,qt.jsx)("h3",{style:{color:"#7c3aed"},children:G.filter(e=>{var t;return((null===(t=e.originalSession)||void 0===t?void 0:t.participants)||[]).length>1}).length}),(0,qt.jsx)("p",{style:{color:"#6d28d9"},children:"Sessions Tim"})]})]})]}),0===G.length?(0,qt.jsxs)("div",{className:"admin-no-data",children:[(0,qt.jsx)("div",{className:"admin-no-data-icon",children:(0,qt.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[(0,qt.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,qt.jsx)("path",{d:"M16 16s-1.5-2-4-2-4 2-4 2"}),(0,qt.jsx)("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),(0,qt.jsx)("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),(0,qt.jsx)("h3",{children:"Tidak ada data"}),(0,qt.jsx)("p",{children:"Tidak ada work session yang sesuai dengan filter yang dipilih."})]}):(0,qt.jsx)("div",{className:"admin-table-container",children:(0,qt.jsx)("div",{className:"admin-table-wrapper",children:(0,qt.jsxs)("table",{className:"admin-table",children:[(0,qt.jsx)("thead",{children:(0,qt.jsxs)("tr",{children:[(0,qt.jsx)("th",{children:"Nama"}),(0,qt.jsx)("th",{children:"Nomor MO"}),(0,qt.jsx)("th",{children:"Tanggal"}),(0,qt.jsx)("th",{children:"Tugas"}),(0,qt.jsx)("th",{children:"Mode"}),(0,qt.jsx)("th",{children:"Status"}),(0,qt.jsx)("th",{children:"Waktu Aktual"}),(0,qt.jsx)("th",{children:"Waktu Target"}),(0,qt.jsx)("th",{children:"Efisiensi Session"}),(0,qt.jsx)("th",{children:"Detail Langkah"}),(0,qt.jsx)("th",{children:"Riwayat Aktivitas"}),(0,qt.jsx)("th",{children:"Aksi"})]})}),(0,qt.jsx)("tbody",{children:G.map(t=>{return(0,qt.jsx)(e.Fragment,{children:(0,qt.jsxs)("tr",{className:"admin-table-row ".concat(t.isEfficient?"efficient-row":"inefficient-row"),children:[(0,qt.jsx)("td",{className:"admin-cell-name",children:(0,qt.jsxs)("div",{className:"admin-user-info",children:[(0,qt.jsx)("div",{className:"admin-user-avatar",children:t.nama.charAt(0).toUpperCase()}),(0,qt.jsx)("span",{className:"admin-user-name",children:t.nama})]})}),(0,qt.jsx)("td",{className:"admin-cell-mo",children:(n=t.moNumber,(0,qt.jsx)("span",{className:"admin-mo-badge",children:n||"N/A"}))}),(0,qt.jsxs)("td",{className:"admin-cell-date",children:[t.tanggal.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),(0,qt.jsx)("br",{}),(0,qt.jsx)("small",{children:t.tanggal.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]}),(0,qt.jsx)("td",{className:"admin-cell-task",children:(0,qt.jsx)("div",{className:"admin-task-info",children:(0,qt.jsx)("span",{className:"admin-task-title",children:t.workInstructionTitle})})}),(0,qt.jsx)("td",{className:"admin-cell-mode",children:q(t)}),(0,qt.jsx)("td",{className:"admin-cell-status",children:V(t.status)}),(0,qt.jsx)("td",{className:"admin-cell-time actual",children:(0,qt.jsx)("span",{className:"admin-time-value",children:ij(t.totalTime)})}),(0,qt.jsxs)("td",{className:"admin-cell-time target",children:[(0,qt.jsx)("span",{className:"admin-time-value",children:t.targetTime>0?ij(t.targetTime):"N/A"}),!t.hasTargetTime&&(0,qt.jsx)("small",{className:"admin-no-target",children:"Tidak ada target"})]}),(0,qt.jsx)("td",{className:"admin-cell-efficiency",children:t.hasTargetTime?(0,qt.jsxs)("div",{className:"admin-efficiency-badge ".concat(t.isEfficient?"efficient":"inefficient"),children:[(0,qt.jsxs)("span",{className:"admin-efficiency-value",children:[t.efficiency.toFixed(1),"%"]}),(0,qt.jsx)("div",{className:"admin-efficiency-bar",style:{"--efficiency":Math.min(t.efficiency,100)},children:(0,qt.jsx)("div",{className:"admin-efficiency-fill"})})]}):(0,qt.jsx)("span",{className:"admin-no-efficiency",children:"N/A"})}),(0,qt.jsx)("td",{className:"admin-cell-steps",children:W(t)}),(0,qt.jsx)("td",{className:"admin-cell-activity",children:K(t)}),(0,qt.jsx)("td",{className:"admin-cell-actions",children:H(t.id,t.status)})]})},t.id);var n})})]})})}),G.length>0&&(0,qt.jsx)("div",{className:"admin-table-footer",children:(0,qt.jsxs)("div",{className:"admin-table-info",children:[(0,qt.jsxs)("span",{className:"admin-table-count",children:["Menampilkan ",G.length," dari ",t.length," total work sessions"]}),h&&(0,qt.jsxs)("span",{className:"admin-filter-info",children:[" \u2022 ","Filtered by MO: ",(0,qt.jsx)("strong",{children:h})]}),o&&(0,qt.jsxs)("span",{className:"admin-filter-info",children:[" \u2022 ","User: ",(0,qt.jsx)("strong",{children:o})]}),u&&(0,qt.jsxs)("span",{className:"admin-filter-info",children:[" \u2022 ","Status: ",(0,qt.jsx)("strong",{children:u})]})]})})]}),(0,qt.jsx)(lj,{isOpen:M,onClose:()=>{O(!1),A(null)},sessionData:I}),(0,qt.jsx)(cj,{isOpen:P,onClose:()=>{L(!1),D(null)},sessionData:R})]})},dj=Et("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),hj=Et("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),fj=()=>{var t,n;const[r,s]=(0,e.useState)([]),[i,a]=(0,e.useState)(null),[o,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!0),[h,f]=(0,e.useState)(null),[p,m]=(0,e.useState)({}),[g,b]=(0,e.useState)("Log Progress"),[v,y]=(0,e.useState)(null),[w,x]=(0,e.useState)(!0),[k,_]=(0,e.useState)(!1),[S,j]=(0,e.useState)(null),N=ce(),T=he(),E=Po(),C=(null===v||void 0===v||v.uid,null===(t=N.state)||void 0===t?void 0:t.completedSessionId),I=null===(n=N.state)||void 0===n?void 0:n.fromTaskCompletion,A=e=>{switch(e){case"approved":return"#28a745";case"rejected":return"#dc3545";case"pending":return"#ffc107";case"submitted":return"#17a2b8";case"completed":return"#6f42c1";case"in_progress":case"active":return"#20c997";default:return"#6c757d"}},M=e=>{switch(e){case"approved":return"Disetujui";case"rejected":return"Ditolak";case"pending":return"Menunggu Review";case"submitted":return"Terkirim";case"completed":return"Selesai";case"in_progress":return"Sedang Dikerjakan";case"active":return"Aktif";default:return"Status Tidak Diketahui"}};(0,e.useEffect)(()=>{const e=fa(E,e=>{y(e),x(!1)});return()=>e()},[E]);const O=(0,e.useCallback)(()=>{if(null===v||void 0===v||!v.uid)return;console.log("\ud83d\udcca Setting up COMPLETE real-time listener for user:",v.uid),S&&(console.log("\ud83e\uddf9 Cleaning up previous listener"),S());const e=Ly(Z_,"workSessions");let t=[];try{const n=Nw(e,Ew("operatorId","==",v.uid),Ew("type","==","work_session"));t.push(n)}catch(h){console.warn("\u26a0\ufe0f operatorId query failed:",h)}try{const n=Nw(e,Ew("createdBy","==",v.uid),Ew("type","==","work_session"));t.push(n)}catch(h){console.warn("\u26a0\ufe0f createdBy query failed:",h)}const n=Yw(t[0]||Nw(e,Ew("operatorId","==",v.uid)),e=>{console.log("\ud83d\udce1 REAL-TIME UPDATE received:",e.size,"documents");const t=[],n=new Set;if(e.forEach(e=>{var r,s,i,a,o,l,c,u,d,h;const f=e.data();if(n.has(e.id))return void console.log("\u26a0\ufe0f Duplicate session detected:",e.id);n.add(e.id);const p={id:e.id,workInstructionTitle:f.taskName||f.workInstructionTitle||"Unknown Task",workInstructionId:f.taskId||f.workInstructionId||"unknown",moNumber:f.moNumber||f.moDisplay||"No MO",operatorId:f.operatorId||f.createdBy,operatorName:f.operatorName||"Unknown Operator",userId:f.operatorId||f.createdBy,rawStatus:f.status||"unknown",isActive:!1!==f.isActive&&"in_progress"===f.status,createdAt:(null===(r=f.createdAt)||void 0===r?void 0:r.toDate())||(null===(s=f.startTime)||void 0===s?void 0:s.toDate())||new Date,completedAt:"completed"===f.status?(null===(i=f.completedAt)||void 0===i?void 0:i.toDate())||(null===(a=f.lastUpdated)||void 0===a?void 0:a.toDate()):null,startTime:null===(o=f.startTime)||void 0===o?void 0:o.toDate(),lastUpdated:(null===(l=f.lastUpdated)||void 0===l?void 0:l.toDate())||(null===(c=f.createdAt)||void 0===c?void 0:c.toDate())||new Date,currentStep:f.currentStep||0,stepStatuses:f.stepStatuses||[],totalTime:f.totalTime||0,stepCompletionTimes:f.stepCompletionTimes||[],stepTimes:f.stepTimes||[],totalSteps:f.totalSteps||(null===(u=f.stepStatuses)||void 0===u?void 0:u.length)||0,adminStatus:f.adminStatus||("completed"===f.status?"pending":"in_progress"===f.status?"in_progress":f.isActive?"active":"unknown"),adminComment:f.adminComment||"",adminId:f.adminId||null,adminName:f.adminName||null,reviewedAt:(null===(d=f.reviewedAt)||void 0===d?void 0:d.toDate())||(null===(h=f.statusUpdatedAt)||void 0===h?void 0:h.toDate())||null,statusUpdatedBy:f.statusUpdatedBy||null,participants:f.participants||[],stepOperators:f.stepOperators||{},troubleshootHistory:f.troubleshootHistory||[],stepTargetTimes:f.stepTargetTimes||[],totalTargetTime:f.totalTargetTime||f.targetTime||0,finalEfficiency:f.finalEfficiency||0,type:f.type||"work_session"};t.push(p),console.log("\ud83d\udccb Session ".concat(e.id,":"),{taskName:p.workInstructionTitle,moNumber:p.moNumber,rawStatus:p.rawStatus,adminStatus:p.adminStatus,isActive:p.isActive,currentStep:p.currentStep,totalSteps:p.totalSteps,operatorId:p.operatorId,lastUpdated:p.lastUpdated})}),t.sort((e,t)=>{const n=e.lastUpdated||e.createdAt||new Date(0);return(t.lastUpdated||t.createdAt||new Date(0))-n}),console.log("\u2705 REAL-TIME: ".concat(t.length," sessions loaded and sorted")),console.log("\ud83d\udcca Session breakdown:",{total:t.length,active:t.filter(e=>e.isActive).length,completed:t.filter(e=>"completed"===e.rawStatus).length,in_progress:t.filter(e=>"in_progress"===e.rawStatus).length}),s(t),d(!1),f(null),C&&I&&t.length>0){const e=t.find(e=>e.id===C);e&&(console.log("\ud83c\udfaf Auto-selecting completed session:",e.workInstructionTitle),a(e),D(e))}},e=>{console.error("\u274c Real-time listener error:",e);let t="Gagal memuat data progress secara real-time";"failed-precondition"===e.code?(t="Database index diperlukan. Membuat query alternatif...",console.error("\u274c Required Firestore indexes:",{collection:"workSessions",indexes:["operatorId ASC, type ASC","createdBy ASC, type ASC","operatorId ASC, type ASC, lastUpdated DESC"]}),setTimeout(()=>{console.log("\ud83d\udd04 Attempting fallback query..."),R()},1e3)):"permission-denied"===e.code?t="Tidak memiliki izin untuk mengakses data real-time.":"unavailable"===e.code?(t="Layanan database tidak tersedia. Mencoba koneksi ulang...",setTimeout(()=>{console.log("\ud83d\udd04 Retrying real-time connection..."),O()},5e3)):t="".concat(t,": ").concat(e.message),f(t),d(!1)});return j(()=>n),n},[null===v||void 0===v?void 0:v.uid,C,I,S]),R=(0,e.useCallback)(async()=>{if(null!==v&&void 0!==v&&v.uid){console.log("\ud83d\udd04 Setting up fallback query without compound index...");try{const e=Ly(Z_,"workSessions"),t=Yw(Nw(e,Ew("operatorId","==",v.uid)),e=>{console.log("\ud83d\udce1 FALLBACK: Real-time update received:",e.size);const t=[];e.forEach(e=>{const n=e.data();var r,s,i,a,o,l,c;"work_session"===n.type&&t.push({id:e.id,workInstructionTitle:n.taskName||n.workInstructionTitle||"Unknown Task",workInstructionId:n.taskId||n.workInstructionId||"unknown",moNumber:n.moNumber||n.moDisplay||"No MO",operatorId:n.operatorId||n.createdBy,operatorName:n.operatorName||"Unknown Operator",userId:n.operatorId||n.createdBy,rawStatus:n.status||"unknown",isActive:!1!==n.isActive&&"in_progress"===n.status,createdAt:(null===(r=n.createdAt)||void 0===r?void 0:r.toDate())||(null===(s=n.startTime)||void 0===s?void 0:s.toDate())||new Date,completedAt:"completed"===n.status?(null===(i=n.completedAt)||void 0===i?void 0:i.toDate())||(null===(a=n.lastUpdated)||void 0===a?void 0:a.toDate()):null,lastUpdated:(null===(o=n.lastUpdated)||void 0===o?void 0:o.toDate())||(null===(l=n.createdAt)||void 0===l?void 0:l.toDate())||new Date,currentStep:n.currentStep||0,stepStatuses:n.stepStatuses||[],totalTime:n.totalTime||0,stepCompletionTimes:n.stepCompletionTimes||[],totalSteps:n.totalSteps||(null===(c=n.stepStatuses)||void 0===c?void 0:c.length)||0,adminStatus:n.adminStatus||("completed"===n.status?"pending":"in_progress"===n.status?"in_progress":"unknown"),type:n.type})}),t.sort((e,t)=>(t.lastUpdated||t.createdAt)-(e.lastUpdated||e.createdAt)),console.log("\u2705 FALLBACK: ".concat(t.length," sessions loaded")),s(t),d(!1),f(null)},e=>{console.error("\u274c Fallback query also failed:",e),f("Tidak dapat memuat data. Silakan refresh halaman.")});j(()=>t)}catch(h){console.error("\u274c Fallback setup failed:",h),f("Tidak dapat memuat data. Silakan refresh halaman.")}}},[null===v||void 0===v?void 0:v.uid]),D=(0,e.useCallback)(async e=>{try{if(console.log("\ud83d\udccb Fetching details for session:",e.id),!p[e.workInstructionId])try{const t=Fy(Z_,"tasks",e.workInstructionId),n=await Hw(t);if(n.exists()){const t=n.data();m(n=>l(l({},n),{},{[e.workInstructionId]:t}))}else console.warn("\u26a0\ufe0f Task document not found: ".concat(e.workInstructionId))}catch(t){console.warn("\u26a0\ufe0f Error fetching task details:",t)}c(e),console.log("\u2705 Session details loaded")}catch(h){console.error("\u274c Error fetching session details:",h)}},[p]),P=(0,e.useCallback)(async e=>{a(e),await D(e)},[D]),L=(0,e.useCallback)(e=>{if(!e.stepStatuses||!Array.isArray(e.stepStatuses))return{totalSteps:e.totalSteps||0,completedSteps:0,completionRate:0};const t=e.stepStatuses.length,n=e.stepStatuses.filter(e=>e===NS.COMPLETED).length;return{totalSteps:t,completedSteps:n,completionRate:t>0?n/t*100:0}},[]),F=(0,e.useCallback)(e=>{T("/task",{state:{resumeSessionId:e.id,moNumber:e.moNumber,workInstructionId:e.workInstructionId,currentStep:e.currentStep||0,stepStatuses:e.stepStatuses||[],totalTime:e.totalTime||0,stepCompletionTimes:e.stepCompletionTimes||[],resumeData:{moNumber:e.moNumber,workInstructionId:e.workInstructionId,workInstructionTitle:e.workInstructionTitle,currentStep:e.currentStep||0,stepStatuses:e.stepStatuses||[],totalTime:e.totalTime||0,stepCompletionTimes:e.stepCompletionTimes||[],sessionId:e.id}}})},[T]);return(0,e.useEffect)(()=>{if(v){console.log("\ud83d\udd04 Setting up COMPLETE real-time data listener...");const e=O();return()=>{e&&(console.log("\ud83e\uddf9 Cleaning up real-time listener..."),e()),S&&(S(),j(null))}}S&&(S(),j(null))},[v]),(0,e.useEffect)(()=>()=>{S&&(console.log("\ud83e\uddf9 Component unmount: cleaning up real-time listener"),S())},[S]),{workSessions:r,selectedSession:i,sessionDetails:o,loading:u,error:h,taskInstructions:p,currentUser:v,isAuthLoading:w,showDropdown:k,realtimeUnsubscribe:S,fromTaskCompletion:I,handleSessionClick:P,calculateBasicProgress:L,getSessionStatusBadge:e=>{const t=e.rawStatus,n=e.adminStatus,r=e.isActive;let s,i;if("in_progress"===t||r)s="in_progress",i="\ud83d\udd04 Sedang Dikerjakan";else if("completed"===t)switch(s=n||"pending",s){case"approved":i="\u2705 Disetujui";break;case"rejected":i="\u274c Ditolak";break;default:i="\u23f3 Menunggu Review"}else s=t||"unknown",i="\u2753 ".concat(M(s));return{status:s,displayText:i,color:A(s)}},handleContinueActiveSession:F,handleLogout:async()=>{if(window.confirm("Apakah Anda yakin ingin logout?"))try{S&&(S(),j(null)),await pa(J_),localStorage.removeItem("currentUser"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userToken"),localStorage.removeItem("previousStats"),T("/login")}catch(h){console.error("Error signing out:",h),alert("Terjadi kesalahan saat logout: "+h.message)}},handleProfileClick:()=>{console.log("Navigate to profile page"),T("/profil"),_(!1)},handleBackClick:()=>{T("/home")},formatDate:e=>{if(!e)return"Invalid Date";let t;return t=null!==e&&void 0!==e&&e.toDate&&"function"===typeof e.toDate?e.toDate():e instanceof Date?e:"string"===typeof e?new Date(e):new Date,isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})},setupFallbackQuery:R,getProgressStatusBadgeColor:A,getProgressStatusIcon:e=>{const t={approved:"\u2713",rejected:"\u2717",pending:"\u23f1",completed:"\u2713",in_progress:"\u25b6",active:"\u25b6",default:"\u26a0"};return t[e]||t.default},getProgressStatusText:M,setShowDropdown:_,setError:f,setLoading:d,formatTime:TS,STEP_STATUS:NS,getStepStatusColor:CS,getStepStatusText:IS}},pj=()=>{var t,n,r,s,i,a,o;const[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)("timeline"),{workSessions:m,selectedSession:g,loading:b,error:v,taskInstructions:y,currentUser:w,isAuthLoading:x,showDropdown:k,realtimeUnsubscribe:_,fromTaskCompletion:S,handleSessionClick:j,calculateBasicProgress:N,getSessionStatusBadge:T,handleContinueActiveSession:E,handleLogout:C,handleProfileClick:I,handleBackClick:A,formatDate:M,setupFallbackQuery:O,getProgressStatusBadgeColor:R,getProgressStatusIcon:D,getProgressStatusText:P,setShowDropdown:L,setError:F,setLoading:B,formatTime:U,STEP_STATUS:z,getStepStatusColor:V,getStepStatusText:H}=fj(),W=e=>{console.log("\ud83d\udd0d Analyzing session mode for:",e.id,{participants:e.participants,stepOperators:e.stepOperators,operatorId:e.operatorId,operatorName:e.operatorName});const t=new Set,n=new Map;e.operatorId&&(t.add(e.operatorId),n.set(e.operatorId,{userId:e.operatorId,userName:e.operatorName||"Unknown Operator",role:"creator",isActive:e.isActive||!1,joinedAt:e.createdAt||new Date})),e.participants&&Array.isArray(e.participants)&&e.participants.forEach(r=>{r.userId&&(t.add(r.userId),n.set(r.userId,l(l({},r),{},{role:r.userId===e.operatorId?"creator":"participant",isActive:!1!==r.isActive})))}),e.stepOperators&&"object"===typeof e.stepOperators&&Object.entries(e.stepOperators).forEach(e=>{let[r,s]=e;if(s.userId)if(t.add(s.userId),n.has(s.userId)){const e=n.get(s.userId);e.stepsWorked||(e.stepsWorked=[]),e.stepsWorked.includes(r)||e.stepsWorked.push(r)}else n.set(s.userId,{userId:s.userId,userName:s.userName||"Unknown Operator",role:"step_operator",isActive:!1,joinedAt:s.startedAt||new Date,stepsWorked:[r]})}),["stepStartedBy","stepCompletedBy","stepSkippedBy","stepStoppedBy"].forEach(r=>{e[r]&&"object"===typeof e[r]&&Object.entries(e[r]).forEach(e=>{let[r,s]=e;s.userId&&(t.add(s.userId),n.has(s.userId)||n.set(s.userId,{userId:s.userId,userName:s.userName||"Unknown Operator",role:"step_operator",isActive:!1,joinedAt:s.startedAt||s.completedAt||s.skippedAt||s.stoppedAt||new Date,stepsWorked:[r]}))})}),e.troubleshootHistory&&Array.isArray(e.troubleshootHistory)&&e.troubleshootHistory.forEach(e=>{e.userId&&(t.add(e.userId),n.has(e.userId)||n.set(e.userId,{userId:e.userId,userName:e.userName||"Unknown Operator",role:"troubleshooter",isActive:!1,joinedAt:new Date(e.timestamp)}))});const r=t.size,s=r>1;return console.log("\u2705 Session mode analysis complete:",{sessionId:e.id,totalOperators:r,operatorIds:Array.from(t),isTeamMode:s,operatorDetails:Array.from(n.values())}),{mode:s?"team":"individual",participantCount:r,operators:Array.from(n.values()),label:s?"Tim (".concat(r,")"):"Individu",icon:s?"\ud83d\udc65":"\ud83d\udc64",isTeamMode:s}},q=(0,e.useMemo)(()=>d?(e=>{console.log("\ud83d\udcca Generating activity timeline for session:",e.id);const t=[];e.createdAt&&t.push({id:"created_".concat(e.id),timestamp:e.createdAt,type:"session_created",icon:"\ud83c\udd95",title:"Session Dibuat",description:"Session dimulai oleh ".concat(e.operatorName||"operator"),userId:e.operatorId||e.createdBy,userName:e.operatorName||"Unknown Operator",stepIndex:null}),e.participants&&Array.isArray(e.participants)&&e.participants.forEach((n,r)=>{n.joinedAt&&t.push({id:"joined_".concat(n.userId,"_").concat(r),timestamp:n.joinedAt,type:"participant_joined",icon:"\ud83e\udd1d",title:"Operator Bergabung",description:"".concat(n.userName||"Unknown"," bergabung ke session"),userId:n.userId,userName:n.userName||"Unknown",stepIndex:null,isCreator:n.userId===e.createdBy||n.userId===e.operatorId}),n.leftAt&&t.push({id:"left_".concat(n.userId,"_").concat(r),timestamp:n.leftAt,type:"participant_left",icon:"\ud83d\udc4b",title:"Operator Keluar",description:"".concat(n.userName||"Unknown"," keluar dari session"),userId:n.userId,userName:n.userName||"Unknown",stepIndex:null}),n.rejoinedAt&&t.push({id:"rejoined_".concat(n.userId,"_").concat(r),timestamp:n.rejoinedAt,type:"participant_rejoined",icon:"\ud83d\udd04",title:"Operator Bergabung Kembali",description:"".concat(n.userName||"Unknown"," bergabung kembali"),userId:n.userId,userName:n.userName||"Unknown",stepIndex:null})}),Object.entries({stepStartedBy:{icon:"\u25b6\ufe0f",title:"Dimulai",action:"memulai langkah kerja"},stepCompletedBy:{icon:"\u2705",title:"Selesai",action:"menyelesaikan langkah"},stepSkippedBy:{icon:"\u2b50",title:"Dilewati",action:"melewati langkah"},stepStoppedBy:{icon:"\u23f8\ufe0f",title:"Dihentikan",action:"menghentikan langkah"}}).forEach(n=>{let[r,s]=n;e[r]&&"object"===typeof e[r]&&Object.entries(e[r]).forEach(e=>{let[n,i]=e;if(i.userId){const e="".concat(r,"_").concat(n,"_").concat(i.userId),a=i.startedAt||i.completedAt||i.skippedAt||i.stoppedAt||new Date;let o="".concat(i.userName||"Unknown"," ").concat(s.action);"stepCompletedBy"===r&&i.completionTime?o+=" (".concat(U(i.completionTime),")"):"stepSkippedBy"===r&&i.reason?o+=": ".concat(i.reason):"stepStoppedBy"===r&&i.stoppedAtTime&&(o+=" pada ".concat(U(i.stoppedAtTime))),t.push({id:e,timestamp:a,type:r.replace("By","").toLowerCase(),icon:s.icon,title:"Step ".concat(parseInt(n)+1," ").concat(s.title),description:o,userId:i.userId,userName:i.userName||"Unknown",stepIndex:parseInt(n),completionTime:i.completionTime,reason:i.reason,stoppedAtTime:i.stoppedAtTime})}})}),e.troubleshootHistory&&Array.isArray(e.troubleshootHistory)&&e.troubleshootHistory.forEach((e,n)=>{t.push({id:"troubleshoot_".concat(e.id||n),timestamp:new Date(e.timestamp),type:"troubleshoot",icon:"\ud83d\udd27",title:"Troubleshoot Step ".concat((e.stepIndex||0)+1),description:e.description||"Troubleshoot dilakukan",userId:e.userId,userName:e.userName||"Unknown",stepIndex:e.stepIndex||0,solution:e.solution,category:e.category})}),e.completedAt&&t.push({id:"completed_".concat(e.id),timestamp:e.completedAt,type:"session_completed",icon:"\ud83c\udf89",title:"Session Selesai",description:"Session diselesaikan oleh ".concat(e.operatorName||"operator"),userId:e.operatorId,userName:e.operatorName||"Unknown",stepIndex:null,efficiency:e.finalEfficiency}),e.resetBy&&"object"===typeof e.resetBy&&Object.entries(e.resetBy).forEach(e=>{let[n,r]=e;t.push({id:"reset_".concat(n),timestamp:r.resetAt,type:"session_reset",icon:"\ud83d\udd04",title:"Session Reset",description:"".concat(r.userName||"Unknown"," mereset session"),userId:r.userId,userName:r.userName||"Unknown",stepIndex:null})});const n=t.filter((e,t,n)=>n.findIndex(t=>t.id===e.id)===t).sort((e,t)=>{var n,r,s,i;return(null!==(n=e.timestamp)&&void 0!==n&&n.toMillis?e.timestamp.toMillis():(null===(r=e.timestamp)||void 0===r?void 0:r.getTime())||0)-(null!==(s=t.timestamp)&&void 0!==s&&s.toMillis?t.timestamp.toMillis():(null===(i=t.timestamp)||void 0===i?void 0:i.getTime())||0)});return console.log("\ud83d\udcc8 Generated ".concat(n.length," timeline activities for session ").concat(e.id)),n})(d):[],[d]),K=e=>{console.log("\ud83d\udcca Opening activity history for session:",e.id),h(e),u(!0),p("timeline")};return x?(0,qt.jsx)("div",{className:"progress-loading-container",children:(0,qt.jsxs)("div",{className:"progress-loading-content",children:[(0,qt.jsx)("div",{className:"progress-loading-spinner"}),(0,qt.jsx)("p",{className:"progress-loading-text",children:"Checking authentication..."})]})}):w?b?(0,qt.jsxs)("div",{className:"progress-page",children:[(0,qt.jsxs)("div",{className:"progress-header-bar",children:[(0,qt.jsxs)("div",{className:"progress-header-left",children:[(0,qt.jsx)("button",{className:"progress-back-button",onClick:A,children:(0,qt.jsx)(kS,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"Len Railway Systems",className:"progress-logo",onClick:A})]}),(0,qt.jsx)("div",{className:"progress-header-center",children:(0,qt.jsx)("h1",{className:"progress-title-header",children:"Log Progress"})}),(0,qt.jsx)("div",{className:"progress-header-right",children:(0,qt.jsxs)("div",{className:"progress-profile-container",children:[(0,qt.jsxs)("button",{className:"progress-profile-btn",onClick:()=>L(!k),children:[(0,qt.jsx)("div",{className:"progress-profile-avatar",children:w.photoURL?(0,qt.jsx)("img",{src:w.photoURL,alt:"Avatar",className:"progress-avatar-image"}):(0,qt.jsx)("span",{className:"progress-avatar-text",children:(w.displayName||(null===(G=w.email)||void 0===G?void 0:G.split("@")[0])||"U").charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"progress-profile-info",children:[(0,qt.jsx)("div",{className:"progress-profile-name",children:w.displayName||(null===($=w.email)||void 0===$?void 0:$.split("@")[0])||"User"}),(0,qt.jsxs)("div",{className:"progress-profile-id",children:["ID: ",(null===(X=w.uid)||void 0===X?void 0:X.substring(0,8))||"N/A"]})]})]}),k&&(0,qt.jsxs)("div",{className:"progress-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"progress-dropdown-header",children:[(0,qt.jsx)("div",{className:"progress-profile-avatar",children:w.photoURL?(0,qt.jsx)("img",{src:w.photoURL,alt:"Avatar",className:"progress-avatar-image"}):(0,qt.jsx)("span",{className:"progress-avatar-text",children:(w.displayName||(null===(Y=w.email)||void 0===Y?void 0:Y.split("@")[0])||"U").charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"progress-dropdown-name",children:w.displayName||(null===(Q=w.email)||void 0===Q?void 0:Q.split("@")[0])||"User"}),(0,qt.jsx)("div",{className:"progress-dropdown-email",children:w.email}),(0,qt.jsxs)("div",{className:"progress-dropdown-id",children:["ID: ",(null===(J=w.uid)||void 0===J?void 0:J.substring(0,8))||"N/A"]})]})]}),(0,qt.jsxs)("button",{className:"progress-dropdown-item",onClick:I,children:[(0,qt.jsx)(hS,{className:"progress-dropdown-icon"}),(0,qt.jsx)("span",{children:"Profile"})]}),(0,qt.jsx)("hr",{className:"progress-dropdown-divider"}),(0,qt.jsxs)("button",{className:"progress-dropdown-item progress-dropdown-logout",onClick:C,children:[(0,qt.jsx)(fS,{className:"progress-dropdown-icon"}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]}),(0,qt.jsxs)("div",{className:"progress-loading-container",children:[(0,qt.jsx)("div",{className:"progress-loading-spinner"}),(0,qt.jsx)("p",{children:"\ud83d\udd04 Menghubungkan real-time data..."})]})]}):v?(0,qt.jsx)("div",{className:"progress-page",children:(0,qt.jsxs)("div",{className:"progress-error-container",children:[(0,qt.jsx)("h2",{children:"\u26a0\ufe0f Terjadi Kesalahan"}),(0,qt.jsx)("p",{children:v}),(0,qt.jsxs)("div",{className:"progress-error-actions",children:[(0,qt.jsx)("button",{onClick:()=>{F(null),B(!0),O()},className:"progress-fallback-button",children:"\ud83d\udd04 Mode Kompatibilitas"}),(0,qt.jsx)(pt,{to:"/task",className:"progress-start-new-button",children:"\u2795 Mulai Task Baru"})]})]})}):(0,qt.jsxs)("div",{className:"progress-page",children:[(0,qt.jsxs)("div",{className:"progress-header-bar",children:[(0,qt.jsxs)("div",{className:"progress-header-left",children:[(0,qt.jsx)("button",{className:"progress-back-button",onClick:A,children:(0,qt.jsx)(kS,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"Len Railway Systems",className:"progress-logo",onClick:A})]}),(0,qt.jsxs)("div",{className:"progress-header-center",children:[(0,qt.jsx)("h1",{className:"progress-title-header",children:"Log Progress"}),S&&(0,qt.jsx)("p",{className:"progress-completion-notice",children:"\ud83c\udf89 Task baru saja diselesaikan!"}),(0,qt.jsx)("div",{className:"progress-realtime-status",children:_?(0,qt.jsx)("span",{className:"progress-realtime-active",children:"\ud83d\udfe2 Real-time aktif \u2022 Auto-update"}):(0,qt.jsx)("span",{className:"progress-realtime-inactive",children:"\ud83d\udfe1 Mode statis \u2022 Refresh manual"})})]}),(0,qt.jsx)("div",{className:"progress-header-right",children:(0,qt.jsxs)("div",{className:"progress-profile-container",children:[(0,qt.jsxs)("button",{className:"progress-profile-btn",onClick:()=>L(!k),children:[(0,qt.jsx)("div",{className:"progress-profile-avatar",children:w.photoURL?(0,qt.jsx)("img",{src:w.photoURL,alt:"Avatar",className:"progress-avatar-image"}):(0,qt.jsx)("span",{className:"progress-avatar-text",children:(w.displayName||(null===(t=w.email)||void 0===t?void 0:t.split("@")[0])||"U").charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"progress-profile-info",children:[(0,qt.jsx)("div",{className:"progress-profile-name",children:w.displayName||(null===(n=w.email)||void 0===n?void 0:n.split("@")[0])||"User"}),(0,qt.jsxs)("div",{className:"progress-profile-id",children:["ID: ",(null===(r=w.uid)||void 0===r?void 0:r.substring(0,8))||"N/A"]})]})]}),k&&(0,qt.jsxs)("div",{className:"progress-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"progress-dropdown-header",children:[(0,qt.jsx)("div",{className:"progress-profile-avatar",children:w.photoURL?(0,qt.jsx)("img",{src:w.photoURL,alt:"Avatar",className:"progress-avatar-image"}):(0,qt.jsx)("span",{className:"progress-avatar-text",children:(w.displayName||(null===(s=w.email)||void 0===s?void 0:s.split("@")[0])||"U").charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"progress-dropdown-name",children:w.displayName||(null===(i=w.email)||void 0===i?void 0:i.split("@")[0])||"User"}),(0,qt.jsx)("div",{className:"progress-dropdown-email",children:w.email}),(0,qt.jsxs)("div",{className:"progress-dropdown-id",children:["ID: ",(null===(a=w.uid)||void 0===a?void 0:a.substring(0,8))||"N/A"]})]})]}),(0,qt.jsxs)("button",{className:"progress-dropdown-item",onClick:I,children:[(0,qt.jsx)(hS,{className:"progress-dropdown-icon"}),(0,qt.jsx)("span",{children:"Profile"})]}),(0,qt.jsx)("hr",{className:"progress-dropdown-divider"}),(0,qt.jsxs)("button",{className:"progress-dropdown-item progress-dropdown-logout",onClick:C,children:[(0,qt.jsx)(fS,{className:"progress-dropdown-icon"}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]}),(0,qt.jsx)("div",{className:"progress-main-content",children:(0,qt.jsxs)("div",{className:"progress-container-layout",children:[(0,qt.jsxs)("div",{className:"progress-sessions-section",children:[(0,qt.jsxs)("div",{className:"progress-sessions-header",children:[(0,qt.jsxs)("h2",{children:["Riwayat Sessions (",m.length,")"]}),(0,qt.jsxs)("div",{className:"progress-sessions-stats",children:[(0,qt.jsxs)("span",{className:"progress-stat-item",children:["\ud83d\udd04 Aktif: ",m.filter(e=>e.isActive).length]}),(0,qt.jsxs)("span",{className:"progress-stat-item",children:["\u2705 Selesai: ",m.filter(e=>"completed"===e.rawStatus).length]})]}),(0,qt.jsx)("button",{onClick:()=>{console.log("\ud83d\udd04 Manual refresh requested"),_||O()},className:"progress-refresh-btn",title:"Refresh data",children:"\ud83d\udd04 Refresh"})]}),0===m.length?(0,qt.jsxs)("div",{className:"progress-no-sessions",children:[(0,qt.jsx)("div",{className:"progress-empty-state-icon",children:"\ud83d\udccb"}),(0,qt.jsx)("h3",{children:"Belum Ada Sessions"}),(0,qt.jsx)("p",{children:"Anda belum memiliki riwayat progress task."}),(0,qt.jsx)("p",{children:"Mulai mengerjakan task pertama Anda!"}),(0,qt.jsx)(pt,{to:"/task",className:"progress-start-task-button",children:"\ud83d\ude80 Mulai Task Pertama"})]}):(0,qt.jsx)("div",{className:"progress-sessions-list",children:m.map(e=>{const t=N(e),n=(null===g||void 0===g?void 0:g.id)===e.id,r=T(e),s=W(e);return console.log("\ud83d\udd0d Session ".concat(e.id," mode analysis:"),{mode:s.mode,participantCount:s.participantCount,operatorCount:s.operators.length,isTeamMode:s.isTeamMode}),(0,qt.jsxs)("div",{className:"progress-session-item ".concat(n?"selected":""," ").concat(e.isActive?"active-session":""),onClick:()=>j(e),children:[(0,qt.jsxs)("div",{className:"progress-session-header",children:[(0,qt.jsx)("h4",{children:e.workInstructionTitle||"Untitled Task"}),(0,qt.jsx)("span",{className:"progress-status-badge",style:{backgroundColor:"".concat(r.color,"20"),color:r.color,border:"1px solid ".concat(r.color,"40")},children:r.displayText}),e.isActive&&(0,qt.jsx)("span",{className:"progress-active-indicator",title:"Session sedang aktif",children:"\ud83d\udd34 LIVE"})]}),(0,qt.jsxs)("div",{className:"progress-session-mo",children:[(0,qt.jsx)("span",{className:"progress-mo-label",children:"MO:"}),(0,qt.jsx)("span",{className:"progress-mo-number",children:e.moNumber})]}),(0,qt.jsxs)("div",{className:"progress-session-mode",children:[(0,qt.jsx)("span",{className:"progress-mode-label",children:"Mode:"}),(0,qt.jsxs)("span",{className:"progress-mode-badge ".concat(s.mode),children:[(0,qt.jsx)("span",{className:"progress-mode-icon",children:s.icon}),(0,qt.jsx)("span",{className:"progress-mode-text",children:s.label}),s.isTeamMode&&(0,qt.jsxs)("span",{className:"progress-operators-count",title:"".concat(s.operators.length," operator terlibat"),children:["\u2022 ",s.operators.length," ops"]})]})]}),(0,qt.jsxs)("div",{className:"progress-session-info",children:[(0,qt.jsxs)("div",{className:"progress-session-progress",children:[(0,qt.jsx)("div",{className:"progress-progress-bar",children:(0,qt.jsx)("div",{className:"progress-progress-fill",style:{width:"".concat(t.completionRate,"%"),backgroundColor:e.isActive?"#20c997":"#6f42c1"}})}),(0,qt.jsxs)("span",{children:[t.completedSteps,"/",t.totalSteps," langkah",e.isActive&&void 0!==e.currentStep&&(0,qt.jsxs)("small",{children:[" \u2022 Saat ini: Step ",e.currentStep+1]})]})]}),(0,qt.jsx)("div",{className:"progress-session-time",children:(0,qt.jsxs)("span",{children:["\u23f1\ufe0f ",U(e.totalTime||0)]})})]}),(0,qt.jsx)("div",{className:"progress-session-date",children:e.lastUpdated?(0,qt.jsxs)("small",{children:[e.isActive?"Terakhir aktif: ":"Dibuat: ",e.lastUpdated.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}):(0,qt.jsx)("small",{children:"Tanggal tidak diketahui"})}),e.isActive&&(0,qt.jsx)("div",{className:"progress-session-action",children:(0,qt.jsxs)("button",{onClick:t=>{t.stopPropagation(),E(e)},className:"progress-continue-quick-btn",title:"Lanjutkan dari Step ".concat(e.currentStep+1),children:["\u25b6\ufe0f Lanjutkan Step ",e.currentStep+1]})}),(0,qt.jsx)("div",{className:"progress-session-activity",children:(0,qt.jsxs)("button",{onClick:t=>{t.stopPropagation(),K(e)},className:"progress-activity-btn",title:"Lihat riwayat aktivitas",children:[(0,qt.jsx)(bS,{size:16}),(0,qt.jsx)("span",{children:"Riwayat Aktivitas"})]})}),s.isTeamMode&&(0,qt.jsx)("div",{className:"progress-session-team",children:(0,qt.jsxs)("small",{children:["\ud83d\udc65 Tim (",s.participantCount," operator)",s.operators.length>0&&(0,qt.jsxs)("div",{className:"progress-team-preview",children:[s.operators.slice(0,3).map((e,t)=>(0,qt.jsx)("span",{className:"progress-team-member-mini",title:e.userName,children:e.userName.charAt(0).toUpperCase()},t)),s.operators.length>3&&(0,qt.jsxs)("span",{className:"progress-team-more",children:["+",s.operators.length-3]})]})]})})]},e.id)})})]}),(0,qt.jsx)("div",{className:"wrapper",children:(0,qt.jsx)("div",{className:"progress-details-section",children:g?(0,qt.jsxs)("div",{className:"progress-session-detail",children:[(0,qt.jsxs)("div",{className:"progress-detail-header",children:[(0,qt.jsx)("h3",{children:g.workInstructionTitle||"Untitled Task"}),(()=>{const e=T(g),t=W(g);return(0,qt.jsxs)("div",{className:"progress-detail-badges",children:[(0,qt.jsx)("span",{className:"progress-status-badge",style:{backgroundColor:"".concat(e.color,"20"),color:e.color,border:"1px solid ".concat(e.color,"40")},children:e.displayText}),(0,qt.jsxs)("span",{className:"progress-mode-badge ".concat(t.mode),children:[(0,qt.jsx)("span",{className:"progress-mode-icon",children:t.icon}),(0,qt.jsx)("span",{className:"progress-mode-text",children:t.label}),t.isTeamMode&&(0,qt.jsxs)("small",{className:"progress-operators-detail",children:["(",t.operators.length," operator)"]})]})]})})(),g.isActive&&(0,qt.jsx)("div",{className:"progress-realtime-indicator",children:(0,qt.jsx)("span",{className:"progress-pulse-dot"})})]}),(0,qt.jsxs)("div",{className:"progress-detail-content",children:[(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsx)("label",{children:"Status Detail:"}),(0,qt.jsxs)("div",{className:"progress-status-detail",children:[(0,qt.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:R(g.adminStatus||g.rawStatus)},children:[(0,qt.jsx)("span",{children:D(g.adminStatus||g.rawStatus)}),(0,qt.jsx)("span",{style:{fontWeight:"bold"},children:P(g.adminStatus||g.rawStatus)})]}),g.isActive&&(0,qt.jsxs)("small",{className:"progress-status-note",children:["\ud83d\udccd Sedang di Step ",g.currentStep+1,(()=>{const e=W(g);if(e.isTeamMode){const t=e.operators.filter(e=>e.isActive).length;return(0,qt.jsxs)(qt.Fragment,{children:[" \u2022 Operator aktif: ",t,"/",e.operators.length]})}return null})()]})]})]}),(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsx)("label",{children:"Progress Lengkap:"}),(()=>{const e=N(g);return(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"progress-progress-bar",style:{marginBottom:"8px",height:"12px"},children:(0,qt.jsx)("div",{className:"progress-progress-fill",style:{width:"".concat(e.completionRate,"%"),backgroundColor:g.isActive?"#20c997":"#6f42c1",transition:"width 0.3s ease"}})}),(0,qt.jsxs)("div",{className:"progress-stats-row",children:[(0,qt.jsxs)("span",{children:[e.completedSteps,"/",e.totalSteps," langkah (",e.completionRate.toFixed(1),"%)"]}),g.stepStatuses&&(0,qt.jsxs)("span",{className:"progress-step-breakdown",children:["\u2705 ",g.stepStatuses.filter(e=>e===z.COMPLETED).length," \u2022 \u2b50 ",g.stepStatuses.filter(e=>e===z.SKIPPED).length," \u2022 \u23f8\ufe0f ",g.stepStatuses.filter(e=>e===z.PENDING).length]})]})]})})()]}),(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsx)("label",{children:"Waktu & Efisiensi:"}),(0,qt.jsxs)("div",{className:"progress-time-stats",children:[(0,qt.jsxs)("div",{className:"progress-time-main",children:[(0,qt.jsxs)("span",{children:["\u23f1\ufe0f Total: ",U(g.totalTime||0)]}),g.totalTargetTime>0&&(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("span",{children:["\ud83c\udfaf Target: ",U(g.totalTargetTime)]}),(0,qt.jsx)("span",{className:"progress-efficiency ".concat(g.totalTime<=g.totalTargetTime?"positive":"negative"),children:g.totalTargetTime>0?"".concat(((g.totalTargetTime-g.totalTime)/g.totalTargetTime*100).toFixed(1),"%"):"N/A"})]})]}),g.isActive&&(0,qt.jsx)("small",{className:"progress-time-note",children:"\ud83d\udd04 Timer berjalan \u2022 Update real-time"})]})]}),(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsx)("label",{children:"Timeline:"}),(0,qt.jsxs)("div",{className:"progress-timeline",children:[(0,qt.jsxs)("div",{children:["\ud83d\udcc5 Dimulai: ",M(g.createdAt)]}),g.lastUpdated&&g.lastUpdated!==g.createdAt&&(0,qt.jsxs)("div",{children:["\ud83d\udd04 Terakhir update: ",g.lastUpdated.toLocaleDateString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})]}),g.completedAt&&(0,qt.jsxs)("div",{children:["\u2705 Diselesaikan: ",M(g.completedAt)]})]})]}),(()=>{const e=W(g);return e.isTeamMode&&e.operators.length>0?(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsxs)("label",{children:["Tim Operator (",e.operators.length,"):"]}),(0,qt.jsx)("div",{className:"progress-team-info",children:e.operators.map((e,t)=>{return(0,qt.jsxs)("div",{className:"progress-team-member",children:[(0,qt.jsxs)("div",{className:"progress-member-header",children:[(0,qt.jsxs)("span",{className:"progress-member-name",children:["\ud83d\udc64 ",e.userName||"Unknown","creator"===e.role&&" \ud83d\udc51",e.userId===g.operatorId&&" (Lead)",e.isActive?" \ud83d\udfe2":" \ud83d\udd18"]}),(0,qt.jsx)("span",{className:"progress-member-role",children:"creator"===e.role?"Koordinator":"participant"===e.role?"Anggota Tim":"step_operator"===e.role?"Step Operator":"troubleshooter"===e.role?"Troubleshooter":"Operator"})]}),(0,qt.jsx)("div",{className:"progress-member-details",children:(0,qt.jsxs)("small",{children:[e.isActive?"\ud83d\udfe2 Aktif":"\ud83d\udd18 Offline"," \u2022 Bergabung: ",(e.joinedAt instanceof Date?e.joinedAt:null!==(n=e.joinedAt)&&void 0!==n&&n.toDate?e.joinedAt.toDate():new Date(e.joinedAt)).toLocaleDateString("id-ID"),e.stepsWorked&&e.stepsWorked.length>0&&(0,qt.jsxs)(qt.Fragment,{children:[" \u2022 Steps: ",e.stepsWorked.map(e=>parseInt(e)+1).join(", ")]})]})})]},e.userId||t);var n})})]}):null})(),g.adminComment&&(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsx)("label",{children:"Feedback Admin:"}),(0,qt.jsxs)("div",{className:"progress-admin-comment",children:[(0,qt.jsx)("div",{className:"progress-comment-content",children:(0,qt.jsx)("p",{children:g.adminComment})}),g.adminName&&(0,qt.jsxs)("div",{className:"progress-admin-info",children:[(0,qt.jsxs)("span",{children:["\ud83d\udc64 Oleh: ",(0,qt.jsx)("strong",{children:g.adminName})]}),g.reviewedAt&&(0,qt.jsxs)("span",{children:["\ud83d\udcc5 pada ",M(g.reviewedAt)]})]})]})]}),g.stepStatuses&&Array.isArray(g.stepStatuses)&&(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsx)("label",{children:"Ringkasan Langkah:"}),(0,qt.jsxs)("div",{className:"progress-steps-preview",children:[g.stepStatuses.slice(0,8).map((e,t)=>{var n,r;const s=y[g.workInstructionId],i=null===s||void 0===s||null===(n=s.steps)||void 0===n?void 0:n[t],a=(null===(r=g.stepCompletionTimes)||void 0===r?void 0:r[t])||0,o=g.isActive&&g.currentStep===t;return(0,qt.jsxs)("div",{className:"progress-step-preview-item ".concat(o?"current-step":""),children:[(0,qt.jsx)("span",{className:"progress-step-number",children:o?"\ud83c\udfaf":"".concat(t+1,".")}),(0,qt.jsx)("span",{className:"progress-step-name",children:(null===i||void 0===i?void 0:i.title)||"Langkah ".concat(t+1)}),(0,qt.jsxs)("div",{className:"progress-step-status-info",children:[(0,qt.jsx)("span",{className:"progress-step-status-mini",style:{color:V(e)},title:H(e),children:e===z.COMPLETED?"\u2714":e===z.SKIPPED?"\u2298":e===z.IN_PROGRESS?"\u25b6\ufe0f":"\u25ef"}),a>0&&(0,qt.jsx)("small",{className:"progress-step-time",children:U(a)})]})]},t)}),g.stepStatuses.length>8&&(0,qt.jsxs)("div",{className:"progress-steps-more",children:["+",g.stepStatuses.length-8," langkah lainnya"]})]})]}),g.troubleshootHistory&&g.troubleshootHistory.length>0&&(0,qt.jsxs)("div",{className:"progress-detail-item",children:[(0,qt.jsxs)("label",{children:["Riwayat Troubleshoot (",g.troubleshootHistory.length,"):"]}),(0,qt.jsxs)("details",{className:"progress-troubleshoot-details",children:[(0,qt.jsx)("summary",{children:"Lihat detail troubleshoot"}),(0,qt.jsx)("div",{className:"progress-troubleshoot-list",children:g.troubleshootHistory.slice(0,5).map((e,t)=>(0,qt.jsxs)("div",{className:"progress-troubleshoot-item",children:[(0,qt.jsxs)("div",{className:"progress-troubleshoot-header",children:[(0,qt.jsxs)("span",{children:["\ud83d\udd27 Step ",(e.stepIndex||0)+1]}),(0,qt.jsx)("span",{className:"progress-troubleshoot-time",children:new Date(e.timestamp).toLocaleString("id-ID")})]}),(0,qt.jsx)("p",{className:"progress-troubleshoot-desc",children:e.description}),e.solution&&(0,qt.jsxs)("p",{className:"progress-troubleshoot-solution",children:["\ud83d\udca1 Solusi: ",e.solution]}),(0,qt.jsxs)("div",{className:"progress-troubleshoot-user",children:["\ud83d\udc64 ",e.userName||"Unknown"]})]},t))})]})]})]}),(0,qt.jsx)("div",{className:"progress-detail-actions",children:g.isActive?(0,qt.jsxs)("div",{className:"progress-active-actions",children:[(0,qt.jsxs)("button",{onClick:()=>E(g),className:"progress-action-btn progress-continue-btn",children:["\ud83d\ude80 Lanjutkan dari Step ",g.currentStep+1]}),(0,qt.jsx)("button",{onClick:()=>K(g),className:"progress-action-btn progress-activity-btn",children:"\ud83d\udcca Lihat Riwayat Aktivitas"}),(0,qt.jsx)("div",{className:"progress-active-note",children:(0,qt.jsx)("small",{children:"\ud83d\udca1 Session ini masih aktif dan dapat dilanjutkan kapan saja"})})]}):(0,qt.jsxs)("div",{className:"progress-completed-actions",children:[(0,qt.jsx)("button",{onClick:A,className:"progress-action-btn progress-new-task-btn",children:"\u2795 Mulai Task Baru"}),(0,qt.jsx)("button",{onClick:()=>K(g),className:"progress-action-btn progress-activity-btn",children:"\ud83d\udcca Lihat Riwayat Aktivitas"}),"completed"===g.rawStatus&&(0,qt.jsx)("div",{className:"progress-completed-note",children:(0,qt.jsxs)("small",{children:["\u2705 Session ini telah selesai \u2022 Status: ",P(g.adminStatus||"pending")]})})]})})]}):(0,qt.jsx)("div",{className:"progress-no-selection",children:(0,qt.jsxs)("div",{className:"progress-no-selection-content",children:[(0,qt.jsx)("div",{className:"progress-no-selection-icon",children:"\ud83d\udccb"}),(0,qt.jsx)("h3",{children:"Pilih Session untuk Detail"}),(0,qt.jsx)("p",{children:"Klik pada salah satu session di sebelah kiri untuk melihat informasi lengkapnya."}),0===m.length&&(0,qt.jsxs)("div",{className:"progress-empty-state",children:[(0,qt.jsx)("p",{children:"Belum ada session yang tersedia."}),(0,qt.jsx)(pt,{to:"/task",className:"progress-start-first-btn",children:"\ud83d\ude80 Mulai Task Pertama"})]})]})})})})]})}),c&&d&&(0,qt.jsx)("div",{className:"modal-overlay activity-modal-overlay",onClick:()=>u(!1),children:(0,qt.jsxs)("div",{className:"modal-content activity-modal-content",onClick:e=>e.stopPropagation(),children:[(0,qt.jsxs)("div",{className:"activity-modal-header",children:[(0,qt.jsxs)("div",{className:"activity-modal-title",children:[(0,qt.jsx)(bS,{className:"activity-modal-icon"}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("h3",{children:"Riwayat Aktivitas"}),(0,qt.jsxs)("p",{className:"activity-modal-subtitle",children:[d.workInstructionTitle," \u2022 MO: ",d.moNumber,(()=>{const e=W(d);return e.isTeamMode?" \u2022 Tim (".concat(e.operators.length," operator)"):" \u2022 Individual"})()]})]})]}),(0,qt.jsx)("button",{onClick:()=>u(!1),className:"activity-modal-close",children:(0,qt.jsx)(Ct,{size:20})})]}),(0,qt.jsxs)("div",{className:"activity-tabs",children:[(0,qt.jsxs)("button",{className:"activity-tab ".concat("timeline"===f?"active":""),onClick:()=>p("timeline"),children:[(0,qt.jsx)(Ot,{size:16}),"Timeline (",q.length,")"]}),(0,qt.jsxs)("button",{className:"activity-tab ".concat("participants"===f?"active":""),onClick:()=>p("participants"),children:[(0,qt.jsx)(Rt,{size:16}),"Partisipan (",W(d).operators.length,")"]}),(0,qt.jsxs)("button",{className:"activity-tab ".concat("troubleshoot"===f?"active":""),onClick:()=>p("troubleshoot"),children:[(0,qt.jsx)(dj,{size:16}),"Troubleshoot (",(null===(o=d.troubleshootHistory)||void 0===o?void 0:o.length)||0,")"]})]}),(0,qt.jsxs)("div",{className:"activity-modal-body",children:["timeline"===f&&(0,qt.jsx)("div",{className:"activity-timeline-tab",children:0===q.length?(0,qt.jsxs)("div",{className:"activity-empty-state",children:[(0,qt.jsx)(Ot,{className:"activity-empty-icon"}),(0,qt.jsx)("p",{children:"Tidak ada aktivitas yang tercatat"})]}):(0,qt.jsx)("div",{className:"activity-timeline",children:q.map(e=>(0,qt.jsxs)("div",{className:"activity-timeline-item ".concat(e.type),children:[(0,qt.jsx)("div",{className:"activity-timeline-marker",children:(0,qt.jsx)("span",{className:"activity-icon",children:e.icon})}),(0,qt.jsxs)("div",{className:"activity-timeline-content",children:[(0,qt.jsxs)("div",{className:"activity-timeline-header",children:[(0,qt.jsx)("h4",{children:e.title}),(0,qt.jsx)("span",{className:"activity-timestamp",children:(t=>{const n=null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate():e.timestamp;return n instanceof Date?n.toLocaleString("id-ID",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Waktu tidak diketahui"})()})]}),(0,qt.jsx)("p",{className:"activity-description",children:e.description}),"step_completed"===e.type&&e.completionTime&&(0,qt.jsx)("div",{className:"activity-extra-info",children:(0,qt.jsxs)("span",{className:"activity-completion-time",children:["\u23f1\ufe0f Waktu penyelesaian: ",U(e.completionTime)]})}),"step_skipped"===e.type&&e.reason&&(0,qt.jsx)("div",{className:"activity-extra-info",children:(0,qt.jsxs)("span",{className:"activity-skip-reason",children:["\ud83d\udcad Alasan: ",e.reason]})}),"troubleshoot"===e.type&&(0,qt.jsxs)("div",{className:"activity-troubleshoot-info",children:[e.category&&(0,qt.jsxs)("span",{className:"activity-troubleshoot-category",children:["\ud83c\udff7\ufe0f Kategori: ",e.category]}),e.solution&&(0,qt.jsxs)("div",{className:"activity-troubleshoot-solution",children:["\ud83d\udca1 Solusi: ",e.solution]})]}),"session_completed"===e.type&&e.efficiency&&(0,qt.jsx)("div",{className:"activity-extra-info",children:(0,qt.jsxs)("span",{className:"activity-efficiency",children:["\ud83d\udcc8 Efisiensi: ",e.efficiency.toFixed(1),"%"]})}),e.userName&&(0,qt.jsxs)("div",{className:"activity-user-info",children:[(0,qt.jsx)(hj,{size:14}),(0,qt.jsx)("span",{children:e.userName}),null!==e.stepIndex&&(0,qt.jsxs)("span",{className:"activity-step-badge",children:["Step ",e.stepIndex+1]})]})]})]},e.id))})}),"participants"===f&&(0,qt.jsx)("div",{className:"activity-participants-tab",children:(()=>{const e=(t=d,console.log("\ud83d\udcca Calculating participant stats for session:",t.id),W(t).operators.map(e=>{const t=q.filter(t=>t.userId===e.userId),n=t.filter(e=>"step_started"===e.type).length,r=t.filter(e=>"step_completed"===e.type).length,s=t.filter(e=>"step_skipped"===e.type).length,i=t.filter(e=>"step_stopped"===e.type).length,a=t.filter(e=>"troubleshoot"===e.type).length;let o=0;return t.filter(e=>"step_completed"===e.type&&e.completionTime).forEach(e=>{o+=e.completionTime}),l(l({},e),{},{stats:{stepsStarted:n,stepsCompleted:r,stepsSkipped:s,stepsStopped:i,troubleshoots:a,totalActivities:t.length,totalWorkTime:o,stepsWorked:e.stepsWorked||[]}})}));var t;return(0,qt.jsx)("div",{className:"participants-list",children:0===e.length?(0,qt.jsxs)("div",{className:"activity-empty-state",children:[(0,qt.jsx)(Rt,{className:"activity-empty-icon"}),(0,qt.jsx)("p",{children:"Tidak ada data partisipan"})]}):e.map((e,t)=>{return(0,qt.jsxs)("div",{className:"participant-card",children:[(0,qt.jsxs)("div",{className:"participant-header",children:[(0,qt.jsx)("div",{className:"participant-avatar",children:(0,qt.jsx)("span",{children:(e.userName||"U").charAt(0).toUpperCase()})}),(0,qt.jsxs)("div",{className:"participant-info",children:[(0,qt.jsx)("h4",{children:e.userName||"Unknown User"}),(0,qt.jsxs)("div",{className:"participant-badges",children:["creator"===e.role&&(0,qt.jsx)("span",{className:"participant-badge creator",children:"\ud83d\udc51 Koordinator"}),e.userId===d.operatorId&&(0,qt.jsx)("span",{className:"participant-badge lead",children:"\ud83c\udfaf Lead"}),(0,qt.jsx)("span",{className:"participant-badge status ".concat(e.isActive?"active":"inactive"),children:e.isActive?"\ud83d\udfe2 Aktif":"\ud83d\udd18 Offline"}),(0,qt.jsx)("span",{className:"participant-badge role",children:"creator"===e.role?"Koordinator":"participant"===e.role?"Anggota":"step_operator"===e.role?"Step Operator":"troubleshooter"===e.role?"Troubleshooter":"Operator"})]})]})]}),(0,qt.jsxs)("div",{className:"participant-stats",children:[(0,qt.jsxs)("div",{className:"participant-stats-grid",children:[(0,qt.jsxs)("div",{className:"participant-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"\u25b6\ufe0f Dimulai"}),(0,qt.jsx)("span",{className:"stat-value",children:e.stats.stepsStarted})]}),(0,qt.jsxs)("div",{className:"participant-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"\u2705 Selesai"}),(0,qt.jsx)("span",{className:"stat-value",children:e.stats.stepsCompleted})]}),(0,qt.jsxs)("div",{className:"participant-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"\u2b50 Skip"}),(0,qt.jsx)("span",{className:"stat-value",children:e.stats.stepsSkipped})]}),(0,qt.jsxs)("div",{className:"participant-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"\u23f8\ufe0f Stop"}),(0,qt.jsx)("span",{className:"stat-value",children:e.stats.stepsStopped})]}),(0,qt.jsxs)("div",{className:"participant-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"\ud83d\udd27 Troubleshoot"}),(0,qt.jsx)("span",{className:"stat-value",children:e.stats.troubleshoots})]}),(0,qt.jsxs)("div",{className:"participant-stat",children:[(0,qt.jsx)("span",{className:"stat-label",children:"\ud83d\udcca Total Aktivitas"}),(0,qt.jsx)("span",{className:"stat-value",children:e.stats.totalActivities})]})]}),e.stats.totalWorkTime>0&&(0,qt.jsxs)("div",{className:"participant-work-time",children:[(0,qt.jsx)("span",{className:"work-time-label",children:"\u23f1\ufe0f Total Waktu Kerja:"}),(0,qt.jsx)("span",{className:"work-time-value",children:U(e.stats.totalWorkTime)})]}),e.stats.stepsWorked&&e.stats.stepsWorked.length>0&&(0,qt.jsxs)("div",{className:"participant-steps-worked",children:[(0,qt.jsx)("span",{className:"steps-worked-label",children:"\ud83c\udfaf Steps Dikerjakan:"}),(0,qt.jsx)("div",{className:"steps-worked-list",children:e.stats.stepsWorked.map(e=>(0,qt.jsxs)("span",{className:"step-worked-badge",children:["Step ",parseInt(e)+1]},e))})]})]}),(0,qt.jsx)("div",{className:"participant-timeline",children:(0,qt.jsxs)("div",{className:"participant-join-info",children:[(0,qt.jsxs)("span",{children:["\ud83d\udcc5 Bergabung: ",(e.joinedAt instanceof Date?e.joinedAt:null!==(r=e.joinedAt)&&void 0!==r&&r.toDate?e.joinedAt.toDate():new Date(e.joinedAt)).toLocaleDateString("id-ID")]}),e.leftAt&&(0,qt.jsxs)("span",{children:["\ud83d\udc4b Keluar: ",(e.leftAt instanceof Date?e.leftAt:null!==(n=e.leftAt)&&void 0!==n&&n.toDate?e.leftAt.toDate():new Date(e.leftAt)).toLocaleDateString("id-ID")]})]})})]},e.userId||t);var n,r})})})()}),"troubleshoot"===f&&(0,qt.jsx)("div",{className:"activity-troubleshoot-tab",children:d.troubleshootHistory&&0!==d.troubleshootHistory.length?(0,qt.jsx)("div",{className:"troubleshoot-list",children:d.troubleshootHistory.map((e,t)=>(0,qt.jsxs)("div",{className:"troubleshoot-card",children:[(0,qt.jsxs)("div",{className:"troubleshoot-header",children:[(0,qt.jsxs)("div",{className:"troubleshoot-step",children:["\ud83d\udd27 Step ",(e.stepIndex||0)+1]}),(0,qt.jsx)("div",{className:"troubleshoot-timestamp",children:new Date(e.timestamp).toLocaleString("id-ID")})]}),(0,qt.jsxs)("div",{className:"troubleshoot-content",children:[(0,qt.jsx)("h4",{children:"Masalah:"}),(0,qt.jsx)("p",{children:e.description}),e.category&&(0,qt.jsxs)("div",{className:"troubleshoot-category",children:[(0,qt.jsx)("span",{className:"category-label",children:"\ud83c\udff7\ufe0f Kategori:"}),(0,qt.jsx)("span",{className:"category-value",children:e.category})]}),e.solution&&(0,qt.jsxs)("div",{className:"troubleshoot-solution",children:[(0,qt.jsx)("h4",{children:"\ud83d\udca1 Solusi:"}),(0,qt.jsx)("p",{children:e.solution})]})]}),(0,qt.jsxs)("div",{className:"troubleshoot-footer",children:[(0,qt.jsxs)("span",{children:["\ud83d\udc64 Ditangani oleh: ",(0,qt.jsx)("strong",{children:e.userName})]}),e.stepTitle&&(0,qt.jsxs)("span",{children:["\ud83d\udccb Langkah: ",e.stepTitle]})]})]},e.id||t))}):(0,qt.jsxs)("div",{className:"activity-empty-state",children:[(0,qt.jsx)(dj,{className:"activity-empty-icon"}),(0,qt.jsx)("p",{children:"Tidak ada troubleshoot yang tercatat"}),(0,qt.jsx)("small",{children:"Session ini berjalan lancar tanpa masalah"})]})})]}),(0,qt.jsxs)("div",{className:"activity-modal-footer",children:[(0,qt.jsx)("div",{className:"activity-modal-summary",children:(e=>{const t=W(d);return(0,qt.jsxs)("small",{children:["\ud83d\udcca Summary: ",q.length," aktivitas \u2022",t.operators.length," operator \u2022",(null===(e=d.troubleshootHistory)||void 0===e?void 0:e.length)||0," troubleshoot"]})})()}),(0,qt.jsx)("button",{onClick:()=>u(!1),className:"activity-modal-close-btn",children:"Tutup"})]})]})})]}):(0,qt.jsx)("div",{className:"progress-page",children:(0,qt.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",textAlign:"center"},children:[(0,qt.jsx)("div",{style:{fontSize:"18px",marginBottom:"10px"},children:"Anda harus login terlebih dahulu"}),(0,qt.jsx)("div",{style:{color:"#666",marginBottom:"30px"},children:"Silakan login untuk mengakses halaman progress"}),(0,qt.jsx)("button",{onClick:A,style:{padding:"12px 24px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",transition:"background-color 0.2s"},onMouseOver:e=>e.target.style.backgroundColor="#0056b3",onMouseOut:e=>e.target.style.backgroundColor="#007bff",children:"Login Sekarang"})]})});var G,$,X,Y,Q,J};function mj(t){let{children:n,requiredRole:r}=t;const[s,i]=(0,e.useState)(null),[a,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(null),h="admin@gmail.com";if((0,e.useEffect)(()=>{const e=fa(J_,async e=>{try{if(e){if(e.email===h)return o({role:"admin",status:"approved",isSystemAdmin:!0,email:h}),i(e),void c(!1);try{const t=await Hw(Fy(Z_,"users",e.uid));if(t.exists()){const e=t.data();o(e),console.log("User data loaded:",e)}else console.error("User document not found for:",e.uid),d("User profile not found. Please contact administrator.")}catch(t){console.error("Firestore error:",t),d("Failed to load user profile")}}else o(null);i(e)}catch(n){console.error("Auth state error:",n),d("Authentication error occurred")}finally{c(!1)}});return()=>e()},[]),l)return(0,qt.jsxs)("div",{className:"loading-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:"1rem"},children:[(0,qt.jsx)("div",{className:"spinner",style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,qt.jsx)("p",{children:"Verifying authentication..."})]});if(u)return(0,qt.jsxs)("div",{className:"error-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:"1rem",padding:"2rem",textAlign:"center"},children:[(0,qt.jsxs)("p",{style:{color:"#e74c3c",fontWeight:"bold"},children:["Error: ",u]}),(0,qt.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Try Again"})]});if(!s)return console.log("No user authenticated, redirecting to login"),(0,qt.jsx)(Ee,{to:"/login",replace:!0});if(!a)return console.log("No user data available, redirecting to login"),(0,qt.jsx)(Ee,{to:"/login",replace:!0});const f=s.email===h&&a.isSystemAdmin;if(console.log("ProtectedRoute Debug:",{userEmail:s.email,userDataRole:a.role,userDataStatus:a.status,requiredRole:r,isSystemAdmin:f,currentPath:window.location.pathname}),!f){if("pending"===a.status)return console.log("User status pending, redirecting to login"),(0,qt.jsx)(Ee,{to:"/login",state:{message:"Your account is pending approval. Please wait for admin confirmation."},replace:!0});if("rejected"===a.status)return console.log("User status rejected, redirecting to login"),(0,qt.jsx)(Ee,{to:"/login",state:{message:"Your account has been rejected. Please contact administrator."},replace:!0});if("approved"!==a.status)return console.log("User status not approved:",a.status),(0,qt.jsx)(Ee,{to:"/login",state:{message:"Account status invalid. Please contact administrator."},replace:!0})}if(r){if(console.log("Checking access for required role: ".concat(r)),"admin"===r&&!f&&"admin"!==a.role)return console.log("Non-admin trying to access admin route, redirecting to home"),(0,qt.jsx)(Ee,{to:"/home",replace:!0});if("employee"===r||"karyawan"===r||"task"===r)if(f)console.log("System admin accessing employee/task route - ALLOWED");else{const e=["employee","karyawan","operator"];if(!e.includes(a.role))return console.log("User with role '".concat(a.role,"' trying to access ").concat(r," route")),console.log("Valid roles are: ".concat(e.join(", "))),(0,qt.jsx)(Ee,{to:"/login",state:{message:"Access denied. Required role: ".concat(r,". Your role: ").concat(a.role)},replace:!0})}}return console.log("All checks passed, rendering protected content"),n}const gj=Et("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),bj=Et("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),vj=Et("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),yj=Et("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),wj=Et("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),xj={title:"",description:"",keyPoints:[""],safetyPoints:[""],maxTime:"",imageUrls:[""]},kj={title:"",description:"",category:"General",estimatedDuration:"",difficulty:"medium",steps:[l({},xj)],moNumber:"",moDisplay:""},_j=e=>Math.round(e/60),Sj=e=>60*e,jj=e=>{const t=e.reduce((e,t)=>e+(parseInt(t.maxTime)||0),0);return _j(t)},Nj=e=>{const t=[],n=parseInt(e.estimatedDuration)||0,r=jj(e.steps);if(n>0&&r>0){Math.abs(n-r)/n*100>20&&(r>n?t.push("\u26a0\ufe0f Total waktu langkah-langkah (".concat(r," menit) melebihi estimasi durasi keseluruhan (").concat(n," menit). Pertimbangkan untuk menyesuaikan waktu target atau estimasi durasi.")):t.push("\u26a0\ufe0f Total waktu langkah-langkah (".concat(r," menit) jauh lebih kecil dari estimasi durasi keseluruhan (").concat(n," menit). Pertimbangkan untuk menambah waktu target atau mengurangi estimasi durasi.")))}return t},Tj=e=>{const t=[];return e.title.trim()||t.push("Judul langkah harus diisi"),e.description.trim()||t.push("Deskripsi langkah harus diisi"),e.maxTime&&(isNaN(e.maxTime)||parseInt(e.maxTime)<0)&&t.push("Waktu target harus berupa angka positif"),e.imageUrls.forEach((e,n)=>{e&&!(e=>{if(!e||""===e.trim())return!0;try{return new URL(e.trim()),!0}catch(pN){return!1}})(e)&&t.push("URL gambar ".concat(n+1," tidak valid"))}),t},Ej=e=>{const t=[];e.title.trim()||t.push("Judul instruksi kerja harus diisi"),e.description.trim()||t.push("Deskripsi instruksi kerja harus diisi"),e.estimatedDuration&&(isNaN(e.estimatedDuration)||parseInt(e.estimatedDuration)<0)&&t.push("Estimasi durasi harus berupa angka positif"),0===e.steps.length&&t.push("Minimal harus ada 1 langkah kerja"),e.steps.forEach((e,n)=>{Tj(e).forEach(e=>{t.push("Langkah ".concat(n+1,": ").concat(e))})});const n=Nj(e);return t.push(...n),e.moNumber&&!e.moNumber.trim()&&t.push("Nomor MO tidak boleh kosong jika MO dipilih"),t},Cj=Et("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Ij=Et("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Aj=e=>{let{task:t,onDistributeTime:n,onClearAllTimes:r}=e;const s=parseInt(t.estimatedDuration)||0,i=jj(t.steps),a=Nj(t),o=t.steps.filter(e=>parseInt(e.maxTime)>0).length;t.steps.length;return(0,qt.jsxs)("div",{className:"time-summary-panel ".concat(a.length>0?"warning":s>0&&i>0?"success":"info"),children:[(0,qt.jsx)("div",{className:"time-summary-header",children:(0,qt.jsx)("h3",{children:"\u23f0 Ringkasan Waktu"})}),(0,qt.jsxs)("div",{className:"time-summary-content",children:[(0,qt.jsxs)("div",{className:"time-metrics",children:[(0,qt.jsxs)("div",{className:"time-metric",children:[(0,qt.jsx)("span",{className:"metric-label",children:"Estimasi Durasi Keseluruhan:"}),(0,qt.jsx)("span",{className:"metric-value",children:s>0?"".concat(s," menit"):"Tidak ditentukan"})]}),(0,qt.jsxs)("div",{className:"time-metric",children:[(0,qt.jsx)("span",{className:"metric-label",children:"Total Waktu Target Langkah:"}),(0,qt.jsx)("span",{className:"metric-value",children:i>0?"".concat(i," menit"):"Tidak ditentukan"})]}),(0,qt.jsxs)("div",{className:"time-metric",children:[(0,qt.jsx)("span",{className:"metric-label",children:"Langkah dengan Waktu Target:"}),(0,qt.jsxs)("span",{className:"metric-value",children:[o," dari ",t.steps.length," langkah"]})]}),s>0&&i>0&&(0,qt.jsxs)("div",{className:"time-metric",children:[(0,qt.jsx)("span",{className:"metric-label",children:"Selisih:"}),(0,qt.jsxs)("span",{className:"metric-value ".concat(Math.abs(s-i)>.2*s?"warning":"success"),children:[s-i>0?"+":"",s-i," menit"]})]})]}),a.length>0&&(0,qt.jsx)("div",{className:"time-warnings",children:a.map((e,t)=>(0,qt.jsx)("div",{className:"time-warning",children:e},t))}),(0,qt.jsxs)("div",{className:"time-actions",children:[s>0&&(0,qt.jsx)("button",{type:"button",onClick:n,className:"btn btn-secondary btn-sm",title:"Bagikan waktu secara merata ke semua langkah",children:"\ud83d\udcca Distribusi Merata"}),o>0&&(0,qt.jsx)("button",{type:"button",onClick:r,className:"btn btn-outline btn-sm",title:"Hapus semua waktu target dari langkah",children:"\ud83d\uddd1\ufe0f Hapus Semua Waktu"})]})]})]})},Mj=e=>{let{step:t,stepIndex:n,onUpdateStep:r,onRemoveStep:s,canRemove:i,totalEstimatedDuration:a,totalSteps:o,suggestedTime:c}=e;const u=(e,s)=>{r(n,l(l({},t),{},{[e]:s}))},d=(e,s,i)=>{const a=[...t[e]];a[s]=i,r(n,l(l({},t),{},{[e]:a}))},h=e=>{const s=[...t[e],""];r(n,l(l({},t),{},{[e]:s}))},f=(e,s)=>{if(t[e].length>1){const i=t[e].filter((e,t)=>t!==s);r(n,l(l({},t),{},{[e]:i}))}},p=_j(parseInt(t.maxTime)||0);return(0,qt.jsxs)("div",{className:"step-form enhanced-step-form",children:[(0,qt.jsxs)("div",{className:"step-form-header",children:[(0,qt.jsxs)("div",{className:"step-header-info",children:[(0,qt.jsxs)("h3",{children:["Langkah ",n+1]}),p>0&&(0,qt.jsxs)("span",{className:"step-time-badge",children:["\u23f1\ufe0f ",p," menit"]})]}),i&&(0,qt.jsx)("button",{type:"button",onClick:()=>s(n),className:"remove-step-btn",title:"Hapus langkah ini",children:"\u2715"})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsxs)("label",{htmlFor:"step-title-".concat(n),children:["Judul Langkah ",(0,qt.jsx)("span",{className:"required",children:"*"})]}),(0,qt.jsx)("input",{id:"step-title-".concat(n),type:"text",value:t.title,onChange:e=>u("title",e.target.value),placeholder:"Contoh: Persiapan Alat dan Bahan",className:"form-input",required:!0})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsxs)("label",{htmlFor:"step-description-".concat(n),children:["Deskripsi Langkah ",(0,qt.jsx)("span",{className:"required",children:"*"})]}),(0,qt.jsx)("textarea",{id:"step-description-".concat(n),value:t.description,onChange:e=>u("description",e.target.value),placeholder:"Jelaskan secara detail apa yang harus dilakukan pada langkah ini...",className:"form-textarea",rows:"4",required:!0})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"step-maxtime-".concat(n),children:"Waktu Target"}),(0,qt.jsxs)("div",{className:"time-input-container",children:[(0,qt.jsxs)("div",{className:"time-input-row",children:[(0,qt.jsx)("input",{id:"step-maxtime-".concat(n),type:"number",value:t.maxTime,onChange:e=>u("maxTime",e.target.value),placeholder:"0",className:"form-input time-input",min:"0"}),(0,qt.jsx)("span",{className:"time-unit",children:"detik"}),p>0&&(0,qt.jsxs)("span",{className:"time-conversion",children:["\u2248 ",p," menit"]})]}),c>0&&c!==parseInt(t.maxTime||0)&&(0,qt.jsxs)("div",{className:"time-suggestion",children:[(0,qt.jsxs)("span",{className:"suggestion-text",children:["\ud83d\udca1 Disarankan: ",_j(c)," menit (",c," detik)"]}),(0,qt.jsx)("button",{type:"button",onClick:()=>{u("maxTime",c.toString())},className:"btn-suggestion",children:"Gunakan"})]})]}),(0,qt.jsx)("small",{className:"form-hint",children:"Kosongkan jika tidak ada batasan waktu. Waktu dihitung dalam detik."})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{children:"Titik Kunci Kerja"}),t.keyPoints.map((e,n)=>(0,qt.jsxs)("div",{className:"array-input-group",children:[(0,qt.jsx)("input",{type:"text",value:e,onChange:e=>d("keyPoints",n,e.target.value),placeholder:"Titik kunci ".concat(n+1),className:"form-input"}),(0,qt.jsx)("button",{type:"button",onClick:()=>f("keyPoints",n),className:"remove-array-btn",disabled:1===t.keyPoints.length,title:"Hapus item ini",children:"\u2715"})]},n)),(0,qt.jsx)("button",{type:"button",onClick:()=>h("keyPoints"),className:"add-array-btn",children:"+ Tambah Titik Kunci"})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{children:"Titik Kunci Keselamatan"}),t.safetyPoints.map((e,n)=>(0,qt.jsxs)("div",{className:"array-input-group",children:[(0,qt.jsx)("input",{type:"text",value:e,onChange:e=>d("safetyPoints",n,e.target.value),placeholder:"Keselamatan ".concat(n+1),className:"form-input"}),(0,qt.jsx)("button",{type:"button",onClick:()=>f("safetyPoints",n),className:"remove-array-btn",disabled:1===t.safetyPoints.length,title:"Hapus item ini",children:"\u2715"})]},n)),(0,qt.jsx)("button",{type:"button",onClick:()=>h("safetyPoints"),className:"add-array-btn",children:"+ Tambah Keselamatan"})]}),(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{children:"URL Gambar Referensi"}),t.imageUrls.map((e,n)=>(0,qt.jsxs)("div",{className:"array-input-group",children:[(0,qt.jsx)("input",{type:"url",value:e,onChange:e=>d("imageUrls",n,e.target.value),placeholder:"https://example.com/image".concat(n+1,".jpg"),className:"form-input"}),e&&(0,qt.jsxs)("div",{className:"image-preview",children:[(0,qt.jsx)("img",{src:e,alt:"Preview ".concat(n+1),onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"},onLoad:e=>{e.target.style.display="block",e.target.nextSibling.style.display="none"}}),(0,qt.jsx)("div",{className:"image-error",style:{display:"none"},children:"\u274c Gambar tidak dapat dimuat"})]}),(0,qt.jsx)("button",{type:"button",onClick:()=>f("imageUrls",n),className:"remove-array-btn",disabled:1===t.imageUrls.length,title:"Hapus URL ini",children:"\u2715"})]},n)),(0,qt.jsx)("button",{type:"button",onClick:()=>h("imageUrls"),className:"add-array-btn",children:"+ Tambah URL Gambar"}),(0,qt.jsx)("small",{className:"form-hint",children:"Masukkan URL gambar yang dapat diakses secara publik"})]})]})},Oj=t=>{let{currentView:n,onBackClick:r,onLogout:s,sidebarOpen:i,toggleSidebar:a}=t;const[o,l]=(0,e.useState)(!1);(0,e.useEffect)(()=>{const e=e=>{o&&!e.target.closest(".add-task-profile-container")&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);return(0,qt.jsxs)("div",{className:"add-task-header-bar",children:[(0,qt.jsxs)("div",{className:"add-task-header-left",children:[(0,qt.jsx)("button",{className:"add-task-sidebar-toggle",onClick:a,children:(0,qt.jsx)(It,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"add-task-logo",onClick:()=>{r&&r()},style:{cursor:"pointer"}})]}),(0,qt.jsx)("div",{className:"add-task-header-center",children:(0,qt.jsx)("h1",{className:"add-task-title-header",children:(()=>{switch(n){case"list":return"Daftar Instruksi Kerja";case"form":return"Tambah Instruksi Kerja Baru";case"edit":return"Edit Instruksi Kerja";case"view":return"Detail Instruksi Kerja";default:return"Instruksi Kerja"}})()})}),(0,qt.jsx)("div",{className:"add-task-header-right",children:(0,qt.jsxs)("div",{className:"add-task-profile-container",children:[(0,qt.jsxs)("button",{className:"add-task-profile-btn",onClick:()=>l(!o),children:[(0,qt.jsx)("div",{className:"add-task-profile-avatar",children:(0,qt.jsx)("span",{className:"add-task-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{className:"add-task-profile-info",children:[(0,qt.jsx)("div",{className:"add-task-profile-name",children:"Admin"}),(0,qt.jsx)("div",{className:"add-task-profile-id",children:"Administrator"})]}),(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"add-task-dropdown-arrow ".concat(o?"rotated":""),children:(0,qt.jsx)("polyline",{points:"6,9 12,15 18,9"})})]}),o&&(0,qt.jsxs)("div",{className:"add-task-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"add-task-dropdown-header",children:[(0,qt.jsx)("div",{className:"add-task-profile-avatar",children:(0,qt.jsx)("span",{className:"add-task-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"add-task-dropdown-name",children:"Admin"}),(0,qt.jsx)("div",{className:"add-task-dropdown-role",children:"Administrator"})]})]}),(0,qt.jsx)("hr",{className:"add-task-dropdown-divider"}),(0,qt.jsxs)("button",{className:"add-task-dropdown-item add-task-dropdown-logout",onClick:()=>{l(!1),s&&s()},children:[(0,qt.jsx)(fS,{size:16}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]})},Rj=e=>{let{sidebarOpen:t,toggleSidebar:n}=e;const r=e=>{"Rekap Pengerjaan"===e?window.location.href="/admin":"User Management"===e?window.location.href="/approvals":"MO Management"===e&&(window.location.href="/add-mo"),n()};return(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("div",{className:"add-task-sidebar ".concat(t?"add-task-sidebar-open":""),children:[(0,qt.jsxs)("div",{className:"add-task-sidebar-header",children:[(0,qt.jsx)("h3",{children:"Menu"}),(0,qt.jsx)("button",{className:"add-task-sidebar-close",onClick:n,children:(0,qt.jsx)(Ct,{size:20})})]}),(0,qt.jsxs)("nav",{className:"add-task-sidebar-nav",children:[(0,qt.jsxs)("button",{onClick:()=>r("Rekap Pengerjaan"),className:"add-task-sidebar-item",children:[(0,qt.jsx)(Cj,{size:20}),(0,qt.jsx)("span",{children:"Work Sessions"})]}),(0,qt.jsxs)("button",{onClick:()=>r("User Management"),className:"add-task-sidebar-item",children:[(0,qt.jsx)(ej,{size:20}),(0,qt.jsx)("span",{children:"User Management"})]}),(0,qt.jsxs)("button",{onClick:()=>r("MO Management"),className:"add-task-sidebar-item",children:[(0,qt.jsx)(tj,{size:20}),(0,qt.jsx)("span",{children:"MO Management"})]}),(0,qt.jsxs)("button",{onClick:()=>{n()},className:"add-task-sidebar-item active",children:[(0,qt.jsx)(Ij,{size:20}),(0,qt.jsx)("span",{children:"Add Task"})]})]})]}),t&&(0,qt.jsx)("div",{className:"add-task-sidebar-overlay",onClick:n})]})},Dj=e=>{let{message:t="Memuat data..."}=e;return(0,qt.jsx)("div",{className:"loading-overlay",children:(0,qt.jsxs)("div",{className:"loading-content",children:[(0,qt.jsx)("div",{className:"loading-spinner"}),(0,qt.jsx)("p",{children:t})]})})},Pj=e=>{let{isOpen:t,title:n,message:r,onConfirm:s,onCancel:i,isDestructive:a=!1}=e;return t?(0,qt.jsx)("div",{className:"modal-overlay",children:(0,qt.jsxs)("div",{className:"modal-content",children:[(0,qt.jsx)("div",{className:"modal-header",children:(0,qt.jsx)("h3",{children:n})}),(0,qt.jsx)("div",{className:"modal-body",children:(0,qt.jsx)("p",{children:r})}),(0,qt.jsxs)("div",{className:"modal-actions",children:[(0,qt.jsx)("button",{onClick:i,className:"btn btn-secondary",children:"Batal"}),(0,qt.jsx)("button",{onClick:s,className:"btn ".concat(a?"btn-danger":"btn-primary"),children:a?"Hapus":"Konfirmasi"})]})]})}):null},Lj=e=>{let{tasks:t,onAddNew:n,onView:r,onEdit:s,onDelete:i,loading:a}=e;const o=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return a?(0,qt.jsx)(Dj,{message:"Memuat daftar instruksi kerja..."}):(0,qt.jsxs)("div",{className:"task-list-container",children:[(0,qt.jsxs)("div",{className:"task-list-header",children:[(0,qt.jsxs)("div",{className:"task-list-info",children:[(0,qt.jsxs)("h2",{children:["Daftar Instruksi Kerja (",t.length,")"]}),(0,qt.jsx)("p",{children:"Kelola semua instruksi kerja yang telah dibuat"})]}),(0,qt.jsx)("button",{onClick:n,className:"btn btn-primary",children:"\u2795 Tambah Instruksi Baru"})]}),0===t.length?(0,qt.jsxs)("div",{className:"empty-state",children:[(0,qt.jsx)("div",{className:"empty-icon",children:"\ud83d\udccb"}),(0,qt.jsx)("h3",{children:"Belum ada instruksi kerja"}),(0,qt.jsx)("p",{children:"Mulai dengan menambahkan instruksi kerja pertama Anda"}),(0,qt.jsx)("button",{onClick:n,className:"btn btn-primary",children:"\u2795 Tambah Instruksi Pertama"})]}):(0,qt.jsx)("div",{className:"task-grid",children:t.map(e=>{var t;return(0,qt.jsxs)("div",{className:"task-card",children:[(0,qt.jsxs)("div",{className:"task-card-header",children:[(0,qt.jsx)("h3",{className:"task-title",children:e.title}),e.moNumber&&(0,qt.jsx)("div",{className:"mo-info",children:(0,qt.jsxs)("span",{className:"mo-badge",children:["MO: ",e.moNumber]})})]}),(0,qt.jsxs)("div",{className:"task-card-body",children:[(0,qt.jsx)("p",{className:"task-description",children:e.description}),(0,qt.jsxs)("div",{className:"task-meta",children:[(0,qt.jsxs)("div",{className:"task-meta-item",children:[(0,qt.jsx)("span",{className:"meta-label",children:"Langkah:"}),(0,qt.jsx)("span",{className:"meta-value",children:(null===(t=e.steps)||void 0===t?void 0:t.length)||0})]}),e.estimatedDuration&&(0,qt.jsxs)("div",{className:"task-meta-item",children:[(0,qt.jsx)("span",{className:"meta-label",children:"Durasi:"}),(0,qt.jsxs)("span",{className:"meta-value",children:[e.estimatedDuration," menit"]})]}),(0,qt.jsxs)("div",{className:"task-meta-item",children:[(0,qt.jsx)("span",{className:"meta-label",children:"Dibuat:"}),(0,qt.jsx)("span",{className:"meta-value",children:o(e.createdAt)})]})]}),e.moDisplay&&(0,qt.jsxs)("div",{className:"mo-reference",children:[(0,qt.jsxs)("div",{className:"mo-reference-header",children:[(0,qt.jsx)(tj,{size:16}),(0,qt.jsxs)("span",{children:["Dari MO: ",e.moDisplay]})]}),(0,qt.jsx)("small",{className:"mo-note",children:"Assignment operator dikelola melalui MO Management"})]})]}),(0,qt.jsxs)("div",{className:"task-card-actions",children:[(0,qt.jsx)("button",{onClick:()=>r(e),className:"btn btn-sm btn-info",title:"Lihat detail",children:"Lihat"}),(0,qt.jsx)("button",{onClick:()=>s(e),className:"btn btn-sm btn-warning",title:"Edit instruksi",children:"Edit"}),(0,qt.jsx)("button",{onClick:()=>i(e),className:"btn btn-sm btn-danger",title:"Hapus instruksi",children:"Hapus"})]})]},e.id)})})]})},Fj=e=>{var t,n,r;let{task:s,onEdit:i,onDelete:a,onBack:o}=e;const l=e=>{const t={easy:{class:"badge-success",text:"Mudah"},medium:{class:"badge-warning",text:"Sedang"},hard:{class:"badge-danger",text:"Sulit"}};return t[e]||t.medium},c=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,qt.jsxs)("div",{className:"task-detail-container",children:[(0,qt.jsxs)("div",{className:"task-detail-header",children:[(0,qt.jsxs)("div",{className:"task-detail-info",children:[(0,qt.jsx)("h2",{children:s.title}),s.moNumber&&(0,qt.jsxs)("div",{className:"mo-display",children:[(0,qt.jsxs)("span",{className:"mo-number",children:["MO: ",s.moDisplay||"".concat(s.moNumber," - ").concat(s.title)]}),(0,qt.jsx)("small",{className:"mo-assignment-note",children:"\ud83d\udcdd Assignment operator dikelola melalui MO Management"})]}),(0,qt.jsxs)("div",{className:"task-detail-badges",children:[(0,qt.jsx)("span",{className:"badge ".concat(l(s.difficulty).class),children:l(s.difficulty).text}),(0,qt.jsx)("span",{className:"badge badge-info",children:s.category}),s.estimatedDuration&&(0,qt.jsxs)("span",{className:"badge badge-secondary",children:[s.estimatedDuration," menit"]})]})]}),(0,qt.jsxs)("div",{className:"task-detail-actions",children:[(0,qt.jsx)("button",{onClick:()=>i(s),className:"btn btn-warning",children:"\u270f\ufe0f Edit"}),(0,qt.jsx)("button",{onClick:()=>a(s),className:"btn btn-danger",children:"\ud83d\uddd1\ufe0f Hapus"})]})]}),(0,qt.jsxs)("div",{className:"task-detail-content",children:[(0,qt.jsxs)("div",{className:"task-detail-section",children:[(0,qt.jsx)("h3",{children:"Deskripsi"}),(0,qt.jsx)("p",{children:s.description})]}),(0,qt.jsxs)("div",{className:"task-detail-section",children:[(0,qt.jsx)("h3",{children:"Informasi"}),(0,qt.jsxs)("div",{className:"info-grid",children:[s.moNumber&&(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("span",{className:"info-label",children:"Nomor MO:"}),(0,qt.jsx)("span",{className:"info-value",children:s.moNumber})]}),s.estimatedDuration&&(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("span",{className:"info-label",children:"Estimasi Durasi:"}),(0,qt.jsxs)("span",{className:"info-value",children:[s.estimatedDuration," menit"]})]}),(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("span",{className:"info-label",children:"Jumlah Langkah:"}),(0,qt.jsx)("span",{className:"info-value",children:(null===(t=s.steps)||void 0===t?void 0:t.length)||0})]}),(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("span",{className:"info-label",children:"Dibuat:"}),(0,qt.jsx)("span",{className:"info-value",children:c(s.createdAt)})]}),(0,qt.jsxs)("div",{className:"info-item",children:[(0,qt.jsx)("span",{className:"info-label",children:"Terakhir Diubah:"}),(0,qt.jsx)("span",{className:"info-value",children:c(s.updatedAt)})]})]})]}),(0,qt.jsxs)("div",{className:"task-detail-section",children:[(0,qt.jsxs)("h3",{children:["Langkah-langkah Kerja (",(null===(n=s.steps)||void 0===n?void 0:n.length)||0,")"]}),(0,qt.jsx)("div",{className:"steps-detail",children:(null===(r=s.steps)||void 0===r?void 0:r.map((e,t)=>{var n,r,s;return(0,qt.jsxs)("div",{className:"step-detail",children:[(0,qt.jsxs)("div",{className:"step-detail-header",children:[(0,qt.jsx)("div",{className:"step-number",children:t+1}),(0,qt.jsx)("div",{className:"step-title",children:e.title}),e.maxTime&&(0,qt.jsxs)("div",{className:"step-time",children:["\u23f1\ufe0f ",e.maxTime,"s"]})]}),(0,qt.jsxs)("div",{className:"step-detail-content",children:[(0,qt.jsx)("p",{className:"step-description",children:e.description}),(null===(n=e.keyPoints)||void 0===n?void 0:n.filter(e=>e.trim()).length)>0&&(0,qt.jsxs)("div",{className:"step-points",children:[(0,qt.jsx)("h5",{children:"\ud83c\udfaf Titik Kunci:"}),(0,qt.jsx)("ul",{children:e.keyPoints.filter(e=>e.trim()).map((e,t)=>(0,qt.jsx)("li",{children:e},t))})]}),(null===(r=e.safetyPoints)||void 0===r?void 0:r.filter(e=>e.trim()).length)>0&&(0,qt.jsxs)("div",{className:"step-safety",children:[(0,qt.jsx)("h5",{children:"\u26a0\ufe0f Keselamatan:"}),(0,qt.jsx)("ul",{children:e.safetyPoints.filter(e=>e.trim()).map((e,t)=>(0,qt.jsx)("li",{children:e},t))})]}),(null===(s=e.imageUrls)||void 0===s?void 0:s.filter(e=>e.trim()).length)>0&&(0,qt.jsxs)("div",{className:"step-images",children:[(0,qt.jsx)("h5",{children:"\ud83d\uddbc\ufe0f Gambar Referensi:"}),(0,qt.jsx)("div",{className:"images-grid",children:e.imageUrls.filter(e=>e.trim()).map((e,t)=>(0,qt.jsx)("img",{src:e,alt:"Gambar ".concat(t+1),className:"step-image",onError:e=>{e.target.style.display="none"}},t))})]})]})]},t)}))||(0,qt.jsx)("p",{children:"Tidak ada langkah kerja."})})]})]})]})},Bj=t=>{let{task:n,onUpdateFiles:r,loading:s}=t;const[i,a]=(0,e.useState)(!1),[o,c]=(0,e.useState)({}),u=e.useRef(null),d=e=>{const t=Array.from(e).filter(e=>e.size>10485760?(alert("File ".concat(e.name," terlalu besar. Maksimal 10MB.")),!1):!!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif","text/plain"].includes(e.type)||(alert("File ".concat(e.name," tidak didukung. Hanya PDF, Word, Excel, gambar, dan text yang diizinkan.")),!1));t.length>0&&h(t)},h=async e=>{const t=e.map(async e=>{const t=Date.now()+"_"+Math.random().toString(36).substr(2,9),n="".concat(t,"_").concat(e.name),r=H_(eS,"task-attachments/".concat(n));c(e=>l(l({},e),{},{[t]:0}));try{var s;const i=await U_(r,e),a=await z_(i.ref),o={id:t,originalName:e.name,fileName:n,url:a,type:e.type,size:e.size,uploadedAt:Rl.now(),uploadedBy:(null===(s=Po().currentUser)||void 0===s?void 0:s.email)||"anonymous"};return c(e=>l(l({},e),{},{[t]:100})),setTimeout(()=>{c(e=>{const n=l({},e);return delete n[t],n})},2e3),o}catch(pN){return console.error("Error uploading file:",pN),c(e=>{const n=l({},e);return delete n[t],n}),alert("Gagal mengupload ".concat(e.name)),null}}),s=(await Promise.all(t)).filter(e=>null!==e);if(s.length>0){const e=n.attachments||[];r([...e,...s])}},f=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?a(!0):"dragleave"===e.type&&a(!1)};return(0,qt.jsxs)("div",{className:"task-file-upload-panel",children:[(0,qt.jsxs)("div",{className:"task-file-upload-header",children:[(0,qt.jsx)("h3",{children:"\ud83d\udcce File Attachments"}),(0,qt.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},className:"btn btn-primary btn-sm",disabled:s,children:[(0,qt.jsx)(gj,{size:16}),"Upload File"]})]}),(0,qt.jsx)("input",{ref:u,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt",onChange:e=>d(e.target.files),style:{display:"none"}}),(0,qt.jsx)("div",{className:"task-file-drop-zone ".concat(i?"task-drag-active":""),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&d(e.dataTransfer.files)},onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},children:(0,qt.jsxs)("div",{className:"task-drop-zone-content",children:[(0,qt.jsx)(gj,{size:32}),(0,qt.jsx)("p",{children:"Drag & drop files here or click to select"}),(0,qt.jsx)("small",{children:"PDF, Word, Excel, Images, Text files (max 10MB each)"})]})}),Object.keys(o).length>0&&(0,qt.jsxs)("div",{className:"task-upload-progress-section",children:[(0,qt.jsx)("h4",{children:"Uploading files..."}),Object.entries(o).map(e=>{let[t,n]=e;return(0,qt.jsxs)("div",{className:"task-upload-progress-item",children:[(0,qt.jsx)("div",{className:"task-progress-bar",children:(0,qt.jsx)("div",{className:"task-progress-fill",style:{width:"".concat(n,"%")}})}),(0,qt.jsxs)("span",{className:"task-progress-text",children:[n,"%"]})]},t)})]}),(0,qt.jsx)("div",{className:"task-file-list",children:n.attachments&&0!==n.attachments.length?(0,qt.jsxs)("div",{className:"task-uploaded-files",children:[(0,qt.jsxs)("h4",{children:["Files (",n.attachments.length,")"]}),n.attachments.map(e=>{var t,s;return(0,qt.jsxs)("div",{className:"task-file-item",children:[(0,qt.jsxs)("div",{className:"task-file-info",children:[(0,qt.jsx)("div",{className:"task-file-icon",children:(s=e.type,s.includes("pdf")?"\ud83d\udcc4":s.includes("word")?"\ud83d\udcdd":s.includes("excel")||s.includes("sheet")?"\ud83d\udcca":s.includes("image")?"\ud83d\uddbc\ufe0f":s.includes("text")?"\ud83d\udcc3":"\ud83d\udcc1")}),(0,qt.jsxs)("div",{className:"task-file-details",children:[(0,qt.jsx)("div",{className:"task-file-name",children:e.originalName}),(0,qt.jsxs)("div",{className:"task-file-meta",children:[(0,qt.jsx)("span",{className:"task-file-size",children:f(e.size)}),(0,qt.jsx)("span",{className:"task-file-date",children:null!==(t=e.uploadedAt)&&void 0!==t&&t.toDate?e.uploadedAt.toDate().toLocaleDateString("id-ID"):"Unknown date"}),(0,qt.jsxs)("span",{className:"task-file-uploader",children:["by ",e.uploadedBy]})]})]})]}),(0,qt.jsxs)("div",{className:"task-file-actions",children:[(0,qt.jsx)("button",{type:"button",onClick:()=>window.open(e.url,"_blank"),className:"task-file-action-btn task-btn-view",title:"View file",children:(0,qt.jsx)(vj,{size:16})}),(0,qt.jsx)("button",{type:"button",onClick:()=>{const t=document.createElement("a");t.href=e.url,t.download=e.originalName,document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"task-file-action-btn task-btn-download",title:"Download file",children:(0,qt.jsx)(yj,{size:16})}),(0,qt.jsx)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to delete ".concat(e.originalName,"?"))&&(async e=>{try{const t=H_(eS,"task-attachments/".concat(e.fileName));await V_(t);const s=(n.attachments||[]).filter(t=>t.id!==e.id);r(s),console.log("File deleted:",e.originalName)}catch(pN){console.error("Error deleting file:",pN),alert("Gagal menghapus file")}})(e)},className:"task-file-action-btn task-btn-delete",title:"Delete file",children:(0,qt.jsx)(wj,{size:16})})]})]},e.id)})]}):(0,qt.jsxs)("div",{className:"task-no-files",children:[(0,qt.jsx)(bj,{size:24}),(0,qt.jsx)("p",{children:"Belum ada file yang diupload"}),(0,qt.jsx)("small",{children:"File akan membantu memberikan informasi tambahan untuk task ini"})]})})]})},Uj=l(l({},kj),{},{attachments:[]}),zj=()=>{const t=he(),[n,r]=(ce(),(0,e.useState)("list")),[s,i]=(0,e.useState)([]),[a,o]=(0,e.useState)(Uj),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)(!1),[b,v]=(0,e.useState)(!1),[y,w]=(0,e.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDestructive:!1}),x=(0,e.useCallback)(async()=>{try{const e=Po();await pa(e),t("/"),console.log("\u2705 User logged out successfully from AddTaskPage")}catch(pN){console.error("\u274c Error during logout from AddTaskPage:",pN),p(t=>[...t,"Gagal logout: ".concat(pN.message)])}},[t]),k=(0,e.useCallback)(async()=>{h(!0);try{const e=Nw(Ly(Z_,"tasks"),Aw("createdAt","desc")),t=(await qw(e)).docs.map(e=>l({id:e.id},e.data()));i(t)}catch(pN){console.error("\u274c Error loading tasks:",pN),p(["Gagal memuat data: ".concat(pN.message)])}finally{h(!1)}},[]);(0,e.useEffect)(()=>{console.log("\ud83d\ude80 Component mounted, loading data..."),k()},[k]);const _=()=>{v(!b)},S=(0,e.useCallback)((e,t)=>{o(n=>l(l({},n),{},{[e]:t}))},[]),j=(0,e.useCallback)(e=>{o(t=>l(l({},t),{},{attachments:e}))},[]),N=(0,e.useCallback)((e,t)=>{o(n=>{const r=[...n.steps];return r[e]=t,l(l({},n),{},{steps:r})})},[]),T=(0,e.useCallback)(()=>{o(e=>l(l({},e),{},{steps:[...e.steps,l({},xj)]}))},[]),E=(0,e.useCallback)(e=>{a.steps.length>1&&o(t=>l(l({},t),{},{steps:t.steps.filter((t,n)=>n!==e)}))},[a.steps.length]),C=(0,e.useCallback)(()=>{const e=parseInt(a.estimatedDuration)||0;if(e>0&&a.steps.length>0){const t=((e,t)=>{if(e<=0||t<=0)return[];const n=Math.floor(e/t),r=e%t,s=[];for(let i=0;i<t;i++){const e=i<r?1:0;s.push(Sj(n+e))}return s})(e,a.steps.length);o(e=>l(l({},e),{},{steps:e.steps.map((e,n)=>{var r;return l(l({},e),{},{maxTime:(null===(r=t[n])||void 0===r?void 0:r.toString())||""})})}))}},[a.estimatedDuration,a.steps.length]),I=(0,e.useCallback)(()=>{o(e=>l(l({},e),{},{steps:e.steps.map(e=>l(l({},e),{},{maxTime:""}))}))},[]),A=(0,e.useCallback)(()=>{o(Uj),u(null),r("form"),g(!1),p([])},[]),M=(0,e.useCallback)(e=>{u(e),r("view")},[]),O=(0,e.useCallback)(e=>{o(l(l({},e),{},{attachments:e.attachments||[]})),u(e),r("edit"),g(!1),p([])},[]),R=(0,e.useCallback)(e=>{w({isOpen:!0,title:"Konfirmasi Hapus",message:'Apakah Anda yakin ingin menghapus instruksi kerja "'.concat(e.title,'"? Tindakan ini tidak dapat dibatalkan dan akan menghapus semua file terkait.'),onConfirm:async()=>{h(!0);try{if(e.attachments&&e.attachments.length>0)for(const n of e.attachments)try{const e=H_(eS,"task-attachments/".concat(n.fileName));await V_(e)}catch(t){console.error("Error deleting file:",n.fileName,t)}await $w(Fy(Z_,"tasks",e.id)),await k(),w(l(l({},y),{},{isOpen:!1})),p([])}catch(pN){console.error("\u274c Error deleting task:",pN),p(["Gagal menghapus: ".concat(pN.message)])}finally{h(!1)}},isDestructive:!0})},[y,k]),D=(0,e.useCallback)(()=>{"form"!==n&&"edit"!==n&&"view"!==n||(r("list"),o(Uj),u(null),g(!1),p([]))},[n]),P=(0,e.useCallback)(async()=>{p([]),h(!0);try{const e=Ej(a);if(e.length>0)return p(e),void h(!1);const t=Po().currentUser,n={title:a.title.trim(),description:a.description.trim(),category:a.category||"General",difficulty:a.difficulty,estimatedDuration:a.estimatedDuration?parseInt(a.estimatedDuration):null,steps:a.steps.map(e=>({title:e.title.trim(),description:e.description.trim(),keyPoints:e.keyPoints.filter(e=>""!==e.trim()),safetyPoints:e.safetyPoints.filter(e=>""!==e.trim()),maxTime:e.maxTime?parseInt(e.maxTime):0,imageUrls:e.imageUrls.filter(e=>""!==e.trim())})),attachments:a.attachments||[],updatedAt:Rl.now(),isActive:!0};if(console.log("\ud83d\udcbe Saving task data:",n),c)await Gw(Fy(Z_,"tasks",c.id),n),console.log("\u2705 Task updated successfully");else{n.createdBy=(null===t||void 0===t?void 0:t.uid)||"anonymous",n.createdByEmail=(null===t||void 0===t?void 0:t.email)||"anonymous",n.createdAt=Rl.now(),n.version=1;const e=await Xw(Ly(Z_,"tasks"),n);console.log("\u2705 Task created successfully with ID:",e.id)}await k(),r("list"),o(Uj),u(null),g(!1)}catch(pN){console.error("\u274c Error saving task:",pN),p(["Gagal menyimpan: ".concat(pN.message)])}finally{h(!1)}},[a,c,k]),L=(0,e.useCallback)(()=>{if(!m){const e=Ej(a);if(e.length>0)return void p(e);p([])}g(e=>!e)},[a,m]),F=(0,e.useCallback)(e=>{e.preventDefault(),P()},[P]),B=(0,e.useCallback)(()=>{w(e=>l(l({},e),{},{isOpen:!1}))},[]),U=(0,e.useCallback)(()=>{const e=parseInt(a.estimatedDuration)||0;if(e<=0||0===a.steps.length)return a.steps.map(()=>0);const t=Sj(e/a.steps.length);return a.steps.map(e=>((e,t)=>{var n,r,s,i;let a=1;const o=(null===(n=e.keyPoints)||void 0===n?void 0:n.filter(e=>e.trim()).length)||0;o>3&&(a+=.3);const l=(null===(r=e.safetyPoints)||void 0===r?void 0:r.filter(e=>e.trim()).length)||0;return l>2&&(a+=.2),((null===(s=e.imageUrls)||void 0===s?void 0:s.filter(e=>e.trim()).length)||0)>2&&(a+=.2),((null===(i=e.description)||void 0===i?void 0:i.length)||0)>200&&(a+=.1),Math.round(t*a)})(e,t))},[a.estimatedDuration,a.steps]);return(0,qt.jsxs)("div",{className:"add-task-page",children:[d&&(0,qt.jsx)(Dj,{}),(0,qt.jsx)(Oj,{currentView:n,onBackClick:D,sidebarOpen:b,toggleSidebar:_,onLogout:x}),(0,qt.jsx)(Rj,{sidebarOpen:b,toggleSidebar:_,onLogout:x}),(0,qt.jsx)("main",{className:"add-task-main ".concat(b?"add-task-main-shifted":""),children:(()=>{if("list"===n)return(0,qt.jsx)(Lj,{tasks:s,onAddNew:A,onView:M,onEdit:O,onDelete:R,loading:d});if("view"===n&&c)return(0,qt.jsx)(Fj,{task:c,onEdit:O,onDelete:R,onBack:D});if("form"===n||"edit"===n){U();return(0,qt.jsxs)("div",{className:"add-task-container",children:[f.length>0&&(0,qt.jsxs)("div",{className:"error-messages",children:[(0,qt.jsxs)("div",{className:"error-header",children:[(0,qt.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,qt.jsx)("span",{children:"Terdapat kesalahan yang perlu diperbaiki:"})]}),(0,qt.jsx)("ul",{className:"error-list",children:f.map((e,t)=>(0,qt.jsx)("li",{children:e},t))})]}),m?(0,qt.jsxs)("div",{className:"task-preview",children:[(0,qt.jsxs)("div",{className:"preview-header",children:[(0,qt.jsx)("h2",{children:"\ud83d\udc41\ufe0f Preview Instruksi Kerja"}),(0,qt.jsxs)("div",{className:"preview-actions",children:[(0,qt.jsx)("button",{onClick:L,className:"btn btn-secondary",children:"\u270f\ufe0f Edit"}),(0,qt.jsx)("button",{onClick:P,className:"btn btn-primary",disabled:d,children:d?"\ud83d\udcbe Menyimpan...":"\ud83d\udcbe Simpan"})]})]}),(0,qt.jsx)(Fj,{task:a,onEdit:()=>g(!1),onDelete:()=>{},onBack:()=>g(!1)})]}):(0,qt.jsxs)("form",{onSubmit:F,className:"task-form",children:[(0,qt.jsxs)("div",{className:"form-section",children:[(0,qt.jsx)("h2",{children:"\ud83d\udccb Informasi Instruksi Kerja"}),(0,qt.jsx)("div",{className:"form-row",children:(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsxs)("label",{htmlFor:"task-title",children:["Judul Instruksi Kerja ",(0,qt.jsx)("span",{className:"required",children:"*"})]}),(0,qt.jsx)("input",{id:"task-title",type:"text",value:a.title,onChange:e=>S("title",e.target.value),placeholder:"Masukkan judul instruksi kerja...",className:"form-input",required:!0})]})}),(0,qt.jsx)("div",{className:"form-row",children:(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsxs)("label",{htmlFor:"task-description",children:["Deskripsi Detail Instruksi Kerja ",(0,qt.jsx)("span",{className:"required",children:"*"})]}),(0,qt.jsx)("textarea",{id:"task-description",value:a.description,onChange:e=>S("description",e.target.value),placeholder:"Jelaskan detail instruksi kerja yang akan dibuat...",className:"form-textarea",rows:"4",required:!0}),(0,qt.jsx)("small",{className:"form-hint",children:"Jelaskan secara detail apa yang harus dilakukan dalam instruksi kerja ini"})]})}),(0,qt.jsx)("div",{className:"form-row",children:(0,qt.jsxs)("div",{className:"form-group",children:[(0,qt.jsx)("label",{htmlFor:"task-duration",children:"Estimasi Durasi (menit)"}),(0,qt.jsx)("input",{id:"task-duration",type:"number",value:a.estimatedDuration,onChange:e=>S("estimatedDuration",e.target.value),placeholder:"30",className:"form-input",min:"0"})]})})]}),(0,qt.jsx)("div",{className:"form-section",children:(0,qt.jsx)(Bj,{task:a,onUpdateFiles:j,loading:d})}),(0,qt.jsx)(Aj,{task:a,onDistributeTime:C,onClearAllTimes:I}),(0,qt.jsxs)("div",{className:"form-section",children:[(0,qt.jsxs)("div",{className:"section-header",children:[(0,qt.jsxs)("h2",{children:["\ud83d\udcdd Langkah-langkah Kerja (",a.steps.length,")"]}),(0,qt.jsx)("button",{type:"button",onClick:T,className:"btn btn-secondary",children:"\u2795 Tambah Langkah"})]}),(0,qt.jsx)("div",{className:"steps-container",children:a.steps.map((e,t)=>(0,qt.jsx)(Mj,{step:e,stepIndex:t,onUpdateStep:N,onRemoveStep:E,canRemove:a.steps.length>1,totalEstimatedDuration:parseInt(a.estimatedDuration)||0,totalSteps:a.steps.length,suggestedTime:U()[t]||0},t))})]}),(0,qt.jsxs)("div",{className:"form-actions",children:[(0,qt.jsx)("button",{type:"button",onClick:D,className:"btn btn-secondary",children:"\u274c Batal"}),(0,qt.jsx)("button",{type:"button",onClick:L,className:"btn btn-info",children:"\ud83d\udc41\ufe0f Preview"}),(0,qt.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:d,children:d?"\ud83d\udcbe Menyimpan...":"\ud83d\udcbe Simpan"})]})]})]})}return null})()}),(0,qt.jsx)(Pj,{isOpen:y.isOpen,title:y.title,message:y.message,onConfirm:y.onConfirm,onCancel:B,isDestructive:y.isDestructive})]})},Vj=Et("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Hj=Et("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Wj=Et("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),qj=Et("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Kj=function(){const[t,n]=(0,e.useState)([]),[r,s]=(0,e.useState)([]),[i,a]=(0,e.useState)("pending"),[o,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(null),[p,m]=(0,e.useState)(!1),[g,b]=(0,e.useState)(new Set),[v,y]=(0,e.useState)(!1),[w,x]=(0,e.useState)([]),[k,_]=(0,e.useState)(!1),[S,j]=(0,e.useState)({pending:0,approved:0,rejected:0,duplicates:0}),N=he(),T=ce(),E=Po(),C="admin@gmail.com";(0,e.useEffect)(()=>{const e=E.currentUser;e&&e.email===C||N("/login")},[E.currentUser,N]),(0,e.useEffect)(()=>{var e;null!==(e=T.state)&&void 0!==e&&e.message&&(f(T.state.message),window.history.replaceState({},document.title),setTimeout(()=>f(null),8e3))},[T.state]),(0,e.useEffect)(()=>{const e=e=>{v&&!e.target.closest(".approval-profile-container")&&y(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[v]);const I=e=>{const t={},n=[];return e.forEach(e=>{if(e.email!==C){const n=e.email.toLowerCase();t[n]||(t[n]=[]),t[n].push(e)}}),Object.keys(t).forEach(e=>{t[e].length>1&&(t[e].sort((e,t)=>{var n,r;const s=(null===(n=e.createdAt)||void 0===n?void 0:n.toDate())||new Date(0);return((null===(r=t.createdAt)||void 0===r?void 0:r.toDate())||new Date(0))-s}),n.push({email:e,users:t[e],count:t[e].length}))}),x(n),n.length};(0,e.useEffect)(()=>{if(!E.currentUser||E.currentUser.email!==C)return;c(!0),d(null);const e=Yw(Nw(Ly(Z_,"users"),Aw("createdAt","desc")),e=>{try{const t=[],r={pending:0,approved:0,rejected:0,duplicates:0};e.forEach(e=>{const n=e.data();if(n.email!==C){const s=l({id:e.id},n);t.push(s),r.hasOwnProperty(n.status)&&r[n.status]++}});const s=I(t);r.duplicates=s,n(t),j(r),c(!1)}catch(t){console.error("Error processing users:",t),d("Failed to load users"),c(!1)}},e=>{console.error("Error listening to users:",e),d("Failed to connect to database"),c(!1)});return()=>e()},[E.currentUser]),(0,e.useEffect)(()=>{if("all"===i)s(t);else if("duplicates"===i){const e=[];w.forEach(t=>{e.push(...t.users)}),s(e)}else s(t.filter(e=>e.status===i))},[t,i,w]);const A=()=>{N("/admin")},M=async(e,t,n)=>{if(!g.has(e)){b(t=>new Set([...t,e])),d(null);try{const n=Fy(Z_,"users",e);await Gw(n,{status:"approved",approvedAt:new Date,approvedBy:E.currentUser.uid}),await Kw(Fy(Ly(Z_,"adminNotifications")),{userId:e,type:"approval",title:"Account Approved",message:"Your account has been approved! You can now log in to the system.",read:!1,createdAt:nx(),actionUrl:"/login"}),f("User ".concat(t," has been approved and notified")),setTimeout(()=>f(null),5e3)}catch(r){console.error("Approval error:",r),d("Failed to approve user: ".concat(r.message)),setTimeout(()=>d(null),5e3)}finally{b(t=>{const n=new Set(t);return n.delete(e),n})}}},O=async(e,t)=>{if(!g.has(e)&&window.confirm("Are you sure you want to reject user ".concat(t,"? This action can be undone by approving them later."))){b(t=>new Set([...t,e])),d(null);try{const n=Fy(Z_,"users",e);await Gw(n,{status:"rejected",rejectedAt:new Date,rejectedBy:E.currentUser.uid}),f("User ".concat(t," has been rejected")),setTimeout(()=>f(null),5e3)}catch(n){console.error("Rejection error:",n),d("Failed to reject user: ".concat(n.message)),setTimeout(()=>d(null),5e3)}finally{b(t=>{const n=new Set(t);return n.delete(e),n})}}},R=()=>{m(!p)},D=e=>{if(!e)return"Unknown";try{let t;return t=null!==e&&void 0!==e&&e.toDate?e.toDate():e instanceof Date?e:new Date(e),t.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"Invalid date"}},P=e=>{switch(e){case"approved":return(0,qt.jsx)("span",{className:"status-badge approved",children:"Approved"});case"rejected":return(0,qt.jsx)("span",{className:"status-badge rejected",children:"Rejected"});default:return(0,qt.jsx)("span",{className:"status-badge pending",children:"Pending"})}};return o?(0,qt.jsxs)("div",{className:"admin-container",children:[(0,qt.jsxs)("div",{className:"admin-header",children:[(0,qt.jsx)("div",{className:"admin-header-left",children:(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"admin-logo",onClick:A})}),(0,qt.jsx)("div",{className:"admin-header-center",children:(0,qt.jsx)("h1",{className:"admin-title",children:"Dashboard User Management"})})]}),(0,qt.jsxs)("div",{className:"admin-approval-loading-container",children:[(0,qt.jsx)("div",{className:"admin-approval-spinner"}),(0,qt.jsx)("p",{className:"admin-approval-loading-text",children:"Loading users..."})]})]}):(0,qt.jsxs)("div",{className:"admin-container",children:[(0,qt.jsxs)("div",{className:"admin-header",children:[(0,qt.jsxs)("div",{className:"admin-header-left",children:[(0,qt.jsx)("button",{className:"admin-sidebar-toggle",onClick:R,children:(0,qt.jsx)(It,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"admin-logo",onClick:A})]}),(0,qt.jsx)("div",{className:"admin-header-center",children:(0,qt.jsx)("h1",{className:"admin-title",children:"Dashboard User Management"})}),(0,qt.jsx)("div",{className:"admin-header-right",children:(0,qt.jsxs)("div",{className:"approval-profile-container",children:[(0,qt.jsxs)("button",{className:"approval-profile-btn",onClick:()=>y(!v),children:[(0,qt.jsx)("div",{className:"approval-profile-avatar",children:(0,qt.jsx)("span",{className:"approval-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{className:"approval-profile-info",children:[(0,qt.jsx)("div",{className:"approval-profile-name",children:"Admin"}),(0,qt.jsx)("div",{className:"approval-profile-id",children:"Administrator"})]}),(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"approval-dropdown-arrow ".concat(v?"rotated":""),children:(0,qt.jsx)("polyline",{points:"6,9 12,15 18,9"})})]}),v&&(0,qt.jsxs)("div",{className:"approval-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"approval-dropdown-header",children:[(0,qt.jsx)("div",{className:"approval-profile-avatar",children:(0,qt.jsx)("span",{className:"approval-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"approval-dropdown-name",children:"Admin"}),(0,qt.jsx)("div",{className:"approval-dropdown-role",children:"Administrator"})]})]}),(0,qt.jsx)("hr",{className:"approval-dropdown-divider"}),(0,qt.jsxs)("button",{className:"approval-dropdown-item approval-dropdown-logout",onClick:()=>{y(!1),(async()=>{try{await pa(E),N("/login")}catch(e){console.error("Logout error:",e),N("/login")}})()},children:[(0,qt.jsx)(fS,{size:16}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]}),(0,qt.jsxs)("div",{className:"admin-sidebar ".concat(p?"admin-sidebar-open":""),children:[(0,qt.jsxs)("div",{className:"admin-sidebar-header",children:[(0,qt.jsx)("h3",{children:"Menu"}),(0,qt.jsx)("button",{className:"admin-sidebar-close",onClick:R,children:(0,qt.jsx)(Ct,{size:20})})]}),(0,qt.jsxs)("nav",{className:"admin-sidebar-nav",children:[(0,qt.jsxs)("button",{onClick:()=>{N("/admin"),m(!1)},className:"admin-sidebar-item",children:[(0,qt.jsx)(Cj,{size:20}),(0,qt.jsx)("span",{children:"Work Sessions"})]}),(0,qt.jsxs)("button",{onClick:()=>{m(!1)},className:"admin-sidebar-item active",children:[(0,qt.jsx)(ej,{size:20}),(0,qt.jsx)("span",{children:"User Management"})]}),(0,qt.jsxs)("button",{onClick:()=>{N("/add-mo")},className:"add-task-sidebar-item",children:[(0,qt.jsx)(tj,{size:20}),(0,qt.jsx)("span",{children:"MO Management"})]}),(0,qt.jsxs)("button",{onClick:()=>{N("/addtask"),m(!1)},className:"admin-sidebar-item",children:[(0,qt.jsx)(Ij,{size:20}),(0,qt.jsx)("span",{children:"Add Task"})]})]})]}),p&&(0,qt.jsx)("div",{className:"admin-sidebar-overlay",onClick:R}),(0,qt.jsxs)("div",{className:"admin-main-content ".concat(p?"admin-main-content-shifted":""),children:[w.length>0&&(0,qt.jsxs)("div",{className:"duplicate-alert-card",children:[(0,qt.jsxs)("div",{className:"duplicate-alert-header",children:[(0,qt.jsx)("div",{className:"duplicate-alert-icon",children:(0,qt.jsx)(Vj,{size:20})}),(0,qt.jsx)("h3",{className:"duplicate-alert-title",children:"Duplicate Users Detected"}),(0,qt.jsx)("button",{onClick:async()=>{if(0===w.length)return d("No duplicates found to clean up."),void setTimeout(()=>d(null),5e3);const e=w.reduce((e,t)=>e+(t.count-1),0);if(window.confirm("Found ".concat(w.length," groups of duplicate emails with ").concat(e," duplicate entries.\n\nThis will keep the newest registration for each email and remove the older duplicates.\n\nAre you sure you want to proceed?"))){_(!0),d(null);try{const e=[];let t=0;w.forEach(n=>{for(let r=1;r<n.users.length;r++)e.push($w(Fy(Z_,"users",n.users[r].id))),t++}),await Promise.all(e),f("Successfully removed ".concat(t," duplicate user entries from ").concat(w.length," email groups.")),setTimeout(()=>f(null),8e3),x([])}catch(t){console.error("Cleanup error:",t),d("Failed to cleanup duplicates: ".concat(t.message)),setTimeout(()=>d(null),8e3)}finally{_(!1)}}},disabled:k,className:"cleanup-btn",children:k?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("div",{className:"loading-spinner"}),"Cleaning..."]}):(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)(gS,{size:16}),"Auto Cleanup"]})})]}),(0,qt.jsxs)("div",{className:"duplicate-alert-content",children:[(0,qt.jsxs)("p",{children:["Found ",(0,qt.jsx)("strong",{children:w.length})," groups with duplicate emails. Total ",(0,qt.jsx)("strong",{children:w.reduce((e,t)=>e+(t.count-1),0)})," duplicate entries."]}),(0,qt.jsxs)("div",{className:"duplicate-groups",children:[w.slice(0,3).map((e,t)=>(0,qt.jsxs)("div",{className:"duplicate-group",children:[(0,qt.jsx)("strong",{children:e.email})," (",e.count," entries)"]},t)),w.length>3&&(0,qt.jsxs)("div",{className:"duplicate-more",children:["+",w.length-3," more groups..."]})]})]})]}),(0,qt.jsxs)("div",{className:"quick-action-card",children:[(0,qt.jsxs)("div",{className:"quick-action-header",children:[(0,qt.jsx)("div",{className:"quick-action-icon",children:(0,qt.jsx)(Rt,{size:20})}),(0,qt.jsx)("h3",{className:"quick-action-title",children:"Quick Actions"})]}),(0,qt.jsxs)("div",{className:"quick-action-content",children:[(0,qt.jsxs)("button",{onClick:()=>N("/register"),className:"quick-action-btn register-btn",children:[(0,qt.jsx)(Ij,{size:16}),"Register New Employee"]}),(0,qt.jsx)("p",{className:"quick-action-description",children:"Register a new employee account that will appear in the pending approval list"})]})]}),(0,qt.jsxs)("div",{className:"stats-grid",children:[(0,qt.jsx)("div",{className:"stat-card pending",children:(0,qt.jsxs)("div",{className:"stat-card-header",children:[(0,qt.jsxs)("div",{className:"stat-card-content",children:[(0,qt.jsx)("p",{style:{color:"#2563eb"},children:"Pending"}),(0,qt.jsx)("p",{style:{color:"#1d4ed8"},children:S.pending})]}),(0,qt.jsx)(Ot,{className:"h-8 w-8",style:{color:"#3b82f6"}})]})}),(0,qt.jsx)("div",{className:"stat-card approved",children:(0,qt.jsxs)("div",{className:"stat-card-header",children:[(0,qt.jsxs)("div",{className:"stat-card-content",children:[(0,qt.jsx)("p",{style:{color:"#059669"},children:"Approved"}),(0,qt.jsx)("p",{style:{color:"#047857"},children:S.approved})]}),(0,qt.jsx)(hj,{className:"h-8 w-8",style:{color:"#10b981"}})]})}),(0,qt.jsx)("div",{className:"stat-card rejected",children:(0,qt.jsxs)("div",{className:"stat-card-header",children:[(0,qt.jsxs)("div",{className:"stat-card-content",children:[(0,qt.jsx)("p",{style:{color:"#dc2626"},children:"Rejected"}),(0,qt.jsx)("p",{style:{color:"#b91c1c"},children:S.rejected})]}),(0,qt.jsx)(Hj,{className:"h-8 w-8",style:{color:"#ef4444"}})]})}),(0,qt.jsx)("div",{className:"stat-card duplicates",children:(0,qt.jsxs)("div",{className:"stat-card-header",children:[(0,qt.jsxs)("div",{className:"stat-card-content",children:[(0,qt.jsx)("p",{style:{color:"#d97706"},children:"Duplicates"}),(0,qt.jsx)("p",{style:{color:"#b45309"},children:w.length})]}),(0,qt.jsx)(Vj,{className:"h-8 w-8",style:{color:"#f59e0b"}})]})})]}),(0,qt.jsxs)("div",{className:"admin-info-card",children:[(0,qt.jsxs)("div",{className:"admin-info-header",children:[(0,qt.jsx)("div",{className:"admin-info-icon",children:(0,qt.jsx)(ej,{size:20})}),(0,qt.jsx)("h3",{className:"admin-info-title",children:"Admin Account"})]}),(0,qt.jsxs)("div",{className:"admin-info-content",children:[(0,qt.jsxs)("div",{className:"credential-item",children:[(0,qt.jsx)("strong",{children:"Email:"}),(0,qt.jsx)("span",{className:"credential-value",children:C})]}),(0,qt.jsxs)("div",{className:"credential-item",children:[(0,qt.jsx)("strong",{children:"Password:"}),(0,qt.jsx)("span",{className:"credential-value",children:"admin123"})]}),(0,qt.jsxs)("div",{className:"info-note",children:[(0,qt.jsx)(ej,{size:16}),"This account has automatic approval and does not appear in the user list."]})]})]}),(0,qt.jsxs)("div",{className:"tab-navigation",children:[(0,qt.jsxs)("button",{className:"tab-button ".concat("pending"===i?"active":""),onClick:()=>a("pending"),children:[(0,qt.jsx)(Ot,{size:16}),"Pending (",S.pending,")"]}),(0,qt.jsxs)("button",{className:"tab-button ".concat("approved"===i?"active":""),onClick:()=>a("approved"),children:[(0,qt.jsx)(hj,{size:16}),"Approved (",S.approved,")"]}),(0,qt.jsxs)("button",{className:"tab-button ".concat("rejected"===i?"active":""),onClick:()=>a("rejected"),children:[(0,qt.jsx)(Hj,{size:16}),"Rejected (",S.rejected,")"]}),w.length>0&&(0,qt.jsxs)("button",{className:"tab-button ".concat("duplicates"===i?"active":""," duplicates-tab"),onClick:()=>a("duplicates"),children:[(0,qt.jsx)(Vj,{size:16}),"Duplicates (",w.reduce((e,t)=>e+t.count,0),")"]}),(0,qt.jsxs)("button",{className:"tab-button ".concat("all"===i?"active":""),onClick:()=>a("all"),children:[(0,qt.jsx)(Wj,{size:16}),"All (",t.length,")"]})]}),u&&(0,qt.jsxs)("div",{className:"alert error",children:[(0,qt.jsx)(Ct,{size:20}),u]}),h&&(0,qt.jsxs)("div",{className:"alert success",children:[(0,qt.jsx)(ej,{size:20}),h]}),(0,qt.jsxs)("div",{className:"content-card",children:[(0,qt.jsxs)("div",{className:"content-header",children:[(0,qt.jsx)("h2",{className:"content-title",children:(e=>{switch(e){case"pending":return"Pending User Registrations";case"approved":return"Approved Users";case"rejected":return"Rejected Users";case"duplicates":return"Duplicate Users";case"all":return"All Users";default:return"Users"}})(i)}),(0,qt.jsxs)("div",{className:"header-actions",children:[(0,qt.jsxs)("button",{onClick:async()=>{c(!0),d(null);try{const e=Nw(Ly(Z_,"users"),Aw("createdAt","desc")),t=await qw(e),r=[],s={pending:0,approved:0,rejected:0,duplicates:0};t.forEach(e=>{const t=e.data();if(t.email!==C){const n=l({id:e.id},t);r.push(n),s.hasOwnProperty(t.status)&&s[t.status]++}});const i=I(r);s.duplicates=i,n(r),j(s),f("Data refreshed successfully"),setTimeout(()=>f(null),3e3)}catch(e){console.error("Refresh error:",e),d("Failed to refresh data"),setTimeout(()=>d(null),5e3)}finally{c(!1)}},className:"admin-refresh-button",disabled:o,title:"Refresh data",children:[(0,qt.jsx)(qj,{size:16,className:o?"animate-spin":""}),"Refresh"]}),(0,qt.jsxs)("div",{className:"counter-badge",children:[(0,qt.jsx)("span",{className:"counter-number",children:r.length}),(0,qt.jsx)("span",{className:"counter-label",children:"all"===i?"users":i})]})]})]}),0===r.length?(0,qt.jsxs)("div",{className:"empty-state",children:[(0,qt.jsx)("div",{className:"empty-state-icon",children:"pending"===i?(0,qt.jsx)(Ot,{size:64}):"approved"===i?(0,qt.jsx)(ej,{size:64}):"rejected"===i?(0,qt.jsx)(Hj,{size:64}):"duplicates"===i?(0,qt.jsx)(Vj,{size:64}):(0,qt.jsx)(Rt,{size:64})}),(0,qt.jsx)("h3",{className:"empty-state-title",children:"pending"===i?"No Pending Users":"approved"===i?"No Approved Users":"rejected"===i?"No Rejected Users":"duplicates"===i?"No Duplicate Users":"No Users Found"}),(0,qt.jsx)("p",{className:"empty-state-description",children:"pending"===i?"No pending user approvals at the moment. New registrations will appear here automatically.":"approved"===i?"No users have been approved yet.":"rejected"===i?"No users have been rejected yet.":"duplicates"===i?"Great! No duplicate users found in the system.":"No users found in the database."})]}):(0,qt.jsx)("div",{className:"table-container",children:(0,qt.jsxs)("table",{className:"user-table",children:[(0,qt.jsx)("thead",{className:"table-head",children:(0,qt.jsxs)("tr",{children:[(0,qt.jsx)("th",{className:"table-header",children:(0,qt.jsx)("div",{className:"table-header-content",children:"Email"})}),(0,qt.jsx)("th",{className:"table-header",children:(0,qt.jsxs)("div",{className:"table-header-content",children:[(0,qt.jsx)(Rt,{size:16}),"Username"]})}),(0,qt.jsx)("th",{className:"table-header",children:(0,qt.jsxs)("div",{className:"table-header-content",children:[(0,qt.jsx)(Ot,{size:16}),"Registered"]})}),(0,qt.jsx)("th",{className:"table-header",children:(0,qt.jsx)("div",{className:"table-header-content",children:"Status"})}),(0,qt.jsx)("th",{className:"table-header",children:"Actions"})]})}),(0,qt.jsx)("tbody",{children:r.map(e=>{const t=(n=e.id,w.some(e=>e.users.some(e=>e.id===n)));var n;const r=t?(e=>{const t=w.find(t=>t.email===e.toLowerCase());return t?{count:t.count,position:t.users.findIndex(t=>t.email.toLowerCase()===e.toLowerCase())+1}:null})(e.email):null;return(0,qt.jsxs)("tr",{className:"table-row ".concat(t?"duplicate-row":""),children:[(0,qt.jsx)("td",{className:"table-cell",children:(0,qt.jsxs)("div",{className:"user-info",children:[(0,qt.jsxs)("div",{className:"user-avatar ".concat(t?"duplicate-avatar":""),children:[t&&(0,qt.jsx)(Vj,{size:12,className:"duplicate-icon"}),e.email.charAt(0).toUpperCase()]}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("span",{className:"user-email",children:e.email}),r&&(0,qt.jsxs)("div",{className:"duplicate-badge",children:["Duplicate #",r.position," of ",r.count]})]})]})}),(0,qt.jsx)("td",{className:"table-cell",children:(0,qt.jsx)("div",{className:"username",children:e.username||e.displayName||(0,qt.jsx)("span",{className:"empty-value",children:"Not provided"})})}),(0,qt.jsx)("td",{className:"table-cell",children:(0,qt.jsx)("div",{className:"date-text",children:D(e.createdAt)})}),(0,qt.jsx)("td",{className:"table-cell",children:P(e.status)}),(0,qt.jsx)("td",{className:"table-cell",children:(0,qt.jsxs)("div",{className:"actions",children:["pending"===e.status&&(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("button",{onClick:()=>M(e.id,e.email,e.username),disabled:g.has(e.id),className:"btn btn-approve",title:"Approve this user",children:[g.has(e.id)?(0,qt.jsx)("div",{className:"loading-spinner"}):(0,qt.jsx)(ej,{size:16}),"Approve"]}),(0,qt.jsxs)("button",{onClick:()=>O(e.id,e.email),disabled:g.has(e.id),className:"btn btn-reject",title:"Reject this user",children:[g.has(e.id)?(0,qt.jsx)("div",{className:"loading-spinner"}):(0,qt.jsx)(Ct,{size:16}),"Reject"]})]}),"rejected"===e.status&&(0,qt.jsxs)("button",{onClick:()=>M(e.id,e.email,e.username),disabled:g.has(e.id),className:"btn btn-approve",title:"Approve this user",children:[g.has(e.id)?(0,qt.jsx)("div",{className:"loading-spinner"}):(0,qt.jsx)(ej,{size:16}),"Approve"]}),"approved"===e.status&&(0,qt.jsxs)("button",{onClick:()=>O(e.id,e.email),disabled:g.has(e.id),className:"btn btn-reject",title:"Reject this user",children:[g.has(e.id)?(0,qt.jsx)("div",{className:"loading-spinner"}):(0,qt.jsx)(Ct,{size:16}),"Reject"]}),(0,qt.jsxs)("button",{onClick:()=>(async(e,t)=>{if(!g.has(e)&&window.confirm("Are you sure you want to permanently delete user ".concat(t,"? This action cannot be undone."))){b(t=>new Set([...t,e])),d(null);try{await $w(Fy(Z_,"users",e)),f("User ".concat(t," has been deleted permanently")),setTimeout(()=>f(null),5e3)}catch(n){console.error("Delete error:",n),d("Failed to delete user: ".concat(n.message)),setTimeout(()=>d(null),5e3)}finally{b(t=>{const n=new Set(t);return n.delete(e),n})}}})(e.id,e.email),disabled:g.has(e.id),className:"btn btn-delete ".concat(t?"duplicate-delete":""),title:t?"Delete duplicate user":"Delete user permanently",children:[g.has(e.id)?(0,qt.jsx)("div",{className:"loading-spinner"}):(0,qt.jsx)(wj,{size:16}),t?"Remove Duplicate":"Delete"]})]})})]},e.id)})})]})})]})]})]})},Gj=Et("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),$j=Et("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Xj={moNumber:"",title:"",createdBy:"",createdByEmail:"",isActive:!0,assignments:[],selectedTasks:[],attachments:[]},Yj=t=>{let{mo:n,onUpdateFiles:r,loading:s}=t;const[i,a]=(0,e.useState)(!1),[o,c]=(0,e.useState)({}),u=e.useRef(null),d=e=>{const t=Array.from(e).filter(e=>e.size>10485760?(alert("File ".concat(e.name," terlalu besar. Maksimal 10MB.")),!1):!!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif","text/plain"].includes(e.type)||(alert("File ".concat(e.name," tidak didukung. Hanya PDF, Word, Excel, gambar, dan text yang diizinkan.")),!1));t.length>0&&h(t)},h=async e=>{const t=e.map(async e=>{const t=Date.now()+"_"+Math.random().toString(36).substr(2,9),n="".concat(t,"_").concat(e.name),r=H_(eS,"mo-attachments/".concat(n));c(e=>l(l({},e),{},{[t]:0}));try{var s;const i=await U_(r,e),a=await z_(i.ref),o={id:t,originalName:e.name,fileName:n,url:a,type:e.type,size:e.size,uploadedAt:Rl.now(),uploadedBy:(null===(s=Po().currentUser)||void 0===s?void 0:s.email)||"anonymous"};return c(e=>l(l({},e),{},{[t]:100})),setTimeout(()=>{c(e=>{const n=l({},e);return delete n[t],n})},2e3),o}catch(pN){return console.error("Error uploading file:",pN),c(e=>{const n=l({},e);return delete n[t],n}),alert("Gagal mengupload ".concat(e.name)),null}}),s=(await Promise.all(t)).filter(e=>null!==e);if(s.length>0){const e=n.attachments||[];r([...e,...s])}},f=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?a(!0):"dragleave"===e.type&&a(!1)};return(0,qt.jsxs)("div",{className:"MO-file-upload-panel",children:[(0,qt.jsxs)("div",{className:"MO-file-upload-header",children:[(0,qt.jsx)("h3",{children:"\ud83d\udcce File Attachments"}),(0,qt.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},className:"MO-btn MO-btn-primary MO-btn-sm",disabled:s,children:[(0,qt.jsx)(gj,{size:16}),"Upload File"]})]}),(0,qt.jsx)("input",{ref:u,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt",onChange:e=>d(e.target.files),style:{display:"none"}}),(0,qt.jsx)("div",{className:"MO-file-drop-zone ".concat(i?"MO-drag-active":""),onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),a(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&d(e.dataTransfer.files)},onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},children:(0,qt.jsxs)("div",{className:"MO-drop-zone-content",children:[(0,qt.jsx)(gj,{size:32}),(0,qt.jsx)("p",{children:"Drag & drop files here or click to select"}),(0,qt.jsx)("small",{children:"PDF, Word, Excel, Images, Text files (max 10MB each)"})]})}),Object.keys(o).length>0&&(0,qt.jsxs)("div",{className:"MO-upload-progress-section",children:[(0,qt.jsx)("h4",{children:"Uploading files..."}),Object.entries(o).map(e=>{let[t,n]=e;return(0,qt.jsxs)("div",{className:"MO-upload-progress-item",children:[(0,qt.jsx)("div",{className:"MO-progress-bar",children:(0,qt.jsx)("div",{className:"MO-progress-fill",style:{width:"".concat(n,"%")}})}),(0,qt.jsxs)("span",{className:"MO-progress-text",children:[n,"%"]})]},t)})]}),(0,qt.jsx)("div",{className:"MO-file-list",children:n.attachments&&0!==n.attachments.length?(0,qt.jsxs)("div",{className:"MO-uploaded-files",children:[(0,qt.jsxs)("h4",{children:["Files (",n.attachments.length,")"]}),n.attachments.map(e=>{var t,s;return(0,qt.jsxs)("div",{className:"MO-file-item",children:[(0,qt.jsxs)("div",{className:"MO-file-info",children:[(0,qt.jsx)("div",{className:"MO-file-icon",children:(s=e.type,s.includes("pdf")?"\ud83d\udcc4":s.includes("word")?"\ud83d\udcdd":s.includes("excel")||s.includes("sheet")?"\ud83d\udcca":s.includes("image")?"\ud83d\uddbc\ufe0f":s.includes("text")?"\ud83d\udcc3":"\ud83d\udcc1")}),(0,qt.jsxs)("div",{className:"MO-file-details",children:[(0,qt.jsx)("div",{className:"MO-file-name",children:e.originalName}),(0,qt.jsxs)("div",{className:"MO-file-meta",children:[(0,qt.jsx)("span",{className:"MO-file-size",children:f(e.size)}),(0,qt.jsx)("span",{className:"MO-file-date",children:null!==(t=e.uploadedAt)&&void 0!==t&&t.toDate?e.uploadedAt.toDate().toLocaleDateString("id-ID"):"Unknown date"}),(0,qt.jsxs)("span",{className:"MO-file-uploader",children:["by ",e.uploadedBy]})]})]})]}),(0,qt.jsxs)("div",{className:"MO-file-actions",children:[(0,qt.jsx)("button",{type:"button",onClick:()=>window.open(e.url,"_blank"),className:"MO-file-action-btn MO-btn-view",title:"View file",children:(0,qt.jsx)(vj,{size:16})}),(0,qt.jsx)("button",{type:"button",onClick:()=>{const t=document.createElement("a");t.href=e.url,t.download=e.originalName,document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"MO-file-action-btn MO-btn-download",title:"Download file",children:(0,qt.jsx)(yj,{size:16})}),(0,qt.jsx)("button",{type:"button",onClick:()=>{window.confirm("Are you sure you want to delete ".concat(e.originalName,"?"))&&(async e=>{try{const t=H_(eS,"mo-attachments/".concat(e.fileName));await V_(t);const s=(n.attachments||[]).filter(t=>t.id!==e.id);r(s),console.log("File deleted:",e.originalName)}catch(pN){console.error("Error deleting file:",pN),alert("Gagal menghapus file")}})(e)},className:"MO-file-action-btn MO-btn-delete",title:"Delete file",children:(0,qt.jsx)(wj,{size:16})})]})]},e.id)})]}):(0,qt.jsxs)("div",{className:"MO-no-files",children:[(0,qt.jsx)(bj,{size:24}),(0,qt.jsx)("p",{children:"Belum ada file yang diupload"}),(0,qt.jsx)("small",{children:"File akan membantu memberikan informasi tambahan untuk MO ini"})]})})]})},Qj=t=>{let{mo:n,onUpdateTasks:r,availableTasks:s,loadingTasks:i}=t;const[a,o]=(0,e.useState)(!1),[l,c]=(0,e.useState)(""),u=s.filter(e=>e.title.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase())||e.category&&e.category.toLowerCase().includes(l.toLowerCase())),d=e=>{const t={easy:{class:"MO-badge-success",text:"Mudah"},medium:{class:"MO-badge-warning",text:"Sedang"},hard:{class:"MO-badge-danger",text:"Sulit"}};return t[e]||t.medium},h=u.filter(e=>!(n.selectedTasks||[]).some(t=>t.id===e.id));return(0,qt.jsxs)("div",{className:"MO-task-selection-panel",children:[(0,qt.jsxs)("div",{className:"MO-task-selection-header",children:[(0,qt.jsx)("h3",{children:"\ud83d\udcdd Work Instructions (Tasks)"}),(0,qt.jsx)("button",{type:"button",onClick:()=>o(!0),className:"MO-btn MO-btn-primary MO-btn-sm",disabled:i,children:i?"Loading...":"\u2795 Pilih Task"})]}),(0,qt.jsxs)("div",{className:"MO-task-selection-content",children:[i&&(0,qt.jsx)("div",{className:"MO-loading-tasks",children:(0,qt.jsx)("p",{children:"Memuat daftar task..."})}),i||n.selectedTasks&&0!==n.selectedTasks.length?!i&&(0,qt.jsx)("div",{className:"MO-selected-tasks-list",children:n.selectedTasks.map((e,t)=>(0,qt.jsxs)("div",{className:"MO-selected-task-item",children:[(0,qt.jsxs)("div",{className:"MO-task-info",children:[(0,qt.jsxs)("div",{className:"MO-task-header",children:[(0,qt.jsx)(At,{size:16}),(0,qt.jsxs)("div",{className:"MO-task-details",children:[(0,qt.jsx)("span",{className:"MO-task-title",children:e.title}),(0,qt.jsx)("span",{className:"MO-task-category",children:e.category})]})]}),(0,qt.jsxs)("div",{className:"MO-task-meta",children:[(0,qt.jsx)("span",{className:"MO-badge ".concat(d(e.difficulty).class),children:d(e.difficulty).text}),(0,qt.jsxs)("span",{className:"MO-task-steps",children:[e.stepsCount," langkah"]}),e.estimatedDuration&&(0,qt.jsxs)("span",{className:"MO-task-duration",children:[e.estimatedDuration," menit"]})]}),(0,qt.jsx)("p",{className:"MO-task-description",children:e.description})]}),(0,qt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=(n.selectedTasks||[]).filter(t=>t.id!==e);r(t),console.log("Task removed from MO:",e)})(e.id),className:"MO-remove-task-btn",title:"Hapus task dari MO",children:"\u2715"})]},e.id))}):(0,qt.jsxs)("div",{className:"MO-no-tasks-selected",children:[(0,qt.jsx)("div",{className:"MO-no-tasks-icon",children:"\ud83d\udcdd"}),(0,qt.jsx)("p",{children:"Belum ada task yang dipilih"}),(0,qt.jsx)("small",{children:"Task bersifat opsional untuk MO. MO bisa berdiri sendiri atau dikaitkan dengan task tertentu."})]})]}),a&&(0,qt.jsx)("div",{className:"MO-modal-overlay",onClick:()=>o(!1),children:(0,qt.jsxs)("div",{className:"MO-modal-content MO-task-selection-modal MO-modal-selection",onClick:e=>e.stopPropagation(),children:[(0,qt.jsxs)("div",{className:"MO-modal-header",children:[(0,qt.jsx)("h3",{children:"Pilih Work Instructions"}),(0,qt.jsx)("button",{onClick:()=>o(!1),className:"MO-modal-close-btn",type:"button",children:"\u2715"})]}),(0,qt.jsx)("div",{className:"MO-modal-search",children:(0,qt.jsxs)("div",{className:"MO-search-box",children:[(0,qt.jsx)(Gj,{size:16}),(0,qt.jsx)("input",{type:"text",placeholder:"Cari task berdasarkan judul, deskripsi, atau kategori...",value:l,onChange:e=>c(e.target.value),className:"MO-search-input"})]})}),(0,qt.jsx)("div",{className:"MO-modal-body MO-task-list-modal",children:i?(0,qt.jsx)("div",{className:"MO-loading-tasks",children:(0,qt.jsx)("p",{children:"Memuat daftar task..."})}):0===h.length?(0,qt.jsx)("div",{className:"MO-no-tasks-available",children:l?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("p",{children:['Tidak ada task yang sesuai dengan pencarian "',l,'"']}),(0,qt.jsx)("button",{onClick:()=>c(""),className:"MO-btn MO-btn-secondary MO-btn-sm",children:"Reset Pencarian"})]}):0===s.length?(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsx)("p",{children:"Belum ada task yang tersedia"}),(0,qt.jsx)("p",{children:"Buat task terlebih dahulu di halaman Add Task"})]}):(0,qt.jsx)("p",{children:"Semua task tersedia sudah dipilih"})}):(0,qt.jsx)("div",{className:"MO-task-grid-modal",children:h.map(e=>{var t;return(0,qt.jsxs)("div",{className:"MO-task-card-modal",children:[(0,qt.jsxs)("div",{className:"MO-task-card-header",children:[(0,qt.jsx)("h4",{className:"MO-task-title",children:e.title}),(0,qt.jsxs)("div",{className:"MO-task-badges",children:[(0,qt.jsx)("span",{className:"MO-badge ".concat(d(e.difficulty).class),children:d(e.difficulty).text}),(0,qt.jsx)("span",{className:"MO-badge MO-badge-info",children:e.category||"General"})]})]}),(0,qt.jsxs)("div",{className:"MO-task-card-body",children:[(0,qt.jsx)("p",{className:"MO-task-description",children:e.description}),(0,qt.jsxs)("div",{className:"MO-task-meta",children:[(0,qt.jsxs)("span",{className:"MO-meta-item",children:["\ud83d\udcdd ",(null===(t=e.steps)||void 0===t?void 0:t.length)||0," langkah"]}),e.estimatedDuration&&(0,qt.jsxs)("span",{className:"MO-meta-item",children:["\u23f1\ufe0f ",e.estimatedDuration," menit"]})]})]}),(0,qt.jsx)("div",{className:"MO-task-card-actions",children:(0,qt.jsx)("button",{onClick:()=>(e=>{const t=n.selectedTasks||[];if(t.some(t=>t.id===e.id))alert("Task sudah dipilih untuk MO ini");else{var s;const n={id:e.id,title:e.title,description:e.description,category:e.category||"General",estimatedDuration:e.estimatedDuration,stepsCount:(null===(s=e.steps)||void 0===s?void 0:s.length)||0,difficulty:e.difficulty,addedAt:Rl.now()};r([...t,n]),console.log("Task added to MO:",n)}})(e),className:"MO-btn MO-btn-primary MO-btn-sm",children:"\u2705 Pilih"})})]},e.id)})})}),(0,qt.jsx)("div",{className:"MO-modal-actions",children:(0,qt.jsx)("button",{onClick:()=>o(!1),className:"MO-btn MO-btn-secondary",type:"button",children:"Tutup"})})]})})]})},Jj=t=>{let{mo:n,onUpdateAssignments:r,availableOperators:s,loadingOperators:i}=t;const[a,o]=(0,e.useState)(""),[l,c]=(0,e.useState)(!1),u=e=>{const t={assigned:{class:"MO-badge-info",text:"Ditugaskan"},in_progress:{class:"MO-badge-warning",text:"Sedang Dikerjakan"},completed:{class:"MO-badge-success",text:"Selesai"}};return t[e]||t.assigned},d=s.filter(e=>!(n.assignments||[]).some(t=>t.operatorId===e.id));return(0,qt.jsxs)("div",{className:"MO-assignment-panel",children:[(0,qt.jsxs)("div",{className:"MO-assignment-header",children:[(0,qt.jsx)("h3",{children:"\ud83d\udc65 Assignment Operator"}),(0,qt.jsx)("button",{type:"button",onClick:()=>c(!0),className:"MO-btn MO-btn-primary MO-btn-sm",disabled:i,children:i?"Loading...":"\u2795 Assign Operator"})]}),(0,qt.jsxs)("div",{className:"MO-assignment-content",children:[i&&(0,qt.jsx)("div",{className:"MO-loading-operators",children:(0,qt.jsx)("p",{children:"Memuat daftar operator..."})}),i||n.assignments&&0!==n.assignments.length?!i&&(0,qt.jsx)("div",{className:"MO-assignments-list",children:n.assignments.map((e,t)=>{var s;return(0,qt.jsxs)("div",{className:"MO-assignment-item",children:[(0,qt.jsxs)("div",{className:"MO-assignment-info",children:[(0,qt.jsxs)("div",{className:"MO-operator-info",children:[(0,qt.jsx)(hS,{size:16}),(0,qt.jsxs)("div",{className:"MO-operator-details",children:[(0,qt.jsx)("span",{className:"MO-operator-name",children:e.operatorName}),(0,qt.jsx)("span",{className:"MO-operator-email",children:e.operatorEmail})]})]}),(0,qt.jsxs)("div",{className:"MO-assignment-meta",children:[(0,qt.jsx)("span",{className:"MO-badge ".concat(u(e.status).class),children:u(e.status).text}),(0,qt.jsx)("span",{className:"MO-assigned-date",children:null!==(s=e.assignedAt)&&void 0!==s&&s.toDate?e.assignedAt.toDate().toLocaleDateString("id-ID"):"Tanggal tidak tersedia"})]})]}),(0,qt.jsx)("button",{type:"button",onClick:()=>(e=>{const t=(n.assignments||[]).filter(t=>t.operatorId!==e);r(t)})(e.operatorId),className:"MO-remove-assignment-btn",title:"Hapus assignment",children:"\u2715"})]},t)})}):(0,qt.jsx)("div",{className:"MO-no-assignments",children:(0,qt.jsx)("p",{children:"Belum ada operator yang ditugaskan"})})]}),l&&(0,qt.jsx)("div",{className:"MO-modal-overlay",onClick:()=>c(!1),children:(0,qt.jsxs)("div",{className:"MO-modal-content MO-assignment-modal",onClick:e=>e.stopPropagation(),children:[(0,qt.jsxs)("div",{className:"MO-modal-header",children:[(0,qt.jsx)("h3",{children:"Assign MO ke Operator"}),(0,qt.jsx)("button",{onClick:()=>c(!1),className:"MO-modal-close-btn",type:"button",children:"\u2715"})]}),(0,qt.jsxs)("div",{className:"MO-modal-body",children:[(0,qt.jsxs)("div",{className:"MO-form-group",children:[(0,qt.jsx)("label",{children:"Pilih Operator:"}),i?(0,qt.jsx)("div",{className:"MO-loading-select",children:(0,qt.jsx)("p",{children:"Loading operators..."})}):(0,qt.jsxs)("select",{value:a,onChange:e=>o(e.target.value),className:"MO-form-input",children:[(0,qt.jsx)("option",{value:"",children:"-- Pilih Operator --"}),0===d.length?(0,qt.jsx)("option",{disabled:!0,children:"Tidak ada operator tersedia"}):d.map(e=>(0,qt.jsxs)("option",{value:e.id,children:[e.displayName||e.name||e.email.split("@")[0]," (",e.email,")"]},e.id))]})]}),n.moNumber&&n.title&&(0,qt.jsxs)("div",{className:"MO-assignment-preview",children:[(0,qt.jsx)("h4",{children:"MO yang akan ditugaskan:"}),(0,qt.jsxs)("div",{className:"MO-mo-preview",children:[(0,qt.jsx)("strong",{children:n.moDisplay||"".concat(n.moNumber," - ").concat(n.title)}),n.selectedTasks&&n.selectedTasks.length>0&&(0,qt.jsxs)("div",{className:"MO-mo-tasks-preview",children:[(0,qt.jsxs)("p",{children:["Dengan ",n.selectedTasks.length," task terkait:"]}),(0,qt.jsxs)("ul",{children:[n.selectedTasks.slice(0,3).map((e,t)=>(0,qt.jsx)("li",{children:e.title},t)),n.selectedTasks.length>3&&(0,qt.jsxs)("li",{children:["...dan ",n.selectedTasks.length-3," task lainnya"]})]})]})]})]})]}),(0,qt.jsxs)("div",{className:"MO-modal-actions",children:[(0,qt.jsx)("button",{onClick:()=>c(!1),className:"MO-btn MO-btn-secondary",type:"button",children:"Batal"}),(0,qt.jsx)("button",{onClick:()=>{if(!a)return;const e=s.find(e=>e.id===a);if(!e)return;const t={operatorId:e.id,operatorEmail:e.email,operatorName:e.displayName||e.name||e.email.split("@")[0],assignedAt:Rl.now(),status:"assigned"},i=n.assignments||[];i.some(t=>t.operatorId===e.id)?alert("Operator sudah ditugaskan untuk MO ini"):(r([...i,t]),o(""),c(!1))},className:"MO-btn MO-btn-primary",disabled:!a||i,type:"button",children:i?"Loading...":"\u2705 Assign"})]})]})})]})},Zj=t=>{let{mo:n,onSave:r,onCancel:s,isEditing:i,loading:a,availableOperators:o,loadingOperators:c,availableTasks:u,loadingTasks:d}=t;const[h,f]=(0,e.useState)(n||Xj),[p,m]=(0,e.useState)([]);(0,e.useEffect)(()=>{f(n||Xj)},[n]);const g=(e,t)=>{f(n=>l(l({},n),{},{[e]:t})),p.length>0&&m([])};return(0,qt.jsxs)("div",{className:"MO-form-container",children:[p.length>0&&(0,qt.jsxs)("div",{className:"MO-error-messages",children:[(0,qt.jsxs)("div",{className:"MO-error-header",children:[(0,qt.jsx)("span",{className:"MO-error-icon",children:"\u26a0\ufe0f"}),(0,qt.jsx)("span",{children:"Terdapat kesalahan yang perlu diperbaiki:"})]}),(0,qt.jsx)("ul",{className:"MO-error-list",children:p.map((e,t)=>(0,qt.jsx)("li",{children:e},t))})]}),(0,qt.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=(()=>{const e=[];return h.moNumber.trim()||e.push("Nomor MO harus diisi"),h.title.trim()||e.push("Judul Surat Perintah harus diisi"),e})();t.length>0?m(t):r(h)},className:"MO-form",children:[(0,qt.jsxs)("div",{className:"MO-form-section",children:[(0,qt.jsx)("h3",{children:"\ud83d\udccb Informasi MO"}),(0,qt.jsxs)("div",{className:"MO-form-group",children:[(0,qt.jsxs)("label",{htmlFor:"mo-number",children:["Nomor MO ",(0,qt.jsx)("span",{className:"MO-required",children:"*"})]}),(0,qt.jsx)("div",{className:"MO-input-with-button",children:(0,qt.jsx)("input",{id:"mo-number",type:"text",value:h.moNumber,onChange:e=>g("moNumber",e.target.value),className:"MO-form-input",required:!0})})]}),(0,qt.jsxs)("div",{className:"MO-form-group",children:[(0,qt.jsxs)("label",{htmlFor:"mo-title",children:["Judul Surat Perintah ",(0,qt.jsx)("span",{className:"MO-required",children:"*"})]}),(0,qt.jsx)("input",{id:"mo-title",type:"text",value:h.title,onChange:e=>g("title",e.target.value),className:"MO-form-input",required:!0})]})]}),(0,qt.jsx)("div",{className:"MO-form-section",children:(0,qt.jsx)(Yj,{mo:h,onUpdateFiles:e=>{f(t=>l(l({},t),{},{attachments:e}))},loading:a})}),(0,qt.jsxs)("div",{className:"MO-form-section",children:[(0,qt.jsx)(Qj,{mo:h,onUpdateTasks:e=>{f(t=>l(l({},t),{},{selectedTasks:e}))},availableTasks:u,loadingTasks:d}),h.selectedTasks&&h.selectedTasks.length>0&&(0,qt.jsxs)("div",{className:"MO-task-summary-section",children:[(0,qt.jsx)("h4",{children:"\ud83d\udcca Ringkasan Task"}),(0,qt.jsxs)("div",{className:"MO-task-summary-stats",children:[(0,qt.jsxs)("div",{className:"MO-stat-item",children:[(0,qt.jsx)("span",{className:"MO-stat-label",children:"Total Task:"}),(0,qt.jsx)("span",{className:"MO-stat-value",children:h.selectedTasks.length})]}),(0,qt.jsxs)("div",{className:"MO-stat-item",children:[(0,qt.jsx)("span",{className:"MO-stat-label",children:"Total Langkah:"}),(0,qt.jsx)("span",{className:"MO-stat-value",children:h.selectedTasks.reduce((e,t)=>e+t.stepsCount,0)})]}),(0,qt.jsxs)("div",{className:"MO-stat-item",children:[(0,qt.jsx)("span",{className:"MO-stat-label",children:"Estimasi Total Durasi:"}),(0,qt.jsxs)("span",{className:"MO-stat-value",children:[h.selectedTasks&&0!==h.selectedTasks.length?h.selectedTasks.reduce((e,t)=>e+(t.estimatedDuration||0),0):0," menit"]})]})]})]})]}),(0,qt.jsxs)("div",{className:"MO-form-actions",children:[(0,qt.jsx)("button",{type:"button",onClick:s,className:"MO-btn MO-btn-secondary",disabled:a,children:"\u274c Batal"}),(0,qt.jsx)("button",{type:"submit",className:"MO-btn MO-btn-primary",disabled:a,children:a?"\ud83d\udcbe Menyimpan...":i?"\ud83d\udcbe Update":"\ud83d\udcbe Simpan"})]})]}),i&&h.moNumber&&(0,qt.jsx)(Jj,{mo:h,onUpdateAssignments:e=>{f(t=>l(l({},t),{},{assignments:e}))},availableOperators:o,loadingOperators:c})]})},eN=e=>{let{mos:t,onAdd:n,onEdit:r,onDelete:s,loading:i,searchTerm:a,onSearchChange:o}=e;const l=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},c=t.filter(e=>e.moNumber.toLowerCase().includes(a.toLowerCase())||e.title.toLowerCase().includes(a.toLowerCase()));return i?(0,qt.jsx)("div",{className:"MO-loading-overlay",children:(0,qt.jsxs)("div",{className:"MO-loading-content",children:[(0,qt.jsx)("div",{className:"MO-loading-spinner"}),(0,qt.jsx)("p",{children:"Memuat data MO..."})]})}):(0,qt.jsxs)("div",{className:"MO-list-container",children:[(0,qt.jsxs)("div",{className:"MO-list-header",children:[(0,qt.jsxs)("div",{className:"MO-list-info",children:[(0,qt.jsxs)("h2",{children:["\ud83d\udccb Daftar Manufacturing Orders (",c.length,")"]}),(0,qt.jsx)("p",{children:"Kelola semua MO, Work Instructions, dan File terkait"})]}),(0,qt.jsxs)("div",{className:"MO-list-actions",children:[(0,qt.jsxs)("div",{className:"MO-search-box",children:[(0,qt.jsx)(Gj,{size:16}),(0,qt.jsx)("input",{type:"text",placeholder:"Cari MO...",value:a,onChange:o,className:"MO-search-input"})]}),(0,qt.jsxs)("button",{onClick:n,className:"MO-btn MO-btn-primary",children:[(0,qt.jsx)(Ij,{size:16}),"Tambah MO Baru"]})]})]}),0===c.length?(0,qt.jsxs)("div",{className:"MO-empty-state",children:[(0,qt.jsx)("div",{className:"MO-empty-icon",children:"\ud83d\udccb"}),(0,qt.jsx)("h3",{children:a?"Tidak ada MO yang sesuai":"Belum ada MO"}),(0,qt.jsx)("p",{children:a?"Coba ubah kata kunci pencarian Anda":"Mulai dengan menambahkan MO pertama Anda"}),!a&&(0,qt.jsxs)("button",{onClick:n,className:"MO-btn MO-btn-primary",children:[(0,qt.jsx)(Ij,{size:16}),"Tambah MO Pertama"]})]}):(0,qt.jsx)("div",{className:"MO-grid",children:c.map(e=>(0,qt.jsxs)("div",{className:"MO-card",children:[(0,qt.jsx)("div",{className:"MO-card-header",children:(0,qt.jsx)("div",{className:"MO-number-section",children:(0,qt.jsx)("span",{className:"MO-number",children:e.moNumber})})}),(0,qt.jsxs)("div",{className:"MO-card-body",children:[(0,qt.jsx)("h3",{className:"MO-title",children:e.title}),(0,qt.jsxs)("div",{className:"MO-meta",children:[(0,qt.jsxs)("div",{className:"MO-meta-item",children:[(0,qt.jsx)("span",{className:"MO-meta-label",children:"Dibuat:"}),(0,qt.jsx)("span",{className:"MO-meta-value",children:l(e.createdAt)})]}),(0,qt.jsxs)("div",{className:"MO-meta-item",children:[(0,qt.jsx)("span",{className:"MO-meta-label",children:"Oleh:"}),(0,qt.jsx)("span",{className:"MO-meta-value",children:e.createdByEmail})]})]}),e.attachments&&e.attachments.length>0&&(0,qt.jsxs)("div",{className:"MO-attachments-status",children:[(0,qt.jsxs)("div",{className:"MO-attachment-header",children:[(0,qt.jsx)(bj,{size:16}),(0,qt.jsxs)("span",{children:["Files (",e.attachments.length,")"]})]}),(0,qt.jsxs)("div",{className:"MO-attachment-preview",children:[e.attachments.slice(0,3).map((e,t)=>{return(0,qt.jsxs)("span",{className:"MO-file-preview-badge",children:[(n=e.type,n.includes("pdf")?"\ud83d\udcc4":n.includes("word")?"\ud83d\udcdd":n.includes("excel")||n.includes("sheet")?"\ud83d\udcca":n.includes("image")?"\ud83d\uddbc\ufe0f":n.includes("text")?"\ud83d\udcc3":"\ud83d\udcc1")," ",e.originalName]},t);var n}),e.attachments.length>3&&(0,qt.jsxs)("span",{className:"MO-more-files",children:["+",e.attachments.length-3," lainnya"]})]})]}),e.selectedTasks&&e.selectedTasks.length>0&&(0,qt.jsxs)("div",{className:"MO-task-status",children:[(0,qt.jsxs)("div",{className:"MO-task-header",children:[(0,qt.jsx)(At,{size:16}),(0,qt.jsxs)("span",{children:["Work Instructions (",e.selectedTasks.length,")"]})]}),(0,qt.jsxs)("div",{className:"MO-selected-tasks-preview",children:[e.selectedTasks.slice(0,2).map((e,t)=>(0,qt.jsx)("span",{className:"MO-task-preview-badge",children:e.title},t)),e.selectedTasks.length>2&&(0,qt.jsxs)("span",{className:"MO-more-tasks",children:["+",e.selectedTasks.length-2," lainnya"]})]}),(0,qt.jsx)("div",{className:"MO-task-summary",children:(0,qt.jsxs)("small",{children:["Total: ",e.selectedTasks.reduce((e,t)=>e+t.stepsCount,0)," langkah,",e.selectedTasks.reduce((e,t)=>e+(t.estimatedDuration||0),0)," menit"]})})]}),e.assignments&&e.assignments.length>0&&(0,qt.jsxs)("div",{className:"MO-assignment-status",children:[(0,qt.jsxs)("div",{className:"MO-assignment-header",children:[(0,qt.jsx)(Rt,{size:16}),(0,qt.jsxs)("span",{children:["Operator Assigned (",e.assignments.length,")"]})]}),(0,qt.jsxs)("div",{className:"MO-assigned-operators",children:[e.assignments.slice(0,3).map((e,t)=>(0,qt.jsx)("span",{className:"MO-operator-badge",children:e.operatorName},t)),e.assignments.length>3&&(0,qt.jsxs)("span",{className:"MO-more-operators",children:["+",e.assignments.length-3," lainnya"]})]})]})]}),(0,qt.jsxs)("div",{className:"MO-card-actions",children:[(0,qt.jsxs)("button",{onClick:()=>r(e),className:"MO-btn MO-btn-sm MO-btn-warning",title:"Edit MO",children:[(0,qt.jsx)($j,{size:14}),"Edit"]}),(0,qt.jsxs)("button",{onClick:()=>s(e),className:"MO-btn MO-btn-sm MO-btn-danger",title:"Hapus MO",children:[(0,qt.jsx)(wj,{size:14}),"Hapus"]})]})]},e.id))})]})},tN=t=>{let{onLogout:n,sidebarOpen:r,toggleSidebar:s,currentView:i}=t;const[a,o]=(0,e.useState)(!1),l=he();(0,e.useEffect)(()=>{const e=e=>{a&&!e.target.closest(".MO-profile-container")&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[a]);return(0,qt.jsxs)("div",{className:"MO-header-bar",children:[(0,qt.jsxs)("div",{className:"MO-header-left",children:[(0,qt.jsx)("button",{className:"MO-sidebar-toggle",onClick:s,children:(0,qt.jsx)(It,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"MO-logo",onClick:()=>{l("/admin")},style:{cursor:"pointer"}})]}),(0,qt.jsx)("div",{className:"MO-header-center",children:(0,qt.jsx)("h1",{className:"MO-title-header",children:(()=>{switch(i){case"list":return"Manufacturing Orders";case"form":return"Tambah MO Baru";case"edit":return"Edit MO";default:return"MO Management"}})()})}),(0,qt.jsx)("div",{className:"MO-header-right",children:(0,qt.jsxs)("div",{className:"MO-profile-container",children:[(0,qt.jsxs)("button",{className:"MO-profile-btn",onClick:()=>o(!a),children:[(0,qt.jsx)("div",{className:"MO-profile-avatar",children:(0,qt.jsx)("span",{className:"MO-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{className:"MO-profile-info",children:[(0,qt.jsx)("div",{className:"MO-profile-name",children:"Admin"}),(0,qt.jsx)("div",{className:"MO-profile-id",children:"Administrator"})]}),(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"MO-dropdown-arrow ".concat(a?"rotated":""),children:(0,qt.jsx)("polyline",{points:"6,9 12,15 18,9"})})]}),a&&(0,qt.jsxs)("div",{className:"MO-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"MO-dropdown-header",children:[(0,qt.jsx)("div",{className:"MO-profile-avatar",children:(0,qt.jsx)("span",{className:"MO-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"MO-dropdown-name",children:"Admin"}),(0,qt.jsx)("div",{className:"MO-dropdown-role",children:"Administrator"})]})]}),(0,qt.jsx)("hr",{className:"MO-dropdown-divider"}),(0,qt.jsxs)("button",{className:"MO-dropdown-item MO-dropdown-logout",onClick:()=>{o(!1),n()},children:[(0,qt.jsx)(fS,{size:16}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]})},nN=e=>{let{sidebarOpen:t,toggleSidebar:n}=e;const r=he(),s=e=>{switch(e){case"work-sessions":r("/admin");break;case"user-management":r("/approvals");break;case"mo-management":default:break;case"add-task":r("/addTask")}n()};return(0,qt.jsxs)(qt.Fragment,{children:[(0,qt.jsxs)("div",{className:"MO-sidebar ".concat(t?"MO-sidebar-open":""),children:[(0,qt.jsxs)("div",{className:"MO-sidebar-header",children:[(0,qt.jsx)("h3",{children:"Menu"}),(0,qt.jsx)("button",{className:"MO-sidebar-close",onClick:n,children:(0,qt.jsx)(Ct,{size:20})})]}),(0,qt.jsxs)("nav",{className:"MO-sidebar-nav",children:[(0,qt.jsxs)("button",{onClick:()=>s("work-sessions"),className:"MO-sidebar-item",children:[(0,qt.jsx)(Cj,{size:20}),(0,qt.jsx)("span",{children:"Work Sessions"})]}),(0,qt.jsxs)("button",{onClick:()=>s("user-management"),className:"MO-sidebar-item",children:[(0,qt.jsx)(ej,{size:20}),(0,qt.jsx)("span",{children:"User Management"})]}),(0,qt.jsxs)("button",{onClick:()=>s("mo-management"),className:"MO-sidebar-item active",children:[(0,qt.jsx)(tj,{size:20}),(0,qt.jsx)("span",{children:"MO Management"})]}),(0,qt.jsxs)("button",{onClick:()=>s("add-task"),className:"MO-sidebar-item",children:[(0,qt.jsx)(Ij,{size:20}),(0,qt.jsx)("span",{children:"Add Task"})]})]})]}),t&&(0,qt.jsx)("div",{className:"MO-sidebar-overlay",onClick:n})]})},rN=e=>{let{isOpen:t,title:n,message:r,onConfirm:s,onCancel:i,isDestructive:a=!1}=e;return t?(0,qt.jsx)("div",{className:"MO-modal-overlay",children:(0,qt.jsxs)("div",{className:"MO-modal-content",children:[(0,qt.jsx)("div",{className:"MO-modal-header",children:(0,qt.jsx)("h3",{children:n})}),(0,qt.jsx)("div",{className:"MO-modal-body",children:(0,qt.jsx)("p",{children:r})}),(0,qt.jsxs)("div",{className:"MO-modal-actions",children:[(0,qt.jsx)("button",{onClick:i,className:"MO-btn MO-btn-secondary",children:"Batal"}),(0,qt.jsx)("button",{onClick:s,className:"MO-btn ".concat(a?"MO-btn-danger":"MO-btn-primary"),children:a?"Hapus":"Konfirmasi"})]})]})}):null},sN=()=>{const t=he(),[n,r]=(0,e.useState)("list"),[s,i]=(0,e.useState)([]),[a,o]=(0,e.useState)(null),[c,u]=(0,e.useState)(!1),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(!1),[m,g]=(0,e.useState)([]),[b,v]=(0,e.useState)(!1),[y,w]=(0,e.useState)([]),[x,k]=(0,e.useState)(!1),[_,S]=(0,e.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDestructive:!1}),j=(0,e.useCallback)(async()=>{console.log("Loading available operators..."),v(!0);try{const e=Ly(Z_,"users"),t=await qw(e),n=[];t.forEach(e=>{const t=e.data();n.push(l({id:e.id},t))}),g(n)}catch(pN){console.error("Error loading operators:",pN)}finally{v(!1)}},[]),N=(0,e.useCallback)(async()=>{console.log("Loading available tasks..."),k(!0);try{const e=Nw(Ly(Z_,"tasks"),Aw("createdAt","desc")),t=await qw(e),n=[];t.forEach(e=>{const t=e.data();n.push(l({id:e.id},t))}),console.log("Loaded ".concat(n.length," tasks")),w(n)}catch(pN){console.error("Error loading tasks:",pN)}finally{k(!1)}},[]),T=(0,e.useCallback)(async()=>{u(!0);try{const e=Nw(Ly(Z_,"mos"),Aw("createdAt","desc")),t=(await qw(e)).docs.map(e=>l({id:e.id},e.data()));i(t)}catch(pN){console.error("Error loading MOs:",pN)}finally{u(!1)}},[]);(0,e.useEffect)(()=>{T(),j(),N()},[T,j,N]);const E=(0,e.useCallback)(async()=>{try{const e=Po();await pa(e),t("/")}catch(pN){console.error("Error during logout:",pN)}},[t]),C=()=>{p(!f)},I=()=>{o(null),r("form")},A=e=>{o(e),r("edit")},M=e=>{S({isOpen:!0,title:"Konfirmasi Hapus",message:'Apakah Anda yakin ingin menghapus MO "'.concat(e.moNumber," - ").concat(e.title,'"? Tindakan ini tidak dapat dibatalkan dan akan menghapus semua file terkait.'),onConfirm:async()=>{u(!0);try{if(e.attachments&&e.attachments.length>0)for(const n of e.attachments)try{const e=H_(eS,"mo-attachments/".concat(n.fileName));await V_(e)}catch(t){console.error("Error deleting file:",n.fileName,t)}await $w(Fy(Z_,"mos",e.id)),await T(),S(e=>l(l({},e),{},{isOpen:!1}))}catch(pN){console.error("Error deleting MO:",pN)}finally{u(!1)}},isDestructive:!0})},O=async e=>{u(!0);try{const t=Po().currentUser;if(a){const n=l(l({},e),{},{updatedAt:Rl.now(),updatedBy:(null===t||void 0===t?void 0:t.uid)||"anonymous",updatedByEmail:(null===t||void 0===t?void 0:t.email)||"anonymous"});await Gw(Fy(Z_,"mos",a.id),n)}else{const n=l(l({},e),{},{createdAt:Rl.now(),createdBy:(null===t||void 0===t?void 0:t.uid)||"anonymous",createdByEmail:(null===t||void 0===t?void 0:t.email)||"anonymous",updatedAt:Rl.now(),assignments:[],selectedTasks:e.selectedTasks||[],attachments:e.attachments||[]});await Xw(Ly(Z_,"mos"),n)}await T(),r("list"),o(null)}catch(pN){console.error("Error saving MO:",pN)}finally{u(!1)}},R=()=>{r("list"),o(null)};return(0,qt.jsxs)("div",{className:"MO-management-page",children:[(0,qt.jsx)(tN,{onLogout:E,sidebarOpen:f,toggleSidebar:C,currentView:n}),(0,qt.jsx)(nN,{sidebarOpen:f,toggleSidebar:C}),(0,qt.jsx)("main",{className:"MO-main ".concat(f?"MO-main-shifted":""),children:(()=>{switch(n){case"form":case"edit":return(0,qt.jsx)(Zj,{mo:a,onSave:O,onCancel:R,isEditing:"edit"===n,loading:c,availableOperators:m,loadingOperators:b,availableTasks:y,loadingTasks:x});default:return(0,qt.jsx)(eN,{mos:s,onAdd:I,onEdit:A,onDelete:M,loading:c,searchTerm:d,onSearchChange:e=>h(e.target.value)})}})()}),(0,qt.jsx)(rN,{isOpen:_.isOpen,title:_.title,message:_.message,onConfirm:_.onConfirm,onCancel:()=>{S(e=>l(l({},e),{},{isOpen:!1}))},isDestructive:_.isDestructive})]})},iN=Et("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),aN=t=>{let{onLogout:n,onBack:r,onRefresh:s}=t;const[i,a]=(0,e.useState)(!1),o=he();(0,e.useEffect)(()=>{const e=e=>{i&&!e.target.closest(".TWM-profile-container")&&a(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i]);return(0,qt.jsxs)("div",{className:"TWM-header-bar",children:[(0,qt.jsxs)("div",{className:"TWM-header-left",children:[(0,qt.jsx)("button",{className:"TWM-back-btn",onClick:r,title:"Kembali",children:(0,qt.jsx)(kS,{size:20})}),(0,qt.jsx)("img",{src:Bt,alt:"LRS Logo",className:"TWM-logo",onClick:()=>{o("/home")},style:{cursor:"pointer"}})]}),(0,qt.jsx)("div",{className:"TWM-header-center",children:(0,qt.jsx)("h1",{className:"TWM-title-header",children:"Work Instructions"})}),(0,qt.jsx)("div",{className:"TWM-header-right",children:(0,qt.jsxs)("div",{className:"TWM-profile-container",children:[(0,qt.jsxs)("button",{className:"TWM-profile-btn",onClick:()=>a(!i),children:[(0,qt.jsx)("div",{className:"TWM-profile-avatar",children:(0,qt.jsx)("span",{className:"TWM-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{className:"TWM-profile-info",children:[(0,qt.jsx)("div",{className:"TWM-profile-name",children:"Admin"}),(0,qt.jsx)("div",{className:"TWM-profile-id",children:"Administrator"})]}),(0,qt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"TWM-dropdown-arrow ".concat(i?"rotated":""),children:(0,qt.jsx)("polyline",{points:"6,9 12,15 18,9"})})]}),i&&(0,qt.jsxs)("div",{className:"TWM-dropdown-menu",children:[(0,qt.jsxs)("div",{className:"TWM-dropdown-header",children:[(0,qt.jsx)("div",{className:"TWM-profile-avatar",children:(0,qt.jsx)("span",{className:"TWM-avatar-text",children:"A"})}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("div",{className:"TWM-dropdown-name",children:"Admin"}),(0,qt.jsx)("div",{className:"TWM-dropdown-role",children:"Administrator"})]})]}),(0,qt.jsx)("hr",{className:"TWM-dropdown-divider"}),(0,qt.jsxs)("button",{className:"TWM-dropdown-item TWM-dropdown-logout",onClick:()=>{a(!1),n()},children:[(0,qt.jsx)(fS,{size:16}),(0,qt.jsx)("span",{children:"Logout"})]})]})]})})]})},oN=e=>{let{tasks:t,onView:n,onEdit:r,onDelete:s,onStartWork:i,loading:a,searchTerm:o,onSearchChange:l,onRefresh:c}=e;const u=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})},d=t.filter(e=>e.title.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase())||e.category&&e.category.toLowerCase().includes(o.toLowerCase()));return a?(0,qt.jsx)("div",{className:"TWM-loading-overlay",children:(0,qt.jsxs)("div",{className:"TWM-loading-content",children:[(0,qt.jsx)("div",{className:"TWM-loading-spinner"}),(0,qt.jsx)("p",{children:"Memuat data task..."})]})}):(0,qt.jsxs)("div",{className:"TWM-task-list-container",children:[(0,qt.jsxs)("div",{className:"TWM-list-header",children:[(0,qt.jsx)("div",{className:"TWM-list-info",children:(0,qt.jsxs)("h2",{children:["Work Instructions (",d.length,")"]})}),(0,qt.jsxs)("div",{className:"TWM-list-actions",children:[(0,qt.jsxs)("div",{className:"TWM-search-box",children:[(0,qt.jsx)(Gj,{size:16}),(0,qt.jsx)("input",{type:"text",placeholder:"Cari task...",value:o,onChange:l,className:"TWM-search-input"})]}),(0,qt.jsxs)("button",{onClick:c,className:"TWM-btn TWM-btn-secondary",title:"Refresh data",children:[(0,qt.jsx)(qj,{size:16}),"Refresh"]})]})]}),0===d.length?(0,qt.jsxs)("div",{className:"TWM-empty-state",children:[(0,qt.jsx)("div",{className:"TWM-empty-icon",children:"\ud83d\udcdd"}),(0,qt.jsx)("h3",{children:o?"Tidak ada task yang sesuai":0===t.length?"Semua task sudah terkait dengan MO":"Tidak ada task"}),(0,qt.jsx)("p",{children:o?"Coba ubah kata kunci pencarian Anda":0===t.length?"Semua task yang ada sudah dikaitkan dengan MO. Task baru yang dibuat akan muncul di sini.":"Semua task sudah memiliki asosiasi MO"})]}):(0,qt.jsx)("div",{className:"TWM-task-grid",children:d.map(e=>{var t;return(0,qt.jsxs)("div",{className:"TWM-task-card",children:[(0,qt.jsxs)("div",{className:"TWM-card-body",children:[(0,qt.jsx)("h3",{className:"TWM-card-title",children:e.title}),(0,qt.jsx)("p",{className:"TWM-card-description",children:e.description}),(0,qt.jsxs)("div",{className:"TWM-card-meta",children:[(0,qt.jsx)("div",{className:"TWM-meta-row",children:(0,qt.jsxs)("span",{className:"TWM-meta-item",children:["\ud83d\udcdd ",(null===(t=e.steps)||void 0===t?void 0:t.length)||0," langkah"]})}),(0,qt.jsxs)("div",{className:"TWM-meta-row",children:[e.estimatedDuration&&(0,qt.jsxs)("span",{className:"TWM-meta-item",children:["\u23f1\ufe0f ",e.estimatedDuration," menit"]}),(0,qt.jsxs)("span",{className:"TWM-meta-item",children:["\ud83d\udcc5 ",u(e.createdAt)]})]})]})]}),(0,qt.jsx)("div",{className:"TWM-card-actions",children:(0,qt.jsxs)("button",{onClick:()=>i(e),className:"TWM-btn",title:"Mulai mengerjakan task",children:[(0,qt.jsx)(Dt,{size:14}),"Mulai Kerja"]})})]},e.id)})})]})},lN=e=>{var t,n,r;let{task:s,onEdit:i,onDelete:a,onBack:o,onStartWork:l}=e;const c=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,qt.jsxs)("div",{className:"TWM-task-detail",children:[(0,qt.jsxs)("div",{className:"TWM-task-detail-header",children:[(0,qt.jsx)("button",{onClick:o,className:"TWM-back-btn",children:"\u2190 Kembali"}),(0,qt.jsxs)("div",{className:"TWM-task-actions",children:[(0,qt.jsxs)("button",{onClick:()=>l(s),className:"TWM-btn TWM-btn-primary TWM-btn-sm",title:"Mulai mengerjakan task",children:[(0,qt.jsx)(Dt,{size:16}),"Mulai Kerja"]}),(0,qt.jsxs)("button",{onClick:()=>i(s),className:"TWM-btn TWM-btn-warning TWM-btn-sm",children:[(0,qt.jsx)($j,{size:16}),"Edit"]}),(0,qt.jsxs)("button",{onClick:()=>a(s),className:"TWM-btn TWM-btn-danger TWM-btn-sm",children:[(0,qt.jsx)(wj,{size:16}),"Hapus"]})]})]}),(0,qt.jsxs)("div",{className:"TWM-task-overview",children:[(0,qt.jsx)("div",{className:"TWM-task-header-info",children:(0,qt.jsx)("h1",{className:"TWM-task-title",children:s.title})}),(0,qt.jsxs)("div",{className:"TWM-task-meta-grid",children:[(0,qt.jsxs)("div",{className:"TWM-meta-item",children:[(0,qt.jsx)(Ot,{size:16}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("span",{className:"TWM-meta-label",children:"Estimasi Durasi"}),(0,qt.jsx)("span",{className:"TWM-meta-value",children:s.estimatedDuration?"".concat(s.estimatedDuration," menit"):"Tidak ditentukan"})]})]}),(0,qt.jsxs)("div",{className:"TWM-meta-item",children:[(0,qt.jsx)(At,{size:16}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("span",{className:"TWM-meta-label",children:"Total Langkah"}),(0,qt.jsxs)("span",{className:"TWM-meta-value",children:[(null===(t=s.steps)||void 0===t?void 0:t.length)||0," langkah"]})]})]}),(0,qt.jsxs)("div",{className:"TWM-meta-item",children:[(0,qt.jsx)(iN,{size:16}),(0,qt.jsxs)("div",{children:[(0,qt.jsx)("span",{className:"TWM-meta-label",children:"Total Waktu Langkah"}),(0,qt.jsxs)("span",{className:"TWM-meta-value",children:[(u=s.steps||[],u.reduce((e,t)=>{const n=parseInt(t.maxTime)||0;return e+Math.round(n/60)},0))," menit"]})]})]})]}),(0,qt.jsxs)("div",{className:"TWM-task-description",children:[(0,qt.jsx)("h3",{children:"\ud83d\udcdd Deskripsi"}),(0,qt.jsx)("p",{children:s.description})]}),(0,qt.jsxs)("div",{className:"TWM-task-metadata",children:[(0,qt.jsxs)("div",{className:"TWM-metadata-item",children:[(0,qt.jsx)("span",{className:"TWM-metadata-label",children:"Dibuat oleh:"}),(0,qt.jsx)("span",{className:"TWM-metadata-value",children:s.createdByEmail||"Unknown"})]}),(0,qt.jsxs)("div",{className:"TWM-metadata-item",children:[(0,qt.jsx)("span",{className:"TWM-metadata-label",children:"Tanggal dibuat:"}),(0,qt.jsx)("span",{className:"TWM-metadata-value",children:c(s.createdAt)})]}),s.updatedAt&&(0,qt.jsxs)("div",{className:"TWM-metadata-item",children:[(0,qt.jsx)("span",{className:"TWM-metadata-label",children:"Terakhir diupdate:"}),(0,qt.jsx)("span",{className:"TWM-metadata-value",children:c(s.updatedAt)})]})]})]}),(0,qt.jsxs)("div",{className:"TWM-steps-section",children:[(0,qt.jsxs)("h2",{className:"TWM-steps-header",children:["\ud83d\udccb Langkah-langkah Kerja (",(null===(n=s.steps)||void 0===n?void 0:n.length)||0,")"]}),(0,qt.jsx)("div",{className:"TWM-steps-list",children:null===(r=s.steps)||void 0===r?void 0:r.map((e,t)=>{var n,r,s;return(0,qt.jsxs)("div",{className:"TWM-step-card",children:[(0,qt.jsxs)("div",{className:"TWM-step-header",children:[(0,qt.jsx)("div",{className:"TWM-step-number",children:t+1}),(0,qt.jsxs)("div",{className:"TWM-step-title-section",children:[(0,qt.jsx)("h3",{className:"TWM-step-title",children:e.title}),e.maxTime&&(0,qt.jsxs)("span",{className:"TWM-step-time",children:["\u23f1\ufe0f ",Math.round(parseInt(e.maxTime)/60)," menit"]})]})]}),(0,qt.jsxs)("div",{className:"TWM-step-content",children:[(0,qt.jsx)("div",{className:"TWM-step-description",children:(0,qt.jsx)("p",{children:e.description})}),(null===(n=e.keyPoints)||void 0===n?void 0:n.length)>0&&e.keyPoints.some(e=>e.trim())&&(0,qt.jsxs)("div",{className:"TWM-step-points",children:[(0,qt.jsx)("h4",{className:"TWM-points-title",children:"\ud83c\udfaf Poin Penting:"}),(0,qt.jsx)("ul",{className:"TWM-points-list",children:e.keyPoints.filter(e=>e.trim()).map((e,t)=>(0,qt.jsx)("li",{children:e},t))})]}),(null===(r=e.safetyPoints)||void 0===r?void 0:r.length)>0&&e.safetyPoints.some(e=>e.trim())&&(0,qt.jsxs)("div",{className:"TWM-step-safety",children:[(0,qt.jsx)("h4",{className:"TWM-safety-title",children:"\u26a0\ufe0f Keselamatan:"}),(0,qt.jsx)("ul",{className:"TWM-safety-list",children:e.safetyPoints.filter(e=>e.trim()).map((e,t)=>(0,qt.jsx)("li",{children:e},t))})]}),(null===(s=e.imageUrls)||void 0===s?void 0:s.length)>0&&e.imageUrls.some(e=>e.trim())&&(0,qt.jsxs)("div",{className:"TWM-step-images",children:[(0,qt.jsx)("h4",{className:"TWM-images-title",children:"\ud83d\uddbc\ufe0f Gambar Panduan:"}),(0,qt.jsx)("div",{className:"TWM-images-grid",children:e.imageUrls.filter(e=>e.trim()).map((e,n)=>(0,qt.jsx)("div",{className:"TWM-image-container",children:(0,qt.jsx)("img",{src:e,alt:"Panduan langkah ".concat(t+1," - ").concat(n+1),className:"TWM-step-image",onError:e=>{e.target.style.display="none"}})},n))})]})]})]},t)})})]})]});var u},cN=e=>{let{isOpen:t,title:n,message:r,onConfirm:s,onCancel:i,isDestructive:a=!1}=e;return t?(0,qt.jsx)("div",{className:"TWM-modal-overlay",children:(0,qt.jsxs)("div",{className:"TWM-modal-content",children:[(0,qt.jsx)("div",{className:"TWM-modal-header",children:(0,qt.jsx)("h3",{children:n})}),(0,qt.jsx)("div",{className:"TWM-modal-body",children:(0,qt.jsx)("p",{children:r})}),(0,qt.jsxs)("div",{className:"TWM-modal-actions",children:[(0,qt.jsx)("button",{onClick:i,className:"TWM-btn TWM-btn-secondary",children:"Batal"}),(0,qt.jsx)("button",{onClick:s,className:"TWM-btn ".concat(a?"TWM-btn-danger":"TWM-btn-primary"),children:a?"Hapus":"Konfirmasi"})]})]})}):null},uN=()=>{const t=he(),[n,r]=(0,e.useState)("list"),[s,i]=(0,e.useState)([]),[a,o]=(0,e.useState)([]),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDestructive:!1}),b=(0,e.useCallback)(async()=>{await(async(e,t,n)=>{n(!0),console.log("\ud83d\udd04 Loading independent tasks...");try{const n=Nw(Ly(Z_,"tasks"),Aw("createdAt","desc")),r=(await qw(n)).docs.map(e=>{const t=e.data();return l(l({id:e.id},t),{},{title:t.title||"Untitled Task",description:t.description||"",steps:t.steps||[]})});console.log("\ud83d\udcdd Total tasks found: ".concat(r.length));const s=Nw(Ly(Z_,"mos"),Aw("createdAt","desc")),i=(await qw(s)).docs.map(e=>l({id:e.id},e.data()));console.log("\ud83d\udccb Total MOs found: ".concat(i.length));const a=new Set,o={};i.forEach(e=>{e.selectedTasks&&Array.isArray(e.selectedTasks)&&(console.log('\ud83d\udd17 MO "'.concat(e.moNumber,'" has ').concat(e.selectedTasks.length," associated tasks")),e.selectedTasks.forEach(t=>{t.id&&(a.add(t.id),o[t.id]={moId:e.id,moNumber:e.moNumber,moTitle:e.title})}))}),console.log("\ud83d\udd17 Tasks associated with MOs: ".concat(a.size)),console.log("Associated task IDs:",Array.from(a));const c=r.filter(e=>{const t=!a.has(e.id);if(!t){const t=o[e.id];console.log('\ud83d\udd17 Task "'.concat(e.title,'" is associated with MO: ').concat(null===t||void 0===t?void 0:t.moNumber))}return t});console.log("\ud83c\udd93 Independent tasks found: ".concat(c.length)),c.forEach(e=>{console.log("   - ".concat(e.title))}),e(r),t(c)}catch(pN){console.error("\u274c Error loading independent tasks:",pN)}finally{n(!1)}})(i,o,h)},[]),v=(0,e.useCallback)(async()=>{console.log("\ud83d\udd04 Manual refresh triggered"),await b()},[b]);(0,e.useEffect)(()=>{b();const e=Yw(Nw(Ly(Z_,"tasks"),Aw("createdAt","desc")),e=>{console.log("\ud83d\udd04 Tasks collection changed, refreshing..."),b()},e=>{console.error("\u274c Tasks listener error:",e)}),t=Yw(Nw(Ly(Z_,"mos")),e=>{console.log("\ud83d\udd04 MOs collection changed, refreshing independent tasks..."),b()},e=>{console.error("\u274c MOs listener error:",e)});return()=>{e(),t()}},[b]);const y=(0,e.useCallback)(async()=>{try{const e=Po();await pa(e),t("/")}catch(pN){console.error("Error during logout:",pN)}},[t]),w=(0,e.useCallback)(()=>{"view"===n?(r("list"),u(null)):t("/admin")},[n,t]),x=e=>{u(e),r("view")},k=e=>{t("/addTask",{state:{editTask:e}})},_=e=>{g({isOpen:!0,title:"Konfirmasi Hapus",message:'Apakah Anda yakin ingin menghapus task "'.concat(e.title,'"? Tindakan ini tidak dapat dibatalkan.'),onConfirm:async()=>{h(!0);try{await $w(Fy(Z_,"tasks",e.id)),await b(),g(e=>l(l({},e),{},{isOpen:!1}))}catch(pN){console.error("Error deleting task:",pN)}finally{h(!1)}},isDestructive:!0})},S=(0,e.useCallback)(e=>{if(console.log("\ud83c\udfaf Starting independent task execution:",e),!e||!e.steps||0===e.steps.length)return console.warn("\u26a0\ufe0f Task has no steps"),void alert("Task tidak memiliki langkah kerja yang valid. Silakan edit task untuk menambahkan Work Instruction.");t("/task-execution/".concat(e.id),{state:{selectedTask:l(l({},e),{},{workType:"without-mo",moNumber:null,moDisplay:"Independent - ".concat(e.title),title:e.title,description:e.description||"",steps:e.steps||[],category:e.category||"General",difficulty:e.difficulty||"medium",estimatedDuration:e.estimatedDuration,isIndependent:!0}),fromIndependentTasks:!0,timestamp:(new Date).toISOString()}})},[t]);return(0,qt.jsxs)("div",{className:"TWM-page",children:[(0,qt.jsx)(aN,{onLogout:y,onBack:w,onRefresh:v}),(0,qt.jsx)("main",{className:"TWM-main",children:"view"===n?(0,qt.jsx)(lN,{task:c,onEdit:k,onDelete:_,onBack:w,onStartWork:S}):(0,qt.jsx)(oN,{tasks:a,onView:x,onEdit:k,onDelete:_,onStartWork:S,loading:d,searchTerm:f,onSearchChange:e=>p(e.target.value),onRefresh:v})}),(0,qt.jsx)(cN,{isOpen:m.isOpen,title:m.title,message:m.message,onConfirm:m.onConfirm,onCancel:()=>{g(e=>l(l({},e),{},{isOpen:!1}))},isDestructive:m.isDestructive})]})};const dN=function(){return(0,qt.jsx)(ht,{children:(0,qt.jsxs)(Ae,{children:[(0,qt.jsx)(Ce,{path:"/",element:(0,qt.jsx)(Kt,{})}),(0,qt.jsx)(Ce,{path:"/register",element:(0,qt.jsx)(uS,{})}),(0,qt.jsx)(Ce,{path:"/login",element:(0,qt.jsx)(dS,{})}),(0,qt.jsx)(Ce,{path:"/home",element:(0,qt.jsx)(mj,{requiredRole:"employee",children:(0,qt.jsx)(xS,{})})}),(0,qt.jsx)(Ce,{path:"/task",element:(0,qt.jsx)(mj,{requiredRole:"employee",children:(0,qt.jsx)(qS,{})})}),(0,qt.jsx)(Ce,{path:"/task-execution/:taskId",element:(0,qt.jsx)(mj,{akses:"employee",children:(0,qt.jsx)(qS,{})})}),(0,qt.jsx)(Ce,{path:"/profil",element:(0,qt.jsx)(mj,{requiredRole:"employee",children:(0,qt.jsx)(_S,{})})}),(0,qt.jsx)(Ce,{path:"/progress",element:(0,qt.jsx)(mj,{requiredRole:"employee",children:(0,qt.jsx)(pj,{})})}),(0,qt.jsx)(Ce,{path:"/mo-selection",element:(0,qt.jsx)(mj,{requiredRole:"employee",children:(0,qt.jsx)($S,{})})}),(0,qt.jsx)(Ce,{path:"/admin",element:(0,qt.jsx)(mj,{requiredRole:"admin",children:(0,qt.jsx)(uj,{})})}),(0,qt.jsx)(Ce,{path:"/approvals",element:(0,qt.jsx)(mj,{requiredRole:"admin",children:(0,qt.jsx)(Kj,{})})}),(0,qt.jsx)(Ce,{path:"/addTask",element:(0,qt.jsx)(mj,{requiredRole:"admin",children:(0,qt.jsx)(zj,{})})}),(0,qt.jsx)(Ce,{path:"/add-mo",element:(0,qt.jsx)(mj,{requiredRole:"admin",children:(0,qt.jsx)(sN,{})})}),(0,qt.jsx)(Ce,{path:"/tasklist",element:(0,qt.jsx)(mj,{requiredRole:"employee",children:(0,qt.jsx)(uN,{})})})]})})},hN=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)})};t.createRoot(document.getElementById("root")).render((0,qt.jsx)(e.StrictMode,{children:(0,qt.jsx)(dN,{})})),hN()})()})();
//# sourceMappingURL=main.3073c45e.js.map